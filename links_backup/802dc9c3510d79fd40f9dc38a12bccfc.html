





<!DOCTYPE html>
<html lang="en" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">
  <link rel="preconnect" href="https://github.githubassets.com" crossorigin>
  <link rel="preconnect" href="https://avatars.githubusercontent.com">



  <link crossorigin="anonymous" media="all" integrity="sha512-9M4GwJqBATCm6CMz2UrCo6uuX1/Wa8wUnm7N5BQhGHFch1oIX2y8dcpUXfnQVQ2HE2bD287O5YMXuc5jFAcU8w==" rel="stylesheet" href="https://github.githubassets.com/assets/light-f4ce06c09a810130a6e8.css" /><link crossorigin="anonymous" media="all" integrity="sha512-BEwN74xxmv+L2zArQGm+kGVvX3bGY85LF4umkZnZ6Zl6IciYbr1IGxIYxqnUCW0RDEN1kM7glvXkpmQsntPVYQ==" rel="stylesheet" href="https://github.githubassets.com/assets/dark-044c0def8c719aff8bdb.css" /><link data-color-theme="dark_dimmed" crossorigin="anonymous" media="all" integrity="sha512-VuoBmyfgmCH9NsX74/R66RxQGfjoTNNTUdFUi9HeWSwDRckcVZHH1xn6VwcMa08p8xSCO2udmiuA12lR9TAzxA==" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed-56ea019b27e09821fd36.css" /><link data-color-theme="dark_high_contrast" crossorigin="anonymous" media="all" integrity="sha512-jHPIsHz149JE+ZbsS8f5oQFqdU/HHlWk8+AnPsA0+zZaVQkSidWMmCiT/DCiLLn6uAXgdnXxFr1GG1SWrBnnUQ==" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_high_contrast-8c73c8b07cf5e3d244f9.css" /><link data-color-theme="dark_colorblind" crossorigin="anonymous" media="all" integrity="sha512-7p7WmGYFN2EAFuK148e628pqxO+aqNIa7ik/Y38lMirTnrxjHqBKXYBOaCxBjmz2r60YWkzb+TqMR8CjeqAUNQ==" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_colorblind-ee9ed698660537610016.css" /><link data-color-theme="light_colorblind" crossorigin="anonymous" media="all" integrity="sha512-vFYO2hdW9+5z6u5jCkMIIcslIZGySqnMAzuYZEXT2FyJjx9f8A6rtAMdYn4nVSXOe1TIhT/UCWYgnszpePyMVA==" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_colorblind-bc560eda1756f7ee73ea.css" /><link data-color-theme="light_high_contrast" crossorigin="anonymous" media="all" integrity="sha512-uaQhAu1uyRSlhFCuVq+c2TI/raBoawOri5enqBMFrNvRVOop44KjS/gnsHEHmzh/HrI2MrwXOLLuQouKPzce3A==" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_high_contrast-b9a42102ed6ec914a584.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-QDstDV0CeaTAQxEaLoguDaXfF719UOKQClVxrV8b6QIqX5ofij6Hzazl5koLCQdlPoVkHQP46nq7tmwJsixVaA==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-403b2d0d5d0279a4c043.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-VFvYS6f5WF0ILmOtc3wsH1X5p+shn8MkAD7wQqTBMR9euwBTSmJYyqlFXvDX9WtmvjifDHEvkV442Wwy/ItOaw==" rel="stylesheet" href="https://github.githubassets.com/assets/behaviors-545bd84ba7f9585d082e.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-hpIrfz2pWwa7eGZ5dC5vHGZ25lJj1iVSVx6xl6yyaGBCYJ5jsX2myq3ToniMuK4eHVL6iw/fKHj++Cg/hdB0JA==" rel="stylesheet" href="https://github.githubassets.com/assets/tab-size-fix-86922b7f3da95b06bb78.css" />
  
  
  
  <link crossorigin="anonymous" media="all" integrity="sha512-1nwP7mOTtxd5kt7EmBrhD1q0R7VXGymiuBEZofVjFBe6RwKT92Paw+dqHRz2qFJjvAOsrJWVIWw0wQHOEEqcGw==" rel="stylesheet" href="https://github.githubassets.com/assets/github-d67c0fee6393b7177992.css" />

    <script crossorigin="anonymous" defer="defer" integrity="sha512-42SXFvQHDz2FyN94xIyfcefqRg+Rr0oaj8QR12wnRhCuREAcqJa251RtFwUdt6YhydPAqg+H7POP4+ggIjWrFQ==" type="application/javascript" src="https://github.githubassets.com/assets/environment-e3649716.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-PkG/XW9tJlpl1ddcDh07L65WNnaJOuScqwUeBHgAm3dGk5rhHGUPOp4za+WKVBzzwDkkV1m1EJDdrKhsNKoUtA==" type="application/javascript" src="https://github.githubassets.com/assets/chunk-frameworks-3e41bf5d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-T1gvVJpDUbgQ+JfL551fhFeYJE6uMAWjWNSNjuQYLgjLswj2r4ZJfHISrhSCUWZBKGBIRAXeidq3Y+d9YjcdCQ==" type="application/javascript" src="https://github.githubassets.com/assets/chunk-vendor-4f582f54.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-vgWV8b1FcpGErHwOitpIbvNmtQZwsw55TUraZngdfnHB3P+ZQnxzKD1L//RqzlWMB9sExBRhfOt1rHCxrru/Fg==" type="application/javascript" src="https://github.githubassets.com/assets/github-elements-be0595f1.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-zrdOuBFf5tOfZWMhzngnu36yXuchioqncT3xDtD2ZPPN9Duf5yBhtLgEFejWWrmNyx3rbiAcaarJrbpQHLvqXA==" type="application/javascript" src="https://github.githubassets.com/assets/behaviors-ceb74eb8.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-QJOVXs8UW2egqYjA0sv3TAATdCX6IAdBOGd8ScZJVfP1WJAWg6nh/P8FUKERkAjIviTKAMUwh9OEnbtnTz8PKw==" type="application/javascript" src="https://github.githubassets.com/assets/notifications-global-4093955e.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-0AWnITMRwpt2M7zejhGSMZMWcEBeswVLaglGmkxpQOWEnhnJpAGMuZ0iOLIKJzpuYP2xuNZK51OMM0e5TRUkAA==" type="application/javascript" data-module-id="./chunk-action-list-element.js" data-src="https://github.githubassets.com/assets/chunk-action-list-element-d005a721.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-vu177vjMAp7fHx+zkCoAvGVkQPtNX1L2oWm3v4J1k6WbHtUI8iQMc8ovtNOKnN89/npQsJrksRBjWyJauDJuaw==" type="application/javascript" data-module-id="./chunk-advanced.js" data-src="https://github.githubassets.com/assets/chunk-advanced-beed7bee.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-iG8aKaXiAy7ONu7OJuY1pf3FGFzrs4mYYGnUD47a1kXP5URyMlP1RpAFyWTFeyirHY/UoR2mmkkBD40j/9ouPA==" type="application/javascript" data-module-id="./chunk-animate-on-scroll.js" data-src="https://github.githubassets.com/assets/chunk-animate-on-scroll-886f1a29.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-DR/O+c2yX9jstdyxwVDlaM8zRuOACj/aap9ABecyw8toE3a9rXjQgytQlFPQu74JufIDXrD3E1xAOX+ZscWG1g==" type="application/javascript" data-module-id="./chunk-area.js" data-src="https://github.githubassets.com/assets/chunk-area-0d1fcef9.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-lchWLejOHZUQUJA5VcNlSnbRzzpiJVi0Sg1NcZTkhocfF0PDO8LeAkitCPsqUWW6F2hznj3bDp2rouTLXug6/Q==" type="application/javascript" data-module-id="./chunk-array.js" data-src="https://github.githubassets.com/assets/chunk-array-95c8562d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-owLCfEz1kyCuCC2dJj3PrIlbMLSAatThR4RbMUlvOdTBRzOf7bjbnY+5VhhGyLMO+M9LxaITgDkHkZjQ+Vzvng==" type="application/javascript" data-module-id="./chunk-axis.js" data-src="https://github.githubassets.com/assets/chunk-axis-a302c27c.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-m/O2Z0gPqnm57wbjLsBOvQh6Q2Pe9ZPuJB//JVxnLopUDBm+2oIbe85Dtn7Gxa3vxLD0dnPsyzLnZ1p2rnMsMQ==" type="application/javascript" data-module-id="./chunk-band.js" data-src="https://github.githubassets.com/assets/chunk-band-9bf3b667.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-eGxp1b7dZ1/tJRddGRSK4XEFLlUWaApzGS/WiLLNaH03D5ZEOsf0pozYT2DfAGxsar1XKqw16YJ/Zdqrl3W94g==" type="application/javascript" data-module-id="./chunk-bar-chart.js" data-src="https://github.githubassets.com/assets/chunk-bar-chart-786c69d5.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-1sfVVMUvgk/el5qm4XY7G3N6Ayu9Rob6D3L4SLwpQ7YRagyYcPbOwz0I6pekJeYdm4qCWJ7r5Gjxv7aMFahFyg==" type="application/javascript" data-module-id="./chunk-branch-from-issue-button.js" data-src="https://github.githubassets.com/assets/chunk-branch-from-issue-button-d6c7d554.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-Qmuvn45kThf+SjmbdA0SjW/zOXYKhhnCWwe3kUNKqyEMtxh7k+sZTXTvMR/DCekAWpyv2P1hCrY9SOK0GpWCLA==" type="application/javascript" data-module-id="./chunk-business-audit-log-map-element.js" data-src="https://github.githubassets.com/assets/chunk-business-audit-log-map-element-426baf9f.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-wuxyUzhHyxJAliatPrzLlF9/JXffBvm8VcGEqLamI2l0k1SegKEbJTU3Ho8fC8uuwjKD3nF5v9q3nlnxgFrJVw==" type="application/javascript" data-module-id="./chunk-code-frequency-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-code-frequency-graph-element-c2ec7253.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-AExSe8VNj7qShs1fhiZ4hQzo+XTHfxuyVa2kYKY1Y45IrgP2rt9kns3E7ZI/gMD+pFB9fbYVYYchepaIKtvIvA==" type="application/javascript" data-module-id="./chunk-codemirror-linter-util.js" data-src="https://github.githubassets.com/assets/chunk-codemirror-linter-util-004c527b.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-cxSDHgd8tLA0WhqTMj4rKWUOq9Ml8lms1Fe+VXbWdG1dA6xh9fVqmoksU4pEwKUsnPo6t8pkyoT5e0JteiWqdg==" type="application/javascript" data-module-id="./chunk-codemirror.js" data-src="https://github.githubassets.com/assets/chunk-codemirror-7314831e.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-J8jHMgG3jS4CpHyg8r7/4fkGdTqIN02DLHqUXcqIAmRWCEgjN1dBjBocAjsdSxTK9aSuLAcdk+BxOsvXA/XbyA==" type="application/javascript" data-module-id="./chunk-codespaces-policy-form-element.js" data-src="https://github.githubassets.com/assets/chunk-codespaces-policy-form-element-27c8c732.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-xhSAO0KtnFAlRqAK+mg8BPj/J334ccvnCmmjmBQBCgZcsoO9teHJSS6oAn3XOWYFsWPU2JehwG7S3OVEbLwdUg==" type="application/javascript" data-module-id="./chunk-color-modes.js" data-src="https://github.githubassets.com/assets/chunk-color-modes-c614803b.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-v8cHj6fIJrUr2THCh/9KFMq1ynoKuurR4+FC2Ett8SMLXKeZlPKNBdug2YUHDTdReeN3k8V4w5alEdiPSoSaZw==" type="application/javascript" data-module-id="./chunk-column-chart.js" data-src="https://github.githubassets.com/assets/chunk-column-chart-bfc7078f.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-KGVaA2Fdbuzo+TqyJ4wAftXawORL86Z4TILswctJpEjn2K9qCeWeu/SINi+PTFs5bHwhO4GAlASfB7ofbbe14A==" type="application/javascript" data-module-id="./chunk-command-palette-item-element.js" data-src="https://github.githubassets.com/assets/chunk-command-palette-item-element-28655a03.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-NMvbPfPDPNfjGmaGKsOBBCUeiOzjB5SgZBwpWViqv9IraJiDAz324mzDMIo+yTZB3IqEMZJA09g42kho8Tv7ow==" type="application/javascript" data-module-id="./chunk-command-palette-page-element.js" data-src="https://github.githubassets.com/assets/chunk-command-palette-page-element-34cbdb3d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-v9LXKvRELqsowcou8tLTR6l5xTTGdvCuGAJkJwxGvev1tPItmj5dvqgev9P+49KwCo3AU1VRYJsQbTVaMtDpag==" type="application/javascript" data-module-id="./chunk-command-palette-page-stack-element.js" data-src="https://github.githubassets.com/assets/chunk-command-palette-page-stack-element-bfd2d72a.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-ZYjZKQHIOhwDjM01xaTY5HVOYxow2dSPnRUCCysGwB/MggQEIZDqUBLSJH3+UfOVcLld2RcFA7vfjkinMQimSg==" type="application/javascript" data-module-id="./chunk-commit-activity-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-commit-activity-graph-element-6588d929.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-wjhbw7qkjmwL4LD+tmeYjd+1ABG7/xOknSlnwKAOz9cfRwhihOaEfiTWJ85/7slhTYZqECBzLbKVqZKQastHIw==" type="application/javascript" data-module-id="./chunk-community-contributions.js" data-src="https://github.githubassets.com/assets/chunk-community-contributions-c2385bc3.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-HDsLJf6gAN+WDFaJneJwmIY82XkZKWqeX7tStBLRh1XM53K8vMV6JZvjq/UQXszaNVWxWcuYtgYTG6ZWo8+QSw==" type="application/javascript" data-module-id="./chunk-confetti.js" data-src="https://github.githubassets.com/assets/chunk-confetti-1c3b0b25.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-wpenTjQMyR7zUKeyNv37Agdwcr3a/c71kpUwVTrExMbL6RFpA/g8aL+I5AbLKuaw4dyVjNfy0DFHBmFqm8Yr+A==" type="application/javascript" data-module-id="./chunk-contributions-spider-graph.js" data-src="https://github.githubassets.com/assets/chunk-contributions-spider-graph-c297a74e.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-IpKybX6qZXRhU3S4Isw2/xiKMrWBFURLL87mlSWRbqdyOuVLuLfj7AvGOzJlfhtbMDk3uG+VZTpD01TaH6Ph/w==" type="application/javascript" data-module-id="./chunk-contributors-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-contributors-graph-element-2292b26d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-AdShwMIaVrtYr+LC9cc7rsC64wQJgoCdDjLJXaD4kVhdmuld7dk748AQueuoomE4OZypdoHSPmxQ56Wge/qtig==" type="application/javascript" data-module-id="./chunk-cookies.js" data-src="https://github.githubassets.com/assets/chunk-cookies-01d4a1c0.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-jitxouuFY6SUcDZV5W3jhadVEIfFBfCQZxfPV3kxNnsWEBzbxMJFp0ccLb7+OlBjSs1zU/MNtuOV6T9Ay7lx4w==" type="application/javascript" data-module-id="./chunk-copy.js" data-src="https://github.githubassets.com/assets/chunk-copy-8e2b71a2.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-miaiZ1xkDsWBUsURHOmeYtbgVKQGnm1octCo/lDXUmPzDyjtubnHULRVw1AK+sttwdwyB0+LOyhIVAWCNSGx+A==" type="application/javascript" data-module-id="./chunk-delayed-loading-element.js" data-src="https://github.githubassets.com/assets/chunk-delayed-loading-element-9a26a267.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-g9egUfzV36Fhfld8PbxfEm/V9ePFqvd9i5DIKra4wJ61M/AnpOOadhUD2CZ//ww84eRnAMJRQRHOYZ2wZRo2IQ==" type="application/javascript" data-module-id="./chunk-dependencies.js" data-src="https://github.githubassets.com/assets/chunk-dependencies-83d7a051.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-LlVyc/1U000RmO4RldBXJllTDjCahXcYhoH36e/5Z7FQrfr76hILqzCSPa7I0Jq0dXrUmF7Rdlgr8upKiqI4bQ==" type="application/javascript" data-module-id="./chunk-discussion-page-views.js" data-src="https://github.githubassets.com/assets/chunk-discussion-page-views-2e557273.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-VZ4h8Fwcm0XTbcjGFRmk/9GAADXVkklCPuqF5hBT2HVzegZMZD4SRS89VErsHdrBhD+BVvpsEEJ5fislbVANsw==" type="application/javascript" data-module-id="./chunk-discussions-daily-contributors.js" data-src="https://github.githubassets.com/assets/chunk-discussions-daily-contributors-559e21f0.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-UTkDkF19l+4mKyXJ7GhLKMFoVgExzifWypg7Fv+ymgs5p7tKNt/owkzPouakQub6lkkp0nhd8wE6rGf3UwUZqg==" type="application/javascript" data-module-id="./chunk-discussions-new-contributors.js" data-src="https://github.githubassets.com/assets/chunk-discussions-new-contributors-51390390.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-W2h1jdFgngGW5/6LmW+E+jNqLFqt8UGenaQj7UWfK0CqdQjahNQXW6OuZlzkQcthIZ8V8AZpZDolxoQ8Kd3Gaw==" type="application/javascript" data-module-id="./chunk-dormant-users-reports.js" data-src="https://github.githubassets.com/assets/chunk-dormant-users-reports-5b68758d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-T092OZtYeslxDIimT2TR4IWlO+6B9q6zenOAqRekKME3TgdR1nKinRgV0PTYZ3Y3IITjimtvjqQpN5kW11o0bw==" type="application/javascript" data-module-id="./chunk-drag-drop.js" data-src="https://github.githubassets.com/assets/chunk-drag-drop-4f4f7639.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-nqSGfQ+YUbpCws7n/18G/ueeeWfuJYlTMaRBOIPUGh2NOPEUQm4YW7NjctpPQgAWoVIaeEr0XDFXCWBbFW9sXQ==" type="application/javascript" data-module-id="./chunk-edit-hook-secret-element.js" data-src="https://github.githubassets.com/assets/chunk-edit-hook-secret-element-9ea4867d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-lJhSlHBxDYfafMGsvjfmbReBxHE64RGTSucXtcG3vTpWvu2vlw/heQjiHB+JwYpnWvcXh0Tn9oLlo90LEpUfIA==" type="application/javascript" data-module-id="./chunk-edit.js" data-src="https://github.githubassets.com/assets/chunk-edit-94985294.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-lZ+KI9egKP++FYD5qpzdWdu26uB+Hi81g+o1fapRMNGPW3G5abkiZ28HD8kyUL5JdiLl7ZAM/ATwTzZW4mZ2vw==" type="application/javascript" data-module-id="./chunk-emoji-picker-element.js" data-src="https://github.githubassets.com/assets/chunk-emoji-picker-element-959f8a23.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-euLLeTFpj2DeM/lF0qLZedbrh2iLKL86jMNj8ydBs0Dr24s0ZxmdYnenUo2UIVD8r3t2DgXaahNQmstHlXpmtA==" type="application/javascript" data-module-id="./chunk-extent.js" data-src="https://github.githubassets.com/assets/chunk-extent-7ae2cb79.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-4ogHszDC1IJgI2qQ92j4jrbWk8/esq5ocXsCwkODOz/s7sg5NXI28EkEQIlXtAaQfjctTKW7Er1sWWCWYU10Wg==" type="application/javascript" data-module-id="./chunk-failbot.js" data-src="https://github.githubassets.com/assets/chunk-failbot-e28807b3.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-sZbLUSqYvu2x/vJWKw5IfN1p9Gmk8aeCAnH0CgQDCG2A+cY3K9UrBE8dl/1/US6ivVhBAxupTaUUH0eJ7XRo/Q==" type="application/javascript" data-module-id="./chunk-feature-callout-element.js" data-src="https://github.githubassets.com/assets/chunk-feature-callout-element-b196cb51.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-5r/m4Q9I8PFeDYmfZIE5Nmi+ua6kmrqzCpKXwr/9uKdNZe3Vcywf3vzVHxc8ggzU8ujHJqGIMTZXF/E2N+tFtg==" type="application/javascript" data-module-id="./chunk-file-filter-element.js" data-src="https://github.githubassets.com/assets/chunk-file-filter-element-e6bfe6e1.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-8mFWnW8tKukTuJ5KV8c3133BhxXt/Mmp0KD3ge9pWKcejZxB8STIx9vOeyM/Nzysu8c5EFjHB1K5FTbRar90Rw==" type="application/javascript" data-module-id="./chunk-file-filter-persistence.js" data-src="https://github.githubassets.com/assets/chunk-file-filter-persistence-f261569d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-oKiV7L6PsUGMFeoseGl5JsrDAEfonVuBLWBp7nZ7AbCVBtc5NSrE+pkZpbAaSTrW3ZfMf24oqAbzcc8XUdt3Yw==" type="application/javascript" data-module-id="./chunk-file-tree-element.js" data-src="https://github.githubassets.com/assets/chunk-file-tree-element-a0a895ec.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-HmlTAbYYypu6xIfkc5lZknDVCpWNWBWqotVdG16NPCcFVn1eCQMAjQZMgYtwONmU97MwJ3QBSjlj3RZpBI8QcQ==" type="application/javascript" data-module-id="./chunk-file-tree-toggle-element.js" data-src="https://github.githubassets.com/assets/chunk-file-tree-toggle-element-1e695301.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-1njRxGWK/1YwlIgBa4NNAJixjlS9EmfPdTPnDSw+H9qYm7JbF4wICBAJok9PJgX9iIvPcCFLr4+9VWa3aS6UGA==" type="application/javascript" data-module-id="./chunk-filter-input.js" data-src="https://github.githubassets.com/assets/chunk-filter-input-d678d1c4.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-PnU+sfTXdyJ04N6yBgLo5Z2SjobVkjg3KeIMPPFahdKGVHIjIB5qXL0Lyc251ZrlqGoiZy6pFaPeK5zn4MGjKg==" type="application/javascript" data-module-id="./chunk-format-symbol.js" data-src="https://github.githubassets.com/assets/chunk-format-symbol-3e753eb1.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-I3f3Mg+8lKnfufPcdki3NWiXyR/WOJ2EQCE+IlCS0OzAZ/9/YzYJ5v+9qUAZNyHB8eS7M0CCARJ1nQCjlHe8mQ==" type="application/javascript" data-module-id="./chunk-get-repo-element.js" data-src="https://github.githubassets.com/assets/chunk-get-repo-element-2377f732.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-1YyRxy7P1eKjAsJP+/J5r58i7pUkqQV1iLcEi8BM8mXtvgkCx5oGBTsTCXY7kNxZwdM89wuW0bUqEmT/K2pAmA==" type="application/javascript" data-module-id="./chunk-index.esm.js" data-src="https://github.githubassets.com/assets/chunk-index.esm-d58c91c7.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-l1nMNuiARJ5TD7tYJoxL9CWJpuRIQizQB5Yow6uYdQLjHF+jhlhjIRCOkjlwu2cPdw5IZjD4cR21hGYyX4fQ2w==" type="application/javascript" data-module-id="./chunk-index.js" data-src="https://github.githubassets.com/assets/chunk-index-9759cc36.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-qOUpd16ML/w+JHQ+AgsVZx091bwb/LDsyH4VCFRjcgYSyvOX3C9sKGbPD71wRrLGXuAVmZMhW/rHxciExPYJhg==" type="application/javascript" data-module-id="./chunk-index2.js" data-src="https://github.githubassets.com/assets/chunk-index2-a8e52977.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-QNDWaHxe34aiO2cy7YLEP+JwDSLTn2f6XbiLs57XjWDv+fCEsKSju2pBNnbQ0gW1BNvmnKTdFm3a0Bfks7G8cg==" type="application/javascript" data-module-id="./chunk-index3.js" data-src="https://github.githubassets.com/assets/chunk-index3-40d0d668.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-/lTFJkfTffOvpQ3Fs6eq02kNzMlBwxwonQU6if7W0VbA7+7Kq2zWUUlX8iVH0/oA8DcVVps3tP5lFqBr/6oj6g==" type="application/javascript" data-module-id="./chunk-index4.js" data-src="https://github.githubassets.com/assets/chunk-index4-fe54c526.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-Ntnd0/5ZBGVRYTRI3XtP6vjjlgg5MyYB+mTrkAR16+nHItQyS+EVU5IeydLg7OtU30Xk85euBkFABjLw4BmU1g==" type="application/javascript" data-module-id="./chunk-index5.js" data-src="https://github.githubassets.com/assets/chunk-index5-36d9ddd3.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-MS1Zii7vEXvNGfCzfot3Ay7Rb4jDjjTve/4lJs0ZVeznfQClBiTPhjvURBIH+eaoHprIg+ajqeamiG2/TNkKFQ==" type="application/javascript" data-module-id="./chunk-index6.js" data-src="https://github.githubassets.com/assets/chunk-index6-312d598a.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-PzguLzCZSX4+hasAu7u8YDVWgFv/0OVZooA+vfjBMr3TYfRwT+DCbLq3B08j4ntyYKddfGSKJjfh4r4bVz3YyQ==" type="application/javascript" data-module-id="./chunk-index7.js" data-src="https://github.githubassets.com/assets/chunk-index7-3f382e2f.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-97hqkbIvwW7HJzpWnhaTFrvWSA/scr+5o7FqPsphio+ngTnkbV6LlA0PE5jFHs15vOVqtJvkHHpYL0iIITjgjA==" type="application/javascript" data-module-id="./chunk-input-demux.js" data-src="https://github.githubassets.com/assets/chunk-input-demux-f7b86a91.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-4ZToQVMOXo8sxNzItJtpJQ/aBNgkzSVfq2YGbUQnbX59DpBemMGOuph6ShQgeRcuJk+x92FKYlhl92AbejD+ww==" type="application/javascript" data-module-id="./chunk-insights-query.js" data-src="https://github.githubassets.com/assets/chunk-insights-query-e194e841.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-Mma9eU389bpaBMusL0AOdyVXlum506TbS103AlnuSSzmGYEPNtSmgFlSPx5S5wxJmj1Wc1NGtCDvs71md1bapQ==" type="application/javascript" data-module-id="./chunk-invitations.js" data-src="https://github.githubassets.com/assets/chunk-invitations-3266bd79.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-XHi7nspAcN9D8ZOLZZlCDDSUaHeZfd7T/fiPAvkkxOigMlG6TzfvftFdy0l9XGRrv0AVSQVQkKKKExJXPVzopg==" type="application/javascript" data-module-id="./chunk-jump-to.js" data-src="https://github.githubassets.com/assets/chunk-jump-to-5c78bb9e.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-8Zr3D4tATIN9RgbnUQPSG6ynrNzIHEQBEC2X9FWxfXk4tbP4gp+ey/Qin4S/7Ey38XRxRg16Ut2fhSHkH1zA1g==" type="application/javascript" data-module-id="./chunk-launch-code-element.js" data-src="https://github.githubassets.com/assets/chunk-launch-code-element-f19af70f.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-92jpdKelNx62F7UBT82SokGtEavcA+2aKd7tNcefzagcDmCnjTk/8ffmZ24eOPBi62VW4CDooFMXLenxxWercA==" type="application/javascript" data-module-id="./chunk-line-chart.js" data-src="https://github.githubassets.com/assets/chunk-line-chart-f768e974.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-GHMEiXdvG00Lv7Tnj+S7/TnqlcyVi41j6xapftzfnYoGWz5iYCMK5XCoDFmCmSgliaA0pmVHO356D2u3zJCicw==" type="application/javascript" data-module-id="./chunk-line.js" data-src="https://github.githubassets.com/assets/chunk-line-18730489.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-SErVGzFh5d4RY684E3TP0k4oymFEXft5zG2STX8WWBVsYLU1CzKWKooMuhIGsL77HG7pyviD12Dy3zs0GN41bg==" type="application/javascript" data-module-id="./chunk-linear.js" data-src="https://github.githubassets.com/assets/chunk-linear-484ad51b.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-YUCb5GVAF8qPEnN/WtyP9j81k8qOlMzl35cLqVFLixJgBMqQ+ZT+ELoBUx2OTqs5IrYwqq9c+gk4O0qRN3h0EQ==" type="application/javascript" data-module-id="./chunk-locale.js" data-src="https://github.githubassets.com/assets/chunk-locale-61409be4.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-z5CnRrYFTqXt/cLpxeZbeOJFhX9E0mmje1Cf2cNNuGf8Wiu8zKxbOgH5o1gb2FL7PpCBcq4NWx+OR0J7h0eTjw==" type="application/javascript" data-module-id="./chunk-map.js" data-src="https://github.githubassets.com/assets/chunk-map-cf90a746.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-Em9ofbyizkdETkwm0+brMMcWonOctCrMgEN1oaBsu6T9w50q7FjtrQRq3nPRitFFBr9qjBnekXSXoSdCHFMpdQ==" type="application/javascript" data-module-id="./chunk-marketplace-insights-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-marketplace-insights-graph-element-126f687d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-tEvoyDbJMJRfri4FMBFNAfgpItBneOW/4YtlbCeLtjwnLvq6pP2U/HWuroWcfnkaXQggdprNIZIVNmdwz7Lu5g==" type="application/javascript" data-module-id="./chunk-memex-project-picker-element.js" data-src="https://github.githubassets.com/assets/chunk-memex-project-picker-element-b44be8c8.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-cvjyIYhR2ZkuFAXHYZSjPTc5wXYOdISgqbXw69CXpDXdxffXmXuzjCcGJNVk3mDNYsVH4Q9sb2UMNPFrNxxRUQ==" type="application/javascript" data-module-id="./chunk-metric-selection-element.js" data-src="https://github.githubassets.com/assets/chunk-metric-selection-element-72f8f221.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-wpN+s55e0JkuffVR++S87PjAhQog0M/U4+l4pD/Ps8w9yNma6Pdmeij+RTxCSdDzqjgC9knsjPpZ5+ohkRd4ww==" type="application/javascript" data-module-id="./chunk-min.js" data-src="https://github.githubassets.com/assets/chunk-min-c2937eb3.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-+C+U3GQMIfd4xTRuMutY0mInBQA6ttqvxHzA/8+K9YwSFjlMftzHIzdu6pfFYZw7L0gfsBqx3UtFchaNhU9xPA==" type="application/javascript" data-module-id="./chunk-monthly-spend-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-monthly-spend-graph-element-f82f94dc.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-aYNntJOZeBzyhsX35l/XAH5STic/eL+BLWcOEitDxJJdLPzhFCMC/uuVZkTr0uEk84PgB6OLeGNVhF1xh28v2w==" type="application/javascript" data-module-id="./chunk-navigation-list-element.js" data-src="https://github.githubassets.com/assets/chunk-navigation-list-element-698367b4.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-7O/+vlRg/HpW7pZPRm6d6d+GOwZORnfka9aIuPq+dEmM7sAyLs26CLTZspQQ9H3KI/TENHVfUdR9Klki0us47w==" type="application/javascript" data-module-id="./chunk-network-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-network-graph-element-eceffebe.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-MYHfk4RC1G7um5oS3Cg8p/6FekxAiWQQvmCR526sy3/Yxbe6WEgDm5D64atvKXEqPps/0VgTxmSUH4XICbv5sw==" type="application/javascript" data-module-id="./chunk-nodrag.js" data-src="https://github.githubassets.com/assets/chunk-nodrag-3181df93.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-uBp/iTTm9wygkEp69MZdyvOA9r1CjfB/B6mvg5icD6kR3YsGNAF3+NXSJA08a6d71+XyhFU5471+c4aGHV42Sw==" type="application/javascript" data-module-id="./chunk-notification-list-focus.js" data-src="https://github.githubassets.com/assets/chunk-notification-list-focus-b81a7f89.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-/NlW6Pq0r1YJWymfejd89Z9JPNn1EIm7fu9AqR28Cy9dVmwJj9P4E1YMOPvnFLxIJ8Y5xdqBBdPX3qO8+h+2Mw==" type="application/javascript" data-module-id="./chunk-org-insights-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-org-insights-graph-element-fcd956e8.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-UpfXcE8D72JtkgF68l5LopywUMIDLi+ov+G9Kyaiz+zZUQxAXzu3jkIOJ5D0IaK7A54EOHWGpFSsMWnZQ+GsEQ==" type="application/javascript" data-module-id="./chunk-overview.js" data-src="https://github.githubassets.com/assets/chunk-overview-5297d770.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-tJgiApJcFJ0jL8UvfL7qx7j9aXTzPymdLhbbKlQtYOTijtqK9fMhJvW/dFkG4I27HcesAef/06xERFczvVOCvQ==" type="application/javascript" data-module-id="./chunk-package-dependencies-security-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-package-dependencies-security-graph-element-b4982202.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-rm1qIXRm4iMgRzHKiWNxs89dEXeQEvDZZ7qiYVFDhwbPBgNGl2Thwc/fSe8jjtq9eErkecWSDrFycssBZgoxyw==" type="application/javascript" data-module-id="./chunk-pointer.js" data-src="https://github.githubassets.com/assets/chunk-pointer-ae6d6a21.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-qEMigPltoBeFtlfHd0r2kjylnlwHjhf9+QfoggBvDF5uYSMtRBn1YvtRU7nwpoWRwtH/PQ/eFTNkSNKjQ1mauQ==" type="application/javascript" data-module-id="./chunk-premium-runners.js" data-src="https://github.githubassets.com/assets/chunk-premium-runners-a8432280.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-EbJJxBGp3rK2Vtkv8b2+hHIguudREKLm3SEWpr61TTjBnmruyJ3PzFc/mBHZby40YWLwm33opDhsCG4sVgTSjQ==" type="application/javascript" data-module-id="./chunk-presence-avatars.js" data-src="https://github.githubassets.com/assets/chunk-presence-avatars-11b249c4.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-5H5N/3G/20nmVKntphXb9z0H9q3URFDmHSccLhFkMSA8ILAA9mYlRKCWAWoDcl/W437jtGw1tIxjWStfInvidw==" type="application/javascript" data-module-id="./chunk-profile-pins-element.js" data-src="https://github.githubassets.com/assets/chunk-profile-pins-element-e47e4dff.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-vFR+IqThljOLrAWmjhOL/kiQrjgZZg95uPovX0J7kRH5p7Y049LDRZaXLMDijfeqqk71d3MMn9XP5bUcH+lB9w==" type="application/javascript" data-module-id="./chunk-profile.js" data-src="https://github.githubassets.com/assets/chunk-profile-bc547e22.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-rEl54d6O1BTVAm7SYyiHt/uzMMT2eTKFNw2w0wDIIunpTLtmq6QdgbIOF1t1Dm/8NQ8LFs7/TjM1qTR6hmUKyA==" type="application/javascript" data-module-id="./chunk-project-picker-element.js" data-src="https://github.githubassets.com/assets/chunk-project-picker-element-ac4979e1.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-MU7UjNfhOwMpfRSJ+AFgxtPNDENF6fScgs30W0liiQOAUXS4V+XcI2MQaun9+wQTxofnCiBFzTkhuLN2Jgtszw==" type="application/javascript" data-module-id="./chunk-pulse-authors-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-pulse-authors-graph-element-314ed48c.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-MU7VY0mux9rnjbuPVXGG86/+7UndHVzcSyt3JvD+cxDXvvPzpQA8k/XrZHykVBw+5qUSjjjAnQ5WD/T/q5EJng==" type="application/javascript" data-module-id="./chunk-range.js" data-src="https://github.githubassets.com/assets/chunk-range-314ed563.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-JDP9nIoagFBEBn3aXMHSL9s59qh0OWMhsg2xQJAwBYWS9q1PfZBor0UyNFJX6mFFXAHUvAIgnDiAKFw6OUJsiA==" type="application/javascript" data-module-id="./chunk-readme-toc-element.js" data-src="https://github.githubassets.com/assets/chunk-readme-toc-element-2433fd9c.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-4aLsPyiz8vqmHsO/bT8AF1ucYnON4JsLOfK5rD85xxOWbSpjet1Ljn4lIy+c/Un7AawwEPW7MBiG+5u+JDD2aA==" type="application/javascript" data-module-id="./chunk-ref-selector.js" data-src="https://github.githubassets.com/assets/chunk-ref-selector-e1a2ec3f.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-rylM3uiZ0RoRl560qJv60gb35nFfvE8DRrVVYM3IAJQnjbqiewiw9KwY/3R3bdKp/ER3Knadmvc0xZWgjk8g3w==" type="application/javascript" data-module-id="./chunk-reload-after-polling-element.js" data-src="https://github.githubassets.com/assets/chunk-reload-after-polling-element-af294cde.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-xKURm42qNMhOZDJVV3Tr6qlBE8mKZbd2mekIX8Sevwe93QT1btqQSifbgqeKc57TOu7SLjJmHVb+eZxJxvzfdQ==" type="application/javascript" data-module-id="./chunk-remote-clipboard-copy.js" data-src="https://github.githubassets.com/assets/chunk-remote-clipboard-copy-c4a5119b.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-8ME7nLIXe5Oqqah8+VbsNkORdavh5B6Pddl9RvJGniLt1e85L3nu2N5yWhMaucy+pyqg3jUR0pJ7RI8nlNYDtA==" type="application/javascript" data-module-id="./chunk-remote-content-element.js" data-src="https://github.githubassets.com/assets/chunk-remote-content-element-f0c13b9c.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-lwVBrgolfkJsmzF0Pq7DQWA84scBWfKrbYvsJkld4RhieE7u3hPGQ+jcWN5g4cS8Vl8E6k28tAO86b1bMBiafw==" type="application/javascript" data-module-id="./chunk-responsive-underlinenav.js" data-src="https://github.githubassets.com/assets/chunk-responsive-underlinenav-970541ae.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-OtjCc7UezN3MvWiHOS/5lYkrBdHOAhcFrGD6/zMgTAugw5BSOaRrrux3wJxv9OlHHgxI32nOkesATHdRyucitA==" type="application/javascript" data-module-id="./chunk-runner-groups.js" data-src="https://github.githubassets.com/assets/chunk-runner-groups-3ad8c273.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-YT1sZoBexRNsvw2mnXAtdf87/5j3cL8ji/WS6h9F0mMh0wyUEx3EElel6roRMoI2Zq+bn5d1i8TSCeZJ84a6Rw==" type="application/javascript" data-module-id="./chunk-series-table.js" data-src="https://github.githubassets.com/assets/chunk-series-table-613d6c66.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-0ho0SIKf1TsQpvFNdpkKw57DmpU8LampLRvO67Q0G+6744f/qI8uTtL96F5tOPT56dG40cwoKB8v6kYqyGipvw==" type="application/javascript" data-module-id="./chunk-severity-calculator-element.js" data-src="https://github.githubassets.com/assets/chunk-severity-calculator-element-d21a3448.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-3gWpxOb9jAEGOIQDvl0VKg384SkTRlyiTBuy45xXFSg6tST7iHCXgJrVBhb7rnD0zUGM2eEur3HWzlX19+JhIQ==" type="application/javascript" data-module-id="./chunk-signalr-socket.js" data-src="https://github.githubassets.com/assets/chunk-signalr-socket-de05a9c4.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-dFDltVJPgBJ+YpDMhcd3aDGmO08RmhPriPDYIDU+jAdZbWqbs4oD9PbZ+ebPjRdyhZxbRvFKOKtxqDsLciK+SQ==" type="application/javascript" data-module-id="./chunk-slug.js" data-src="https://github.githubassets.com/assets/chunk-slug-7450e5b5.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-SGxKZJPMoMDPJ4mVhReJ1NPmXxuTuePhizAUPkKphsivzZhVQstruqwewm3oUpP1yONOG8MITAodv/5iKRsEtw==" type="application/javascript" data-module-id="./chunk-sortable-behavior.js" data-src="https://github.githubassets.com/assets/chunk-sortable-behavior-486c4a64.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-roc/0cfaua9wDuXAOgLBYymh7ketXEgdvrXH5cKsDrwrHA8RdLZyyKvncKkwMTtAXvFBYnhOfxrRYJuu5kCyCQ==" type="application/javascript" data-module-id="./chunk-spoofed-commit-warning.js" data-src="https://github.githubassets.com/assets/chunk-spoofed-commit-warning-ae873fd1.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-n9CzyJxFxwIDn7201fJbWS0Pb+zHZ55ZREoB+DPm2fEEcVi6NQy9u74s28zd23c4HZcOQb+hgBHfx/evvTz0gg==" type="application/javascript" data-module-id="./chunk-stacked-area-chart.js" data-src="https://github.githubassets.com/assets/chunk-stacked-area-chart-9fd0b3c8.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-Z5vxYqlrzgKkUgwWnpxHQ7mGgyY4QVo6rX+t+/+TEiFrVv4hH0bIN7cl/YvFJ5FVrLz/LFu7mhSnEWByM5sJXw==" type="application/javascript" data-module-id="./chunk-stacks-input-config-view.js" data-src="https://github.githubassets.com/assets/chunk-stacks-input-config-view-679bf162.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-gmw7obKL/JEHWPp6zWFh+ynbXUFOidj1DN2aPiTDwP8Gair0moVuDmA340LD84A29I3ZPak19CEiumG+oIiseg==" type="application/javascript" data-module-id="./chunk-tag-input.js" data-src="https://github.githubassets.com/assets/chunk-tag-input-826c3ba1.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-0IOfDfOHJW06z0GwRYJjp03TxPkyF3OxjI4KP+rgd565nAqN0uN7QChz1+/v2/ueP2WXmWKOA6BA7byyMw2Lfw==" type="application/javascript" data-module-id="./chunk-three.module.js" data-src="https://github.githubassets.com/assets/chunk-three.module-d0839f0d.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-wbtDXrsp1UlaVwYqy/OhzlQoCcW05Y6X4Yij81VM9EVikXjOi1IFOj94YTV7/4pn8V0fzIC2tXTbqV3H9c215Q==" type="application/javascript" data-module-id="./chunk-time.js" data-src="https://github.githubassets.com/assets/chunk-time-c1bb435e.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-wIbptf1DKOsqdNtk6eFJNttwm/Rpkl3djUJp4AFKbFOJ29W4u19sJtGhVOQEgeCycpaRZKGuluEeSlilsTvV0A==" type="application/javascript" data-module-id="./chunk-tip.js" data-src="https://github.githubassets.com/assets/chunk-tip-c086e9b5.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-4GJz2wyWwjq7P4hyx3qSkjvnTO7RG5cWvnePVXPB+Oji6MBVugAdl7kCTKbpX8+Ae2ONvGJwFzSc9A7m1pqzXw==" type="application/javascript" data-module-id="./chunk-toast.js" data-src="https://github.githubassets.com/assets/chunk-toast-e06273db.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-ltLCW8IMbyitm42Birq6zurdnrQISouzbBpmdRjtSfspJQHfIU6K47VYlBYNFI+/WWyeOqCKX3gXJAkaYZUp8g==" type="application/javascript" data-module-id="./chunk-traffic-clones-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-traffic-clones-graph-element-96d2c25b.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-pVgjdqKHFObxyJ0mlVHj6JtCh2L+fyRrMXxhVXt6t/vInTDhfRiOrf5qNh6Ymqq92JjKyXNJbmOsy/LGm3o3LA==" type="application/javascript" data-module-id="./chunk-traffic-visitors-graph-element.js" data-src="https://github.githubassets.com/assets/chunk-traffic-visitors-graph-element-a5582376.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-zSAZt0KaQlTdiPwxtiJWRHdMz6uoW46PkM/zU78IyWQre/829J0AFfNUuHwXBihMmjDnlUF8k1DE3Ecqo4RtFg==" type="application/javascript" data-module-id="./chunk-traffic.js" data-src="https://github.githubassets.com/assets/chunk-traffic-cd2019b7.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-R+tG3SLlxMfqFe/QsCsVkiImlyr9aDIRGs81jLQFG/8IC/WqUcHWrS4KJdn93V23uBIhL1CStpD5WOGltedi9g==" type="application/javascript" data-module-id="./chunk-turbo.es2017-esm.js" data-src="https://github.githubassets.com/assets/chunk-turbo.es2017-esm-47eb46dd.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-x4ou3us3j9DGRirCSdyrM8EftEUvAa5ZJ0ytbiYyODaofJGTH3l8Tx09pgF9dVFf71bVMq1s2sR5HYko8RTnSQ==" type="application/javascript" data-module-id="./chunk-tweetsodium.js" data-src="https://github.githubassets.com/assets/chunk-tweetsodium-c78a2ede.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-ODZJzCJpaOfusrIka5QVZQcPiO9LBGyrrMYjhhJWSLuCN5WbZ5xiEiiOPOKVu71dqygyRdB2TY7AKPA1J5hqdg==" type="application/javascript" data-module-id="./chunk-unveil.js" data-src="https://github.githubassets.com/assets/chunk-unveil-383649cc.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-tboPFFNqWJk3So4NaMf8stl6PdgATilRXIrAd6oa/LLFANkTZKkCFY4QIMWD+GR103+kAr7lz7bWSkeLRArvyQ==" type="application/javascript" data-module-id="./chunk-user-status-submit.js" data-src="https://github.githubassets.com/assets/chunk-user-status-submit-b5ba0f14.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-6yI/t7GcFRajrquWdg5NqQdrvgI4rWRWcuZhNmAHH/T2aw2iB0uAco9nNYoETW3zzJ+tmnC7qqfArrHaYmk1oQ==" type="application/javascript" data-module-id="./chunk-voting.js" data-src="https://github.githubassets.com/assets/chunk-voting-eb223fb7.js"></script>
    <script crossorigin="anonymous" defer="defer" integrity="sha512-q34Q0/s/exmYECvsCRWCxp+22UY2cZK8MPrKv3LjI3bNU5AD3Fzv+JhN0Lgfvd2mgju3llixlQ4z2RvkTIw2oA==" type="application/javascript" data-module-id="./chunk-webgl-warp.js" data-src="https://github.githubassets.com/assets/chunk-webgl-warp-ab7e10d3.js"></script>



    <script crossorigin="anonymous" defer="defer" integrity="sha512-GEhEaVqWi4MXwl9jheKz7wWjS2Xx4vGuSn8M1EkSeWXJCDMG7hGTw4qYfsqdEmbHBF4zKcO1QX4Ux5RPTqQdwA==" type="application/javascript" src="https://github.githubassets.com/assets/gist-18484469.js"></script>

  

  <meta name="viewport" content="width=device-width">
  
  <title>Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication · GitHub</title>
    <meta name="description" content="Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication - tokens.md">
    <link rel="search" type="application/opensearchdescription+xml" href="https://gist.github.com/opensearch-gist.xml" title="Gist">
  <link rel="fluid-icon" href="https://gist.github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">
  <meta name="apple-itunes-app" content="app-id=1477376905" />
    <meta name="twitter:image:src" content="https://github.githubassets.com/images/modules/gists/gist-og-image.png" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:title" content="Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication" /><meta name="twitter:description" content="Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication - tokens.md" />
    <meta property="og:image" content="https://github.githubassets.com/images/modules/gists/gist-og-image.png" /><meta property="og:image:alt" content="Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication - tokens.md" /><meta property="og:site_name" content="Gist" /><meta property="og:type" content="article" /><meta property="og:title" content="Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication" /><meta property="og:url" content="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc" /><meta property="og:description" content="Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication - tokens.md" /><meta property="article:author" content="262588213843476" /><meta property="article:publisher" content="262588213843476" />
    



    

  <link rel="assets" href="https://github.githubassets.com/">
  

  <meta name="request-id" content="DA2A:3CC0:21B9C56:239910E:621E5209" data-pjax-transient="true"/><meta name="html-safe-nonce" content="eef71d6f7c32669ebfb2864cd94d41eb5ea04024d0c7f27fd42591a4b0ca7f9c" data-pjax-transient="true"/><meta name="visitor-payload" content="eyJyZWZlcnJlciI6IiIsInJlcXVlc3RfaWQiOiJEQTJBOjNDQzA6MjFCOUM1NjoyMzk5MTBFOjYyMUU1MjA5IiwidmlzaXRvcl9pZCI6IjE2OTkwOTUwNTk3MTgwOTk0NjUiLCJyZWdpb25fZWRnZSI6ImZyYSIsInJlZ2lvbl9yZW5kZXIiOiJmcmEifQ==" data-pjax-transient="true"/><meta name="visitor-hmac" content="41fc7c2b7f2d768128be1ac3bde18133370997d6083415ba232658a81e1d5d16" data-pjax-transient="true"/>



  <meta name="github-keyboard-shortcuts" content="" data-pjax-transient="true" />

  

  <meta name="selected-link" value="gist_code" data-pjax-transient>

    <meta name="google-site-verification" content="c1kuD-K2HIVF635lypcsWPoD4kilo5-jA_wBFyT4uMY">
  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

<meta name="octolytics-url" content="https://collector.github.com/github/collect" />

  <meta name="analytics-location" content="/&lt;user-name&gt;/&lt;gist-id&gt;" data-pjax-transient="true" />

  




    <meta name="octolytics-dimension-public" content="true" /><meta name="octolytics-dimension-gist_id" content="45580889" /><meta name="octolytics-dimension-gist_name" content="802dc9c3510d79fd40f9dc38a12bccfc" /><meta name="octolytics-dimension-anonymous" content="false" /><meta name="octolytics-dimension-owner_id" content="6388755" /><meta name="octolytics-dimension-owner_login" content="zmts" /><meta name="octolytics-dimension-forked" content="false" />


      <meta name="hostname" content="gist.github.com">
    <meta name="user-login" content="">


      <meta name="expected-hostname" content="gist.github.com">


    <meta name="enabled-features" content="MARKETPLACE_PENDING_INSTALLATIONS">


  <meta http-equiv="x-pjax-version" content="744df97aa7b366c1616dae0c6a67cd3b546789b420128530598b03ac37ce4422" data-turbo-track="reload">
  <meta http-equiv="x-pjax-csp-version" content="17414ba9f9e847d1c4bea8123e06788617a5c13e651b5eb4743b038c4c8bead2" data-turbo-track="reload">
  <meta http-equiv="x-pjax-css-version" content="51838b7fac5685cca82289cc316f3e63602d0444a5a3e71d164d478e1fbd31d3" data-turbo-track="reload">
  <meta http-equiv="x-pjax-js-version" content="ee6751eb4479d46996aef4e9d8cd83943e676b6f3b641a0df039be2ab4d4b311" data-turbo-track="reload">
  

      <link href="https://gist.github.com/zmts.atom" rel="alternate" title="atom" type="application/atom+xml">


  <link crossorigin="anonymous" media="all" integrity="sha512-OvUUjWwxzvMVQTH4jxmy9abLCtF5Ms4hpXvmbTx3+LFnVSQ+YT0T2hIzC0UqEpBSjOMHsWW6uXeYy7IIYwvFHQ==" rel="stylesheet" href="https://github.githubassets.com/assets/gist-3af5148d6c31cef31541.css" />





  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <meta name="browser-optimizely-client-errors-url" content="https://api.github.com/_private/browser/optimizely_client/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">

<meta name="theme-color" content="#1e2327">
<meta name="color-scheme" content="light dark" />



  </head>

  <body class="logged-out env-production page-responsive" style="word-wrap: break-word;">
    

    <div class="position-relative js-header-wrapper ">
      <a href="802dc9c3510d79fd40f9dc38a12bccfc.html#start-of-content" class="px-2 py-4 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content">Skip to content</a>
      <span data-view-component="true" class="progress-pjax-loader js-pjax-loader-bar Progress position-fixed width-full">
    <span style="width: 0%;" data-view-component="true" class="Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis"></span>
</span>      
      


          <div class="Header js-details-container Details flex-wrap flex-md-nowrap p-responsive" role="banner" >
  <div class="Header-item d-none d-md-flex">
    <a class="Header-link" data-hotkey="g d" aria-label="Gist Homepage " href="https://gist.github.com/">
  <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github v-align-middle d-inline-block d-md-none">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
  <svg aria-hidden="true" height="24" viewBox="0 0 45 16" version="1.1" width="67" data-view-component="true" class="octicon octicon-logo-github v-align-middle d-none d-md-inline-block">
    <path fill-rule="evenodd" d="M18.53 12.03h-.02c.009 0 .015.01.024.011h.006l-.01-.01zm.004.011c-.093.001-.327.05-.574.05-.78 0-1.05-.36-1.05-.83V8.13h1.59c.09 0 .16-.08.16-.19v-1.7c0-.09-.08-.17-.16-.17h-1.59V3.96c0-.08-.05-.13-.14-.13h-2.16c-.09 0-.14.05-.14.13v2.17s-1.09.27-1.16.28c-.08.02-.13.09-.13.17v1.36c0 .11.08.19.17.19h1.11v3.28c0 2.44 1.7 2.69 2.86 2.69.53 0 1.17-.17 1.27-.22.06-.02.09-.09.09-.16v-1.5a.177.177 0 00-.146-.18zM42.23 9.84c0-1.81-.73-2.05-1.5-1.97-.6.04-1.08.34-1.08.34v3.52s.49.34 1.22.36c1.03.03 1.36-.34 1.36-2.25zm2.43-.16c0 3.43-1.11 4.41-3.05 4.41-1.64 0-2.52-.83-2.52-.83s-.04.46-.09.52c-.03.06-.08.08-.14.08h-1.48c-.1 0-.19-.08-.19-.17l.02-11.11c0-.09.08-.17.17-.17h2.13c.09 0 .17.08.17.17v3.77s.82-.53 2.02-.53l-.01-.02c1.2 0 2.97.45 2.97 3.88zm-8.72-3.61h-2.1c-.11 0-.17.08-.17.19v5.44s-.55.39-1.3.39-.97-.34-.97-1.09V6.25c0-.09-.08-.17-.17-.17h-2.14c-.09 0-.17.08-.17.17v5.11c0 2.2 1.23 2.75 2.92 2.75 1.39 0 2.52-.77 2.52-.77s.05.39.08.45c.02.05.09.09.16.09h1.34c.11 0 .17-.08.17-.17l.02-7.47c0-.09-.08-.17-.19-.17zm-23.7-.01h-2.13c-.09 0-.17.09-.17.2v7.34c0 .2.13.27.3.27h1.92c.2 0 .25-.09.25-.27V6.23c0-.09-.08-.17-.17-.17zm-1.05-3.38c-.77 0-1.38.61-1.38 1.38 0 .77.61 1.38 1.38 1.38.75 0 1.36-.61 1.36-1.38 0-.77-.61-1.38-1.36-1.38zm16.49-.25h-2.11c-.09 0-.17.08-.17.17v4.09h-3.31V2.6c0-.09-.08-.17-.17-.17h-2.13c-.09 0-.17.08-.17.17v11.11c0 .09.09.17.17.17h2.13c.09 0 .17-.08.17-.17V8.96h3.31l-.02 4.75c0 .09.08.17.17.17h2.13c.09 0 .17-.08.17-.17V2.6c0-.09-.08-.17-.17-.17zM8.81 7.35v5.74c0 .04-.01.11-.06.13 0 0-1.25.89-3.31.89-2.49 0-5.44-.78-5.44-5.92S2.58 1.99 5.1 2c2.18 0 3.06.49 3.2.58.04.05.06.09.06.14L7.94 4.5c0 .09-.09.2-.2.17-.36-.11-.9-.33-2.17-.33-1.47 0-3.05.42-3.05 3.73s1.5 3.7 2.58 3.7c.92 0 1.25-.11 1.25-.11v-2.3H4.88c-.11 0-.19-.08-.19-.17V7.35c0-.09.08-.17.19-.17h3.74c.11 0 .19.08.19.17z"></path>
</svg>
  <svg aria-hidden="true" height="24" viewBox="0 0 25 16" version="1.1" width="37" data-view-component="true" class="octicon octicon-logo-gist v-align-middle d-none d-md-inline-block">
    <path fill-rule="evenodd" d="M4.7 8.73h2.45v4.02c-.55.27-1.64.34-2.53.34-2.56 0-3.47-2.2-3.47-5.05 0-2.85.91-5.06 3.48-5.06 1.28 0 2.06.23 3.28.73V2.66C7.27 2.33 6.25 2 4.63 2 1.13 2 0 4.69 0 8.03c0 3.34 1.11 6.03 4.63 6.03 1.64 0 2.81-.27 3.59-.64V7.73H4.7v1zm6.39 3.72V6.06h-1.05v6.28c0 1.25.58 1.72 1.72 1.72v-.89c-.48 0-.67-.16-.67-.7v-.02zm.25-8.72c0-.44-.33-.78-.78-.78s-.77.34-.77.78.33.78.77.78.78-.34.78-.78zm4.34 5.69c-1.5-.13-1.78-.48-1.78-1.17 0-.77.33-1.34 1.88-1.34 1.05 0 1.66.16 2.27.36v-.94c-.69-.3-1.52-.39-2.25-.39-2.2 0-2.92 1.2-2.92 2.31 0 1.08.47 1.88 2.73 2.08 1.55.13 1.77.63 1.77 1.34 0 .73-.44 1.42-2.06 1.42-1.11 0-1.86-.19-2.33-.36v.94c.5.2 1.58.39 2.33.39 2.38 0 3.14-1.2 3.14-2.41 0-1.28-.53-2.03-2.75-2.23h-.03zm8.58-2.47v-.86h-2.42v-2.5l-1.08.31v2.11l-1.56.44v.48h1.56v5c0 1.53 1.19 2.13 2.5 2.13.19 0 .52-.02.69-.05v-.89c-.19.03-.41.03-.61.03-.97 0-1.5-.39-1.5-1.34V6.94h2.42v.02-.01z"></path>
</svg>
</a>
  </div>

  <div class="Header-item d-md-none">
    <button aria-label="Toggle navigation" aria-expanded="false" type="button" data-view-component="true" class="Header-link js-details-target btn-link">  <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-three-bars">
    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
</svg>
</button>  </div>

  <div class="Header-item Header-item--full js-site-search flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div class="header-search flex-self-stretch flex-md-self-auto mr-0 mr-md-3 mb-3 mb-md-0">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="position-relative js-quicksearch-form" role="search" aria-label="Site" action="https://gist.github.com/search" accept-charset="UTF-8" method="get">
    <div class="header-search-wrapper form-control input-sm js-chromeless-input-container">
      <input type="text"
        class="form-control input-sm js-site-search-focus header-search-input"
        data-hotkey="s,/"
        name="q"
        aria-label="Search"
        placeholder="Search…"
        autocorrect="off"
        autocomplete="off"
        autocapitalize="off">
    </div>

</form></div>


    <nav aria-label="Global" class="d-flex flex-column flex-md-row flex-self-stretch flex-md-self-auto">
  <a class="Header-link mr-0 mr-md-3 py-2 py-md-0 border-top border-md-top-0 border-white-fade" data-ga-click="Header, go to all gists, text:all gists" href="https://gist.github.com/discover">All gists</a>

  <a class="Header-link mr-0 mr-md-3 py-2 py-md-0 border-top border-md-top-0 border-white-fade" data-ga-click="Header, go to GitHub, text:Back to GitHub" href="https://github.com">Back to GitHub</a>

    <a class="Header-link d-block d-md-none mr-0 mr-md-3 py-2 py-md-0 border-top border-md-top-0 border-white-fade" data-ga-click="Header, sign in" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist header&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="313f3d78216c47ed96b604b62f7f706d0fb8e2182eb955cb8bc9feabfec828e7" href="https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc">
      Sign in
</a>
      <a class="Header-link d-block d-md-none mr-0 mr-md-3 py-2 py-md-0 border-top border-md-top-0 border-white-fade" data-ga-click="Header, sign up" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist header&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="81f42e7ab6842cb21c3fd29e2629156f82f3a3ac29df9527bc4c384dd9c56399" href="https://gist.github.com/join?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc&amp;source=header-gist">
        Sign up
</a></nav>

  </div>

  <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
    <a class="Header-link" data-hotkey="g d" aria-label="Gist Homepage " href="https://gist.github.com/">
  <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github v-align-middle d-inline-block d-md-none">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
  <svg aria-hidden="true" height="24" viewBox="0 0 45 16" version="1.1" width="67" data-view-component="true" class="octicon octicon-logo-github v-align-middle d-none d-md-inline-block">
    <path fill-rule="evenodd" d="M18.53 12.03h-.02c.009 0 .015.01.024.011h.006l-.01-.01zm.004.011c-.093.001-.327.05-.574.05-.78 0-1.05-.36-1.05-.83V8.13h1.59c.09 0 .16-.08.16-.19v-1.7c0-.09-.08-.17-.16-.17h-1.59V3.96c0-.08-.05-.13-.14-.13h-2.16c-.09 0-.14.05-.14.13v2.17s-1.09.27-1.16.28c-.08.02-.13.09-.13.17v1.36c0 .11.08.19.17.19h1.11v3.28c0 2.44 1.7 2.69 2.86 2.69.53 0 1.17-.17 1.27-.22.06-.02.09-.09.09-.16v-1.5a.177.177 0 00-.146-.18zM42.23 9.84c0-1.81-.73-2.05-1.5-1.97-.6.04-1.08.34-1.08.34v3.52s.49.34 1.22.36c1.03.03 1.36-.34 1.36-2.25zm2.43-.16c0 3.43-1.11 4.41-3.05 4.41-1.64 0-2.52-.83-2.52-.83s-.04.46-.09.52c-.03.06-.08.08-.14.08h-1.48c-.1 0-.19-.08-.19-.17l.02-11.11c0-.09.08-.17.17-.17h2.13c.09 0 .17.08.17.17v3.77s.82-.53 2.02-.53l-.01-.02c1.2 0 2.97.45 2.97 3.88zm-8.72-3.61h-2.1c-.11 0-.17.08-.17.19v5.44s-.55.39-1.3.39-.97-.34-.97-1.09V6.25c0-.09-.08-.17-.17-.17h-2.14c-.09 0-.17.08-.17.17v5.11c0 2.2 1.23 2.75 2.92 2.75 1.39 0 2.52-.77 2.52-.77s.05.39.08.45c.02.05.09.09.16.09h1.34c.11 0 .17-.08.17-.17l.02-7.47c0-.09-.08-.17-.19-.17zm-23.7-.01h-2.13c-.09 0-.17.09-.17.2v7.34c0 .2.13.27.3.27h1.92c.2 0 .25-.09.25-.27V6.23c0-.09-.08-.17-.17-.17zm-1.05-3.38c-.77 0-1.38.61-1.38 1.38 0 .77.61 1.38 1.38 1.38.75 0 1.36-.61 1.36-1.38 0-.77-.61-1.38-1.36-1.38zm16.49-.25h-2.11c-.09 0-.17.08-.17.17v4.09h-3.31V2.6c0-.09-.08-.17-.17-.17h-2.13c-.09 0-.17.08-.17.17v11.11c0 .09.09.17.17.17h2.13c.09 0 .17-.08.17-.17V8.96h3.31l-.02 4.75c0 .09.08.17.17.17h2.13c.09 0 .17-.08.17-.17V2.6c0-.09-.08-.17-.17-.17zM8.81 7.35v5.74c0 .04-.01.11-.06.13 0 0-1.25.89-3.31.89-2.49 0-5.44-.78-5.44-5.92S2.58 1.99 5.1 2c2.18 0 3.06.49 3.2.58.04.05.06.09.06.14L7.94 4.5c0 .09-.09.2-.2.17-.36-.11-.9-.33-2.17-.33-1.47 0-3.05.42-3.05 3.73s1.5 3.7 2.58 3.7c.92 0 1.25-.11 1.25-.11v-2.3H4.88c-.11 0-.19-.08-.19-.17V7.35c0-.09.08-.17.19-.17h3.74c.11 0 .19.08.19.17z"></path>
</svg>
  <svg aria-hidden="true" height="24" viewBox="0 0 25 16" version="1.1" width="37" data-view-component="true" class="octicon octicon-logo-gist v-align-middle d-none d-md-inline-block">
    <path fill-rule="evenodd" d="M4.7 8.73h2.45v4.02c-.55.27-1.64.34-2.53.34-2.56 0-3.47-2.2-3.47-5.05 0-2.85.91-5.06 3.48-5.06 1.28 0 2.06.23 3.28.73V2.66C7.27 2.33 6.25 2 4.63 2 1.13 2 0 4.69 0 8.03c0 3.34 1.11 6.03 4.63 6.03 1.64 0 2.81-.27 3.59-.64V7.73H4.7v1zm6.39 3.72V6.06h-1.05v6.28c0 1.25.58 1.72 1.72 1.72v-.89c-.48 0-.67-.16-.67-.7v-.02zm.25-8.72c0-.44-.33-.78-.78-.78s-.77.34-.77.78.33.78.77.78.78-.34.78-.78zm4.34 5.69c-1.5-.13-1.78-.48-1.78-1.17 0-.77.33-1.34 1.88-1.34 1.05 0 1.66.16 2.27.36v-.94c-.69-.3-1.52-.39-2.25-.39-2.2 0-2.92 1.2-2.92 2.31 0 1.08.47 1.88 2.73 2.08 1.55.13 1.77.63 1.77 1.34 0 .73-.44 1.42-2.06 1.42-1.11 0-1.86-.19-2.33-.36v.94c.5.2 1.58.39 2.33.39 2.38 0 3.14-1.2 3.14-2.41 0-1.28-.53-2.03-2.75-2.23h-.03zm8.58-2.47v-.86h-2.42v-2.5l-1.08.31v2.11l-1.56.44v.48h1.56v5c0 1.53 1.19 2.13 2.5 2.13.19 0 .52-.02.69-.05v-.89c-.19.03-.41.03-.61.03-.97 0-1.5-.39-1.5-1.34V6.94h2.42v.02-.01z"></path>
</svg>
</a>
  </div>

    <div class="Header-item f4 mr-0" role="navigation">
      <a class="HeaderMenu-link no-underline mr-3" data-ga-click="Header, sign in" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist header&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="313f3d78216c47ed96b604b62f7f706d0fb8e2182eb955cb8bc9feabfec828e7" href="https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc">
        Sign&nbsp;in
</a>        <a class="HeaderMenu-link d-inline-block no-underline border color-border-default rounded px-2 py-1" data-ga-click="Header, sign up" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist header&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="81f42e7ab6842cb21c3fd29e2629156f82f3a3ac29df9527bc4c384dd9c56399" href="https://gist.github.com/join?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc&amp;source=header-gist">
          Sign&nbsp;up
</a>    </div>
</div>



    </div>

  <div id="start-of-content" class="show-on-focus"></div>







    <div data-pjax-replace id="js-flash-container">


  <template class="js-flash-template">
    <div class="flash flash-full  {{ className }}">
  <div class="px-2" >
    <button class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
    </button>
    
      <div>{{ message }}</div>

  </div>
</div>
  </template>
</div>


    

  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>





  <div
    class="application-main "
    data-commit-hovercards-enabled
    data-discussion-hovercards-enabled
    data-issue-and-pr-hovercards-enabled
  >
        <div itemscope itemtype="http://schema.org/Code">
    <main id="gist-pjax-container" data-pjax-container>
      


  <div class="gist-detail-intro gist-banner pb-3">
    <div class="text-center container-lg px-3">
      <p class="lead">
        Instantly share code, notes, and snippets.
      </p>
    </div>
  </div>


<div class="gisthead pagehead pb-0 pt-3 mb-4">
  <div class="px-0">
    
  

<div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
  <div class="flex-auto min-width-0 width-fit mr-3">
    <div class="d-flex">
      <div class="d-none d-md-block">
        <a class="mr-2 flex-shrink-0" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class="avatar avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=64&amp;v=4" width="32" height="32" alt="@zmts" /></a>
      </div>
      <div class="d-flex flex-column width-full">
          <div class="d-flex flex-row width-full">
            <h1 class="wb-break-word f3 text-normal mb-md-0 mb-1">
              <span class="author"><a data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a></span><!--
                  --><span class="mx-1 color-fg-muted">/</span><!--
                  --><strong itemprop="name" class="css-truncate-target mr-1" style="max-width: 410px"><a href="802dc9c3510d79fd40f9dc38a12bccfc.html">tokens.md</a></strong>
            </h1>

        </div>

        <div class="note m-0">
          Last active <time-ago datetime="2022-03-01T10:53:55Z" data-view-component="true" class="no-wrap">Mar 1, 2022</time-ago>
        </div>
      </div>
    </div>
  </div>

  <ul class="d-md-flex d-none pagehead-actions float-none">



      <li>
          <a class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a gist" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist star button&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="511273186058ff953bfc9efeb8b0256cdf0070d8abba372cabfa3a4de3b3c1ad" href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc">
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25zm0 2.445L6.615 5.5a.75.75 0 01-.564.41l-3.097.45 2.24 2.184a.75.75 0 01.216.664l-.528 3.084 2.769-1.456a.75.75 0 01.698 0l2.77 1.456-.53-3.084a.75.75 0 01.216-.664l2.24-2.183-3.096-.45a.75.75 0 01-.564-.41L8 2.694v.001z"></path>
</svg>
    Star
</a>
    <a class="social-count" aria-label="1867 users starred this gist" href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/stargazers">
      1.9k
</a>
      </li>

        <li>
            <a class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a gist" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist fork button&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="322f0c20e3edeaeb5ec1d6f0bb5b065ea5b23555ed421a6f0f65118cfb1d6520" href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc">
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo-forked">
    <path fill-rule="evenodd" d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"></path>
</svg>
    Fork
</a>    <a class="social-count js-social-count"
      href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/forks"
      aria-label="425 users forked this gist">
      425
    </a>

        </li>
  </ul>
</div>

  <div class="d-block d-md-none px-3 px-md-3 px-lg-5 mb-3">
      <a class="btn btn-sm btn-block tooltipped tooltipped-n" aria-label="You must be signed in to star a gist" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;gist star button&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="511273186058ff953bfc9efeb8b0256cdf0070d8abba372cabfa3a4de3b3c1ad" href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc">
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25zm0 2.445L6.615 5.5a.75.75 0 01-.564.41l-3.097.45 2.24 2.184a.75.75 0 01.216.664l-.528 3.084 2.769-1.456a.75.75 0 01.698 0l2.77 1.456-.53-3.084a.75.75 0 01.216-.664l2.24-2.183-3.096-.45a.75.75 0 01-.564-.41L8 2.694v.001z"></path>
</svg>
    Star
</a>

  </div>

<div class="d-flex flex-md-row flex-column px-0 pr-md-3 px-lg-5">
  <div class="flex-md-order-1 flex-order-2 flex-auto">
    <nav class="UnderlineNav box-shadow-none px-3 px-lg-0 "
     aria-label="Gist"
     data-pjax="#gist-pjax-container">

  <div class="UnderlineNav-body">
    <a class="js-selected-navigation-item selected UnderlineNav-item" data-pjax="true" data-hotkey="g c" aria-current="page" data-selected-links="gist_code /zmts/802dc9c3510d79fd40f9dc38a12bccfc" href="802dc9c3510d79fd40f9dc38a12bccfc.html">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code UnderlineNav-octicon">
    <path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path>
</svg>
      Code
</a>
      <a class="js-selected-navigation-item UnderlineNav-item" data-pjax="true" data-hotkey="g r" data-selected-links="gist_revisions /zmts/802dc9c3510d79fd40f9dc38a12bccfc/revisions" href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/revisions">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-git-commit">
    <path fill-rule="evenodd" d="M10.5 7.75a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm1.43.75a4.002 4.002 0 01-7.86 0H.75a.75.75 0 110-1.5h3.32a4.001 4.001 0 017.86 0h3.32a.75.75 0 110 1.5h-3.32z"></path>
</svg>
        Revisions
        <span title="192" data-view-component="true" class="Counter hx_reponav_item_counter">192</span>
</a>
      <a class="js-selected-navigation-item UnderlineNav-item" data-pjax="true" data-hotkey="g s" data-selected-links="gist_stars /zmts/802dc9c3510d79fd40f9dc38a12bccfc/stargazers" href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/stargazers">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25zm0 2.445L6.615 5.5a.75.75 0 01-.564.41l-3.097.45 2.24 2.184a.75.75 0 01.216.664l-.528 3.084 2.769-1.456a.75.75 0 01.698 0l2.77 1.456-.53-3.084a.75.75 0 01.216-.664l2.24-2.183-3.096-.45a.75.75 0 01-.564-.41L8 2.694v.001z"></path>
</svg>
        Stars
        <span title="1,866" data-view-component="true" class="Counter hx_reponav_item_counter">1,866</span>
</a>
      <a class="js-selected-navigation-item UnderlineNav-item" data-pjax="true" data-hotkey="g f" data-selected-links="gist_forks /zmts/802dc9c3510d79fd40f9dc38a12bccfc/forks" href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/forks">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-git-branch">
    <path fill-rule="evenodd" d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"></path>
</svg>
        Forks
        <span title="425" data-view-component="true" class="Counter hx_reponav_item_counter">425</span>
</a>  </div>
</nav>

  </div>

  <div class="d-md-flex d-none flex-items-center flex-md-order-2 flex-order-1 file-navigation-options" data-multiple>

    <div class="d-lg-table d-none">
      <div class="file-navigation-option v-align-middle">

  <div class="d-md-flex d-none">
    <div class="input-group">
      <div class="input-group-button">
        <details class="details-reset details-overlay select-menu">
          <summary data-ga-click="Repository, clone Embed, location:repo overview" data-view-component="true" class="select-menu-button btn-sm btn">  <span data-menu-button>Embed</span>
</summary>          <details-menu
            class="select-menu-modal position-absolute"
            data-menu-input="gist-share-url"
            style="z-index: 99;" aria-label="Clone options">
            <div class="select-menu-header">
              <span class="select-menu-title">What would you like to do?</span>
            </div>
            <div class="select-menu-list">
                <button name="button" type="button" class="select-menu-item width-full" aria-checked="true" role="menuitemradio" value="&lt;script src=&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc.js&quot;&gt;&lt;/script&gt;" data-hydro-click="{&quot;event_type&quot;:&quot;clone_or_download.click&quot;,&quot;payload&quot;:{&quot;feature_clicked&quot;:&quot;EMBED&quot;,&quot;git_repository_type&quot;:&quot;GIST&quot;,&quot;gist_id&quot;:45580889,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="5dba875255c576ccd8cd3aa2a866b0a20e531ba9a854e89707baee03db610d5e">
                  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check select-menu-item-icon">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  <div class="select-menu-item-text">
                    <span class="select-menu-item-heading" data-menu-button-text>
                      
                      Embed
                    </span>
                      <span class="description">
                        Embed this gist in your website.
                      </span>
                  </div>
</button>                <button name="button" type="button" class="select-menu-item width-full" aria-checked="false" role="menuitemradio" value="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc" data-hydro-click="{&quot;event_type&quot;:&quot;clone_or_download.click&quot;,&quot;payload&quot;:{&quot;feature_clicked&quot;:&quot;SHARE&quot;,&quot;git_repository_type&quot;:&quot;GIST&quot;,&quot;gist_id&quot;:45580889,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="903f82a6478214e7dd35d38747e0278ec8383c2176f08395c63a208ea9c211f0">
                  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check select-menu-item-icon">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  <div class="select-menu-item-text">
                    <span class="select-menu-item-heading" data-menu-button-text>
                      
                      Share
                    </span>
                      <span class="description">
                        Copy sharable link for this gist.
                      </span>
                  </div>
</button>                <button name="button" type="button" class="select-menu-item width-full" aria-checked="false" role="menuitemradio" value="https://gist.github.com/802dc9c3510d79fd40f9dc38a12bccfc.git" data-hydro-click="{&quot;event_type&quot;:&quot;clone_or_download.click&quot;,&quot;payload&quot;:{&quot;feature_clicked&quot;:&quot;USE_HTTPS&quot;,&quot;git_repository_type&quot;:&quot;GIST&quot;,&quot;gist_id&quot;:45580889,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="41af0380faf441a3f481b42dfb4d2a4043dba19bd477df50955d1c28134a4678">
                  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check select-menu-item-icon">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  <div class="select-menu-item-text">
                    <span class="select-menu-item-heading" data-menu-button-text>
                      Clone via
                      HTTPS
                    </span>
                      <span class="description">
                        Clone with Git or checkout with SVN using the repository’s web address.
                      </span>
                  </div>
</button>            </div>
            <div class="select-menu-list">
              <a role="link" class="select-menu-item select-menu-action" href="https://docs.github.com/articles/which-remote-url-should-i-use" target="_blank">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-question select-menu-item-icon">
    <path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 019 6.25c0 .177-.04.264-.077.318a.956.956 0 01-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 00-.313.195 2.416 2.416 0 00-.692.661.75.75 0 001.248.832.956.956 0 01.276-.245 6.3 6.3 0 01.26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 008 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 101.342.67z"></path>
</svg>
                <div class="select-menu-item-text">
                  Learn more about clone URLs
                </div>
              </a>
            </div>
          </details-menu>
        </details>
      </div>

      <input
        id="gist-share-url"
        type="text"
        data-autoselect
        class="form-control input-monospace input-sm"
        value="&lt;script src=&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc.js&quot;&gt;&lt;/script&gt;"
        aria-label="Clone this repository at &lt;script src=&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc.js&quot;&gt;&lt;/script&gt;"
        readonly>

      <div class="input-group-button">
        <clipboard-copy for="gist-share-url" aria-label="Copy to clipboard" class="btn btn-sm zeroclipboard-button" data-hydro-click="{&quot;event_type&quot;:&quot;clone_or_download.click&quot;,&quot;payload&quot;:{&quot;feature_clicked&quot;:&quot;COPY_URL&quot;,&quot;git_repository_type&quot;:&quot;GIST&quot;,&quot;gist_id&quot;:45580889,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="e8f51686fedb22316023b468674ec6d1d6e4460de0a17b28ae60c957614c1bcf"><svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg></clipboard-copy>
      </div>
    </div>
  </div>
</div>

    </div>

    <div class="ml-2 file-navigation-option">
    <a class="btn btn-sm tooltipped tooltipped-s tooltipped-multiline js-remove-unless-platform" data-platforms="windows,mac" aria-label="Save zmts/802dc9c3510d79fd40f9dc38a12bccfc to your computer and use it in GitHub Desktop." data-hydro-click="{&quot;event_type&quot;:&quot;clone_or_download.click&quot;,&quot;payload&quot;:{&quot;feature_clicked&quot;:&quot;OPEN_IN_DESKTOP&quot;,&quot;git_repository_type&quot;:&quot;GIST&quot;,&quot;gist_id&quot;:45580889,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="228ac6b4dda2ccdbeefda2541dfbf5aaef62832a97e89217087963141233b382" href="https://desktop.github.com"><svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-desktop-download">
    <path d="M4.927 5.427l2.896 2.896a.25.25 0 00.354 0l2.896-2.896A.25.25 0 0010.896 5H8.75V.75a.75.75 0 10-1.5 0V5H5.104a.25.25 0 00-.177.427z"></path><path d="M1.573 2.573a.25.25 0 00-.073.177v7.5a.25.25 0 00.25.25h12.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-3a.75.75 0 110-1.5h3A1.75 1.75 0 0116 2.75v7.5A1.75 1.75 0 0114.25 12h-3.727c.099 1.041.52 1.872 1.292 2.757A.75.75 0 0111.25 16h-6.5a.75.75 0 01-.565-1.243c.772-.885 1.192-1.716 1.292-2.757H1.75A1.75 1.75 0 010 10.25v-7.5A1.75 1.75 0 011.75 1h3a.75.75 0 010 1.5h-3a.25.25 0 00-.177.073zM6.982 12a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5H6.982z"></path>
</svg></a>
</div>


    <div class="ml-2">
      <a class="btn btn-sm" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;clone_or_download.click&quot;,&quot;payload&quot;:{&quot;feature_clicked&quot;:&quot;DOWNLOAD_ZIP&quot;,&quot;git_repository_type&quot;:&quot;GIST&quot;,&quot;gist_id&quot;:45580889,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="8f86028543adf532f211a783e67b73d8f85cc396b8aeebf7e27bd2dbfab65929" data-ga-click="Gist, download zip, location:gist overview" href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/archive/c98f57b88f9b3d07fe941d5ccf21f877cdcb7e4e.zip">Download ZIP</a>
    </div>
  </div>
</div>


  </div>
</div>

<div class="container-lg px-3 new-discussion-timeline">
  <div class="repository-content gist-content" >
    
  <div>
      <div itemprop="about">
    Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication
  </div>


        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-tokens-md" class="file my-2">
      <div class="file-header d-flex flex-md-items-center flex-items-start">
        <div class="file-actions flex-order-2 pt-0">

          <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/raw/c98f57b88f9b3d07fe941d5ccf21f877cdcb7e4e/tokens.md" data-view-component="true" class="btn-sm btn">  Raw
</a>
        </div>
        <div class="file-info pr-4 d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
          <span class="mr-1">
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code-square color-fg-muted">
    <path fill-rule="evenodd" d="M1.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V1.75a.25.25 0 00-.25-.25H1.75zM0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25V1.75zm9.22 3.72a.75.75 0 000 1.06L10.69 8 9.22 9.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM6.78 6.53a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 101.06-1.06L5.31 8l1.47-1.47z"></path>
</svg>
          </span>
          <a class="wb-break-all" href="802dc9c3510d79fd40f9dc38a12bccfc.html#file-tokens-md">
            <strong class="user-select-contain gist-blob-name css-truncate-target">
              tokens.md
            </strong>
          </a>
        </div>
      </div>
      <div id="file-tokens-md-readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-про-токены-json-web-tokens-jwt-аутентификацию-и-авторизацию-token-based-authentication" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#про-токены-json-web-tokens-jwt-аутентификацию-и-авторизацию-token-based-authentication"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Про токены, JSON Web Tokens (JWT), аутентификацию и авторизацию. Token-Based Authentication</h1>
<p dir="auto"><code>Last major update: 25.08.2020</code></p>
<ul dir="auto">
<li>Что такое авторизация/аутентификация</li>
<li>Где хранить токены</li>
<li>Как ставить куки ?</li>
<li>Процесс логина</li>
<li>Процесс рефреш токенов</li>
<li>Кража токенов/Механизм контроля токенов</li>
<li>Зачем все это ? JWT vs Cookie sessions</li>
</ul>
<h2 dir="auto"><a id="user-content-основа" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#основа"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Основа:</h2>
<p dir="auto"><strong>Аутентификация(authentication, от греч. αὐθεντικός [authentikos] – реальный, подлинный; от αὐθέντης [authentes] – автор)</strong> - это процесс проверки учётных данных пользователя (логин/пароль). Проверка подлинности пользователя путём сравнения введённого им логина/пароля с данными сохранёнными в базе данных.</p>
<p dir="auto"><strong>Авторизация(authorization — разрешение, уполномочивание)</strong> - это проверка прав пользователя на доступ к определенным ресурсам.</p>
<p dir="auto">Например, после аутентификации юзер <em><strong>sasha</strong></em> получает право обращаться и получать от ресурса <strong>"super.com/vip"</strong> некие данные. Во время обращения юзера <em><strong>sasha</strong></em> к ресурсу <strong>vip</strong> система авторизации проверит имеет ли право юзер обращаться к этому ресурсу (проще говоря переходить по неким разрешенным ссылкам)</p>
<ol dir="auto">
<li>Юзер c емайлом <em><strong>sasha_gmail.com</strong></em> успешно прошел аутентификацию</li>
<li>Сервер посмотрел в БД какая роль у юзера</li>
<li>Сервер сгенерил юзеру токен с указанной ролью</li>
<li>Юзер заходит на некий ресурс используя полученный токен</li>
<li>Сервер смотрит на права(роль) юзера в токене и соответственно пропускает или отсекает запрос</li>
</ol>
<p dir="auto">Собственно п.5 и есть процесс <strong>авторизации</strong>.</p>
<p dir="auto"><em>Дабы не путаться с понятиями <strong>Authentication/Authorization</strong> можно использовать псевдонимы <strong>checkPassword/checkAccess</strong>(я так сделал в своей API)</em></p>
<p dir="auto"><strong>JSON Web Token (JWT)</strong> — содержит три блока, разделенных точками: заголовок(<strong>header</strong>), набор полей (<strong>payload</strong>) и <strong>сигнатуру</strong>. Первые два блока представлены в JSON-формате и дополнительно закодированы в формат base64. Набор полей содержит произвольные пары имя/значения, притом стандарт JWT определяет несколько зарезервированных имен (iss, aud, exp и другие). Сигнатура может генерироваться при помощи и симметричных алгоритмов шифрования, и асимметричных. Кроме того, существует отдельный стандарт, отписывающий формат зашифрованного JWT-токена.</p>
<p dir="auto">Пример подписанного JWT токена (после декодирования 1 и 2 блоков):</p>
<pre><code>{ alg: "HS256", typ: "JWT" }.{ iss: "auth.myservice.com", aud: "myservice.com", exp: 1435937883, userName: "John Smith", userRole: "Admin" }.S9Zs/8/uEGGTVVtLggFTizCsMtwOJnRhjaQ2BMUQhcY
</code></pre>
<p dir="auto"><strong>Токены</strong> предоставляют собой средство <strong>авторизации</strong> для каждого запроса от клиента к серверу. Токены(и соответственно сигнатура токена) генерируются на сервере основываясь на секретном ключе(который хранится на сервере) и <strong>payload'e</strong>. Токен в итоге хранится на клиенте и используется при необходимости <strong>авторизации</strong> какого-либо запроса. Такое решение отлично подходит при разработке SPA.</p>
<p dir="auto">При попытке хакером подменить данные в <strong>header'ре</strong> или <strong>payload'е</strong>, токен станет не валидным, поскольку сигнатура не будет соответствовать изначальным значениям. А возможность сгенерировать новую сигнатуру у хакера отсутствует, поскольку секретный ключ для зашифровки лежит на сервере.</p>
<p dir="auto"><strong>access token</strong> - используется для <strong>авторизации запросов</strong> и хранения дополнительной информации о пользователе (аля <strong>user_id</strong>, <strong>user_role</strong> или еще что либо, эту информацию также называет <strong>payload</strong>). Все поля в <strong>payload</strong> это свободный набор полей необходимый для реализации вашей частной бизнес логики. То бишь <strong>user_id</strong> и <strong>user_role</strong> не являются требованием и представляют собой исключительно частный случай. <strong>Сам токен храним не в localStorage как это обычно делают, а в памяти клиентского приложения.</strong></p>
<p dir="auto"><strong>refresh token</strong> - выдается сервером по результам успешной аутентификации и используется для получения новой пары <strong>access/refresh</strong> токенов. <strong>Храним исключительно в httpOnly куке</strong>.</p>
<p dir="auto">Каждый токен имеет свой срок жизни, например <strong>access</strong>: 30 мин, <strong>refresh</strong>: 60 дней</p>
<p dir="auto"><strong>Поскольку токены(а данном случае access) это не зашифрованная информация крайне не рекомендуется хранить в них какую либо <code>sensitive data</code> (passwords, payment credentials, etc...)</strong></p>
<p dir="auto"><strong>Роль рефреш токенов и зачем их хранить в БД.</strong> Рефреш на сервере хранится для учета доступа и инвалидации краденых токенов. Таким образом сервер наверняка знает о клиентах которым стоит доверять(кому позволено авторизоваться). Если не хранить рефреш токен в БД то велика вероятность того что токены будут бесконтрольно гулять по рукам злоумышленников. Для отслеживания которых нам придется заводить черный список и периодически чистить его от просроченных. В место этого мы храним лимитированный список белых токенов для каждого юзера отдельно и в случае кражи у нас уже есть механизм противодействия(описано ниже).</p>
<h2 dir="auto"><a id="user-content-как-ставить-куки-" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#как-ставить-куки-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Как ставить куки ?</h2>
<p dir="auto">Для того что бы <code>refreshToken</code> кука была успешно уставленна и отправлена браузером, адреса эндпоинтов аутентификации(<code>/api/auth/login</code>, <code>/api/auth/refresh-tokens</code>, <code>/api/auth/logout</code>) должны располагася в доменном пространстве сайта. Тоесть для домена <code>super.com</code> на сервере ставим куку с такими опциями:</p>
<pre><code>{
    domain: '.super.com',
    path: '/api/auth'
}
</code></pre>
<p dir="auto">Таким образом кука установится в браузер и прийдет на все эндпоинты по адресу <code>super.com/api/auth/&lt;any-path&gt;</code></p>
<p dir="auto">Если у нас монолит и за аутентификацию отвечает один и тот-же API, тут проблем не должно быть. Но если за аутентификацию отвечает отдельный микросервис, прячем его средствами <code>nginx</code> по выше указанному пути (<code>super.com/api/auth</code>).</p>
<pre><code># пример настройки nginx конфига(только основые настройки)
server {
    listen 80;
    server_name super.com;
    # SPA/Front-end
    location / {
        try_files $uri /index.html;
        root /var/www/frontend/dist;
        index index.html;
    }
    # Main API
    location /api {
        proxy_pass http://111.111.111.111:7000;
    }
    # Auth API
    location /api/auth {
        proxy_redirect http://222.222.222.222:7000   /auth/;
        proxy_pass http://222.222.222.222:7000;
    }
}
</code></pre>
<h2 dir="auto"><a id="user-content-логин-создание-сессиитокенов-apiauthlogin" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#логин-создание-сессиитокенов-apiauthlogin"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Логин, создание сессии/токенов (api/auth/login):</h2>
<ol dir="auto">
<li>Пользователь логинится в приложении, передавая логин/пароль и <strong>fingerprint</strong> браузера (ну или некий иной уникальный идентификатор устройства если это не браузер)</li>
<li>Сервер проверят подлинность логина/пароля</li>
<li>В случае удачи создает и записывает сессию в БД <code>{ userId: uuid, refreshToken: uuid, expiresIn: int, fingerprint: string, ... }</code> (схема таблицы ниже)</li>
<li>Создает <strong>access token</strong></li>
<li>Отправляет клиенту <strong>access и refresh token uuid</strong> (взятый из выше созданной сессии)</li>
</ol>
<pre><code>Set-Cookie: refreshToken='c84f18a2-c6c7-4850-be15-93f9cbaef3b3'; HttpOnly // для браузера
{
  body: { 
    accessToken: 'eyJhbGciOiJIUzUxMiIsI...',
    refreshToken: 'c84f18a2-c6c7-4850-be15-93f9cbaef3b3' // для мобильных приложений
  }
}
</code></pre>
<ol start="6" dir="auto">
<li>Клиент сохраняет токены(<strong>access</strong> в памяти приложения, <strong>refresh</strong>  сетится как кука автоматом)</li>
</ol>
<p dir="auto">На что нужно обратить внимание при установке <strong>refresh</strong> куки:</p>
<ul dir="auto">
<li><code>maxAge</code> куки ставим равную <code>expiresIn</code> из выше созданной сессии</li>
<li>В <code>path</code> ставим корневой роут <code>auth</code> контроллера  (<code>/api/auth</code>) это важно, таким образом токен получат только те хендлеры которым он нужен(<code>/api/auth/logout</code> и <code>/api/auth/rerfesh-tokens</code>), остальные обойдутся(нечего зря почём отправлять <strong>sensitive data</strong>).</li>
</ul>
<p dir="auto"><strong>Стоит заметить, что процесс добавления сессии в таблицу должен имеет свои меры безопасности.</strong> При добавлении стоит проверять сколько рефреш-сессий всего есть у юзера и, если их слишком много или юзер конектится одновременно из нескольких подсетей, стоит предпринять меры. Имплементируя данную проверку, я проверяю только что бы юзер имел максимум до 5 одновременных рефреш-сессий максимум, и при попытке установить следующую удаляю предыдущие. Все остальные проверки на ваше усмотрение в зависимости от задачи.</p>
<p dir="auto">Таким образом если юзер залогинился на пяти устройствах, рефреш токены будут постоянно обновляться и все счастливы. Но если с аккаунтом юзера начнут производить подозрительные действия(попытаются залогинится более чем на 5'ти устройствах) система сбросит все сессии(рефреш токены) кроме последней.</p>
<p dir="auto">Перед каждым запросом клиент предварительно проверяет время жизни <strong>access token'а</strong> (да берем <code>expiresIn</code> прямо из JWT в клиентском приложении) и если оно истекло  шлет запрос на обновление токенов. Для большей уверенности можем обновлять токены на несколько секунд раньше. То есть кейс когда API получит истекший <strong>access</strong> токен практически исключен.</p>
<p dir="auto">Что такое <strong>fingerprint</strong> ? Это инструмент отслеживания браузера вне зависимости от желания пользователя быть идентифицированным. Это хеш сгенерированный js'ом на базе неких уникальных параметров/компонентов браузера. Преимущество <strong>fingerprint'a</strong> в том что он нигде персистентно не хранится и генерируется только в момент логина и рефреша.</p>
<ul dir="auto">
<li>Библиотека для хеширования:  <a href="https://github.com/Valve/fingerprintjs2">https://github.com/Valve/fingerprintjs2</a></li>
<li>Более подробно:  <a href="https://player.vimeo.com/video/151208427" rel="nofollow">https://player.vimeo.com/video/151208427</a></li>
<li>Пример ф-ции получения такого хеша: <a href="https://gist.github.com/zmts/b26ba9a61aa0b93126fc6979e7338ca3">https://gist.github.com/zmts/b26ba9a61aa0b93126fc6979e7338ca3</a></li>
</ul>
<p dir="auto">В случае если клиент не браузер, а мобильное приложение, в качестве <strong>fingerprint</strong> используем любую уникальную строку(тот же <code>uuid</code>) персистентно хранящуюся на устройстве.</p>
<h2 dir="auto"><a id="user-content-рефреш-токенов-apiauthrefresh-tokens" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#рефреш-токенов-apiauthrefresh-tokens"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Рефреш токенов (api/auth/refresh-tokens):</h2>
<p dir="auto">Для использования возможности аутентификации на более чем одном девайсе необходимо хранить все рефреш токены по каждому юзеру. Я храню это список в PostgreSQL таблице(а надо бы в Redis'е). В процессе каждого логина создается запись с IP/Fingerprint и другой мета информацией, так званая <strong>рефреш-сессия</strong>.</p>
<pre><code>CREATE TABLE refreshSessions (
    "id" SERIAL PRIMARY KEY,
    "userId" uuid REFERENCES users(id) ON DELETE CASCADE,
    "refreshToken" uuid NOT NULL,
    "ua" character varying(200) NOT NULL, /* user-agent */
    "fingerprint" character varying(200) NOT NULL,
    "ip" character varying(15) NOT NULL,
    "expiresIn" bigint NOT NULL,
    "createdAt" timestamp with time zone NOT NULL DEFAULT now()
);
</code></pre>
<ol dir="auto">
<li>Клиент(фронтенд) проверяет перед запросом не истекло ли время жизни <strong>access token'на</strong></li>
<li>Если истекло клиент делает запрос на <code>POST auth/refresh-tokens</code> <code>{ fingerprint: string }</code> в <code>body</code> и соответственно <code>refreshToken</code> куку.</li>
<li>Сервер получает запись рефреш-сессии по UUID'у рефреш токена</li>
<li>Сохраняет текущую рефреш-сессию в переменную и удаляет ее из таблицы</li>
<li>Проверяет текущую рефреш-сессию:
<ol dir="auto">
<li>Не истекло ли время жизни</li>
<li>На соответствие старого  <strong>fingerprint'a</strong> полученного из текущей рефреш-сессии с новым полученным из тела запроса</li>
</ol>
</li>
<li>В случае негативного результата бросает ошибку <code>TOKEN_EXPIRED</code>/<code>INVALID_REFRESH_SESSION</code></li>
<li>В случае успеха создает новую рефреш-сессию и записывает ее в БД</li>
<li>Создает <strong>access token</strong></li>
<li>Отправляет клиенту <strong>access и refresh token uuid</strong> (взятый из выше созданной рефреш-сессии)</li>
</ol>
<pre><code>Set-Cookie: refreshToken='c84f18a2-c6c7-4850-be15-93f9cbaef3b3'; HttpOnly // для браузера
{
  body: { 
    accessToken: 'eyJhbGciOiJIUzUxMiIsI...',
    refreshToken: 'c84f18a2-c6c7-4850-be15-93f9cbaef3b3' // для мобильных приложений
  }
}
</code></pre>
<p dir="auto"><em>Tip:</em> Для отправки запроса с куками для <code>axios</code> есть опция <code>{ withCredentials: true }</code></p>
<h2 dir="auto"><a id="user-content-ключевой-момент" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#ключевой-момент"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Ключевой момент:</h2>
<p dir="auto">В момент рефреша то есть обновления <strong>access token'a</strong> обновляются <strong>ОБА</strong> токена. Но как же <strong>refresh token</strong> может сам себя обновить, он ведь создается только после успешной аутентификации ? <strong>refresh token</strong> в момент рефреша сравнивает себя с тем <strong>refresh token'ом</strong> который лежит в БД и вслучае успеха, а также если у него не истек срок, система рефрешит токены.</p>
<p dir="auto">Вопрос зачем <strong>refresh token'y</strong> срок жизни, если он обновляется каждый раз при обновлении <strong>access token'a</strong> ? Это сделано на случай, если юзер будет в офлайне более 60 дней, тогда придется заново вбить логин/пароль.</p>
<h2 dir="auto"><a id="user-content-в-случае-кражи-access-токена-и-refresh-куки" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#в-случае-кражи-access-токена-и-refresh-куки"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>В случае кражи access токена и refresh куки:</h2>
<ol dir="auto">
<li>Хакер воспользовался <strong>access token'ом</strong></li>
<li>Закончилось время жизни <strong>access token'на</strong></li>
<li><strong>Клиент хакера</strong> отправляет <strong>refresh token</strong> и <strong>fingerprint</strong></li>
<li>Сервер смотрит <strong>fingerprint</strong> хакера</li>
<li>Сервер не находит <strong>fingerprint</strong> хакера в рефреш-сессии и удаляет ее из БД</li>
<li>Сервер логирует попытку несанкционированного обновления токенов</li>
<li>Сервер перенаправляет хакера на станицу логина. Хакер идет лесом</li>
<li>Юзер пробует зайти на сервер &gt;&gt; обнаруживается что <strong>refresh token</strong> отсутствует</li>
<li>Сервер перенаправляет юзера на форму аутентификации</li>
<li>Юзер вводит логин/пароль</li>
</ol>
<h2 dir="auto"><a id="user-content-в-случае-кражи-access-токена-refresh-куки-и-fingerprintа" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#в-случае-кражи-access-токена-refresh-куки-и-fingerprintа"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>В случае кражи access токена, refresh куки и fingerprint'а:</h2>
<p dir="auto">Стащить все авторизационные данные это не из легких задач, но все же допустим этот кейс как крайний и наиболее неудобный с точки зрения UX (без примера в кодовой базе <code>supra-api-nodejs</code>).</p>
<p dir="auto">Предложу несколько вариантов решения данной проблемы:</p>
<ul dir="auto">
<li>Хранить IP или Subnet залогиненного клиента</li>
</ul>
<ol dir="auto">
<li>Хакер воспользовался <strong>access token'ом</strong></li>
<li>Закончилось время жизни <strong>access token'на</strong></li>
<li><strong>Хакер</strong> отправляет <strong>refresh</strong> куку и <strong>fingerprint</strong></li>
<li>Сервер проверяет IP <strong>хакера</strong>, <strong>хакер</strong> идет лесом</li>
</ol>
<p dir="auto"><em>UX минус: нужно логинится с каждого нового IP.</em></p>
<ul dir="auto">
<li>Удалять все сессии в случае если <strong>refresh</strong> токен не найден</li>
</ul>
<ol dir="auto">
<li>Хакер воспользовался <strong>access token'ом</strong></li>
<li>Закончилось время жизни <strong>access token'на</strong></li>
<li><strong>Хакер</strong> отправляет <strong>refresh</strong> куку и <strong>fingerprint</strong></li>
<li>На сервере создается новый <strong>refresh</strong> токен ("от хакера")</li>
<li>Хакер получает новую пару токенов</li>
<li>Юзер пробует отправить запрос на сервер &gt;&gt; обнаруживается что <strong>refresh</strong> токен не валиден</li>
<li>Сервер удаляет все сессии юзера, в последствии чего хакер больше не сможет обновлять <strong>access</strong> токен</li>
<li>Сервер создает новую сессию для пользователя</li>
</ol>
<p dir="auto"><em>UX минус: в каждом случае когда сервер не будет находить рефреш токен - будут сбрасиватся все сессии юзера на всех устройствах.</em></p>
<h2 dir="auto"><a id="user-content-зачем-все-это--jwt-vs-cookie-sessions" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#зачем-все-это--jwt-vs-cookie-sessions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Зачем все это ? JWT vs Cookie sessions</h2>
<p dir="auto">Зачем этот весь геморой ? Почему не юзать старые добрые cookie sessions ? Чем не угодили куки ?</p>
<ul dir="auto">
<li>Куки подвержены CSRF: <a href="https://habr.com/ru/company/oleg-bunin/blog/412855" rel="nofollow">https://habr.com/ru/company/oleg-bunin/blog/412855</a> <a href="https://www.youtube.com/watch?v=x5AuK_IbJlg" rel="nofollow">https://www.youtube.com/watch?v=x5AuK_IbJlg</a></li>
<li>Нативыным приложениям для сматфонов удобнее работать с токенами. Да есть хаки для работы с куки, но это не нативная поддержка</li>
<li>Куки в микросерисной архитектуре использовать не вариант. Напомню зачастую микросервисы раскиданы на разных доменах, а куки не поддерживают кросc-доменные запросы</li>
<li>В микросерисной архитектуре JWT позволяет каждому сервису независимо от сервера авторизации верифицировать <code>access</code> токен (через публичный ключ)</li>
<li>При использовании cookie sessions программист зачастую надеется на то, что предоставил фреймворк и оставляет как есть</li>
<li>При использовании jwt мы видим проблему с безопасностью и стараемся предусмотреть механизмы контроля в случае каржи авторизационных данных. При использовании cookie сессий программист зачастую даже не задумывается что сессия может быть скомпрометирована</li>
<li><strong>На каждом запросе</strong> использование JWT избавляет бекенд от одного запроса в БД(или кеш) за данными пользователя(<code>userId</code>, <code>email</code>, etc.)</li>
</ul>
<h2 dir="auto"><a id="user-content-в-итоге" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#в-итоге"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>В итоге:</h2>
<ul dir="auto">
<li><strong>access</strong> токены храним исключительно в памяти клиентского приложения. Не в глобально доступной переменной аля <code>window.accessToken</code> а в <strong>замыкании</strong></li>
<li><strong>refresh</strong> токен храним исключительно в <strong>httpOnly</strong> куке</li>
<li>Механизмы контроля при угоне <strong>sensitive data</strong> в наличии</li>
<li>Взяли лучшее из обеих технологий, максимально обезопасились от CSRF/XSS</li>
<li>Добавьте в компанию ко всему CSP заголовки и SameSite=Strict флаг для кук и ждите прихода злодеев</li>
</ul>
<p dir="auto">p.s. Каждой задаче свой подход. Юзайте в небольших/средних монолитах <code>cookie sessions</code> и не парьтесь. Ну или на ваш вкус :)</p>
<hr>
<h3 dir="auto"><a id="user-content-имплементация" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#имплементация"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Имплементация:</h3>
<p dir="auto"><strong>Front-end:</strong></p>
<ul dir="auto">
<li><a href="https://github.com/zmts/beauty-vuejs-boilerplate/blob/master/src/services/http.init.js">https://github.com/zmts/beauty-vuejs-boilerplate/blob/master/src/services/http.init.js</a></li>
<li><a href="https://github.com/zmts/beauty-vuejs-boilerplate/blob/master/src/services/auth.service.js">https://github.com/zmts/beauty-vuejs-boilerplate/blob/master/src/services/auth.service.js</a></li>
</ul>
<p dir="auto"><strong>Back-end:</strong></p>
<ul dir="auto">
<li><a href="https://github.com/zmts/supra-api-nodejs/tree/master/modules/auth">https://github.com/zmts/supra-api-nodejs/tree/master/modules/auth</a></li>
</ul>
<h3 dir="auto"><a id="user-content-info" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#info"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Info:</h3>
<ul dir="auto">
<li><a href="https://www.youtube.com/playlist?list=PLvTBThJr861y60LQrUGpJNPu3Nt2EeQsP" rel="nofollow">https://www.youtube.com/playlist?list=PLvTBThJr861y60LQrUGpJNPu3Nt2EeQsP</a></li>
<li><a href="https://habrahabr.ru/company/Voximplant/blog/323160/" rel="nofollow">https://habrahabr.ru/company/Voximplant/blog/323160/</a></li>
<li><a href="https://tools.ietf.org/html/rfc6749" rel="nofollow">https://tools.ietf.org/html/rfc6749</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/oauth-2-ru" rel="nofollow">https://www.digitalocean.com/community/tutorials/oauth-2-ru</a></li>
<li><a href="https://jwt.io/introduction/" rel="nofollow">https://jwt.io/introduction/</a></li>
<li><a href="https://auth0.com/blog/using-json-web-tokens-as-api-keys/" rel="nofollow">https://auth0.com/blog/using-json-web-tokens-as-api-keys/</a></li>
<li><a href="https://auth0.com/blog/cookies-vs-tokens-definitive-guide/" rel="nofollow">https://auth0.com/blog/cookies-vs-tokens-definitive-guide/</a></li>
<li><a href="https://auth0.com/blog/ten-things-you-should-know-about-tokens-and-cookies/" rel="nofollow">https://auth0.com/blog/ten-things-you-should-know-about-tokens-and-cookies/</a></li>
<li><a href="https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/" rel="nofollow">https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/</a></li>
<li><a href="https://habr.com/company/dataart/blog/262817/" rel="nofollow">https://habr.com/company/dataart/blog/262817/</a></li>
<li><a href="https://habr.com/post/340146/" rel="nofollow">https://habr.com/post/340146/</a></li>
<li><a href="https://habr.com/company/mailru/blog/115163/" rel="nofollow">https://habr.com/company/mailru/blog/115163/</a></li>
<li><a href="https://scotch.io/tutorials/authenticate-a-node-js-api-with-json-web-tokens" rel="nofollow">https://scotch.io/tutorials/authenticate-a-node-js-api-with-json-web-tokens</a></li>
<li><a href="https://egghead.io/courses/json-web-token-jwt-authentication-with-node-js" rel="nofollow">https://egghead.io/courses/json-web-token-jwt-authentication-with-node-js</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/oauth-2-ru" rel="nofollow">https://www.digitalocean.com/community/tutorials/oauth-2-ru</a></li>
<li><a href="https://github.com/shieldfy/API-Security-Checklist/blob/master/README-ru.md">https://github.com/shieldfy/API-Security-Checklist/blob/master/README-ru.md</a></li>
<li><a href="https://www.youtube.com/watch?v=Ngh3KZcGNaU" rel="nofollow">https://www.youtube.com/watch?v=Ngh3KZcGNaU</a></li>
<li><a href="https://www.youtube.com/watch?v=R0-eoLp871s" rel="nofollow">https://www.youtube.com/watch?v=R0-eoLp871s</a></li>
<li><a href="https://www.youtube.com/watch?v=u9hn3s2kUrg" rel="nofollow">https://www.youtube.com/watch?v=u9hn3s2kUrg</a></li>
<li><a href="https://ain.ua/2020/02/29/adtech-bez-cookies/" rel="nofollow">https://ain.ua/2020/02/29/adtech-bez-cookies/</a></li>
<li><a href="https://habr.com/ru/post/492830" rel="nofollow">https://habr.com/ru/post/492830</a> (cookies SameSite)</li>
</ul>
<h3 dir="auto"><a id="user-content-and-why-jwt-is-bad" class="anchor" aria-hidden="true" href="802dc9c3510d79fd40f9dc38a12bccfc.html#and-why-jwt-is-bad"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>And why JWT is bad</h3>
<ul dir="auto">
<li><a href="http://cryto.net/~joepie91/blog/2016/06/13/stop-using-jwt-for-sessions/" rel="nofollow">http://cryto.net/~joepie91/blog/2016/06/13/stop-using-jwt-for-sessions/</a></li>
<li><a href="http://cryto.net/~joepie91/blog/2016/06/19/stop-using-jwt-for-sessions-part-2-why-your-solution-doesnt-work/" rel="nofollow">http://cryto.net/~joepie91/blog/2016/06/19/stop-using-jwt-for-sessions-part-2-why-your-solution-doesnt-work/</a></li>
<li><a href="https://medium.com/@cjainn/anatomy-of-a-jwt-token-part-1-8f7616113c14" rel="nofollow">https://medium.com/@cjainn/anatomy-of-a-jwt-token-part-1-8f7616113c14</a></li>
<li><a href="https://medium.com/@cjainn/anatomy-of-a-jwt-token-part-2-c12888abc1a2" rel="nofollow">https://medium.com/@cjainn/anatomy-of-a-jwt-token-part-2-c12888abc1a2</a></li>
<li><a href="https://scotch.io/bar-talk/why-jwts-suck-as-session-tokens" rel="nofollow">https://scotch.io/bar-talk/why-jwts-suck-as-session-tokens</a></li>
<li><a href="https://t.me/why_jwt_is_bad" rel="nofollow">https://t.me/why_jwt_is_bad</a></li>
</ul>
<hr>
<p dir="auto"><em>Комментарии периодически подчищаются</em></p>
</article>
  </div>

  </div>
</div>


      <a name="comments"></a>
      <div class="js-quote-selection-container" data-quote-markdown=".js-comment-body">
        <div class="js-discussion "
        >
          <div class="ml-md-6 pl-md-3 ml-0 pl-0">
            
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="ajax-pagination-form js-ajax-pagination" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/load_comments" accept-charset="UTF-8" method="get">
    <input type="hidden" name="partial" id="partial" value="gists/timeline_marker" autocomplete="off" class="form-control" />
    <input type="hidden" name="before_comment_id" id="before_comment_id" value="3682509" autocomplete="off" class="form-control" />
    <input type="hidden" name="mark_as_unread" id="mark_as_unread" value="0" autocomplete="off" class="form-control" />
    <button name="button" type="submit" class="ajax-pagination-btn" data-disable-with="Loading...">Load earlier comments...</button>
</form>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/haukot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/haukot"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/2165339?s=80&amp;v=4" width="40" height="40" alt="@haukot" /></a>
    </div>
    <div id="gistcomment-3682509" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3682509-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3682509-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/haukot/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/haukot">haukot</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3682509#gistcomment-3682509" id="gistcomment-3682509-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-03-26T19:45:33Z" class="no-wrap">Mar 26, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">Супер крутая статья!</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3682509" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="xrzTVoIGEHM66So-Iey8bqzXaKjD77DPwS1U3ReueScfi1RbNp97GUAxb2eDQ7cOGl-1IKIK4fF4qWOjqLOckg" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3682509/edit_form?textarea_id=gistcomment-3682509-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/RuslanTheKing"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/63665009?s=80&amp;v=4" width="40" height="40" alt="@RuslanTheKing" /></a>
    </div>
    <div id="gistcomment-3685675" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3685675-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3685675-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/RuslanTheKing">RuslanTheKing</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3685675#gistcomment-3685675" id="gistcomment-3685675-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-03-29T19:18:39Z" class="no-wrap">Mar 29, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto">access token - используется для авторизации запросов и хранения дополнительной информации о пользователе (аля user_id, user_role или еще что либо, эту информацию также называет payload). Все поля в payload это свободный набор полей необходимый для реализации вашей частной бизнес логики. То бишь user_id и user_role не являются требованием и представляют собой исключительно частный случай. <strong>Сам токен храним не в localStorage</strong> как это обычно делают, а в памяти клиентского приложения.</p>
</blockquote>
<p dir="auto">Если я разрабатываю мобильное приложение, то понятно что access token я могу хранить в памяти приложения.<br>
Что если я разрабатываю сайт. Где тогда хранить access token? В cookie браузера?</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3685675" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="EN3Zm7uXxeSFj9-_zs0XxTENdsC6Pm2ux7dEZWFtzPEA1d_ibhDBUMlm3ghjgZdLfxF7mfaK1r17QK9j2mtjHA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3685675/edit_form?textarea_id=gistcomment-3685675-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3688481" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3688481-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3688481-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3688481#gistcomment-3688481" id="gistcomment-3688481-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-03-31T17:04:00Z" class="no-wrap">Mar 31, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RuslanTheKing">@RuslanTheKing</a> ответ на ваш вопрос в первой части статьи</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3688481" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="9hjMsk9aLmeoMmUK7bZ4VSKuNUNRS2G9-EeTIPC2a38fUvbi4mb0170S5oRU2fIHpaYwT_ZBEDozynwnwhjvaQ" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3688481/edit_form?textarea_id=gistcomment-3688481-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/39876327?s=80&amp;v=4" width="40" height="40" alt="@denyrt" /></a>
    </div>
    <div id="gistcomment-3708659" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3708659-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3708659-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt">denyrt</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3708659#gistcomment-3708659" id="gistcomment-3708659-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-04-16T13:40:51Z" class="no-wrap">Apr 16, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">Насчёт безопасности.<br>
Проверка айпи адреса кроме рефреш токена и прочих метаданных обезопасит юзера, но если он постоянно прокся использует.<br>
Есть вариант с настройками Security для юзера которые он может менять только имея рефреш токен и все метаданные, а ещо лучше как в гитхабе, после авторизации повторной (чтобы хакер не мог их менять если он угнал access_token). А далее юзер просто опционально может отменить проверку по айпи чтобы он спокойно через прокси сидел себе и это будет как раз таки на его страх и риск.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3708659" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="_2uYcj_T1U0MMgV4WWjKhYgZlPmbWAwQK2qMmHh6tRERDjCbVvi3OfnqPleAZ-j_YMeZeb9L7nN_0fvsnjE1rA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3708659/edit_form?textarea_id=gistcomment-3708659-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/39876327?s=80&amp;v=4" width="40" height="40" alt="@denyrt" /></a>
    </div>
    <div id="gistcomment-3708665" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3708665-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3708665-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt">denyrt</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3708665#gistcomment-3708665" id="gistcomment-3708665-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-04-16T13:45:57Z" class="no-wrap">Apr 16, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto">Насчёт безопасности.<br>
Проверка айпи адреса кроме рефреш токена и прочих метаданных обезопасит юзера, но если он постоянно прокся использует.<br>
Есть вариант с настройками Security для юзера которые он может менять только имея рефреш токен и все метаданные, а ещо лучше как в гитхабе, после авторизации повторной (чтобы хакер не мог их менять если он угнал access_token). А далее юзер просто опционально может отменить проверку по айпи чтобы он спокойно через прокси сидел себе и это будет как раз таки на его страх и риск.</p>
</blockquote>
<p dir="auto">Ну и конечно же список активных сессий для юзера держать которые он так же может смотреть. Если делает логаут. То для текущего рефреш токен или сразу для всех. Можно так же сделать возможность для kill selected session, но её вместе с авторизацией как-то сделать, чтобы хакер не мог угнать токен и офнуть сессию владельца аккаунта. Ну в общем, если сделать некоторые параметры опциональными то проблема проксей  и прочего спокойно решается. Та и зависит от сервиса, если у меня пет проект в котором ну никак не может быть у юзера информации которая полезна хакеру то и оверинженирить тоже не стоит. Если речь идёт о плажетах и прочее то конечно лучше подумать более детально над всеми существующими способами аутентификации и смотреть не только в сторону jwt. Так же функционал системы можно разделить на разные части и чтобы использовать более защищенные функции то какую-то доп. аутентификацию делать, типа двухфакторки или что-то ещо придумать.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3708665" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="MgGcbHGMqoa-MamfNcXlyd5enktd8_PXA3nRmbJ9TnKWSj84zvw1TFLt-fqrM9h6j_SKC8eGIIhN-mAWiD75FQ" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3708665/edit_form?textarea_id=gistcomment-3708665-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3717141" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3717141-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3717141-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3717141#gistcomment-3717141" id="gistcomment-3717141-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-04-23T11:02:25Z" class="no-wrap">Apr 23, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="organization" data-hovercard-url="/orgs/fix-it/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/fix-it">@fix-it</a></p>
<blockquote>
<p dir="auto">Здесь т.к. рефреш-сессии в бд нет и максимально точный userId из него получить нельзя, то откуда узнать userId для которого надо удалить все рефреш-сессии из бд?</p>
</blockquote>
<p dir="auto">Да ты прав. Спасибо правильно подметил. Решение тому есть. Нет времени на реализацию. Обязательно потом отпишу и имплементирую.</p>
<blockquote>
<p dir="auto">Выходит userId можно взять из payload access токена (с валидной подписью).</p>
</blockquote>
<p dir="auto">Рефреш токана проходит только по рефреш токену. Ответ - нет, нельзя.</p>
<blockquote>
<p dir="auto">Нормально ли пользоваться payload'ом access токена в этом случае?</p>
</blockquote>
<p dir="auto">Нет</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717141" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="0RnSxjbO1QPmPn94LCDWEAcw9zCwK3USKTwlZXqKX355xW1C96gLNECQied_A_fxwLoGQ1KofQuMYETeYeF1cQ" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717141/edit_form?textarea_id=gistcomment-3717141-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3717153" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3717153-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3717153-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3717153#gistcomment-3717153" id="gistcomment-3717153-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-04-23T11:10:41Z" class="no-wrap">Apr 23, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/denyrt">@denyrt</a></p>
<blockquote>
<p dir="auto">Есть вариант с настройками Security для юзера которые он может менять только имея рефреш токен и все метаданные, а ещо лучше как в гитхабе, после авторизации повторной (чтобы хакер не мог их менять если он угнал access_token).</p>
</blockquote>
<p dir="auto">Можно чуть подробнее про Security и про гитхаб. Нужно больше подробностей</p>
<blockquote>
<p dir="auto">А далее юзер просто опционально может отменить проверку по айпи чтобы он спокойно через прокси сидел себе и это будет как раз таки на его страх и риск.</p>
</blockquote>
<p dir="auto">Тоже очень здравая идея. Можно будет потом добавить. Спасибо!</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717153" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="67v5O60ctUIb4rJjNtQnkkSGO1MVthxtHOgGZhn8cwo2pYBGwPwvc3zSpRyvNFcMrNJdZuwwvPxmFdfA3w8PWg" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717153/edit_form?textarea_id=gistcomment-3717153-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/39876327?s=80&amp;v=4" width="40" height="40" alt="@denyrt" /></a>
    </div>
    <div id="gistcomment-3717225" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3717225-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3717225-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt">denyrt</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3717225#gistcomment-3717225" id="gistcomment-3717225-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-04-23T12:10:49Z" class="no-wrap">Apr 23, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/denyrt">@denyrt</a></p>
<blockquote>
<p dir="auto">Есть вариант с настройками Security для юзера которые он может менять только имея рефреш токен и все метаданные, а ещо лучше как в гитхабе, после авторизации повторной (чтобы хакер не мог их менять если он угнал access_token).</p>
</blockquote>
<p dir="auto">Можно чуть подробнее про Security и про гитхаб. Нужно больше подробностей</p>
<blockquote>
<p dir="auto">А далее юзер просто опционально может отменить проверку по айпи чтобы он спокойно через прокси сидел себе и это будет как раз таки на его страх и риск.</p>
</blockquote>
<p dir="auto">Тоже очень здравая идея. Можно будет потом добавить. Спасибо!</p>
</blockquote>
<p dir="auto">Ну например ввести пароль для некоторых действий. Например я хочу сделать killsession для сессии на телефоне, находясь за ПК. И как раз пароль добавит безопасности т.к. если хакер знает пароль то и красть сессию ни к чему. Так что при краже сессии нормальный вариант. Ну или к авторизированному юзеру добавить Policy дополнительный. Например хочу доступ к более защищенным настройкам и чтобы убедиться что я не хакер, ввожу пароль и получаю дополнительный токен на 10 минут который привязан к айпи. Что-то такое в общем.</p>
<p dir="auto">А насчёт гитхаба, там есть вкладка в настройках репозитория и когда пытаешься туда войти, то просит ввести пароль свой от аккаунта. Repositoty -&gt; Settings -&gt; Manage Access  вроде как.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717225" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="_r40JHEoIAexK1qOujlGbgC0qjIbPMEsRhwVal-2MwzIxCTtTZjAT4ILdb-dmYVJha9m55stox7eLhyTEGA6uA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717225/edit_form?textarea_id=gistcomment-3717225-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/39876327?s=80&amp;v=4" width="40" height="40" alt="@denyrt" /></a>
    </div>
    <div id="gistcomment-3717233" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3717233-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3717233-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/denyrt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/denyrt">denyrt</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3717233#gistcomment-3717233" id="gistcomment-3717233-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-04-23T12:13:37Z" class="no-wrap">Apr 23, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">Ну или каким-то боком двухфакторку прикрутить к всему этому. В общем всякое можно придумать, стоит от задачи отталкиваться. Можно даже несколько Policy разных использовать и как-то все комбинировать если нужно.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717233" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="nx8kMwwRwop8R8YvpaYopesmkieM88lxCsLUyGixOtVoGFwzSjbSzMCCCcn08Vwi9ns39Qqv0sPfTHZ4bfMM1w" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3717233/edit_form?textarea_id=gistcomment-3717233-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/mvalitov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/mvalitov"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/8917265?s=80&amp;v=4" width="40" height="40" alt="@mvalitov" /></a>
    </div>
    <div id="gistcomment-3734439" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3734439-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3734439-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/mvalitov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/mvalitov">mvalitov</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3734439#gistcomment-3734439" id="gistcomment-3734439-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-07T06:23:15Z" class="no-wrap">May 7, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">А как быть с тем, что юзер сделал logout, access token у него протухнет через небольшое время, а вот refresh token то останется в таблице ещё на 60 дней. Т.е будет занимать место при проверке условия "разрешаем одновременный логин только с пяти устройств". Может при logout надо удалить refresh токены с таким же fingerprint?</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3734439" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="TWdms3yH-QJ1dBePGgX84mwSKLf-SJLM_zMxIDnlJftDRHtlpEeXz9fBEQ6WaoQz0tsFbMqg9h8D33H4n54Tgw" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3734439/edit_form?textarea_id=gistcomment-3734439-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3734454" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3734454-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3734454-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3734454#gistcomment-3734454" id="gistcomment-3734454-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-07T06:35:08Z" class="no-wrap">May 7, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/mvalitov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mvalitov">@mvalitov</a> так и есть рефреш токен удаляеться <a href="https://github.com/zmts/supra-api-nodejs/blob/master/modules/auth/actions/LogoutAction.js">https://github.com/zmts/supra-api-nodejs/blob/master/modules/auth/actions/LogoutAction.js</a></p>
<p dir="auto">По логике у одного рефреш токена может быть один уникальный <code>fingerprint</code>. Для надежности можешь сделать еще удаление по <code>fingerprint</code> up to u</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3734454" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="0yxsbfHs5znu6GlHAUdc0YFMW95_aD2qwz9KpE2zu4LAcK7hWsUKQkMEgcGqGseeQRhmBc4K0asZe3dFNV5_iA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3734454/edit_form?textarea_id=gistcomment-3734454-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/dcompet03/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/dcompet03"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/34106039?s=80&amp;v=4" width="40" height="40" alt="@dcompet03" /></a>
    </div>
    <div id="gistcomment-3736467" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3736467-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3736467-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/dcompet03/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/dcompet03">dcompet03</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3736467#gistcomment-3736467" id="gistcomment-3736467-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-09T11:13:17Z" class="no-wrap">May 9, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">Спасибо за отличную статью!<br>
Есть отдельные рекомендации где хранить рефреш токены и как их отправлять в случае с мобильными приложениями?</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3736467" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="sH-Kqqs9UJ4oF-IkWhKzx7VbFx03dc2toBgUSfk118JaqNFfggyubRT5g_xDHvY_Zxl4QLKZ0BzWktpbbUH9UQ" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3736467/edit_form?textarea_id=gistcomment-3736467-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3738441" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3738441-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3738441-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3738441#gistcomment-3738441" id="gistcomment-3738441-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-11T08:27:22Z" class="no-wrap">May 11, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/dcompet03/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/dcompet03">@dcompet03</a> в мобайле не спец :)</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3738441" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="1_jyx7T698g15InhLgfaCGifR2i6_GnfcQOxD-NsZRcdDJCyeqcUfiF3VBFHkaUhZAcx2ZYnvrF9la5259w0xA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3738441/edit_form?textarea_id=gistcomment-3738441-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/RuslanTheKing"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/63665009?s=80&amp;v=4" width="40" height="40" alt="@RuslanTheKing" /></a>
    </div>
    <div id="gistcomment-3739485" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3739485-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3739485-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/RuslanTheKing">RuslanTheKing</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3739485#gistcomment-3739485" id="gistcomment-3739485-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-12T03:47:30Z" class="no-wrap">May 12, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6MzczOTQ4NQ==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">В мобильном приложении access token храним в памяти приложения, так при выгрузке приложения из памяти, или перезагрузке access token теряется. А refresh token храним либо в текстовом файле в директории приложения, либо в SQLite базе данных которое использует ваше приложения. В первом случае, доступ к файлу будет иметь только ваше приложение, если только нет ROOT, во втором случае SQLite имеет возможность шифрования данных.<br>
По деректория для IOS можно почитать тут <code>https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html</code><br>
При первом запуске приложения или при рестарте проверяем наличие refresh token - а в текстовом файле, или в бд приложения, если он есть, то пытаемся получить  access token. При успешном получении открываем главный интерфейс приложения, при отсутствии refresh token открываем интерфейс аутентификации/регистрации.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3739485" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="mCUviu8oVkQb19ejTFGnIFccO8F-a3_lhfL-xnX_HbYJX8ALTuFDVNtmE7HJLKmWr6mvarm_WmhUXQoVQg8qag" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3739485/edit_form?textarea_id=gistcomment-3739485-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/dcompet03/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/dcompet03"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/34106039?s=80&amp;v=4" width="40" height="40" alt="@dcompet03" /></a>
    </div>
    <div id="gistcomment-3741122" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3741122-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3741122-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/dcompet03/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/dcompet03">dcompet03</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3741122#gistcomment-3741122" id="gistcomment-3741122-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-13T08:36:23Z" class="no-wrap">May 13, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/RuslanTheKing">@RuslanTheKing</a> спасибо большое</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3741122" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="A4fO4qLMyReucTCwbZrI-kYZo7eJ4gIThexsaPH69WAx2qqE1XPrdHZVonSGfPt7nrnpqqBVKCHvAa6SuZ2B1w" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3741122/edit_form?textarea_id=gistcomment-3741122-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/darkdealnet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/darkdealnet"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/26168210?s=80&amp;v=4" width="40" height="40" alt="@darkdealnet" /></a>
    </div>
    <div id="gistcomment-3741873" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3741873-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3741873-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/darkdealnet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/darkdealnet">darkdealnet</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3741873#gistcomment-3741873" id="gistcomment-3741873-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-13T19:34:09Z" class="no-wrap">May 13, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc0MTg3Mw==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">то есть хакер не может скопировать из токена fingerprint и вставить его в refresh схему? может же...<br>
fingerprint не нужно хранить в payload. Fingerprint нужно хранить в базе и передавать его только при авторизации/регистрации</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3741873" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="GFWy3XA2EBfH94lH6w0ol4KETFH1K4CWio1HgX4hYBpFdD2lckk3eieP8ARFENjGc1CIrfZLon718Y-RajwCtw" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3741873/edit_form?textarea_id=gistcomment-3741873-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zartdinov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zartdinov"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/4386514?s=80&amp;v=4" width="40" height="40" alt="@zartdinov" /></a>
    </div>
    <div id="gistcomment-3741955" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3741955-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3741955-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zartdinov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zartdinov">zartdinov</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3741955#gistcomment-3741955" id="gistcomment-3741955-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-05-13T21:17:25Z" class="no-wrap">May 13, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc0MTk1NQ==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/austrokhart/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/austrokhart">@austrokhart</a> CSRF подразумевает под собой отправку кукис, а <code>api/auth/refresh-tokens</code> помимо кукис требует также отпечаток пальцев браузера в body. Так что нет не подвержен.</p>
</blockquote>
<p dir="auto">Вообще, вроде в /api/auth/logout и /api/auth/rerfesh-tokens есть момент с CSRF, но ничего страшного, пользователя просто будет разлогинивать, поэтому скорей всего лучше обрабатывать только POST-методы чтобы всякие <code>&lt;img src=".../logout" /&gt;</code> не срабатывали, но это мелочь</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3741955" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="WutIFuCN0wOhbRgQkwX2h_rirSY1M0eQnhzpcvV_XVEALiYRWVu_SXi0m_pmktZz1ABgq402A0wU0Dc_P7bfIw" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3741955/edit_form?textarea_id=gistcomment-3741955-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/tz4678/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/tz4678"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/12753171?s=80&amp;v=4" width="40" height="40" alt="@tz4678" /></a>
    </div>
    <div id="gistcomment-3774612" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3774612-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3774612-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/tz4678/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/tz4678">tz4678</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3774612#gistcomment-3774612" id="gistcomment-3774612-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-09T20:17:12Z" class="no-wrap">Jun 9, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">у пользователя просто должно храниться время последнего изменения пароля, если токен создан РАНЕЕ чем был изменен пароль, то он НЕ ВАЛИДЕН.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3774612" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="wq0gpVBXPcb2SN6sQoTu6GYhMQNVnzk0QW4AYFqU9guDwYdcrQ0yQC6hUXI1wnLep3-FNp0VEL9RoJqjAjFwVA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3774612/edit_form?textarea_id=gistcomment-3774612-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3778729" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3778729-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3778729-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3778729#gistcomment-3778729" id="gistcomment-3778729-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-13T16:37:56Z" class="no-wrap">Jun 13, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc3ODcyOQ==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto">у пользователя просто должно храниться время последнего изменения пароля, если токен создан РАНЕЕ чем был изменен пароль, то он НЕ ВАЛИДЕН.</p>
</blockquote>
<p dir="auto">После того как юзер меняет пароль система(API)  должна вылогинить юзера и удалить все его сессии</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3778729" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="ZYjzF0AdhgoVa2sCLA2rdUXbRzQYji_Rk8nHF6PAWb37q3eFYj5B7tPIIMnnvA45YIA2SFk0-L2eVYO4TTK7ww" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3778729/edit_form?textarea_id=gistcomment-3778729-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3778731" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3778731-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3778731-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3778731#gistcomment-3778731" id="gistcomment-3778731-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-13T16:41:41Z" class="no-wrap">Jun 13, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc3ODczMQ==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto">Сделал подобные refresh сессии на PostgreSQL. Есть ли смысл переделать под Redis? Если да, то как возможно представить таблицу refreshSessions описанную в статье? Как я понимаю, лишь одной хеш-таблицей обойтись не получится.</p>
</blockquote>
<p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/fickmann/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/fickmann">@fickmann</a> В статье так и написано юзеть Redis или еще что-то быстро действующее. Храните как хотите это вне контекста данной статьи.</p>
<p dir="auto">p.s.<br>
комменты зачищены, тролли забанены</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3778731" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="lFMOs-SZ_F5M_7kFhOkJTpkAHYoCpyALW1T92EUV4q-V-gkBLaX0M_MR_r4R6o03liw-pO88DpYDUdVHqYqjmw" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3778731/edit_form?textarea_id=gistcomment-3778731-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3778735" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3778735-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3778735-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3778735#gistcomment-3778735" id="gistcomment-3778735-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-13T16:44:38Z" class="no-wrap">Jun 13, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc3ODczNQ==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto">то есть хакер не может скопировать из токена fingerprint и вставить его в refresh схему? может же...</p>
</blockquote>
<p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/darkdealnet/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/darkdealnet">@darkdealnet</a> В токене не хранится fingerprint. Он генерится в момент логина. В статье это написано.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3778735" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="I8nFm7d75yHxlH00MWeP2L9YXjxa78sM2BcTqKOBqJQ6_IPzr8QsCU9wG8Hd_vNLn3L2-2Utiofbvle0kAqHew" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3778735/edit_form?textarea_id=gistcomment-3778735-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/brutalsignature/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/brutalsignature"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/40472046?s=80&amp;v=4" width="40" height="40" alt="@brutalsignature" /></a>
    </div>
    <div id="gistcomment-3786363" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3786363-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3786363-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/brutalsignature/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/brutalsignature">brutalsignature</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3786363#gistcomment-3786363" id="gistcomment-3786363-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-20T03:00:57Z" class="no-wrap">Jun 20, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc4NjM2Mw==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/zmts">@zmts</a> Правильно ли я понял, что если у куки для рефреш сесии закончилось время, то в таблице сессий, запись для которой выпущена была эта кука, просто останется в таблице и будет лежать там всегда?</p>
<p dir="auto">В смысле когда пропадает кука для рефреша мы и рефрешить посути уже не можем, нам только логиниться заново. Соответсвтенно в таблице, строка где есть refreshToken равный пропашей куки так и останется навсегда.</p>
<p dir="auto">я пробовал проверять что если нет куки но есть fingerprint, то по fingerprint можно зарефрешиться, ну найти строку в таблице и удалить, но не уверен, что это хороший вариант.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3786363" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="t9SKcmD1D7k-MgvW8o4azdyluQWxLkQNe-FtiHTwAGPJQFMIXn-NcGVotTO_t55FTWdRqHDZKZ5KxHHiZJSwlA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3786363/edit_form?textarea_id=gistcomment-3786363-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/kochetkov-ma/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/kochetkov-ma"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/16944358?s=80&amp;v=4" width="40" height="40" alt="@kochetkov-ma" /></a>
    </div>
    <div id="gistcomment-3789962" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3789962-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3789962-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/kochetkov-ma/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/kochetkov-ma">kochetkov-ma</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3789962#gistcomment-3789962" id="gistcomment-3789962-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-23T07:28:35Z" class="no-wrap">Jun 23, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">Идёт 2021 год, а люди пишут свои реализации авторизации на JWT... Начиная со средних проектов нужно юзать сервер авторизации oauth2 / openid, например бесплатный Keycloak. Свои попытки реализации всегда будут менее безопасные.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3789962" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="-wC0VVRYXdBDEvAeQekxjydZxWOwQA2EY_j0pHr199SxOVoGLjWFpmFgP0IbXRD2RzCqnxefInB_JXb3KwKRlw" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3789962/edit_form?textarea_id=gistcomment-3789962-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/brutalsignature/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/brutalsignature"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/40472046?s=80&amp;v=4" width="40" height="40" alt="@brutalsignature" /></a>
    </div>
    <div id="gistcomment-3789981" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3789981-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3789981-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/brutalsignature/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/brutalsignature">brutalsignature</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3789981#gistcomment-3789981" id="gistcomment-3789981-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-23T07:52:10Z" class="no-wrap">Jun 23, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/kochetkov-ma/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kochetkov-ma">@kochetkov-ma</a><br>
я сначала хотел юзать OAuth2, но я не разобрался до конца, например как сделать аутентификацию не только через гугл или фейсбук но и через email + password, то есть локально аутентифицирватся через OAuth2, но я так и не разобрался....</p>
<p dir="auto">я видел OAuth0, но там сервера платные в определенныех условиях. если есть возможность сделать так через OAuth2 то я бы с радостью так сделал. может вы подскажете где почитать или объясните как это делается, более понятным языком? если конечно вам не сложно. спасибо!</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3789981" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="tErq97E0eJjWq6_PNbLwlet-xLPMPcmv-6qUuRBK_n0ugbGy8BVvNkyDxanoWSwbok_ZoGF3JTZUMPOK9tcM9w" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3789981/edit_form?textarea_id=gistcomment-3789981-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/RuslanTheKing"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/63665009?s=80&amp;v=4" width="40" height="40" alt="@RuslanTheKing" /></a>
    </div>
    <div id="gistcomment-3790815" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3790815-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3790815-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/RuslanTheKing/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/RuslanTheKing">RuslanTheKing</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3790815#gistcomment-3790815" id="gistcomment-3790815-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-06-23T19:34:19Z" class="no-wrap">Jun 23, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6Mzc5MDgxNQ==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/kochetkov-ma/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kochetkov-ma">@kochetkov-ma</a><br>
я сначала хотел юзать OAuth2, но я не разобрался до конца, например как сделать аутентификацию не только через гугл или фейсбук но и через email + password, то есть локально аутентифицирватся через OAuth2, но я так и не разобрался....</p>
<p dir="auto">я видел OAuth0, но там сервера платные в определенныех условиях. если есть возможность сделать так через OAuth2 то я бы с радостью так сделал. может вы подскажете где почитать или объясните как это делается, более понятным языком? если конечно вам не сложно. спасибо!</p>
</blockquote>
<p dir="auto">Совет: решайте вашу задачу на основе той технологии, в которой сейчас разбираетесь!<br>
Если бы инженеры хотели бы сделать мерседес таким, какой он есть сейчас, мы бы не увидели ни одного мерседеса. Сделайте так как можете, потом разберетесь  в OAuth2, адаптируете и доработаете. Главное не стойте на месте, делайте!</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3790815" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="RKI5RUDCV1TE5aj36eUlfn-vOOo2JOEd56HfI40MojIcgOhJPlOsC8GiQ-9Ghu5REAA6DD6a9m378MU8zDDmpA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3790815/edit_form?textarea_id=gistcomment-3790815-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/sklyar/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/sklyar"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/3994260?s=80&amp;v=4" width="40" height="40" alt="@sklyar" /></a>
    </div>
    <div id="gistcomment-3824522" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3824522-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3824522-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/sklyar/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/sklyar">sklyar</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3824522#gistcomment-3824522" id="gistcomment-3824522-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-07-22T13:03:12Z" class="no-wrap">Jul 22, 2021</relative-time></a>

    <span class="js-comment-edit-history">
  <span class="d-inline-block color-fg-muted">&#8226;</span>

  <details class="details-overlay details-reset d-inline-block dropdown hx_dropdown-fullscreen">
    <summary class="btn-link no-underline color-fg-muted js-notice">
      <div class="position-relative">
        <span>
            edited
        </span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down v-align-middle">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
      </div>
    </summary>
    <details-menu
      class="dropdown-menu dropdown-menu-s width-auto py-0 js-comment-edit-history-menu"
      style="max-width: 352px; z-index: 99;"
      src="/_render_node/MDExOkdpc3RDb21tZW50ODAyZGM5YzM1MTBkNzlmZDQwZjlkYzM4YTEyYmNjZmM6MzgyNDUyMg==/comments/comment_edit_history_log"
      preload
    >
      <include-fragment class="my-3" style="min-width: 100px;" aria-label="Loading...">
        <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
      </include-fragment>
    </details-menu>
  </details>
</span>

  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">При обновлении страницы или при первом "заходе" как мы узнаем что пользователь аутентифицирован?<br>
Пытаться сходить в api/auth/refresh-tokens?</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3824522" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="hkZnab9u83nyCkvsXYCoA5Wl01XfTwhMzcM0dSVZrADOxlKGhty8N5BmV4-CHCRqY1PzbjzrM1Uc4J9zdwAFNA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3824522/edit_form?textarea_id=gistcomment-3824522-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/6388755?s=80&amp;v=4" width="40" height="40" alt="@zmts" /></a>
    </div>
    <div id="gistcomment-3828290" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3828290-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3828290-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    <span aria-label="This user is the author of this ." data-view-component="true" class="Label tooltipped tooltipped-multiline tooltipped-s ml-1">Author</span>

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/zmts/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/zmts">zmts</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3828290#gistcomment-3828290" id="gistcomment-3828290-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-07-26T08:59:24Z" class="no-wrap">Jul 26, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto">При обновлении страницы или при первом "заходе" как мы узнаем что пользователь аутентифицирован?<br>
Пытаться сходить в api/auth/refresh-tokens?</p>
</blockquote>
<p dir="auto">Да</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3828290" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="iFTPkaPUZM6QDpGY5hKogNapHecHgFoAFFKAdDrkO9HjGm7pryc28LyzwHw-I6KqF_FVysRo5w-b_UhMYYg0xQ" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3828290/edit_form?textarea_id=gistcomment-3828290-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/r0hack/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/r0hack"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/10026540?s=80&amp;v=4" width="40" height="40" alt="@r0hack" /></a>
    </div>
    <div id="gistcomment-3989801" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="3989801-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-3989801-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/r0hack/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/r0hack">r0hack</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=3989801#gistcomment-3989801" id="gistcomment-3989801-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2021-12-09T17:17:06Z" class="no-wrap">Dec 9, 2021</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">"Куки в микросерисной архитектуре использовать не вариант. Напомню зачастую микросервисы раскиданы на разных доменах, а куки не поддерживают кросc-доменные запросы" - А как же CORS ?</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3989801" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="fA5Hva2zEs7mCwYEVowj3ZxLLw697Um1PogU2CTffKlfLNuz9hyfZ4O4MCZAKsZ6JCvxSUPXrhMGMqV91FQbFQ" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/3989801/edit_form?textarea_id=gistcomment-3989801-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/kbondarets/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/kbondarets"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/60948433?s=80&amp;v=4" width="40" height="40" alt="@kbondarets" /></a>
    </div>
    <div id="gistcomment-4069354" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="4069354-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-4069354-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/kbondarets/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/kbondarets">kbondarets</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=4069354#gistcomment-4069354" id="gistcomment-4069354-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2022-02-17T18:38:26Z" class="no-wrap">Feb 17, 2022</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <p dir="auto">Еще никогда не встречал такого понятного описания, автору спасибо!</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/4069354" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="u3UU1LaLy6uD7RK6Vnq1avkoPDL4A-p_SC7lZBbqklxMguKAKisf9l9cbrKruC18VlGsEiSnVGJRqmtr2yUZuA" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/4069354/edit_form?textarea_id=gistcomment-4069354-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>
  <div class="TimelineItem d-block js-comment-container">
    <div class="avatar-parent-child TimelineItem-avatar d-none d-md-block">
      <a class="d-inline-block" data-hovercard-type="user" data-hovercard-url="/users/sklyar/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/sklyar"><img class=" avatar-user" src="https://avatars.githubusercontent.com/u/3994260?s=80&amp;v=4" width="40" height="40" alt="@sklyar" /></a>
    </div>
    <div id="gistcomment-4081291" class="timeline-comment-group js-minimizable-comment-group js-targetable-element my-0 comment previewable-edit js-task-list-container js-comment timeline-comment timeline-comment--caret ml-n3 unminimized-comment">
        <div class="timeline-comment-header clearfix d-flex" data-test-selector="4081291-comment-header">
  <div class="timeline-comment-actions flex-shrink-0">

    <details class="details-overlay details-reset position-relative d-inline-block">
      <summary data-view-component="true" class="timeline-comment-action Link--secondary btn-link">  <svg aria-label="Show options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
      <details-menu class="dropdown-menu dropdown-menu-sw show-more-popover color-fg-default" style="width:185px" src="" preload>
          <clipboard-copy aria-label="Copy link" for="gistcomment-4081291-permalink" role="menuitem" data-view-component="true" class="dropdown-item btn-link">
    
            Copy link

</clipboard-copy>      </details-menu>
    </details>
  </div>

  <div class="d-none d-sm-flex">
    

    

  </div>

  <h3 class="f5 text-normal" style="flex: 1 1 auto">


    

    <strong class="css-truncate">
        <a class="author Link--primary text-bold css-truncate-target " data-hovercard-type="user" data-hovercard-url="/users/sklyar/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/sklyar">sklyar</a>
  

    </strong>

    

    commented 

      <a href="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc?permalink_comment_id=4081291#gistcomment-4081291" id="gistcomment-4081291-permalink" class="Link--secondary js-timestamp"><relative-time datetime="2022-03-01T08:53:51Z" class="no-wrap">Mar 1, 2022</relative-time></a>

    
  </h3>
</div>


        <div class="edit-comment-hide">
  <task-lists disabled sortable>
    <div class="comment-body markdown-body js-comment-body soft-wrap user-select-contain d-block">
      <blockquote>
<p dir="auto"><a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/r0hack/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/r0hack">@r0hack</a><br>
"Куки в микросерисной архитектуре использовать не вариант. Напомню зачастую микросервисы раскиданы на разных доменах, а куки не поддерживают кросc-доменные запросы" - А как же CORS ?</p>
</blockquote>
<p dir="auto">Обычно есть API Gateway, который распределяет запросы между внутренними сервисами.</p>
    </div>
  </task-lists>
  
</div>


        <form class="js-comment-update" data-type="json" action="https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/4081291" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" autocomplete="off" /><input type="hidden" name="authenticity_token" value="cuFsuxhvHpIGqH8MxYbxGgu7N2DJKVPHaDmsvX8NinrYiInIud8ZoisgH1Y5kme6IV7qikJZA4FKMOAxImVUCw" autocomplete="off" />
      <include-fragment
  
  loading="lazy"
  src="/zmts/802dc9c3510d79fd40f9dc38a12bccfc/comments/4081291/edit_form?textarea_id=gistcomment-4081291-body&amp;comment_context=discussion"
  class="previewable-comment-form js-comment-edit-form-deferred-include-fragment"
>
  <p class="text-center mt-3" data-hide-on-error>
    <svg aria-label="Loading..." style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
  </p>
  <p class="ml-1 mb-2 mt-2" data-show-on-error hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    Sorry, something went wrong.
  </p>
</include-fragment>

</form>
    
</div>

  </div>


<!-- Rendered timeline since 2022-03-01 02:53:55 -->
<div id="partial-timeline-marker"
      class="js-timeline-marker js-updatable-content"
      data-last-modified="Tue, 01 Mar 2022 10:53:55 GMT"
      >
</div>

          </div>

          <div class="discussion-timeline-actions">
              <div data-view-component="true" class="flash flash-warn mt-3">
  
  
    <a rel="nofollow" class="btn btn-primary" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;signed out comment&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="c80048ce859f82762dfb76a12b8dca7fad936783c5786ac04219f83fb78d4d95" href="https://gist.github.com/join?source=comment-gist">Sign up for free</a>
    <strong>to join this conversation on GitHub</strong>.
    Already have an account?
    <a rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;signed out comment&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="84ce088832dd28f5469a5ff46b0e35aebd14ae4e14de8452a0092eabed97002b" data-test-selector="comments-sign-in-link" href="https://gist.github.com/login?return_to=https%3A%2F%2Fgist.github.com%2Fzmts%2F802dc9c3510d79fd40f9dc38a12bccfc">Sign in to comment</a>


  
</div>
          </div>
        </div>
      </div>
</div>
  </div>
</div><!-- /.container -->

    </main>
  </div>

  </div>

          <footer class="footer width-full container-lg p-responsive" role="contentinfo">


  <div class="position-relative d-flex flex-items-center pb-2 f6 color-fg-muted border-top color-border-muted flex-column-reverse flex-lg-row flex-wrap flex-lg-nowrap mt-6 pt-6">
    <ul class="list-style-none d-flex flex-wrap col-0 col-lg-2 flex-justify-start flex-lg-justify-between mb-2 mb-lg-0">
      <li class="mt-2 mt-lg-0 d-flex flex-items-center">
        <a aria-label="Homepage" title="GitHub" class="footer-octicon mr-2" href="https://github.com">
          <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>        <span>
        &copy; 2022 GitHub, Inc.
        </span>
      </li>
    </ul>
    <ul class="list-style-none d-flex flex-wrap col-12 col-lg-8 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        <li class="mr-3 mr-lg-0"><a href="https://docs.github.com/en/github/site-policy/github-terms-of-service" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to terms&quot;,&quot;label&quot;:&quot;text:terms&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="dff61cd237e91dd455debd79f304d446e7410555fc33e25321ae3a8b7c1a14a6" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to terms&quot;,&quot;label&quot;:&quot;text:terms&quot;}">Terms</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://docs.github.com/en/github/site-policy/github-privacy-statement" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="9d8110fef79688f5dc9e97e4dbb02d43047a9341bba2e9e8b9d0737c2871ae23" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;}">Privacy</a></li>
        <li class="mr-3 mr-lg-0"><a data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to security&quot;,&quot;label&quot;:&quot;text:security&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f451737334a81fbe2d2eecd942045f483b80eb28666c1cce75cda164f1fde9cd" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to security&quot;,&quot;label&quot;:&quot;text:security&quot;}" href="https://github.com/security">Security</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://www.githubstatus.com/" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to status&quot;,&quot;label&quot;:&quot;text:status&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="6008c3fa8f8a053f541047c4a73da9cdfc8707438a8e8e1d909c3f84ddb69668" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to status&quot;,&quot;label&quot;:&quot;text:status&quot;}">Status</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to help, text:Docs" href="https://docs.github.com">Docs</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://support.github.com?tags=dotcom-footer" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="2802d94ba1ba1f8f0d8b82a82edb593cf0aee3e4b1cee0ea68eaf2c69e0e209d" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;}">Contact GitHub</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Pricing&quot;,&quot;label&quot;:&quot;text:Pricing&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="0638b3216541788fc6453a8256d75240b6325fff9dd13add25fb9d598f568287" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Pricing&quot;,&quot;label&quot;:&quot;text:Pricing&quot;}">Pricing</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://docs.github.com" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to api&quot;,&quot;label&quot;:&quot;text:api&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="1198bff1004dbbe6e2125cff97b9920ba0942028f5f25d7996b6c21a9e42a0d9" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to api&quot;,&quot;label&quot;:&quot;text:api&quot;}">API</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://services.github.com" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to training&quot;,&quot;label&quot;:&quot;text:training&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f85c2b8d68712ce3f43993c5471363e05319bb29e9286a16d9a8aa914d15135c" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to training&quot;,&quot;label&quot;:&quot;text:training&quot;}">Training</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.blog" data-hydro-click="{&quot;event_type&quot;:&quot;analytics.event&quot;,&quot;payload&quot;:{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to blog&quot;,&quot;label&quot;:&quot;text:blog&quot;,&quot;originating_url&quot;:&quot;https://gist.github.com/zmts/802dc9c3510d79fd40f9dc38a12bccfc&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="cd210aebbe91e22367ae3fb9a5d989594ca7d22b02252589625438ff52f26221" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to blog&quot;,&quot;label&quot;:&quot;text:blog&quot;}">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 color-fg-muted"></span>
  </div>
</footer>




  <div id="ajax-error-message" class="ajax-error-message flash flash-error" hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
    </button>
    You can’t perform that action at this time.
  </div>

  <div class="js-stale-session-flash flash flash-warn flash-banner" hidden
    >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a href="802dc9c3510d79fd40f9dc38a12bccfc.html">Reload</a> to refresh your session.</span>
    <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a href="802dc9c3510d79fd40f9dc38a12bccfc.html">Reload</a> to refresh your session.</span>
  </div>
    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box color-shadow-large" style="width:360px;">
  </div>
</div>

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>




  </body>
</html>

