<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <meta name="referrer" content="unsafe-url">
  <title>HTTP-заголовки для ответственного разработчика / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.92df6f6d.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.2822d469ec31a56409ac330bbcf7fcbf.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/vk\/blog\/450816\/"},"headline":"HTTP-заголовки для ответственного разработчика","datePublished":"2019-05-10T20:42:25+03:00","dateModified":"2019-06-10T12:54:09+03:00","author":{"@type":"Person","name":"Макс"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Сегодня быть онлайн &mdash; это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со...","url":"https:\/\/habr.com\/ru\/company\/vk\/blog\/450816\/#post-content-body","about":["c_vk","h_hi","h_webdev","h_client_side_optimization","h_html5","f_develop"],"image":["https:\/\/habrastorage.org\/webt\/9l\/a1\/ll\/9la1llcyspwwfylwvmocsfvgnfe.jpeg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/e57\/f6a\/ef6\/e57f6aef63f9ad95c2954539290a7caa.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/281\/7f5\/713\/2817f571357c4b488bd6dbcbbdec6ef0.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/6d4\/e19\/246\/6d4e192464d326a3722530d617cbaf78.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/6d5\/681\/a2b\/6d5681a2b412489aae991170e16428e8.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/9ef\/ce2\/077\/9efce2077a81469bfaa8840b8bb07b26.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/ec1\/fa5\/15f\/ec1fa515f2eaddf32e3f1ba8e3d9576c.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/fa8\/ada\/e56\/fa8adae56924a72210fc2009641eb8cb.jpg"]}</script>
  <script src="https://www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.64.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="HTTP-заголовки для ответственного разработчика" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="HTTP-заголовки для ответственного разработчика" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="HTTP-заголовки для ответственного разработчика" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/450816/feb08d9560977d5489e8320ae19dbcec/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/450816/feb08d9560977d5489e8320ae19dbcec/" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/450816/feb08d9560977d5489e8320ae19dbcec/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/450816/feb08d9560977d5489e8320ae19dbcec/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/450816/feb08d9560977d5489e8320ae19dbcec/?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="450816" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-10T17:42:25.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/company/vk/blog/450816/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="http, http-заголовки, никто не читает теги">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/450816/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="index.html.1.27.html" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/450816/feb08d9560977d5489e8320ae19dbcec/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="https://habr.com/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="https://habr.com/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="https://habr.com/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="https://habr.com/ru/flows/all" class="tm-main-menu__item">
        Все потоки
      </a> <a href="https://habr.com/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="https://habr.com/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="https://habr.com/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="https://habr.com/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="https://habr.com/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="https://habr.com/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="https://habr.com/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="vk" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><div class="tm-company-card__branding tm-company-article__branding tm-company-card__branding_loading"><div class="tm-company-card__branding-placeholder"><!----></div> <a href="https://vk.com/vkteam"><img src="https://habrastorage.org/getpro/habr/branding/174/2c4/3a5/1742c43a5b504987a0fadf577a0bd4de.png" width="100%" class="tm-company-card__branding-image"></a></div></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a href="https://habr.com/ru/company/vk/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="https://habrastorage.org/getpro/habr/company/9ed/c74/6b4/9edc746b484c805ecad1f941b5f7068a.png" width="48" class="tm-entity-image__pic"></div></a> <a href="https://career.habr.com/companies/vk" rel="noopener" target="_blank" class="tm-grade tm-company-card__rating"><div class="tm-rating"><div class="tm-rating__header"><svg height="24" width="24" class="tm-svg-img tm-svg-grade__icon"><title>Оценка компании на Хабр Карьере</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#grade"></use></svg> <div class="tm-rating__counter tm-rating__counter_variant-grade">4.35</div></div> <div class="tm-rating__text tm-rating__text_variant-grade">
    Оценка
  </div></div></a> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">266.34</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div> <!----></div> <div class="tm-company-card__info"><a href="https://habr.com/ru/company/vk/profile/" class="tm-company-card__name">
      VK
    </a> <div class="tm-company-card__description">Технологии, которые объединяют</div></div></div> <!----></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="https://habr.com/ru/users/AloneCoder/" title="AloneCoder" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" src="https://habrastorage.org/r/w32/getpro/habr/avatars/741/45e/bea/74145ebeab7f222cce402aed2683f9d7.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/AloneCoder/" class="tm-user-info__username">
      AloneCoder
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-10T17:42:25.000Z" title="2019-05-10, 20:42">10  мая  2019 в 20:42</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>HTTP-заголовки для ответственного разработчика</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/company/vk/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании VK</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/hi/" class="tm-article-snippet__hubs-item-link"><span>Высокая производительность</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/webdev/" class="tm-article-snippet__hubs-item-link"><span>Разработка веб-сайтов</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/client_side_optimization/" class="tm-article-snippet__hubs-item-link"><span>Клиентская оптимизация</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/html5/" class="tm-article-snippet__hubs-item-link"><span>HTML</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label tm-article-snippet__label_variant-translation"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://www.twilio.com/blog/a-http-headers-for-the-responsible-developer" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Stefan Judis
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><div style="text-align:center;"><img src="https://habrastorage.org/r/w780q1/webt/9l/a1/ll/9la1llcyspwwfylwvmocsfvgnfe.jpeg" data-src="https://habrastorage.org/webt/9l/a1/ll/9la1llcyspwwfylwvmocsfvgnfe.jpeg" data-blurred="true"/></div><br/>
Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она соединяет людей. Я сам пользуюсь интернетом уже 20 лет, и мои отношения с ним изменились восемь лет назад, когда я стал веб-разработчиком.<br/>
<br/>
Разработчики соединяют людей. <br/>
Разработчики помогают людям. <br/>
Разработчики дают людям возможности.<br/>
<br/>
Разработчики могут создать сеть для всех, но эту способность необходимо использовать ответственно. В конце концов, важно создавать вещи, которые помогают людям и расширяют их возможности. В этой статье я хочу рассказать о том, как HTTP-заголовки могут помочь вам создавать лучшие продукты для лучшей работы всех пользователей в интернете.<br/>
<a name="habracut"></a><br/>
<h2>HTTP — протокол передачи гипертекста</h2><br/>
Давайте сначала поговорим о HTTP. HTTP — это протокол, используемый компьютерами для запроса и отправки данных по интернету.<br/>
<br/>
Когда браузер запрашивает ресурс с сервера, он использует HTTP. Этот запрос включает набор пару ключ-значение, содержащих такую информацию, как версия браузера или форматы файлов, которые он понимает. Эти пары называются заголовками запросов.<br/>
<br/>
Сервер отвечает запрашиваемым ресурсом, но также отправляет заголовки ответа, содержащие информацию о ресурсе или самом сервере.<br/>
<br/>
<pre><code class="plaintext">Request:
GET https://the-responsible.dev/
Accept: text/html,application/xhtml+xml,application/xml
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8,de;q=0.7
...

Response:
Connection: keep-alive
Content-Type: text/html; charset=utf-8
Date: Mon, 11 Mar 2019 12:59:38 GMT
...
Response Body</code></pre><br/>
Сегодня HTTP является основой интернета и предлагает множество способов оптимизировать работу пользователей. Давайте посмотрим, как можно использовать заголовки HTTP для создания безопасной и доступной сети.<br/>
<br/>
<h2>Сеть должна быть безопасной</h2><br/>
Раньше я никогда не чувствовал опасности, когда искал что-то в интернете. Но чем больше я узнавал о всемирной паутине, тем больше я беспокоился. Вы можете почитать, как <a href="https://shoptalkshow.com/episodes/special-one-one-hacker/">хакеры меняют глобальные CDN-библиотеки</a>, <a href="https://thenextweb.com/contributors/2018/03/10/protect-website-cryptojacking-attacks/">случайные сайты майнят криптовалюту в браузере своих посетителей, </a>а также о том, как <a href="http://blog.npmjs.org/post/180565383195/details-about-the-event-stream-incident">с помощью социальной инженерии люди регулярно получают доступ к успешным проектам с открытым исходным кодом</a>. Это нехорошо. Но почему вас должно это волновать?<br/>
<br/>
Если вы сегодня разрабатываете для веба, то не просто пишете код. Сегодня в веб-разработке над одним сайтом работает много людей. Возможно, вы также используете много открытого исходного кода. Кроме того, для маркетинговых целей вы можете включить несколько сторонних скриптов. Сотни людей предоставляют код, запущенный на вашем сайте. И разработчикам приходится работать в подобных реалиях.<br/>
<br/>
Можно ли доверять всем этим людям и всему исходному коду?<br/>
<br/>
Я не думаю, что следует доверять какому-либо стороннему коду. К счастью, есть способы защитить свой сайт и сделать его более безопасным. Кроме того, такие инструменты, как <a href="https://www.twilio.com/blog/securing-your-express-app-html">helmet могут быть полезны, например, для экспресс-приложений</a>.<br/>
<br/>
<i>Если вы хотите проанализировать, сколько стороннего кода запускается на вашем сайте, можно посмотреть в панели разработчика или попробовать <a href="http://requestmap.webperf.tools/">Request Map Generator.</a></i><br/>
<br/>
<h2>HTTPS и HSTS — убедитесь, что ваше соединение безопасно</h2><br/>
Защищённое соединение является основой безопасного интернета. Без зашифрованных запросов, <a href="https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https">проходящих через</a> <a href="https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https">HTTPS</a>, нельзя быть уверенным, что между вашим сайтом и посетителями больше никого нет. Человек может быстро настроить общедоступную сеть Wi-Fi и совершить <a href="https://www.troyhunt.com/the-beginners-guide-to-breaking-website/">атаку «человек посередине»</a> на любого, кто <a href="https://www.troyhunt.com/the-beginners-guide-to-breaking-website/">подключится к этой сети</a>. Как часто вы используете общедоступный Wi-Fi? Кроме того, как часто вы проверяете, заслуживает ли он доверия?<br/>
<br/>
К счастью, сегодня <a href="https://letsencrypt.org/">сертификаты TLS бесплатны</a>; HTTPS стал стандартом, и браузеры предоставляют передовые функции только для защищенных соединений, и даже отмечают веб-сайты, не относящиеся к HTTPS, как небезопасные, что способствует внедрению этого протокола. К сожалению, мы не всегда в безопасности, когда находимся в интернете. Когда кто-то хочет открыть сайт, он не вводит протокол в адресную строку (и почему вообще должен?). Это приводит к созданию незашифрованного HTTP-запроса. Безопасно работающие сайты перенаправляют пользователя на HTTPS. Но что если кто-то перехватит первый незащищенный запрос?<br/>
<br/>
Вы можете использовать заголовки ответа <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security">HSTS</a> (HTTP Strict Transport Security), чтобы сообщить браузерам, что ваш сайт работает только через HTTPS. <br/>
<br/>
<pre><code class="plaintext">Strict-Transport-Security: max-age=1000; includeSubDomains; preload</code></pre><br/>
Этот заголовок говорит браузеру, что вы не хотите использовать HTTP-запросы, и тогда он автоматически применит те же запросы к такому же источнику с защищенным соединением. Если вы попытаетесь открыть такой же URL через HTTP, браузер снова будет использовать HTTPS и перенаправит пользователя.<br/>
<br/>
Вы можете настроить, как долго этот параметр должен оставаться активным (<code>max-age</code> в секундах), если захотите потом снова использовать HTTP. Если вы хотите включить поддомены, то можете настроить это с помощью <code>includeSubDomains</code>.<br/>
<br/>
Если вы хотите сделать всё возможное, чтобы браузер никогда не запрашивал ваш сайт по HTTP, можете также задать указатель <code>preload</code> и <a href="https://hstspreload.org/">отправить ваш сайт</a> в глобальный список. Если конфигурация HSTS вашего сайта соответствует минимальному <code>max-age</code> в один год и активна для поддоменов, он может быть включен во внутренний список браузер для сайтов, работающих только через HTTPS.<br/>
<br/>
Задумывались ли вы когда-нибудь, почему вы больше не можете использовать в своем браузере через HTTP локальные переменные среды, такие как <code>my-site.dev</code>? Причина именно в этом внутреннем списке — <code>.dev</code> автоматически включаются в этот список, поскольку в феврале 2019 года он стал настоящим доменом верхнего уровня.<br/>
<br/>
Заголовок HSTS не только делает ваш сайт немного безопаснее, но и ускоряет его работу. Представьте себе, что кто-то заходит по медленному мобильному соединению. Если первый запрос сделан через HTTP только для получения перенаправления, то пользователь может несколько секунд ничего не видеть на экране. А с помощью HSTS вы можете сэкономить эти секунды, и браузер автоматически будет использовать HTTPS.<br/>
<br/>
<h2>CSP — четко укажите, что разрешено на вашем сайте</h2><br/>
Теперь, когда ваш сайт работает через защищенное соединение, вы можете столкнуться с проблемой, когда браузеры начинают блокировать запросы, которые выходят на незащищенный адрес из-за политик смешанного контента. Заголовок <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy (CSP)</a> предлагает отличный способ обработки таких ситуаций. Вы можете установить свой набор правил CSP с помощью мета-элементов в предоставляемом HTML или через HTTP-заголовки.<br/>
<br/>
<pre><code class="plaintext">Content-Security-Policy: upgrade-insecure-requests</code></pre><br/>
Указатель <code>upgrade-insecure-requests</code> заставляет браузер волшебным образом переделать все HTTP-запросы в HTTPS-запросы.<br/>
<br/>
Однако CSP касается не только используемого протокола. Он предлагает детальные способы определения того, какие ресурсы и действия разрешены на вашем сайте. Вы можете, например, указать, какие скрипты должны выполняться или откуда загружать изображения. Если что-то не разрешено, браузер блокирует это действие и предотвращает потенциальные атаки на ваш сайт.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/e57/f6a/ef6/e57f6aef63f9ad95c2954539290a7caa.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/e57/f6a/ef6/e57f6aef63f9ad95c2954539290a7caa.jpg" data-blurred="true"/><br/>
<br/>
На момент написания статьи для CSP существовало 24 различных варианта конфигурации. Они варьируются от скриптов через таблицы стилей вплоть до сервис-воркеров.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/281/7f5/713/2817f571357c4b488bd6dbcbbdec6ef0.png" data-src="https://habrastorage.org/getpro/habr/post_images/281/7f5/713/2817f571357c4b488bd6dbcbbdec6ef0.png"/><br/>
<br/>
<i>Вы можете найти полный обзор на <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">MDN.</a></i><br/>
<br/>
Используя CSP, вы можете указать, что должен включать ваш сайт, а что нет.<br/>
<br/>
<pre><code class="plaintext">Content-Security-Policy: default-src 'self'; script-src 'self' just-comments.com www.google-analytics.com production-assets.codepen.io storage.googleapis.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: images.contentful.com images.ctfassets.net www.gravatar.com www.google-analytics.com just-comments.com; font-src 'self' data:; connect-src 'self' cdn.contentful.com images.contentful.com videos.contentful.com images.ctfassets.net videos.ctfassets.net service.just-comments.com www.google-analytics.com; media-src 'self' videos.contentful.com videos.ctfassets.net; object-src 'self'; frame-src codepen.io; frame-ancestors 'self'; worker-src 'self'; block-all-mixed-content; manifest-src 'self' 'self'; disown-opener; prefetch-src 'self'</code></pre><br/>
Вышеприведенный набор правил предназначен для моего личного сайта, и если вы считаете, что этот пример определения CSP очень сложный, то вы абсолютно правы. Я внедрил у себя этот набор с третьей попытки, развёртывая и снова откатывая, потому что он несколько раз ломал сайт. Но есть способ получше.<br/>
<br/>
Чтобы избежать взлома вашего сайта, CSP также предоставляет режим только для отчетов.<br/>
<br/>
<pre><code class="plaintext">Content-Security-Policy-Report-Only: default-src 'self'; ... report-uri https://stefanjudis.report-uri.com/r/d/csp/reportOnly</code></pre><br/>
Используя режим <code>Content-Security-Policy-Report-Only</code>, браузеры просто записывают ресурсы, которые были бы заблокированы, вместо их фактической блокировки. Этот механизм отчетности позволяет проверить и настроить ваш набор правил.<br/>
<br/>
Оба заголовка, <code>Content-Security-Policy</code> и <code>Content-Security-Policy-Report-Only</code>, также предлагают способ определения конечной точки для отправки сообщения о нарушении и регистрации информации (<code>report-uri</code>). Вы можете настроить сервер регистрации и использовать отправленную информацию журнала для настройки правил CSP, пока он не будет готов к отправке.<br/>
<br/>
Рекомендуемый процесс выглядит так: сначала запустите CSP в режиме отчета, проанализируйте входящие нарушения с реальным трафиком, и только тогда, когда не будет обнаружено нарушений ваших контролируемых ресурсов, включите его.<br/>
<br/>
<i>Если вы ищете сервис, который мог бы помочь вам справиться с этими журналами, то рекомендую <a href="https://report-uri.com/">Report URI</a>, он мне очень помогает.</i><br/>
<br/>
<h2>Общее внедрение CSP</h2><br/>
<a href="https://caniuse.com/#search=csp">Сегодня браузеры хорошо поддерживают</a> CSP, но, к сожалению, не многие сайты используют её. Чтобы посмотреть, сколько сайтов отдают контент с помощью CSP, я направил запрос в <a href="https://httparchive.org/">HTTParchive</a> и обнаружил, что только 6 % просмотренных сайтов используют эту политику. Я думаю, что мы можем сделать интернет более безопасным и защитить наших <a href="https://thenextweb.com/contributors/2018/03/10/protect-website-cryptojacking-attacks/">пользователей</a> от <a href="https://thenextweb.com/contributors/2018/03/10/protect-website-cryptojacking-attacks/">невольного</a> <a href="https://thenextweb.com/contributors/2018/03/10/protect-website-cryptojacking-attacks/">майнинга криптовалют</a>.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/6d4/e19/246/6d4e192464d326a3722530d617cbaf78.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/6d4/e19/246/6d4e192464d326a3722530d617cbaf78.jpg" data-blurred="true"/><br/>
<br/>
<h2>Сеть должна быть доступной</h2><br/>
Пока я пишу эту статью, я сижу перед относительно новым MacBook, используя быстрое домашнее Wi-Fi-подключение. Разработчики часто забывают, что такая ситуация не является стандартной для большинства наших пользователей. Люди, посещающие наши сайты, пользуются старыми телефонами и сомнительными соединениями. Тяжелые и перегруженные сайты с сотнями запросов оставляют им плохое впечатление.<br/>
<br/>
И дело не только во впечатлении. <a href="https://whatdoesmysitecost.com/">Люди платят различные суммы за трафик в зависимости от места проживания</a>. Представьте себе, вы создаете сайт для больницы. Информация на нём может иметь решающее значение и спасти жизни людей. Если страница на сайте больницы имеет размер 5 Мб, то она не только будет медленно работать, но и может оказаться слишком дорогой для тех, кто больше всего в ней нуждается. Цена пяти мегабайтов трафика в Европе или США ничтожна по сравнению с ценой в Африке. Разработчики несут ответственность за доступность веб-страниц для всех. Эта ответственность включает в себя предоставление правильных ресурсов, выбор правильных инструментов (действительно ли вам нужен JS-фреймворк для лендинга?) и недопущение запросов.<br/>
<br/>
<h2>Cache-Control — избегайте запросов на неизменные ресурсы</h2><br/>
Сегодня сайт может содержать сотни ресурсов, от CSS до скриптов и изображений. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control"><code>Используя заголовок Cache-Control</code></a>, разработчики могут указать, как долго ресурс должен считаться «свежим» и может отдавать из кэша браузера.<br/>
<br/>
<pre><code class="plaintext">Cache-Control: max-age=30, public</code></pre><br/>
При правильной настройке <code>Cache-Control</code> передача данных сохраняется, и файлы могут использоваться из кэша браузера в течение определенного количества секунд (<code>max-age</code>). Браузеры должны повторно проверять кэшированные ресурсы по истечении этого периода времени.<br/>
<br/>
Однако, если посетители обновляют страницу, <a href="https://code.fb.com/web/this-browser-tweak-saved-60-of-requests-to-facebook/">браузеры всё равно повторно проверяют её, включая ссылки на ресурсы</a>, чтобы убедиться, что кэшированные данные всё ещё действительны. Серверы отвечают заголовком 304, сигнализируя, что кэшированные данные пока действительны, или заголовком 200 при передаче обновленных данных. Это позволяет сохранить переданные данные, но не обязательно сделанные запросы.<br/>
<br/>
Именно здесь вступает в игру функция <code>immutable</code>.<br/>
<br/>
<h2>Immutable — никогда не запрашивать ресурс дважды</h2><br/>
В современных frontend-приложениях файлы CSS и скриптов обычно имеют уникальные имена, например, <code>styles.123abc.css</code>. Имя этого файла зависит от содержимого. И при изменении содержимого файлов меняются и их имена.<br/>
<br/>
Эти уникальные файлы потенциально могут храниться в кэше вечно, включая ситуацию, когда пользователь обновляет страницу. <a href="https://hacks.mozilla.org/2017/01/using-immutable-caching-to-speed-up-the-web/"><code>Функция immutable</code></a> может запретить браузеру повторную проверку ресурса в определенный промежуток времени. Это очень важно для объектов с контрольными суммами, и помогает избежать повторных проверочных запросов.<br/>
<br/>
<pre><code class="plaintext">Cache-Control: max-age=31536000, public, immutable</code></pre><br/>
Реализовать оптимальное кэширование очень сложно, а особенно браузерное кэширование не слишком интуитивно понятно, поскольку имеет различные конфигурации. Я рекомендую ознакомиться со следующими материалами:<br/>
<br/>
<ul>
<li>Гарри Робертс написал <a href="https://csswizardry.com/2019/03/cache-control-for-civilians/">отличное руководство по управлению кэшем и его настройкам</a>.<br/>
</li>
<li>Джек Арчибальд дал советы по <a href="https://jakearchibald.com/2016/caching-best-practices/">лучшим методикам кэширования</a> с иллюстрациями.<br/>
</li>
<li>Илья Григорик предложил <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching">отличную технологическую схему для кэширования заголовков</a>. <br/>
</li>
</ul><br/>
<h2>Accept-Encoding — максимальное сжатие (до минимума)</h2><br/>
С помощью <code>Cache control</code> мы можем сохранять запросы и уменьшать объем данных, которые многократно передаются по сети. Мы можем не только экономить запросы, но и сокращать то, что передается.<br/>
<br/>
Отдавая ресурсы, разработчики должны позаботиться о том, чтобы отправлять как можно меньше данных. Для текстовых ресурсов, таких как HTML, CSS и JavaScript, сжатие играет важную роль в экономии передаваемых данных.<br/>
<br/>
Самым популярным методом сжатия сегодня является GZIP. Серверам хватает мощности для сжатия текстовых файлов на лету и предоставления сжатых данных при запросе. Но GZIP уже не самый лучший вариант.<br/>
<br/>
Если вы взглянете на создаваемые браузером запросы текстовых файлов, таких как HTML, CSS и JavaScript, и проанализируете заголовки, то найдете среди них <code>accept-encoding</code>.<br/>
<br/>
<pre><code class="plaintext">Accept-Encoding: gzip, deflate, br</code></pre><br/>
Этот заголовок сообщает серверу, какие алгоритмы сжатия он понимает. Малоизвестный параметр <code>br</code> обозначает <a href="https://github.com/google/brotli">сжатие Brotli </a> и используется на сайтах с высокой посещаемостью, таких как Google и Facebook. Для использования Brotli ваш сайт должен работать через HTTPS.<br/>
<br/>
Этот алгоритм сжатия был создан с учетом небольшого размера файлов. Если вы попробуете сжать файл вручную на вашем локальном устройстве, то обнаружите, что Brotli действительно сжимает лучше, чем GZIP.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/6d5/681/a2b/6d5681a2b412489aae991170e16428e8.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/6d5/681/a2b/6d5681a2b412489aae991170e16428e8.jpg" data-blurred="true"/><br/>
<br/>
Вы, возможно, слышали, что сжатие Brotli выполняется медленнее. Причина в том, что Brotli имеет 11 режимов сжатия, и по умолчанию выбирается тот, при котором получаются файлы наименьшего размера, что удлиняет процедуру. GZIP, с другой стороны, имеет 9 режимов, и по умолчанию выбирается тот, при котором учитывается как скорость сжатия, так и размера файла. В результате режим Brotli по умолчанию непригоден для сжатия «на лету», но если изменить режим, то можно добиться сжатия небольших файлов с той же скоростью, что и у GZIP. Вы можете использовать его для сжатия на лету и рассматривать как потенциальную замену GZIP для поддерживающих браузеров.<br/>
<br/>
Кроме того, если вы хотите максимально экономить файлы, то можете забыть о динамическом сжатии и предварительно сгенерировать <a href="https://www.telerik.com/blogs/maximize-compression-with-zopfli">оптимизированные GZIP-файлы с помощью файлов zopfli</a> и Brotli для их статического обслуживания.<br/>
<br/>
<i>Если вы хотите прочитать больше о сжатии Brotli и его сравнении с GZIP, сотрудники компании Akamai <a href="https://blogs.akamai.com/2016/02/understanding-brotlis-potential.html">провели обширное исследование на эту тему</a></i>.<br/>
<br/>
<h2>Accept и Accept-CH — обслуживайте индивидуальные ресурсы для пользователя</h2><br/>
Оптимизация текстовых ресурсов очень важна для экономии килобайтов, но как насчёт более тяжелых ресурсов, таких как изображения, чтобы сэкономить ещё больше объёма данных?<br/>
<br/>
<h4>Accept — обслуживание изображений правильного формата</h4><br/>
Браузеры не только показывают нам, какие алгоритмы сжатия они понимают. Когда браузер запрашивает изображение, он также предоставляет информацию о том, какие форматы файлов он понимает.<br/>
<br/>
<pre><code class="plaintext">Accept: image/webp, image/apng, image/*,*/*;q=0.8</code></pre><br/>
Несколько лет велась борьба вокруг нового формата изображений, но выиграл webp. <a href="https://developers.google.com/speed/webp/">Webp — это формат изображений, изобретенный Google</a>, и <a href="https://caniuse.com/#feat=webp">поддержка</a> этого формата сейчас очень актуальна.<br/>
<br/>
Используя этот заголовок запроса, разработчики могут передавать изображение <code>webp</code>, даже если браузер запросил <code>image.jpg</code>, в результате чего размер файла будет меньше. Дин Хьюм написал <a href="https://deanhume.com/service-workers-dynamic-responsive-images-using-webp-images/">хорошее руководство</a> о том, как это применять. Очень круто!<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/9ef/ce2/077/9efce2077a81469bfaa8840b8bb07b26.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/9ef/ce2/077/9efce2077a81469bfaa8840b8bb07b26.jpg" data-blurred="true"/><br/>
<br/>
<h4>Accept-CH — обслуживание изображений правильного размера</h4><br/>
Вы также можете включить <a href="https://developers.google.com/web/updates/2015/09/automating-resource-selection-with-client-hints">клиентские подсказки</a> для поддерживающих эту функцию браузеров. Клиентские подсказки — это способ сказать браузерам, чтобы они посылали дополнительную информацию о ширине области просмотра, ширине изображения и даже сетевых условиях, таких как RTT (время на передачу и подтверждение) и типе соединения, например <code>2g</code>.<br/>
<br/>
Вы можете активировать подсказки, добавив мета-элемент:<br/>
<br/>
<pre><code class="plaintext">&lt;meta http-equiv="Accept-CH" content="Viewport-Width, Downlink">
&lt;meta http-equiv="Accept-CH-Lifetime" content="86400"></code></pre><br/>
Или задав заголовки в исходном запросе HTML:<br/>
<br/>
<pre><code class="plaintext">Accept-CH: Width, Viewport-Width
Accept-CH-Lifetime: 100</code></pre><br/>
В последующих запросах браузеры начнут посылать дополнительную информацию за определенный промежуток времени (<code>Accept-CH-Lifetime</code> в секундах), что может помочь разработчикам адаптировать изображения к условиям пользователя, не меняя HTML.<br/>
<br/>
Например, для получения дополнительной информации, такой как ширина изображения на стороне сервера, вы можете снабдить свои изображения атрибутом <code>sizes</code>, чтобы дать браузеру дополнительную информацию о том, как эти изображения будут выглядеть. <br/>
<br/>
<pre><code class="plaintext">&lt;!-- this images is laid over the full width | 100 viewport width -->
&lt;img class="w-100" src="/img/header.jpg" alt="" sizes="100vw"></code></pre><br/>
С полученным заголовком ответа <code>Accept-CH</code> и изображениями с атрибутом <code>sizes</code> браузеры будут включать заголовки <code>viewport-width</code> и <code>width</code> в запросы изображений, показывая вам, какое изображение подойдёт лучше всего.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/ec1/fa5/15f/ec1fa515f2eaddf32e3f1ba8e3d9576c.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/ec1/fa5/15f/ec1fa515f2eaddf32e3f1ba8e3d9576c.jpg" data-blurred="true"/><br/>
<br/>
Имея поддерживаемый формат и размеры изображения, вы можете отправлять адаптированные данные без необходимости записывать ненадежные элементы изображений и обращать внимание только на формат и размер файлов, как показано ниже.<br/>
<br/>
<pre><code class="plaintext">&lt;picturе>
  &lt;!-- serve WebP to Chrome, Edge, Firefox and Opera -->
  &lt;source
    media="(min-width: 50em)"
    sizes="50vw"
    srcset="/image/thing-200.webp 200w, /image/thing-400.webp 400w,
        /image/thing-800.webp 800w, /image/thing-1200.webp 1200w,
        /image/thing-1600.webp 1600w, /image/thing-2000.webp 2000w"
    type="image/webp">
  &lt;source
    sizes="(min-width: 30em) 100vw"
    srcset="/image/thing-crop-200.webp 200w, /image/thing-crop-400.webp 400w,
        /image/thing-crop-800.webp 800w, /image/thing-crop-1200.webp 1200w,
        /image/thing-crop-1600.webp 1600w, /image/thing-crop-2000.webp 2000w"
    type="image/webp">
 &lt;!-- serve JPEG to others -->
  &lt;sоurce
    media="(min-width: 50em)"
    sizes="50vw"
    srcset="/image/thing-200.jpg 200w, /image/thing-400.jpg 400w,
        /image/thing-800.jpg 800w, /image/thing-1200.jpg 1200w,
        /image/thing-1600.jpg 1600w, /image/thing-2000.jpg 2000w">
  &lt;sоurce
    sizes="(min-width: 30em) 100vw"
    srcset="/image/thing-crop-200.jpg 200w, /image/thing-crop-400.jpg 400w,
        /image/thing-crop-800.jpg 800w, /image/thing-crop-1200.jpg 1200w,
        /image/thing-crop-1600.jpg 1600w, /image/thing-crop-2000.jpg 2000w">
  &lt;!-- fallback for browsers that don't support picture -->
  &lt;img src="/image/thing.jpg" width="50%">
&lt;/picturе></code></pre><br/>
Если у вас есть доступ к ширине области просмотра (viewport) и размеру изображений, вы можете на своих серверах поставить логику изменения размера ресурсов во главу угла.<br/>
<br/>
Однако нужно учитывать, что не следует создавать изображения для любой ширины просто потому, что у вас есть точная ширина изображения. Отправка изображений для определенного диапазона размеров (<code>image-200</code>, <code>image-300</code>, <code>...</code>) помогает использовать CDN-кэширование и экономит время вычислений.<br/>
<br/>
Кроме того, с такими современными технологиями, как service worker’ы, вы даже можете перехватывать и изменять запросы прямо в клиенте, чтобы обслуживать лучшие файлы изображений. С включенными клиентскими подсказками service worker’ы получают доступ к информации о макетах, и в сочетании с API изображений, как, например, <a href="https://cloudinary.com/">Cloudinary,</a> вы можете настроить url изображения прямо в браузере для получения картинок надлежащего размера.<br/>
<br/>
<i>Если вы ищете более подробную информацию о клиентских подсказках, можете ознакомиться со статьями <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/client-hints/">Джереми Вагнера</a> или <a href="https://developers.google.com/web/updates/2015/09/automating-resource-selection-with-client-hints">Ильи Григорика</a> на эту тему.</i><br/>
<br/>
<h2>Сеть должна быть бережной</h2><br/>
Поскольку каждый из нас проводит в сети много часов в день, есть последний аспект, который я считаю очень важным — сеть должна быть бережной.<br/>
<br/>
<h4>Preload — сокращение времени ожидания</h4><br/>
Будучи разработчиками, мы ценим время наших пользователей. Никто не хочет терять время. Как уже говорилось в предыдущих главах, предоставление нужных данных играет большую роль в экономии времени и трафика. Речь идёт не только о том, какие запросы делаются, но и о сроках и порядке их выполнения.<br/>
<br/>
Приведу пример: если вы добавите на сайт таблицу стилей, браузеры не будут ничего показывать, пока она не загрузится. Пока на экране ничего не отображается, браузер продолжает анализировать HTML в поисках других ресурсов для запрашивания. После загрузки и парсинга таблицы стилей в ней могут оказаться ссылки на другие важные ресурсы, такие как шрифты, которые тоже могут быть запрошены. Этот процесс может увеличить время загрузки страницы для ваших посетителей.<br/>
<br/>
<a href="https://www.w3.org/TR/preload/">Используя Rel=preload</a> вы можете дать браузеру информацию о том, какие ресурсы будут запрошены в ближайшее время.<br/>
<br/>
Можете предварительно загрузить ресурсы через HTML-элементы:<br/>
<br/>
<pre><code class="plaintext">&lt;link rel="preload" href="/font.woff2" as="font" type="font/woff2" crossorigin="anonymous"></code></pre><br/>
Или заголовки:<br/>
<br/>
<pre><code class="plaintext">Link: &lt;/font.woff2>; rel=preload; as=font; no-push</code></pre><br/>
Таким образом, браузер получает заголовок или находит элемент ссылки, и немедленно запрашивает ресурсы, чтобы они уже находились в кэше, когда понадобятся. Этот процесс экономит время ваших посетителей.<br/>
<br/>
Для оптимальной предварительной загрузки ресурсов и понимания всех конфигураций я рекомендую обратить внимание на следующие материалы:<br/>
<br/>
<ul>
<li><a href="https://twitter.com/yoavweiss">Йоав Вайс</a> является экспертом по предварительной загрузке, он опубликовал <a href="https://www.smashingmagazine.com/2016/02/preload-what-is-it-good-for/">прекрасный материал</a> по этой теме.<br/>
</li>
<li><a href="https://twitter.com/addyosmani">Эдди Османи</a> подробно рассказал о preload и других инструментах, таких как prefetch и preconnect.<br/>
</li>
</ul><br/>
<h4>Feature-Policy — не раздражайте других</h4><br/>
Меньше всего я хочу видеть сайты, запрашивающие у меня разрешения без причины. Я могу лишь процитировать своего коллегу <a href="https://youtu.be/uo-UOvq3-0Y?t=1020">Фила Нэша</a> по этому поводу.<br/>
<br/>
<i>Не требуйте разрешение при загрузке страницы</i>. Разработчики должны относиться с уважением и не создавать сайты, раздражающие посетителей. Люди просто кликают на все окна с разрешениями. Если мы не используем их правильно, то сайты и разработчики теряют доверие, а новые блестящие функции — свою привлекательность.<br/>
<br/>
Но что, если ваш сайт обязательно должен включать много стороннего кода, и все эти скрипты запускают множество диалоговых окон с разрешением? Как убедиться, что все включённые скрипты ведут себя правильно?<br/>
<br/>
Именно здесь в игру вступает <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy">заголовок</a> Feature-Policy. С его помощью вы можете указать, какие функции разрешены, и ограничить всплывающие диалоговые окна с разрешениями, которые могут быть вызваны сторонним кодом, исполняемым на вашем сайте.<br/>
<br/>
<pre><code class="plaintext">Feature-Policy: vibrate 'none'; geolocation 'none'</code></pre><br/>
Вы можете настроить это поведение для сайта с помощью заголовка. Также можно задать этот заголовок для встроенного контента, например, плавающих фреймов, которые могут быть обязательными для интеграции со сторонними разработчиками.<br/>
<br/>
<pre><code class="plaintext">&lt;iframe allow="camera 'none'; microphone 'none'"></code></pre><br/>
На момент написания статьи заголовок <code>Feature-Policy</code> был, скорее, экспериментальным, но интересно посмотреть на его будущие возможности. В недалеком будущем разработчики смогут не только ограничивать себя и не допускать появления раздражающих диалоговых окон, но также блокировать неоптимизированные данные. Эти функции существенно улучшат работу пользователей.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/fa8/ada/e56/fa8adae56924a72210fc2009641eb8cb.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/fa8/ada/e56/fa8adae56924a72210fc2009641eb8cb.jpg" data-blurred="true"/><br/>
<br/>
<i>Вы можете найти полный обзор на <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy">MDN.</a></i><br/>
<br/>
Глядя на список выше, вы можете вспомнить о самом раздражающем моменте — push-уведомлениях. Оказалось, что применение <code>Feature-Policy</code> для push-уведомлений сложнее, чем ожидалось. Если вы хотите узнать больше, можете подписаться на соответствующую тему на <a href="https://github.com/w3c/webappsec-feature-policy/issues/243">GitHub.</a><br/>
<br/>
Благодаря feature policy можете быть уверены, что вы и сторонние ресурсы не превратите ваш сайт в <a href="https://2018.bloomca.me/">гонку за разрешениями</a>, которая, к сожалению, уже стала привычной для многих сайтов.<br/>
<br/>
<h2>Сеть должна быть для всех</h2><br/>
В этой статье я рассказал лишь о нескольких заголовках, которые могут помочь улучшить работу пользователей. Если хотите увидеть почти полный обзор заголовков и их возможностей, я рекомендую посмотреть презентацию <a href="https://mobile.twitter.com/derSchepp">Кристиана Шефера</a><a href="https://schepp.github.io/HTTP-headers"> «HTTP-заголовки — скрытые чемпионы»</a>.<br/>
<br/>
Я знаю, что создание отличного сайта сегодня — очень сложная задача. Разработчики должны учитывать дизайн, устройства, фреймворки, и да… заголовки тоже играют определённую роль. Надеюсь, эта статья даст вам некоторые идеи, и вы будете учитывать безопасность, доступность и уважительность в ваших следующих веб-проектах, потому что это именно те факторы, которые делают сеть по-настоящему отличным местом для всех.</div></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhttp%5D" class="tm-tags-list__link">http</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhttp-%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8%5D" class="tm-tags-list__link">http-заголовки</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BD%D0%B8%D0%BA%D1%82%D0%BE%20%D0%BD%D0%B5%20%D1%87%D0%B8%D1%82%D0%B0%D0%B5%D1%82%20%D1%82%D0%B5%D0%B3%D0%B8%5D" class="tm-tags-list__link">никто не читает теги</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/company/vk/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании VK
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/hi/" class="tm-hubs-list__link">
    Высокая производительность
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/webdev/" class="tm-hubs-list__link">
    Разработка веб-сайтов
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/client_side_optimization/" class="tm-hubs-list__link">
    Клиентская оптимизация
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/html5/" class="tm-hubs-list__link">
    HTML
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 92: ↑90 и ↓2</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-rating"></use></svg> <span title="Всего голосов 92: ↑90 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+88</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">73K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    606
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <DIV class="v-portal" style="display:none;"></DIV> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="https://habr.com/ru/company/vk/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="https://habrastorage.org/getpro/habr/company/9ed/c74/6b4/9edc746b484c805ecad1f941b5f7068a.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="https://habr.com/ru/company/vk/profile/" class="tm-company-snippet__title">VK</a> <div class="tm-company-snippet__description">Технологии, которые объединяют</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://facebook.com/insidevk" rel="noopener" target="_blank" class="tm-article-author__contact">
      Facebook
    </a><a href="https://twitter.com/inside_vk" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a><a href="https://vk.com/insidevk" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://instagram.com/inside.vk" rel="noopener" target="_blank" class="tm-article-author__contact">
      Instagram
    </a><a href="https://telegram.me/inside_vk" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="https://habr.com/ru/users/AloneCoder/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="https://habrastorage.org/getpro/habr/avatars/741/45e/bea/74145ebeab7f222cce402aed2683f9d7.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 575 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    359
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Макс</span> <a href="https://habr.com/ru/users/AloneCoder/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @AloneCoder
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">¯\_(ツ)_/¯</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="https://habr.com/ru/company/vk/blog/450816/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 64 
    </span></a> <!----></div></div></div>  <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="1998-10-14T20:00:00.000Z" title="1998-10-15, 00:00">15  октября  1998</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://vk.com/vkteam" target="_blank" class="tm-company-basic-info__link">
      vk.com
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    5 001–10 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2008-08-09T07:42:32.000Z" title="2008-08-09, 11:42">9  августа  2008</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://habr.com/ru/users/AnastasiaGutor/" class="tm-company-basic-info__link">
      Анастасия Гутор
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/company/vk/blog/450816/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr-register/?back=/ru/company/vk/blog/450816/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="https://habr.com/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="https://habr.com/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="https://habr.com/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2022 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"450816":{"id":"450816","timePublished":"2019-05-10T17:42:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"HTTP-заголовки для ответственного разработчика","leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F9l\u002Fa1\u002Fll\u002F9la1llcyspwwfylwvmocsfvgnfe.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nСегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она соединяет людей. Я сам пользуюсь интернетом уже 20 лет, и мои отношения с ним изменились восемь лет назад, когда я стал веб-разработчиком.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nРазработчики соединяют людей. \u003Cbr\u003E\r\nРазработчики помогают людям. \u003Cbr\u003E\r\nРазработчики дают людям возможности.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nРазработчики могут создать сеть для всех, но эту способность необходимо использовать ответственно. В конце концов, важно создавать вещи, которые помогают людям и расширяют их возможности. В этой статье я хочу рассказать о том, как HTTP-заголовки могут помочь вам создавать лучшие продукты для лучшей работы всех пользователей в интернете.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Stefan Judis","originalUrl":"https:\u002F\u002Fwww.twilio.com\u002Fblog\u002Fa-http-headers-for-the-responsible-developer"}}],"author":{"scoreStats":{"score":359,"votesCount":575},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"63394","alias":"AloneCoder","fullname":"Макс","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F741\u002F45e\u002Fbea\u002F74145ebeab7f222cce402aed2683f9d7.png","speciality":"¯\\_(ツ)_\u002F¯"},"statistics":{"commentsCount":64,"favoritesCount":606,"readingCount":73097,"score":88,"votesCount":92},"hubs":[{"relatedData":null,"id":"4992","alias":"vk","type":"corporative","title":"Блог компании VK","titleHtml":"Блог компании VK","isProfiled":false},{"relatedData":null,"id":"4","alias":"hi","type":"collective","title":"Высокая производительность","titleHtml":"Высокая производительность","isProfiled":true},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"530","alias":"client_side_optimization","type":"collective","title":"Клиентская оптимизация","titleHtml":"Клиентская оптимизация","isProfiled":true},{"relatedData":null,"id":"17103","alias":"html5","type":"collective","title":"HTML","titleHtml":"HTML","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002F9l\u002Fa1\u002Fll\u002F9la1llcyspwwfylwvmocsfvgnfe.jpeg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F9l\u002Fa1\u002Fll\u002F9la1llcyspwwfylwvmocsfvgnfe.jpeg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она соединяет людей. Я сам пользуюсь интернетом уже 20 лет, и мои отношения с ним изменились восемь лет назад, когда я стал веб-разработчиком.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРазработчики соединяют людей. \u003Cbr\u002F\u003E\r\nРазработчики помогают людям. \u003Cbr\u002F\u003E\r\nРазработчики дают людям возможности.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРазработчики могут создать сеть для всех, но эту способность необходимо использовать ответственно. В конце концов, важно создавать вещи, которые помогают людям и расширяют их возможности. В этой статье я хочу рассказать о том, как HTTP-заголовки могут помочь вам создавать лучшие продукты для лучшей работы всех пользователей в интернете.\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EHTTP — протокол передачи гипертекста\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nДавайте сначала поговорим о HTTP. HTTP — это протокол, используемый компьютерами для запроса и отправки данных по интернету.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКогда браузер запрашивает ресурс с сервера, он использует HTTP. Этот запрос включает набор пару ключ-значение, содержащих такую информацию, как версия браузера или форматы файлов, которые он понимает. Эти пары называются заголовками запросов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСервер отвечает запрашиваемым ресурсом, но также отправляет заголовки ответа, содержащие информацию о ресурсе или самом сервере.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003ERequest:\nGET https:\u002F\u002Fthe-responsible.dev\u002F\nAccept: text\u002Fhtml,application\u002Fxhtml+xml,application\u002Fxml\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-GB,en-US;q=0.9,en;q=0.8,de;q=0.7\n...\n\nResponse:\nConnection: keep-alive\nContent-Type: text\u002Fhtml; charset=utf-8\nDate: Mon, 11 Mar 2019 12:59:38 GMT\n...\nResponse Body\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nСегодня HTTP является основой интернета и предлагает множество способов оптимизировать работу пользователей. Давайте посмотрим, как можно использовать заголовки HTTP для создания безопасной и доступной сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EСеть должна быть безопасной\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nРаньше я никогда не чувствовал опасности, когда искал что-то в интернете. Но чем больше я узнавал о всемирной паутине, тем больше я беспокоился. Вы можете почитать, как \u003Ca href=\"https:\u002F\u002Fshoptalkshow.com\u002Fepisodes\u002Fspecial-one-one-hacker\u002F\"\u003Eхакеры меняют глобальные CDN-библиотеки\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fthenextweb.com\u002Fcontributors\u002F2018\u002F03\u002F10\u002Fprotect-website-cryptojacking-attacks\u002F\"\u003Eслучайные сайты майнят криптовалюту в браузере своих посетителей, \u003C\u002Fa\u003Eа также о том, как \u003Ca href=\"http:\u002F\u002Fblog.npmjs.org\u002Fpost\u002F180565383195\u002Fdetails-about-the-event-stream-incident\"\u003Eс помощью социальной инженерии люди регулярно получают доступ к успешным проектам с открытым исходным кодом\u003C\u002Fa\u003E. Это нехорошо. Но почему вас должно это волновать?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли вы сегодня разрабатываете для веба, то не просто пишете код. Сегодня в веб-разработке над одним сайтом работает много людей. Возможно, вы также используете много открытого исходного кода. Кроме того, для маркетинговых целей вы можете включить несколько сторонних скриптов. Сотни людей предоставляют код, запущенный на вашем сайте. И разработчикам приходится работать в подобных реалиях.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМожно ли доверять всем этим людям и всему исходному коду?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ не думаю, что следует доверять какому-либо стороннему коду. К счастью, есть способы защитить свой сайт и сделать его более безопасным. Кроме того, такие инструменты, как \u003Ca href=\"https:\u002F\u002Fwww.twilio.com\u002Fblog\u002Fsecuring-your-express-app-html\"\u003Ehelmet могут быть полезны, например, для экспресс-приложений\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EЕсли вы хотите проанализировать, сколько стороннего кода запускается на вашем сайте, можно посмотреть в панели разработчика или попробовать \u003Ca href=\"http:\u002F\u002Frequestmap.webperf.tools\u002F\"\u003ERequest Map Generator.\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EHTTPS и HSTS — убедитесь, что ваше соединение безопасно\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nЗащищённое соединение является основой безопасного интернета. Без зашифрованных запросов, \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ffundamentals\u002Fsecurity\u002Fencrypt-in-transit\u002Fwhy-https\"\u003Eпроходящих через\u003C\u002Fa\u003E \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ffundamentals\u002Fsecurity\u002Fencrypt-in-transit\u002Fwhy-https\"\u003EHTTPS\u003C\u002Fa\u003E, нельзя быть уверенным, что между вашим сайтом и посетителями больше никого нет. Человек может быстро настроить общедоступную сеть Wi-Fi и совершить \u003Ca href=\"https:\u002F\u002Fwww.troyhunt.com\u002Fthe-beginners-guide-to-breaking-website\u002F\"\u003Eатаку «человек посередине»\u003C\u002Fa\u003E на любого, кто \u003Ca href=\"https:\u002F\u002Fwww.troyhunt.com\u002Fthe-beginners-guide-to-breaking-website\u002F\"\u003Eподключится к этой сети\u003C\u002Fa\u003E. Как часто вы используете общедоступный Wi-Fi? Кроме того, как часто вы проверяете, заслуживает ли он доверия?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nК счастью, сегодня \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002F\"\u003Eсертификаты TLS бесплатны\u003C\u002Fa\u003E; HTTPS стал стандартом, и браузеры предоставляют передовые функции только для защищенных соединений, и даже отмечают веб-сайты, не относящиеся к HTTPS, как небезопасные, что способствует внедрению этого протокола. К сожалению, мы не всегда в безопасности, когда находимся в интернете. Когда кто-то хочет открыть сайт, он не вводит протокол в адресную строку (и почему вообще должен?). Это приводит к созданию незашифрованного HTTP-запроса. Безопасно работающие сайты перенаправляют пользователя на HTTPS. Но что если кто-то перехватит первый незащищенный запрос?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы можете использовать заголовки ответа \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FStrict-Transport-Security\"\u003EHSTS\u003C\u002Fa\u003E (HTTP Strict Transport Security), чтобы сообщить браузерам, что ваш сайт работает только через HTTPS. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EStrict-Transport-Security: max-age=1000; includeSubDomains; preload\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЭтот заголовок говорит браузеру, что вы не хотите использовать HTTP-запросы, и тогда он автоматически применит те же запросы к такому же источнику с защищенным соединением. Если вы попытаетесь открыть такой же URL через HTTP, браузер снова будет использовать HTTPS и перенаправит пользователя.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы можете настроить, как долго этот параметр должен оставаться активным (\u003Ccode\u003Emax-age\u003C\u002Fcode\u003E в секундах), если захотите потом снова использовать HTTP. Если вы хотите включить поддомены, то можете настроить это с помощью \u003Ccode\u003EincludeSubDomains\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли вы хотите сделать всё возможное, чтобы браузер никогда не запрашивал ваш сайт по HTTP, можете также задать указатель \u003Ccode\u003Epreload\u003C\u002Fcode\u003E и \u003Ca href=\"https:\u002F\u002Fhstspreload.org\u002F\"\u003Eотправить ваш сайт\u003C\u002Fa\u003E в глобальный список. Если конфигурация HSTS вашего сайта соответствует минимальному \u003Ccode\u003Emax-age\u003C\u002Fcode\u003E в один год и активна для поддоменов, он может быть включен во внутренний список браузер для сайтов, работающих только через HTTPS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗадумывались ли вы когда-нибудь, почему вы больше не можете использовать в своем браузере через HTTP локальные переменные среды, такие как \u003Ccode\u003Emy-site.dev\u003C\u002Fcode\u003E? Причина именно в этом внутреннем списке — \u003Ccode\u003E.dev\u003C\u002Fcode\u003E автоматически включаются в этот список, поскольку в феврале 2019 года он стал настоящим доменом верхнего уровня.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗаголовок HSTS не только делает ваш сайт немного безопаснее, но и ускоряет его работу. Представьте себе, что кто-то заходит по медленному мобильному соединению. Если первый запрос сделан через HTTP только для получения перенаправления, то пользователь может несколько секунд ничего не видеть на экране. А с помощью HSTS вы можете сэкономить эти секунды, и браузер автоматически будет использовать HTTPS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003ECSP — четко укажите, что разрешено на вашем сайте\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nТеперь, когда ваш сайт работает через защищенное соединение, вы можете столкнуться с проблемой, когда браузеры начинают блокировать запросы, которые выходят на незащищенный адрес из-за политик смешанного контента. Заголовок \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FCSP\"\u003EContent Security Policy (CSP)\u003C\u002Fa\u003E предлагает отличный способ обработки таких ситуаций. Вы можете установить свой набор правил CSP с помощью мета-элементов в предоставляемом HTML или через HTTP-заголовки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EContent-Security-Policy: upgrade-insecure-requests\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nУказатель \u003Ccode\u003Eupgrade-insecure-requests\u003C\u002Fcode\u003E заставляет браузер волшебным образом переделать все HTTP-запросы в HTTPS-запросы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако CSP касается не только используемого протокола. Он предлагает детальные способы определения того, какие ресурсы и действия разрешены на вашем сайте. Вы можете, например, указать, какие скрипты должны выполняться или откуда загружать изображения. Если что-то не разрешено, браузер блокирует это действие и предотвращает потенциальные атаки на ваш сайт.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe57\u002Ff6a\u002Fef6\u002Fe57f6aef63f9ad95c2954539290a7caa.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe57\u002Ff6a\u002Fef6\u002Fe57f6aef63f9ad95c2954539290a7caa.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа момент написания статьи для CSP существовало 24 различных варианта конфигурации. Они варьируются от скриптов через таблицы стилей вплоть до сервис-воркеров.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F281\u002F7f5\u002F713\u002F2817f571357c4b488bd6dbcbbdec6ef0.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F281\u002F7f5\u002F713\u002F2817f571357c4b488bd6dbcbbdec6ef0.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EВы можете найти полный обзор на \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FCSP\"\u003EMDN.\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИспользуя CSP, вы можете указать, что должен включать ваш сайт, а что нет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EContent-Security-Policy: default-src 'self'; script-src 'self' just-comments.com www.google-analytics.com production-assets.codepen.io storage.googleapis.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: images.contentful.com images.ctfassets.net www.gravatar.com www.google-analytics.com just-comments.com; font-src 'self' data:; connect-src 'self' cdn.contentful.com images.contentful.com videos.contentful.com images.ctfassets.net videos.ctfassets.net service.just-comments.com www.google-analytics.com; media-src 'self' videos.contentful.com videos.ctfassets.net; object-src 'self'; frame-src codepen.io; frame-ancestors 'self'; worker-src 'self'; block-all-mixed-content; manifest-src 'self' 'self'; disown-opener; prefetch-src 'self'\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВышеприведенный набор правил предназначен для моего личного сайта, и если вы считаете, что этот пример определения CSP очень сложный, то вы абсолютно правы. Я внедрил у себя этот набор с третьей попытки, развёртывая и снова откатывая, потому что он несколько раз ломал сайт. Но есть способ получше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы избежать взлома вашего сайта, CSP также предоставляет режим только для отчетов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EContent-Security-Policy-Report-Only: default-src 'self'; ... report-uri https:\u002F\u002Fstefanjudis.report-uri.com\u002Fr\u002Fd\u002Fcsp\u002FreportOnly\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИспользуя режим \u003Ccode\u003EContent-Security-Policy-Report-Only\u003C\u002Fcode\u003E, браузеры просто записывают ресурсы, которые были бы заблокированы, вместо их фактической блокировки. Этот механизм отчетности позволяет проверить и настроить ваш набор правил.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОба заголовка, \u003Ccode\u003EContent-Security-Policy\u003C\u002Fcode\u003E и \u003Ccode\u003EContent-Security-Policy-Report-Only\u003C\u002Fcode\u003E, также предлагают способ определения конечной точки для отправки сообщения о нарушении и регистрации информации (\u003Ccode\u003Ereport-uri\u003C\u002Fcode\u003E). Вы можете настроить сервер регистрации и использовать отправленную информацию журнала для настройки правил CSP, пока он не будет готов к отправке.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРекомендуемый процесс выглядит так: сначала запустите CSP в режиме отчета, проанализируйте входящие нарушения с реальным трафиком, и только тогда, когда не будет обнаружено нарушений ваших контролируемых ресурсов, включите его.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EЕсли вы ищете сервис, который мог бы помочь вам справиться с этими журналами, то рекомендую \u003Ca href=\"https:\u002F\u002Freport-uri.com\u002F\"\u003EReport URI\u003C\u002Fa\u003E, он мне очень помогает.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EОбщее внедрение CSP\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fcaniuse.com\u002F#search=csp\"\u003EСегодня браузеры хорошо поддерживают\u003C\u002Fa\u003E CSP, но, к сожалению, не многие сайты используют её. Чтобы посмотреть, сколько сайтов отдают контент с помощью CSP, я направил запрос в \u003Ca href=\"https:\u002F\u002Fhttparchive.org\u002F\"\u003EHTTParchive\u003C\u002Fa\u003E и обнаружил, что только 6 % просмотренных сайтов используют эту политику. Я думаю, что мы можем сделать интернет более безопасным и защитить наших \u003Ca href=\"https:\u002F\u002Fthenextweb.com\u002Fcontributors\u002F2018\u002F03\u002F10\u002Fprotect-website-cryptojacking-attacks\u002F\"\u003Eпользователей\u003C\u002Fa\u003E от \u003Ca href=\"https:\u002F\u002Fthenextweb.com\u002Fcontributors\u002F2018\u002F03\u002F10\u002Fprotect-website-cryptojacking-attacks\u002F\"\u003Eневольного\u003C\u002Fa\u003E \u003Ca href=\"https:\u002F\u002Fthenextweb.com\u002Fcontributors\u002F2018\u002F03\u002F10\u002Fprotect-website-cryptojacking-attacks\u002F\"\u003Eмайнинга криптовалют\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F6d4\u002Fe19\u002F246\u002F6d4e192464d326a3722530d617cbaf78.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F6d4\u002Fe19\u002F246\u002F6d4e192464d326a3722530d617cbaf78.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EСеть должна быть доступной\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПока я пишу эту статью, я сижу перед относительно новым MacBook, используя быстрое домашнее Wi-Fi-подключение. Разработчики часто забывают, что такая ситуация не является стандартной для большинства наших пользователей. Люди, посещающие наши сайты, пользуются старыми телефонами и сомнительными соединениями. Тяжелые и перегруженные сайты с сотнями запросов оставляют им плохое впечатление.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ дело не только во впечатлении. \u003Ca href=\"https:\u002F\u002Fwhatdoesmysitecost.com\u002F\"\u003EЛюди платят различные суммы за трафик в зависимости от места проживания\u003C\u002Fa\u003E. Представьте себе, вы создаете сайт для больницы. Информация на нём может иметь решающее значение и спасти жизни людей. Если страница на сайте больницы имеет размер 5 Мб, то она не только будет медленно работать, но и может оказаться слишком дорогой для тех, кто больше всего в ней нуждается. Цена пяти мегабайтов трафика в Европе или США ничтожна по сравнению с ценой в Африке. Разработчики несут ответственность за доступность веб-страниц для всех. Эта ответственность включает в себя предоставление правильных ресурсов, выбор правильных инструментов (действительно ли вам нужен JS-фреймворк для лендинга?) и недопущение запросов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003ECache-Control — избегайте запросов на неизменные ресурсы\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nСегодня сайт может содержать сотни ресурсов, от CSS до скриптов и изображений. \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FCache-Control\"\u003E\u003Ccode\u003EИспользуя заголовок Cache-Control\u003C\u002Fcode\u003E\u003C\u002Fa\u003E, разработчики могут указать, как долго ресурс должен считаться «свежим» и может отдавать из кэша браузера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003ECache-Control: max-age=30, public\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПри правильной настройке \u003Ccode\u003ECache-Control\u003C\u002Fcode\u003E передача данных сохраняется, и файлы могут использоваться из кэша браузера в течение определенного количества секунд (\u003Ccode\u003Emax-age\u003C\u002Fcode\u003E). Браузеры должны повторно проверять кэшированные ресурсы по истечении этого периода времени.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако, если посетители обновляют страницу, \u003Ca href=\"https:\u002F\u002Fcode.fb.com\u002Fweb\u002Fthis-browser-tweak-saved-60-of-requests-to-facebook\u002F\"\u003Eбраузеры всё равно повторно проверяют её, включая ссылки на ресурсы\u003C\u002Fa\u003E, чтобы убедиться, что кэшированные данные всё ещё действительны. Серверы отвечают заголовком 304, сигнализируя, что кэшированные данные пока действительны, или заголовком 200 при передаче обновленных данных. Это позволяет сохранить переданные данные, но не обязательно сделанные запросы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИменно здесь вступает в игру функция \u003Ccode\u003Eimmutable\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EImmutable — никогда не запрашивать ресурс дважды\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВ современных frontend-приложениях файлы CSS и скриптов обычно имеют уникальные имена, например, \u003Ccode\u003Estyles.123abc.css\u003C\u002Fcode\u003E. Имя этого файла зависит от содержимого. И при изменении содержимого файлов меняются и их имена.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭти уникальные файлы потенциально могут храниться в кэше вечно, включая ситуацию, когда пользователь обновляет страницу. \u003Ca href=\"https:\u002F\u002Fhacks.mozilla.org\u002F2017\u002F01\u002Fusing-immutable-caching-to-speed-up-the-web\u002F\"\u003E\u003Ccode\u003EФункция immutable\u003C\u002Fcode\u003E\u003C\u002Fa\u003E может запретить браузеру повторную проверку ресурса в определенный промежуток времени. Это очень важно для объектов с контрольными суммами, и помогает избежать повторных проверочных запросов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003ECache-Control: max-age=31536000, public, immutable\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nРеализовать оптимальное кэширование очень сложно, а особенно браузерное кэширование не слишком интуитивно понятно, поскольку имеет различные конфигурации. Я рекомендую ознакомиться со следующими материалами:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EГарри Робертс написал \u003Ca href=\"https:\u002F\u002Fcsswizardry.com\u002F2019\u002F03\u002Fcache-control-for-civilians\u002F\"\u003Eотличное руководство по управлению кэшем и его настройкам\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003EДжек Арчибальд дал советы по \u003Ca href=\"https:\u002F\u002Fjakearchibald.com\u002F2016\u002Fcaching-best-practices\u002F\"\u003Eлучшим методикам кэширования\u003C\u002Fa\u003E с иллюстрациями.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003EИлья Григорик предложил \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ffundamentals\u002Fperformance\u002Foptimizing-content-efficiency\u002Fhttp-caching\"\u003Eотличную технологическую схему для кэширования заголовков\u003C\u002Fa\u003E. \u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EAccept-Encoding — максимальное сжатие (до минимума)\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nС помощью \u003Ccode\u003ECache control\u003C\u002Fcode\u003E мы можем сохранять запросы и уменьшать объем данных, которые многократно передаются по сети. Мы можем не только экономить запросы, но и сокращать то, что передается.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОтдавая ресурсы, разработчики должны позаботиться о том, чтобы отправлять как можно меньше данных. Для текстовых ресурсов, таких как HTML, CSS и JavaScript, сжатие играет важную роль в экономии передаваемых данных.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамым популярным методом сжатия сегодня является GZIP. Серверам хватает мощности для сжатия текстовых файлов на лету и предоставления сжатых данных при запросе. Но GZIP уже не самый лучший вариант.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли вы взглянете на создаваемые браузером запросы текстовых файлов, таких как HTML, CSS и JavaScript, и проанализируете заголовки, то найдете среди них \u003Ccode\u003Eaccept-encoding\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EAccept-Encoding: gzip, deflate, br\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЭтот заголовок сообщает серверу, какие алгоритмы сжатия он понимает. Малоизвестный параметр \u003Ccode\u003Ebr\u003C\u002Fcode\u003E обозначает \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgoogle\u002Fbrotli\"\u003Eсжатие Brotli \u003C\u002Fa\u003E и используется на сайтах с высокой посещаемостью, таких как Google и Facebook. Для использования Brotli ваш сайт должен работать через HTTPS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭтот алгоритм сжатия был создан с учетом небольшого размера файлов. Если вы попробуете сжать файл вручную на вашем локальном устройстве, то обнаружите, что Brotli действительно сжимает лучше, чем GZIP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F6d5\u002F681\u002Fa2b\u002F6d5681a2b412489aae991170e16428e8.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F6d5\u002F681\u002Fa2b\u002F6d5681a2b412489aae991170e16428e8.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы, возможно, слышали, что сжатие Brotli выполняется медленнее. Причина в том, что Brotli имеет 11 режимов сжатия, и по умолчанию выбирается тот, при котором получаются файлы наименьшего размера, что удлиняет процедуру. GZIP, с другой стороны, имеет 9 режимов, и по умолчанию выбирается тот, при котором учитывается как скорость сжатия, так и размера файла. В результате режим Brotli по умолчанию непригоден для сжатия «на лету», но если изменить режим, то можно добиться сжатия небольших файлов с той же скоростью, что и у GZIP. Вы можете использовать его для сжатия на лету и рассматривать как потенциальную замену GZIP для поддерживающих браузеров.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКроме того, если вы хотите максимально экономить файлы, то можете забыть о динамическом сжатии и предварительно сгенерировать \u003Ca href=\"https:\u002F\u002Fwww.telerik.com\u002Fblogs\u002Fmaximize-compression-with-zopfli\"\u003Eоптимизированные GZIP-файлы с помощью файлов zopfli\u003C\u002Fa\u003E и Brotli для их статического обслуживания.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EЕсли вы хотите прочитать больше о сжатии Brotli и его сравнении с GZIP, сотрудники компании Akamai \u003Ca href=\"https:\u002F\u002Fblogs.akamai.com\u002F2016\u002F02\u002Funderstanding-brotlis-potential.html\"\u003Eпровели обширное исследование на эту тему\u003C\u002Fa\u003E\u003C\u002Fi\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EAccept и Accept-CH — обслуживайте индивидуальные ресурсы для пользователя\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nОптимизация текстовых ресурсов очень важна для экономии килобайтов, но как насчёт более тяжелых ресурсов, таких как изображения, чтобы сэкономить ещё больше объёма данных?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EAccept — обслуживание изображений правильного формата\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nБраузеры не только показывают нам, какие алгоритмы сжатия они понимают. Когда браузер запрашивает изображение, он также предоставляет информацию о том, какие форматы файлов он понимает.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EAccept: image\u002Fwebp, image\u002Fapng, image\u002F*,*\u002F*;q=0.8\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНесколько лет велась борьба вокруг нового формата изображений, но выиграл webp. \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fspeed\u002Fwebp\u002F\"\u003EWebp — это формат изображений, изобретенный Google\u003C\u002Fa\u003E, и \u003Ca href=\"https:\u002F\u002Fcaniuse.com\u002F#feat=webp\"\u003Eподдержка\u003C\u002Fa\u003E этого формата сейчас очень актуальна.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИспользуя этот заголовок запроса, разработчики могут передавать изображение \u003Ccode\u003Ewebp\u003C\u002Fcode\u003E, даже если браузер запросил \u003Ccode\u003Eimage.jpg\u003C\u002Fcode\u003E, в результате чего размер файла будет меньше. Дин Хьюм написал \u003Ca href=\"https:\u002F\u002Fdeanhume.com\u002Fservice-workers-dynamic-responsive-images-using-webp-images\u002F\"\u003Eхорошее руководство\u003C\u002Fa\u003E о том, как это применять. Очень круто!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F9ef\u002Fce2\u002F077\u002F9efce2077a81469bfaa8840b8bb07b26.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F9ef\u002Fce2\u002F077\u002F9efce2077a81469bfaa8840b8bb07b26.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EAccept-CH — обслуживание изображений правильного размера\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВы также можете включить \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Fupdates\u002F2015\u002F09\u002Fautomating-resource-selection-with-client-hints\"\u003Eклиентские подсказки\u003C\u002Fa\u003E для поддерживающих эту функцию браузеров. Клиентские подсказки — это способ сказать браузерам, чтобы они посылали дополнительную информацию о ширине области просмотра, ширине изображения и даже сетевых условиях, таких как RTT (время на передачу и подтверждение) и типе соединения, например \u003Ccode\u003E2g\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы можете активировать подсказки, добавив мета-элемент:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E&lt;meta http-equiv=\"Accept-CH\" content=\"Viewport-Width, Downlink\"\u003E\n&lt;meta http-equiv=\"Accept-CH-Lifetime\" content=\"86400\"\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИли задав заголовки в исходном запросе HTML:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EAccept-CH: Width, Viewport-Width\nAccept-CH-Lifetime: 100\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ последующих запросах браузеры начнут посылать дополнительную информацию за определенный промежуток времени (\u003Ccode\u003EAccept-CH-Lifetime\u003C\u002Fcode\u003E в секундах), что может помочь разработчикам адаптировать изображения к условиям пользователя, не меняя HTML.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНапример, для получения дополнительной информации, такой как ширина изображения на стороне сервера, вы можете снабдить свои изображения атрибутом \u003Ccode\u003Esizes\u003C\u002Fcode\u003E, чтобы дать браузеру дополнительную информацию о том, как эти изображения будут выглядеть. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E&lt;!-- this images is laid over the full width | 100 viewport width --\u003E\n&lt;img class=\"w-100\" src=\"\u002Fimg\u002Fheader.jpg\" alt=\"\" sizes=\"100vw\"\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nС полученным заголовком ответа \u003Ccode\u003EAccept-CH\u003C\u002Fcode\u003E и изображениями с атрибутом \u003Ccode\u003Esizes\u003C\u002Fcode\u003E браузеры будут включать заголовки \u003Ccode\u003Eviewport-width\u003C\u002Fcode\u003E и \u003Ccode\u003Ewidth\u003C\u002Fcode\u003E в запросы изображений, показывая вам, какое изображение подойдёт лучше всего.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fec1\u002Ffa5\u002F15f\u002Fec1fa515f2eaddf32e3f1ba8e3d9576c.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fec1\u002Ffa5\u002F15f\u002Fec1fa515f2eaddf32e3f1ba8e3d9576c.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИмея поддерживаемый формат и размеры изображения, вы можете отправлять адаптированные данные без необходимости записывать ненадежные элементы изображений и обращать внимание только на формат и размер файлов, как показано ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E&lt;picturе\u003E\n  &lt;!-- serve WebP to Chrome, Edge, Firefox and Opera --\u003E\n  &lt;source\n    media=\"(min-width: 50em)\"\n    sizes=\"50vw\"\n    srcset=\"\u002Fimage\u002Fthing-200.webp 200w, \u002Fimage\u002Fthing-400.webp 400w,\n        \u002Fimage\u002Fthing-800.webp 800w, \u002Fimage\u002Fthing-1200.webp 1200w,\n        \u002Fimage\u002Fthing-1600.webp 1600w, \u002Fimage\u002Fthing-2000.webp 2000w\"\n    type=\"image\u002Fwebp\"\u003E\n  &lt;source\n    sizes=\"(min-width: 30em) 100vw\"\n    srcset=\"\u002Fimage\u002Fthing-crop-200.webp 200w, \u002Fimage\u002Fthing-crop-400.webp 400w,\n        \u002Fimage\u002Fthing-crop-800.webp 800w, \u002Fimage\u002Fthing-crop-1200.webp 1200w,\n        \u002Fimage\u002Fthing-crop-1600.webp 1600w, \u002Fimage\u002Fthing-crop-2000.webp 2000w\"\n    type=\"image\u002Fwebp\"\u003E\n &lt;!-- serve JPEG to others --\u003E\n  &lt;sоurce\n    media=\"(min-width: 50em)\"\n    sizes=\"50vw\"\n    srcset=\"\u002Fimage\u002Fthing-200.jpg 200w, \u002Fimage\u002Fthing-400.jpg 400w,\n        \u002Fimage\u002Fthing-800.jpg 800w, \u002Fimage\u002Fthing-1200.jpg 1200w,\n        \u002Fimage\u002Fthing-1600.jpg 1600w, \u002Fimage\u002Fthing-2000.jpg 2000w\"\u003E\n  &lt;sоurce\n    sizes=\"(min-width: 30em) 100vw\"\n    srcset=\"\u002Fimage\u002Fthing-crop-200.jpg 200w, \u002Fimage\u002Fthing-crop-400.jpg 400w,\n        \u002Fimage\u002Fthing-crop-800.jpg 800w, \u002Fimage\u002Fthing-crop-1200.jpg 1200w,\n        \u002Fimage\u002Fthing-crop-1600.jpg 1600w, \u002Fimage\u002Fthing-crop-2000.jpg 2000w\"\u003E\n  &lt;!-- fallback for browsers that don't support picture --\u003E\n  &lt;img src=\"\u002Fimage\u002Fthing.jpg\" width=\"50%\"\u003E\n&lt;\u002Fpicturе\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЕсли у вас есть доступ к ширине области просмотра (viewport) и размеру изображений, вы можете на своих серверах поставить логику изменения размера ресурсов во главу угла.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако нужно учитывать, что не следует создавать изображения для любой ширины просто потому, что у вас есть точная ширина изображения. Отправка изображений для определенного диапазона размеров (\u003Ccode\u003Eimage-200\u003C\u002Fcode\u003E, \u003Ccode\u003Eimage-300\u003C\u002Fcode\u003E, \u003Ccode\u003E...\u003C\u002Fcode\u003E) помогает использовать CDN-кэширование и экономит время вычислений.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКроме того, с такими современными технологиями, как service worker’ы, вы даже можете перехватывать и изменять запросы прямо в клиенте, чтобы обслуживать лучшие файлы изображений. С включенными клиентскими подсказками service worker’ы получают доступ к информации о макетах, и в сочетании с API изображений, как, например, \u003Ca href=\"https:\u002F\u002Fcloudinary.com\u002F\"\u003ECloudinary,\u003C\u002Fa\u003E вы можете настроить url изображения прямо в браузере для получения картинок надлежащего размера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EЕсли вы ищете более подробную информацию о клиентских подсказках, можете ознакомиться со статьями \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ffundamentals\u002Fperformance\u002Foptimizing-content-efficiency\u002Fclient-hints\u002F\"\u003EДжереми Вагнера\u003C\u002Fa\u003E или \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Fupdates\u002F2015\u002F09\u002Fautomating-resource-selection-with-client-hints\"\u003EИльи Григорика\u003C\u002Fa\u003E на эту тему.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EСеть должна быть бережной\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПоскольку каждый из нас проводит в сети много часов в день, есть последний аспект, который я считаю очень важным — сеть должна быть бережной.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EPreload — сокращение времени ожидания\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nБудучи разработчиками, мы ценим время наших пользователей. Никто не хочет терять время. Как уже говорилось в предыдущих главах, предоставление нужных данных играет большую роль в экономии времени и трафика. Речь идёт не только о том, какие запросы делаются, но и о сроках и порядке их выполнения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПриведу пример: если вы добавите на сайт таблицу стилей, браузеры не будут ничего показывать, пока она не загрузится. Пока на экране ничего не отображается, браузер продолжает анализировать HTML в поисках других ресурсов для запрашивания. После загрузки и парсинга таблицы стилей в ней могут оказаться ссылки на другие важные ресурсы, такие как шрифты, которые тоже могут быть запрошены. Этот процесс может увеличить время загрузки страницы для ваших посетителей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fwww.w3.org\u002FTR\u002Fpreload\u002F\"\u003EИспользуя Rel=preload\u003C\u002Fa\u003E вы можете дать браузеру информацию о том, какие ресурсы будут запрошены в ближайшее время.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМожете предварительно загрузить ресурсы через HTML-элементы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E&lt;link rel=\"preload\" href=\"\u002Ffont.woff2\" as=\"font\" type=\"font\u002Fwoff2\" crossorigin=\"anonymous\"\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИли заголовки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003ELink: &lt;\u002Ffont.woff2\u003E; rel=preload; as=font; no-push\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТаким образом, браузер получает заголовок или находит элемент ссылки, и немедленно запрашивает ресурсы, чтобы они уже находились в кэше, когда понадобятся. Этот процесс экономит время ваших посетителей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля оптимальной предварительной загрузки ресурсов и понимания всех конфигураций я рекомендую обратить внимание на следующие материалы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Fyoavweiss\"\u003EЙоав Вайс\u003C\u002Fa\u003E является экспертом по предварительной загрузке, он опубликовал \u003Ca href=\"https:\u002F\u002Fwww.smashingmagazine.com\u002F2016\u002F02\u002Fpreload-what-is-it-good-for\u002F\"\u003Eпрекрасный материал\u003C\u002Fa\u003E по этой теме.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Faddyosmani\"\u003EЭдди Османи\u003C\u002Fa\u003E подробно рассказал о preload и других инструментах, таких как prefetch и preconnect.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EFeature-Policy — не раздражайте других\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nМеньше всего я хочу видеть сайты, запрашивающие у меня разрешения без причины. Я могу лишь процитировать своего коллегу \u003Ca href=\"https:\u002F\u002Fyoutu.be\u002Fuo-UOvq3-0Y?t=1020\"\u003EФила Нэша\u003C\u002Fa\u003E по этому поводу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EНе требуйте разрешение при загрузке страницы\u003C\u002Fi\u003E. Разработчики должны относиться с уважением и не создавать сайты, раздражающие посетителей. Люди просто кликают на все окна с разрешениями. Если мы не используем их правильно, то сайты и разработчики теряют доверие, а новые блестящие функции — свою привлекательность.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНо что, если ваш сайт обязательно должен включать много стороннего кода, и все эти скрипты запускают множество диалоговых окон с разрешением? Как убедиться, что все включённые скрипты ведут себя правильно?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИменно здесь в игру вступает \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FFeature-Policy\"\u003Eзаголовок\u003C\u002Fa\u003E Feature-Policy. С его помощью вы можете указать, какие функции разрешены, и ограничить всплывающие диалоговые окна с разрешениями, которые могут быть вызваны сторонним кодом, исполняемым на вашем сайте.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EFeature-Policy: vibrate 'none'; geolocation 'none'\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВы можете настроить это поведение для сайта с помощью заголовка. Также можно задать этот заголовок для встроенного контента, например, плавающих фреймов, которые могут быть обязательными для интеграции со сторонними разработчиками.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E&lt;iframe allow=\"camera 'none'; microphone 'none'\"\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНа момент написания статьи заголовок \u003Ccode\u003EFeature-Policy\u003C\u002Fcode\u003E был, скорее, экспериментальным, но интересно посмотреть на его будущие возможности. В недалеком будущем разработчики смогут не только ограничивать себя и не допускать появления раздражающих диалоговых окон, но также блокировать неоптимизированные данные. Эти функции существенно улучшат работу пользователей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffa8\u002Fada\u002Fe56\u002Ffa8adae56924a72210fc2009641eb8cb.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffa8\u002Fada\u002Fe56\u002Ffa8adae56924a72210fc2009641eb8cb.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ci\u003EВы можете найти полный обзор на \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FFeature-Policy\"\u003EMDN.\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nГлядя на список выше, вы можете вспомнить о самом раздражающем моменте — push-уведомлениях. Оказалось, что применение \u003Ccode\u003EFeature-Policy\u003C\u002Fcode\u003E для push-уведомлений сложнее, чем ожидалось. Если вы хотите узнать больше, можете подписаться на соответствующую тему на \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fw3c\u002Fwebappsec-feature-policy\u002Fissues\u002F243\"\u003EGitHub.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nБлагодаря feature policy можете быть уверены, что вы и сторонние ресурсы не превратите ваш сайт в \u003Ca href=\"https:\u002F\u002F2018.bloomca.me\u002F\"\u003Eгонку за разрешениями\u003C\u002Fa\u003E, которая, к сожалению, уже стала привычной для многих сайтов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EСеть должна быть для всех\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВ этой статье я рассказал лишь о нескольких заголовках, которые могут помочь улучшить работу пользователей. Если хотите увидеть почти полный обзор заголовков и их возможностей, я рекомендую посмотреть презентацию \u003Ca href=\"https:\u002F\u002Fmobile.twitter.com\u002FderSchepp\"\u003EКристиана Шефера\u003C\u002Fa\u003E\u003Ca href=\"https:\u002F\u002Fschepp.github.io\u002FHTTP-headers\"\u003E «HTTP-заголовки — скрытые чемпионы»\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ знаю, что создание отличного сайта сегодня — очень сложная задача. Разработчики должны учитывать дизайн, устройства, фреймворки, и да… заголовки тоже играют определённую роль. Надеюсь, эта статья даст вам некоторые идеи, и вы будете учитывать безопасность, доступность и уважительность в ваших следующих веб-проектах, потому что это именно те факторы, которые делают сеть по-настоящему отличным местом для всех.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"http"},{"titleHtml":"http-заголовки"},{"titleHtml":"никто не читает теги"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F450816\u002Ffeb08d9560977d5489e8320ae19dbcec\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F450816\u002Ffeb08d9560977d5489e8320ae19dbcec\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fvk\\\u002Fblog\\\u002F450816\\\u002F\"},\"headline\":\"HTTP-заголовки для ответственного разработчика\",\"datePublished\":\"2019-05-10T20:42:25+03:00\",\"dateModified\":\"2019-06-10T12:54:09+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Макс\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Сегодня быть онлайн &mdash; это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fvk\\\u002Fblog\\\u002F450816\\\u002F#post-content-body\",\"about\":[\"c_vk\",\"h_hi\",\"h_webdev\",\"h_client_side_optimization\",\"h_html5\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F9l\\\u002Fa1\\\u002Fll\\\u002F9la1llcyspwwfylwvmocsfvgnfe.jpeg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fe57\\\u002Ff6a\\\u002Fef6\\\u002Fe57f6aef63f9ad95c2954539290a7caa.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F281\\\u002F7f5\\\u002F713\\\u002F2817f571357c4b488bd6dbcbbdec6ef0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F6d4\\\u002Fe19\\\u002F246\\\u002F6d4e192464d326a3722530d617cbaf78.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F6d5\\\u002F681\\\u002Fa2b\\\u002F6d5681a2b412489aae991170e16428e8.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F9ef\\\u002Fce2\\\u002F077\\\u002F9efce2077a81469bfaa8840b8bb07b26.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fec1\\\u002Ffa5\\\u002F15f\\\u002Fec1fa515f2eaddf32e3f1ba8e3d9576c.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ffa8\\\u002Fada\\\u002Fe56\\\u002Ffa8adae56924a72210fc2009641eb8cb.jpg\"]}","metaDescription":"Сегодня быть онлайн — это привычное состояние для многих людей. Все мы покупаем, общаемся, читаем статьи, ищем информацию на разные темы. Сеть соединяет нас со всем миром, но прежде всего, она...","mainImageUrl":null,"amp":false,"customTrackerLinks":[]},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"vk":{"alias":"vk","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F9ed\u002Fc74\u002F6b4\u002F9edc746b484c805ecad1f941b5f7068a.png","titleHtml":"VK","descriptionHtml":"Технологии, которые объединяют","relatedData":null,"statistics":{"postsCount":2278,"newsCount":165,"vacanciesCount":122,"employeesCount":700,"careerRating":4.35,"subscribersCount":134521,"rating":266.34,"invest":null},"foundationDate":{"year":"1998","month":"10","day":"15"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fvk.com\u002Fvkteam","staffNumber":"5 001–10 000 человек","registrationDate":"2008-08-09T07:42:32+00:00","representativeUser":{"alias":"AnastasiaGutor","fullname":"Анастасия Гутор"},"contacts":[{"title":"Facebook","url":"https:\u002F\u002Ffacebook.com\u002Finsidevk"},{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Finside_vk"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Finsidevk"},{"title":"Instagram","url":"https:\u002F\u002Finstagram.com\u002Finside.vk"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Finside_vk"}],"settings":{"analyticsSettings":[{"type":"ga","trackingId":"UA-16546458-6"}],"branding":{"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fbranding\u002F174\u002F2c4\u002F3a5\u002F1742c43a5b504987a0fadf577a0bd4de.png","linkUrl":"https:\u002F\u002Fvk.com\u002Fvkteam","pixelUrl":null},"status":"active","isStartup":false},"metadata":{"titleHtml":"VK, Москва - Технологии, которые объединяют с 15 октября 1998 г.","title":"VK, Москва - Технологии, которые объединяют с 15 октября 1998 г.","keywords":["DevOps","Облачные вычисления","Облачные сервисы","Kubernetes","Программирование","mail.ru","никто не читает теги","mail.ru cloud solutions","tarantool","mail.ru group","python","kubernetes","geekbrains","php","продуктовый дизайн","разработка","пользовательские интерфейсы","javascript","вконтакте","meetup","machine learning","машинное обучение","go","devops","android"],"descriptionHtml":"2 278 статей от авторов компании VK","description":"2 278 статей от авторов компании VK"},"aDeskSettings":null,"careerAlias":"vk"}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"technotext":{"nominationsList":[]},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.92df6f6d.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="https://habr.com/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
