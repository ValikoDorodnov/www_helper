<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <link rel="apple-touch-icon" sizes="180x180" href="https://www.yiiframework.com/favico/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://www.yiiframework.com/favico/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://www.yiiframework.com/favico/favicon-16x16.png">
        <link rel="shortcut icon" href="https://www.yiiframework.com/favico/favicon.ico">
        <link rel="manifest" href="https://www.yiiframework.com/favico/manifest.json">
        <link rel="mask-icon" href="https://www.yiiframework.com/favico/safari-pinned-tab.svg" color="#1e6887">
        <meta name="msapplication-config" content="/favico/browserconfig.xml">
        <meta name="theme-color" content="#1e6887">

        <link href="https://www.yiiframework.com/rss.xml" type="application/rss+xml" rel="alternate" title="Lives News for Yii Framework">

        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <meta name="csrf-param" content="_csrf">
<meta name="csrf-token" content="jEUSxlXKRWG1S5M4ezEHChGSU9PwJo2Wtz-NloU9fxa4MUP0CvozNPEZogwqXGhMQd0Xmt1M9d7iRv7X13EydQ==">
        
        <title>Безопасность: Авторизация | Полное руководство по Yii 2.0 | Yii PHP Framework</title>

        <meta property="og:site_name" content="Yii Framework" />
        <meta property="og:title" content="Безопасность: Авторизация" />
        <meta property="og:image" content="https://www.yiiframework.com/image/facebook_cover.png" />
        <meta property="og:url" content="/doc/guide/2.0/ru/security-authorization" />
        <meta property="og:description" content="" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="yiiframework" />
        <meta name="twitter:title" content="Безопасность: Авторизация" />
        <meta name="twitter:description" content="" />
        <meta name="twitter:image" content="https://www.yiiframework.com/image/twitter_cover.png" />
        <meta name="twitter:image:width" content="120" />
        <meta name="twitter:image:height" content="120" />

        <link type="application/opensearchdescription+xml" href="https://www.yiiframework.com/opensearch.xml" title="Yii Search" rel="search">
<link href="https://www.yiiframework.com/assets/85247087/css/all.min.css?v=1645275708" rel="stylesheet">
<script>yiiBaseUrl = ""
yiiSearchLanguage = "ru"
yiiSearchVersion = "2.0"</script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-707ZP35KCT"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-707ZP35KCT');
</script>
    </head>
    <body data-spy="scroll" data-target="#scrollnav" data-offset="1">
        
        <div id="page-wrapper" class="">

            <header class="navbar navbar-inverse navbar-static" id="top">
    <div class="container">
        <div id="main-nav-head" class="navbar-header">
            <a href="https://www.yiiframework.com/" class="navbar-brand">
                <img src="https://www.yiiframework.com/image/logo.svg"
                     alt="Yii PHP Framework"
                     width="165" height="35"/>
            </a>
            <button type="button" class="navbar-toggle" data-toggle="collapse" aria-label="Toggle navigation" data-target=".navbar-collapse"><i
                    class="fa fa-inverse fa-bars"></i></button>
        </div>

        <div class="navbar-collapse collapse navbar-right">
            <ul id="main-nav" class="nav navbar-nav navbar-main-menu nav"><li class="active" title="The Definitive Guide to Yii"><a href="https://www.yiiframework.com/doc/guide">Guide</a></li>
<li title="API Documentation"><a href="https://www.yiiframework.com/doc/api">API</a></li>
<li title="Community Wiki"><a href="https://www.yiiframework.com/wiki">Wiki</a></li>
<li title="Community Forum"><a href="https://www.yiiframework.com/forum">Forum</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="security-authorization.html#" data-toggle="dropdown">Community <span class="caret"></span></a><ul id="w16" class="dropdown-menu"><li><a href="https://www.yiiframework.com/chat" tabindex="-1">Live Chat</a></li>
<li title="Extensions"><a href="https://www.yiiframework.com/extensions" tabindex="-1">Extensions</a></li>
<li><a href="https://www.yiiframework.com/community" tabindex="-1">Resources</a></li>
<li title="Community Members"><a href="https://www.yiiframework.com/user" tabindex="-1">Members</a></li>
<li title="Community Hall of Fame"><a href="https://www.yiiframework.com/user/halloffame" tabindex="-1">Hall of Fame</a></li>
<li title="Community Badges"><a href="https://www.yiiframework.com/badges" tabindex="-1">Badges</a></li></ul></li>
<li class="dropdown"><a class="dropdown-toggle" href="security-authorization.html#" data-toggle="dropdown">More <span class="caret"></span></a><ul id="w17" class="dropdown-menu"><li class="separator dropdown-header">Learn</li>
<li><a href="https://www.yiiframework.com/books" tabindex="-1">Books</a></li>
<li><a href="https://www.yiiframework.com/resources" tabindex="-1">Resources</a></li>
<li class="separator dropdown-header">Develop</li>
<li><a href="https://www.yiiframework.com/download" tabindex="-1">Download Yii</a></li>
<li><a href="https://www.yiiframework.com/report-issue" tabindex="-1">Report an Issue</a></li>
<li><a href="https://www.yiiframework.com/security" tabindex="-1">Report a Security Issue</a></li>
<li><a href="https://www.yiiframework.com/contribute" tabindex="-1">Contribute to Yii</a></li>
<li class="separator dropdown-header">About</li>
<li><a href="https://www.yiiframework.com/doc/guide/2.0/en/intro-yii" tabindex="-1">What is Yii?</a></li>
<li><a href="https://www.yiiframework.com/release-cycle" tabindex="-1">Release Cycle</a></li>
<li><a href="https://www.yiiframework.com/news" tabindex="-1">News</a></li>
<li><a href="https://www.yiiframework.com/license" tabindex="-1">License</a></li>
<li><a href="https://www.yiiframework.com/team" tabindex="-1">Team</a></li>
<li><a href="https://www.yiiframework.com/logo" tabindex="-1">Official Logos and Design</a></li></ul></li></ul>
            
            <div class="nav navbar-nav navbar-right">
                <ul id="login-nav" class="nav navbar-nav navbar-main-menu nav"><li><a href="https://www.yiiframework.com/login">Login</a></li></ul>            </div>

            <div class="nav navbar-nav navbar-right">
                        <form id="search-form" class="navbar-form" action="https://www.yiiframework.com/search" method="get">
<input type="hidden" name="language" value="ru">
<input type="hidden" name="version" value="2.0">
<input type="hidden" name="type" value="guide">        <div class="form-group nospace">
            <div class="input-group">
                <input type="text" class="form-control" id="search" name="q" placeholder="Search Guide&hellip;" autocomplete="off" value="">
            </div>
        </div>
        <div id="search-resultbox"></div>
        </form>            </div>

            
        </div>
    </div>
</header>

            <div class="section-header-wrap">
    <div class="container section-header lang-en">
        <div class="row headline-row">
            <div class="col-xs-12 col-md-12">
                <div class="section-headline">Полное руководство по Yii 2.0</div>
            </div>
                    </div>
                <div class="row content-selector-row">
            <div class="col-xs-12 col-md-offset-7 col-md-5">
                <nav class="version-selector">
        <div class="btn-group btn-group-justified btn-group-3-element">
        <div class="btn-group btn-group-sm"><button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Download <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li role="presentation"><a href="https://www.yiiframework.com/doc/download/yii-guide-2.0-ru.pdf" role="menuitem" tabindex="-1">PDF</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/download/yii-docs-2.0-ru.tar.gz" role="menuitem" tabindex="-1">Offline HTML (tar.gz)</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/download/yii-docs-2.0-ru.tar.bz2" role="menuitem" tabindex="-1">Offline HTML (tar.bz2)</a></li></ul></div>                <div class="btn-group btn-group-sm"><button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Русский <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/ar/security-authorization" role="menuitem" tabindex="-1">العربية</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/en/security-authorization" role="menuitem" tabindex="-1">English</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/es/security-authorization" role="menuitem" tabindex="-1">Español</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/fr/security-authorization" role="menuitem" tabindex="-1">Français</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/id/security-authorization" role="menuitem" tabindex="-1">Bahasa Indonesia</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/ja/security-authorization" role="menuitem" tabindex="-1">日本語</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/pl/security-authorization" role="menuitem" tabindex="-1">Polski</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/pt-br/security-authorization" role="menuitem" tabindex="-1">Português brasileiro</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/uk/security-authorization" role="menuitem" tabindex="-1">Українська</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/uz/security-authorization" role="menuitem" tabindex="-1">Oʻzbekcha</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/security-authorization" role="menuitem" tabindex="-1">简体中文</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/2.0/vi/security-authorization" role="menuitem" tabindex="-1">Tiếng Việt</a></li></ul></div>
                <div class="btn-group btn-group-sm"><button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Version 2.0 <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li role="presentation"><a href="https://www.yiiframework.com/doc/guide/1.1/ru" role="menuitem" tabindex="-1">1.1</a></li>
<li role="presentation"><a href="https://www.yiiframework.com/doc/guide/1.0/ru" role="menuitem" tabindex="-1">1.0</a></li></ul></div>    </div>
</nav>
            </div>
        </div>
            </div>
</div>

                        <div class="visible-huge fixed lang-ru">
    <nav id="scrollnav" data-spy="affix" data-offset-top="120">
        <ul class="nav hidden-xs hidden-sm">
            <li><a href="security-authorization.html#avtorizacia">Авторизация</a></li><li><a href="security-authorization.html#filtry-kontrola-dostupa">Фильтры контроля доступа</a></li><li><a href="security-authorization.html#kontrol-dostupa-na-osnove-rolej-rbac">Контроль доступа на основе ролей (RBAC)</a><ul class="nav"><li class="subheading"><a href="security-authorization.html#osnovnye-koncepcii">Основные концепции</a></li><li class="subheading"><a href="security-authorization.html#nastrojka-rbac-manager">Настройка RBAC Manager</a></li><li class="subheading"><a href="security-authorization.html#nastrojka-authmanager-s-pomosu-phpmanager">Настройка authManager с помощью PhpManager</a></li><li class="subheading"><a href="security-authorization.html#nastrojka-authmanager-s-pomosu-dbmanager">Настройка authManager с помощью DbManager</a></li><li class="subheading"><a href="security-authorization.html#sozdanie-dannyh-avtorizacii">Создание данных авторизации</a></li><li class="subheading"><a href="security-authorization.html#ispolzovanie-pravil">Использование правил</a></li><li class="subheading"><a href="security-authorization.html#proverka-dostupa">Проверка доступа</a></li><li class="subheading"><a href="security-authorization.html#ispolzovanie-roli-po-umolcaniu">Использование роли по умолчанию</a></li></ul></li><li><a href="security-authorization.html#user-notes">User Contributed Notes</a></li>        </ul>
    </nav>
</div>
<div class="container guide-view" xmlns="http://www.w3.org/1999/xhtml">
    <div class="row visible-xs">
        <div class="col-md-12">
            <p class="pull-right topmost">
                <button type="button" title="Toggle Side-Nav" class="btn btn-primary btn-xs" data-toggle="offcanvas">SideNav</button>
            </p>
        </div>
    </div>
    <div class="row row-offcanvas">
        <div class="col-sm-3 col-md-3 col-lg-3 lang-ru">
            <form class="mini-search-form" action="https://www.yiiframework.com/search" method="get">
<input type="hidden" name="language" value="ru">
<input type="hidden" name="version" value="2.0">
<input type="hidden" name="type" value="guide"><input type="text" class="form-control" name="q" placeholder="Search the Guide…" autocomplete="off" aria-label="Search box"> <button type="submit" class="btn btn-primary sr-only">Search</button></form>            <div id="guide-navigation" class="sidenav-offcanvas"><a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-0">Введение</a><div id="guide-navigation-0" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/intro-yii">О Yii</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/intro-upgrade-from-v1">Обновление с версии 1.1</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-1">Первое знакомство</a><div id="guide-navigation-1" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-installation">Установка Yii</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-workflow">Запуск приложения</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-hello">Говорим «привет»</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-forms">Работа с формами</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-databases">Работа с базами данных</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-gii">Генерация кода при помощи Gii</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/start-looking-ahead">Что дальше?</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-2">Структура приложения</a><div id="guide-navigation-2" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-overview">Обзор</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-entry-scripts">Входные скрипты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-applications">Приложения</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-application-components">Компоненты приложения</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-controllers">Контроллеры</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-models">Модели</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-views">Представления</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-modules">Модули</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-filters">Фильтры</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-widgets">Виджеты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-assets">Ресурсы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-extensions">Расширения</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-3">Обработка запросов</a><div id="guide-navigation-3" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-overview">Обзор</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-bootstrapping">Bootstrapping</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-routing">Разбор и генерация URL</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-requests">Запросы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-responses">Ответы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-sessions-cookies">Сессии и куки</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-handling-errors">Обработка ошибок</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/runtime-logging">Логирование</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-4">Основные понятия</a><div id="guide-navigation-4" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-components">Компоненты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-properties">Свойства</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-events">События</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-behaviors">Поведения</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-configurations">Конфигурации</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-aliases">Псевдонимы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-autoloading">Автозагрузка классов</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-service-locator">Service Locator</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/concept-di-container">Dependency Injection Container</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-5">Работа с базами данных</a><div id="guide-navigation-5" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/db-dao">Объекты доступа к данным (DAO)</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/db-query-builder">Построитель запросов</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/db-active-record">Active Record</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/db-migrations">Миграции</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-sphinx/blob/master/docs/guide-ru/README.md">Sphinx</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-redis/blob/master/docs/guide-ru/README.md">Redis</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-mongodb/blob/master/docs/guide-ru/README.md">MongoDB</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-elasticsearch/blob/master/docs/guide-ru/README.md">ElasticSearch</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-6">Получение данных от пользователя</a><div id="guide-navigation-6" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/input-forms">Создание форм</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/input-validation">Валидация</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/input-file-upload">Загрузка файлов</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/input-tabular-input">Табличный ввод</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/input-multiple-models">Работа с несколькими моделями</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/input-form-javascript">Расширение ActiveForm на стороне клиента</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-7">Отображение данных</a><div id="guide-navigation-7" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-formatting">Форматирование данных</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-pagination">Постраничная разбивка</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-sorting">Сортировка</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-data-providers">Провайдеры данных</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-data-widgets">Виджеты для данных</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-client-scripts">Работа с клиентскими скриптами</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/output-theming">Темизация</a></div>
<a class="list-group-item has-children active" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-8">Безопасность</a><div id="guide-navigation-8" class="submenu panel-collapse collapse in active-parent"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/security-overview">Обзор</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/security-authentication">Аутентификация</a>
<a class="list-group-item active" href="security-authorization.html">Авторизация</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/security-passwords">Работа с паролями</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/security-cryptography">Криптография</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-authclient/blob/master/docs/guide-ru/README.md">Клиенты авторизации</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/security-best-practices">Лучшие практики</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-9">Кеширование</a><div id="guide-navigation-9" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/caching-overview">Обзор</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/caching-data">Кэширование данных</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/caching-fragment">Кэширование фрагментов</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/caching-page">Кэширование страниц</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/caching-http">HTTP кэширование</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-10">Веб-сервисы REST</a><div id="guide-navigation-10" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-quick-start">Быстрый старт</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-resources">Ресурсы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-controllers">Контроллеры</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-routing">Роутинг</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-response-formatting">Форматирование ответа</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-authentication">Аутентификация</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-rate-limiting">Ограничение частоты запросов</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-versioning">Версионирование</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/rest-error-handling">Обработка ошибок</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-11">Инструменты разработчика</a><div id="guide-navigation-11" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-debug/blob/master/docs/guide/README.md">Отладочная панель и отладчик</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-gii/blob/master/docs/guide/README.md">Генерация кода с Gii</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-apidoc">Генератор документации API</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-12">Тестирование</a><div id="guide-navigation-12" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/test-overview">Обзор</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/test-environment-setup">Настройка тестового окружения</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/test-unit">Модульные тесты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/test-functional">Функциональные тесты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/test-acceptance">Приёмочные тесты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/test-fixtures">Фикстуры</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-13">Специальные темы</a><div id="guide-navigation-13" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md">Шаблон приложения advanced</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-start-from-scratch">Создание приложения с нуля</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-console">Консольные команды</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-core-validators">Встроенные валидаторы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-i18n">Интернационализация</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-mailing">Отправка почты</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-performance-tuning">Оптимизация производительности</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-shared-hosting">Окружение виртуального хостинга</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-template-engines">Шаблонизаторы</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-yii-integration">Работа со сторонним кодом</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-yii-as-micro-framework">Использование Yii в качестве микро-framework&#039;а</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-14">Виджеты</a><div id="guide-navigation-14" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-grid-gridview.html">GridView</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-listview.html">ListView</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html">DetailView</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform">ActiveForm</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html">Pjax</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-menu.html">Menu</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html">LinkPager</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html">LinkSorter</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-ru/README.md">Виджеты Bootstrap</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-ru/README.md">Виджеты Jquery UI</a></div>
<a class="list-group-item has-children" href="security-authorization.html#" data-toggle="collapse" data-parent="#guide-navigation" data-target="#guide-navigation-15">Хелперы</a><div id="guide-navigation-15" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/helper-overview">Обзор</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/helper-array">ArrayHelper</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/helper-html">Html</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc/guide/2.0/ru/helper-url">Url хелпер</a></div></div>        </div>
        <div class="col-sm-9 col-md-9 col-lg-9" role="main">

            <div class="guide-content content lang-ru">

        <div class="pull-right">
        
<div class="star-wrapper">
    <span class="fa fa-star-o" data-star-url="/ajax/star?type=doc&amp;id=754"></span>            <span class="star-count">3</span> followers    </div>
    </div>

    <h1 id="avtorizacia">Авторизация <a href="security-authorization.html#avtorizacia" class="hashlink">&para;</a></h1>
<div class="toc hidden-lg"><ol><li><a href="security-authorization.html#filtry-kontrola-dostupa">Фильтры контроля доступа</a></li>
<li><a href="security-authorization.html#kontrol-dostupa-na-osnove-rolej-rbac">Контроль доступа на основе ролей (RBAC)</a></li></ol></div>
<blockquote class="note"><p><strong>Примечание: </strong>этот раздел находится на стадии разработки.</p>
</blockquote>
<p>Авторизация — это процесс проверки того, что пользователь имеет достаточно прав, чтобы выполнить какие-то действия. Yii предоставляет два метода авторизации: фильтры контроля доступа (ACF) и контроль доступа на основе ролей (RBAC).</p>
<h2 id="filtry-kontrola-dostupa">Фильтры контроля доступа <a href="security-authorization.html#filtry-kontrola-dostupa" class="hashlink">&para;</a></h2><p>Фильтры контроля доступа (ACF) являются простым методом, который лучше всего использовать в приложениях с простым
контролем доступа. Как видно из их названия, ACF — это фильтры, которые могут присоединяться к контроллеру
или модулю как поведение. ACF проверяет набор <a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accesscontrol#$rules-detail">правил доступа</a>, чтобы убедиться,
что пользователь имеет доступ к запрошенному действию.</p>
<p>Код ниже показывает, как использовать ACF фильтр, реализованный в <a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accesscontrol">yii\filters\AccessControl</a>:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">filters</span>\<span class="hljs-title">AccessControl</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SiteController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'access'</span> =&gt; [
                <span class="hljs-string">'class'</span> =&gt; AccessControl::class,
                <span class="hljs-string">'only'</span> =&gt; [<span class="hljs-string">'login'</span>, <span class="hljs-string">'logout'</span>, <span class="hljs-string">'signup'</span>],
                <span class="hljs-string">'rules'</span> =&gt; [
                    [
                        <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                        <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'login'</span>, <span class="hljs-string">'signup'</span>],
                        <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'?'</span>],
                    ],
                    [
                        <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                        <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'logout'</span>],
                        <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'@'</span>],
                    ],
                ],
            ],
        ];
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Код выше показывает ACF фильтр, связанный с контроллером <code>site</code> через поведение. Это типичный способ использования фильтров действий.
Параметр <code>only</code> указывает, что фильтр ACF нужно применять только к действиям <code>login</code>, <code>logout</code> и <code>signup</code>.
Параметр <code>rules</code> задаёт <a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule">правила доступа</a>, которые означают следующее:</p>
<ul>
<li>Разрешить всем гостям (ещё не прошедшим авторизацию) доступ к действиям <code>login</code> и <code>signup</code>.
Опция <code>roles</code> содержит знак вопроса <code>?</code>, это специальный токен обозначающий "гостя".</li>
<li>Разрешить аутентифицированным пользователям доступ к действию <code>logout</code>. Символ <code>@</code> — это другой специальный токен,
обозначающий аутентифицированного пользователя.</li>
</ul>
<p>Когда фильтр ACF проводит проверку авторизации, он проверяет правила по одному сверху вниз, пока не найдёт совпадение.
Значение опции <code>allow</code> выбранного правила указывает, авторизовывать пользователя или нет. Если ни одно из правил
не совпало, то пользователь считается НЕавторизованным, и фильтр ACF останавливает дальнейшее выполнение действия.</p>
<p>По умолчанию, когда у пользователя отсутствует доступ к текущему действию, ACF делает следующее:</p>
<ul>
<li>Если пользователь гость, вызывается <a href="https://www.yiiframework.com/doc/api/2.0/yii-web-user#loginRequired()-detail">yii\web\User::loginRequired()</a>, который перенаправляет браузер на страницу входа.</li>
<li>Если пользователь авторизован, генерируется исключение <a href="https://www.yiiframework.com/doc/api/2.0/yii-web-forbiddenhttpexception">yii\web\ForbiddenHttpException</a>.</li>
</ul>
<p>Вы можете переопределить это поведение, настроив свойство <a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accesscontrol#$denyCallback-detail">yii\filters\AccessControl::$denyCallback</a>:</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'class'</span> =&gt; AccessControl::class,
    <span class="hljs-string">'denyCallback'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($rule, $action)</span> </span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> \<span class="hljs-keyword">Exception</span>(<span class="hljs-string">'У вас нет доступа к этой странице'</span>);
    }
]
</code></pre>
<p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule">Правила доступа</a> поддерживают набор свойств. Ниже дано краткое описание поддерживаемых опций.
Вы также можете расширить <a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule">yii\filters\AccessRule</a>, чтобы создать свой собственный класс правил доступа.</p>
<ul>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$allow-detail">allow</a>: задаёт какое это правило, "allow" или "deny".</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$actions-detail">actions</a>: задаёт действия, соответствующие этому правилу.
Значение должно быть массивом идентификаторов действий. Сравнение — регистрозависимо. Если свойство пустое или не задано,
то правило применяется ко всем действиям.</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$controllers-detail">controllers</a>: задаёт контроллеры, которым соответствует правило.
Значение должно быть массивом с идентификаторами контроллеров. Сравнение регистрозависимо. Если свойство
пустое или не задано, то правило применяется ко всем контроллерам.</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$roles-detail">roles</a>: задаёт роли пользователей, соответствующих этому правилу.
Распознаются две специальные роли, которые проверяются с помощью <a href="https://www.yiiframework.com/doc/api/2.0/yii-web-user#$isGuest-detail">yii\web\User::$isGuest</a>:</p>
<ul>
<li><code>?</code>: соответствует гостевому пользователю (не аутентифицирован),</li>
<li><code>@</code>: соответствует аутентифицированному пользователю.</li>
</ul>
<p>Использование других имён ролей будет приводить к вызову метода <a href="https://www.yiiframework.com/doc/api/2.0/yii-web-user#can()-detail">yii\web\User::can()</a>, который требует включения
RBAC (будет описано дальше). Если свойство пустое или не задано, то правило применяется ко всем ролям.</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$ips-detail">ips</a>: задаёт <a href="https://www.yiiframework.com/doc/api/2.0/yii-web-request#$userIP-detail">IP адреса пользователей</a>, для которых применяется это правило. IP адрес может содержать <code>*</code> в конце, так чтобы он соответствовал IP адресу с таким же префиксом.
Для примера, '192.168.*' соответствует всем IP адресам в сегменте '192.168.'. Если свойство пустое или не задано,
то правило применяется ко всем IP адресам.</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$verbs-detail">verbs</a>: задаёт http метод (например, <code>GET</code>, <code>POST</code>), соответствующий правилу.
Сравнение — регистронезависимо.</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$matchCallback-detail">matchCallback</a>: задаёт PHP колбек, который вызывается для определения,
что правило должно быть применено.</p>
</li>
<li><p><a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accessrule#$denyCallback-detail">denyCallback</a>: задаёт PHP колбек, который будет вызван, если доступ будет
запрещён при вызове этого правила.</p>
</li>
</ul>
<p>Ниже показан пример, показывающий использование опции <code>matchCallback</code>, которая позволяет писать произвольную
логику проверки доступа:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">filters</span>\<span class="hljs-title">AccessControl</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SiteController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'access'</span> =&gt; [
                <span class="hljs-string">'class'</span> =&gt; AccessControl::class,
                <span class="hljs-string">'only'</span> =&gt; [<span class="hljs-string">'special-callback'</span>],
                <span class="hljs-string">'rules'</span> =&gt; [
                    [
                        <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'special-callback'</span>],
                        <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                        <span class="hljs-string">'matchCallback'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($rule, $action)</span> </span>{
                            <span class="hljs-keyword">return</span> date(<span class="hljs-string">'d-m'</span>) === <span class="hljs-string">'31-10'</span>;
                        }
                    ],
                ],
            ],
        ];
    }

    <span class="hljs-comment">// Колбек сработал! Эта страница может быть отображена только 31-ого октября</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionSpecialCallback</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;render(<span class="hljs-string">'happy-halloween'</span>);
    }
}
</code></pre>
<h2 id="kontrol-dostupa-na-osnove-rolej-rbac">Контроль доступа на основе ролей (RBAC) <a href="security-authorization.html#kontrol-dostupa-na-osnove-rolej-rbac" class="hashlink">&para;</a></h2><p>Управление доступом на основе ролей (RBAC) обеспечивает простой, но мощный централизованный контроль доступа.
Пожалуйста, обратитесь к <a href="https://ru.wikipedia.org/wiki/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BE%D0%BC_%D0%BD%D0%B0_%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5_%D1%80%D0%BE%D0%BB%D0%B5%D0%B9">Wikipedia</a>
для получения информации о сравнении RBAC с другими, более традиционными, системами контроля доступа.</p>
<p>Yii реализует общую иерархическую RBAC, следуя <a href="https://csrc.nist.gov/CSRC/media/Publications/conference-paper/1992/10/13/role-based-access-controls/documents/ferraiolo-kuhn-92.pdf">NIST RBAC model</a>.
Обеспечивается функциональность RBAC через <a href="https://www.yiiframework.com/doc/guide/2.0/ru/structure-application-components">компонент приложения</a> <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-managerinterface">authManager</a>.</p>
<p>Использование RBAC состоит из двух частей. Первая часть — это создание RBAC данных авторизации, и вторая часть — это
использование данных авторизации для проверки доступа в том месте, где это нужно.</p>
<p>Для облегчения последующего описания, мы сначала введём некоторые основные понятия RBAC.</p>
<h3 id="osnovnye-koncepcii">Основные концепции <a href="security-authorization.html#osnovnye-koncepcii" class="hashlink">&para;</a></h3><p>Роль представляет собой набор разрешений (<em>permissions</em>) (например, создание сообщения, обновление сообщения).
Роль может быть назначена на одного или многих пользователей. Чтобы проверить, имеет ли пользователь указанные
разрешения, мы должны проверить, назначена ли пользователю роль, которая содержит данное разрешение.</p>
<p>С каждой ролью или разрешением может быть связано правило (<em>rule</em>). Правило представляет собой кусок кода, который будет
выполняться в ходе проверки доступа для определения может ли быть применена соответствующая роль или разрешение
к текущему пользователю. Например, разрешение "обновление поста" может иметь правило, которое проверяет является ли
текущий пользователь автором поста. Во время проверки доступа, если пользователь не является автором поста, он/она будет
считаться не имеющими разрешения "обновление поста".</p>
<p>И роли, и разрешения могут быть организованы в иерархию. В частности, роль может содержать другие роли или разрешения; и
разрешения могут содержать другие разрешения. Yii реализует <em>частично упорядоченную</em> иерархию, которая включает в себя
специальные <em>деревья</em> иерархии. Роль может содержать разрешение, но обратное не верно.</p>
<h3 id="nastrojka-rbac-manager">Настройка RBAC Manager <a href="security-authorization.html#nastrojka-rbac-manager" class="hashlink">&para;</a></h3><p>Перед определением авторизационных данных и проверкой прав доступа, мы должны настроить компонент приложения
<a href="https://www.yiiframework.com/doc/api/2.0/yii-base-application#$authManager-detail">authManager</a>. Yii предоставляет два типа менеджеров авторизации:
<a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-phpmanager">yii\rbac\PhpManager</a> и <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-dbmanager">yii\rbac\DbManager</a>. Первый использует файл с PHP скриптом для хранения данных авторизации,
второй сохраняет данные в базе данных. Вы можете использовать первый, если ваше приложение не требует слишком динамичного
управления ролями и разрешениями.</p>
<h4 id="nastrojka-authmanager-s-pomosu-phpmanager">Настройка authManager с помощью <code>PhpManager</code> <a href="security-authorization.html#nastrojka-authmanager-s-pomosu-phpmanager" class="hashlink">&para;</a></h4><p>Следующий код показывает как настроить в конфигурации приложения <code>authManager</code> с использованием класса <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-phpmanager">yii\rbac\PhpManager</a>:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-string">'components'</span> =&gt; [
        <span class="hljs-string">'authManager'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\rbac\PhpManager'</span>,
        ],
        <span class="hljs-comment">// ...</span>
    ],
];
</code></pre>
<p>Теперь <code>authManager</code> может быть доступен через <code>\Yii::$app-&gt;authManager</code>.</p>
<blockquote><p>Замечание: По умолчанию, <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-phpmanager">yii\rbac\PhpManager</a> сохраняет данные RBAC в файлах в директории <code>@app/rbac/</code>. Убедитесь
  что данная директория и файлы в них доступны для записи Web серверу, если иерархия разрешений должна меняться онлайн.</p>
</blockquote>
<h4 id="nastrojka-authmanager-s-pomosu-dbmanager">Настройка authManager с помощью <code>DbManager</code> <a href="security-authorization.html#nastrojka-authmanager-s-pomosu-dbmanager" class="hashlink">&para;</a></h4><p>Следующий код показывает как настроить в конфигурации приложения <code>authManager</code> с использованием класса <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-dbmanager">yii\rbac\DbManager</a>:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-string">'components'</span> =&gt; [
        <span class="hljs-string">'authManager'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\rbac\DbManager'</span>,
        ],
        <span class="hljs-comment">// ...</span>
    ],
];
</code></pre>
<blockquote><p>Примечание: Если вы используете шаблон проекта basic, компонент <code>authManager</code> необходимо настроить как в <code>config/web.php</code>, так и в
<a href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-console#configuration">конфигурации консольного приложения</a> <code>config/console.php</code>.
При использовании шаблона проекта advanced <code>authManager</code> достаточно настроить единожды в <code>common/config/main.php</code>.</p>
</blockquote>
<p><code>DbManager</code> использует четыре таблицы для хранения данных:</p>
<ul>
<li><a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-dbmanager#$itemTable-detail">itemTable</a>: таблица для хранения авторизационных элементов. По умолчанию "auth_item".</li>
<li><a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-dbmanager#$itemChildTable-detail">itemChildTable</a>: таблица для хранения иерархии элементов. По умолчанию "auth_item_child".</li>
<li><a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-dbmanager#$assignmentTable-detail">assignmentTable</a>: таблица для хранения назначений элементов авторизации. По умолчанию "auth_assignment".</li>
<li><a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-dbmanager#$ruleTable-detail">ruleTable</a>: таблица для хранения правил. По умолчанию "auth_rule".</li>
</ul>
<p>Прежде чем вы начнёте использовать этот менеджер, вам нужно создать таблицы в базе данных. Чтобы сделать это,
вы можете использовать миграцию хранящуюся в файле <code>@yii/rbac/migrations</code>:</p>
<p><code>yii migrate --migrationPath=@yii/rbac/migrations</code></p>
<p>Теперь <code>authManager</code> может быть доступен через <code>\Yii::$app-&gt;authManager</code>.</p>
<h3 id="sozdanie-dannyh-avtorizacii">Создание данных авторизации <a href="security-authorization.html#sozdanie-dannyh-avtorizacii" class="hashlink">&para;</a></h3><p>Для создания данных авторизации нужно выполнить следующие задачи:</p>
<ul>
<li>определение ролей и разрешений;</li>
<li>установка отношений между ролями и правами доступа;</li>
<li>определение правил;</li>
<li>связывание правил с ролями и разрешениями;</li>
<li>назначение ролей пользователям.</li>
</ul>
<p>В зависимости от требований к гибкости авторизации перечисленные задачи могут быть выполнены разными путями.</p>
<p>Если иерархия прав не меняется, и количество пользователей зафиксировано, вы можете создать
<a href="https://www.yiiframework.com/doc/guide/2.0/ru/tutorial-console#create-command">консольную команду</a>, которая будет единожды инициализировать данные
через APIs, предоставляемое <code>authManager</code>:</p>
<pre><code class="hljs php language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">commands</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Yii</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">console</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RbacController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionInit</span><span class="hljs-params">()</span>
    </span>{
        $auth = Yii::$app-&gt;authManager;

        <span class="hljs-comment">// добавляем разрешение "createPost"</span>
        $createPost = $auth-&gt;createPermission(<span class="hljs-string">'createPost'</span>);
        $createPost-&gt;description = <span class="hljs-string">'Create a post'</span>;
        $auth-&gt;add($createPost);

        <span class="hljs-comment">// добавляем разрешение "updatePost"</span>
        $updatePost = $auth-&gt;createPermission(<span class="hljs-string">'updatePost'</span>);
        $updatePost-&gt;description = <span class="hljs-string">'Update post'</span>;
        $auth-&gt;add($updatePost);

        <span class="hljs-comment">// добавляем роль "author" и даём роли разрешение "createPost"</span>
        $author = $auth-&gt;createRole(<span class="hljs-string">'author'</span>);
        $auth-&gt;add($author);
        $auth-&gt;addChild($author, $createPost);

        <span class="hljs-comment">// добавляем роль "admin" и даём роли разрешение "updatePost"</span>
        <span class="hljs-comment">// а также все разрешения роли "author"</span>
        $admin = $auth-&gt;createRole(<span class="hljs-string">'admin'</span>);
        $auth-&gt;add($admin);
        $auth-&gt;addChild($admin, $updatePost);
        $auth-&gt;addChild($admin, $author);

        <span class="hljs-comment">// Назначение ролей пользователям. 1 и 2 это IDs возвращаемые IdentityInterface::getId()</span>
        <span class="hljs-comment">// обычно реализуемый в модели User.</span>
        $auth-&gt;assign($author, <span class="hljs-number">2</span>);
        $auth-&gt;assign($admin, <span class="hljs-number">1</span>);
    }
}
</code></pre>
<blockquote class="note"><p><strong>Примечание: </strong>Если вы используете шаблон проекта advanced, <code>RbacController</code> необходимо создать в директории <code>console/controllers</code>
  и сменить пространство имён на <code>console\controllers</code>.</p>
</blockquote>
<p>После выполнения команды <code>yii rbac/init</code> мы получим следующую иерархию:</p>
<p><img class="img-responsive" src="https://www.yiiframework.com/doc/guide/2.0/ru/images/rbac-hierarchy-1.png" alt="Простая иерархия RBAC" title="Простая иерархия RBAC" /></p>
<p>Автор может создавать пост, администратор может обновлять пост и делать всё, что может делать автор.</p>
<p>Если ваше приложение позволяет регистрировать пользователей, то вам необходимо сразу назначать роли этим новым пользователям.
Например, для того, чтобы все вошедшие пользователи могли стать авторами в расширенном шаблоне проекта, вы должны изменить
<code>frontend\models\SignupForm::signup()</code> как показано ниже:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">signup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;validate()) {
        $user = <span class="hljs-keyword">new</span> User();
        $user-&gt;username = <span class="hljs-keyword">$this</span>-&gt;username;
        $user-&gt;email = <span class="hljs-keyword">$this</span>-&gt;email;
        $user-&gt;setPassword(<span class="hljs-keyword">$this</span>-&gt;password);
        $user-&gt;generateAuthKey();
        $user-&gt;save(<span class="hljs-keyword">false</span>);

        <span class="hljs-comment">// нужно добавить следующие три строки:</span>
        $auth = Yii::$app-&gt;authManager;
        $authorRole = $auth-&gt;getRole(<span class="hljs-string">'author'</span>);
        $auth-&gt;assign($authorRole, $user-&gt;getId());

        <span class="hljs-keyword">return</span> $user;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
}
</code></pre>
<p>Для приложений, требующих комплексного контроля доступа с динамически обновляемыми данными авторизации, существуют
специальные пользовательские интерфейсы (так называемые админ-панели), которые могут быть разработаны с
использованием API, предлагаемого <code>authManager</code>.</p>
<h3 id="ispolzovanie-pravil">Использование правил <a href="security-authorization.html#ispolzovanie-pravil" class="hashlink">&para;</a></h3><p>Как упомянуто выше, правила добавляют дополнительные ограничения на роли и разрешения. Правила — это классы, расширяющие
<a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-rule">yii\rbac\Rule</a>. Они должны реализовывать метод <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-rule#execute()-detail">execute()</a>. В иерархии, созданной нами ранее,
автор не может редактировать свой пост. Давайте исправим это. Сначала мы должны создать правило, проверяющее
что пользователь является автором поста:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">rbac</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">rbac</span>\<span class="hljs-title">Rule</span>;

<span class="hljs-comment">/**
 * Проверяем authorID на соответствие с пользователем, переданным через параметры
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorRule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rule</span>
</span>{
    <span class="hljs-keyword">public</span> $name = <span class="hljs-string">'isAuthor'</span>;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> string|int $user the user ID.
     * <span class="hljs-doctag">@param</span> Item $item the role or permission that this rule is associated width.
     * <span class="hljs-doctag">@param</span> array $params parameters passed to ManagerInterface::checkAccess().
     * <span class="hljs-doctag">@return</span> bool a value indicating whether the rule permits the role or permission it is associated with.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">($user, $item, $params)</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">isset</span>($params[<span class="hljs-string">'post'</span>]) ? $params[<span class="hljs-string">'post'</span>]-&gt;createdBy == $user : <span class="hljs-keyword">false</span>;
    }
}
</code></pre>
<p>Правило выше проверяет, что <code>post</code> был создан <code>$user</code>. Мы создадим специальное разрешение <code>updateOwnPost</code> в команде,
которую мы использовали ранее:</p>
<pre><code class="hljs php language-php">$auth = Yii::$app-&gt;authManager;

<span class="hljs-comment">// add the rule</span>
$rule = <span class="hljs-keyword">new</span> \app\rbac\AuthorRule;
$auth-&gt;add($rule);

<span class="hljs-comment">// добавляем разрешение "updateOwnPost" и привязываем к нему правило.</span>
$updateOwnPost = $auth-&gt;createPermission(<span class="hljs-string">'updateOwnPost'</span>);
$updateOwnPost-&gt;description = <span class="hljs-string">'Update own post'</span>;
$updateOwnPost-&gt;ruleName = $rule-&gt;name;
$auth-&gt;add($updateOwnPost);

<span class="hljs-comment">// "updateOwnPost" будет использоваться из "updatePost"</span>
$auth-&gt;addChild($updateOwnPost, $updatePost);

<span class="hljs-comment">// разрешаем "автору" обновлять его посты</span>
$auth-&gt;addChild($author, $updateOwnPost);
</code></pre>
<p>Теперь мы имеем следующую иерархию:</p>
<p><img class="img-responsive" src="https://www.yiiframework.com/doc/guide/2.0/ru/images/rbac-hierarchy-2.png" alt="Иерархия RBAC с правилом" title="Иерархия RBAC с правилом" /></p>
<h3 id="proverka-dostupa">Проверка доступа <a href="security-authorization.html#proverka-dostupa" class="hashlink">&para;</a></h3><p>С готовыми авторизационными данными проверка доступа — это просто вызов метода <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-checkaccessinterface#checkAccess()-detail">yii\rbac\ManagerInterface::checkAccess()</a>.
Так как большинство проверок доступа относятся к текущему пользователю, для удобства Yii предоставляет сокращённый метод
<a href="https://www.yiiframework.com/doc/api/2.0/yii-web-user#can()-detail">yii\web\User::can()</a>, который можно использовать как показано ниже:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">if</span> (\Yii::$app-&gt;user-&gt;can(<span class="hljs-string">'createPost'</span>)) {
    <span class="hljs-comment">// create post</span>
}
</code></pre>
<p>Если текущий пользователь Jane с ID=1, мы начнём с <code>createPost</code> и попробуем добраться до <code>Jane</code>:</p>
<p><img class="img-responsive" src="https://www.yiiframework.com/doc/guide/2.0/ru/images/rbac-access-check-1.png" alt="Проверка доступа" title="Проверка доступа" /></p>
<p>Для того чтобы проверить, может ли пользователь обновить пост, нам надо передать дополнительный параметр,
необходимый для правила <code>AuthorRule</code>, описанного ранее:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">if</span> (\Yii::$app-&gt;user-&gt;can(<span class="hljs-string">'updatePost'</span>, [<span class="hljs-string">'post'</span> =&gt; $post])) {
    <span class="hljs-comment">// update post</span>
}
</code></pre>
<p>Вот что происходит если текущим пользователем является John:</p>
<p><img class="img-responsive" src="https://www.yiiframework.com/doc/guide/2.0/ru/images/rbac-access-check-2.png" alt="Проверка доступа" title="Проверка доступа" /></p>
<p>Мы начинаем с <code>updatePost</code> и переходим к <code>updateOwnPost</code>. Для того чтобы это произошло, правило <code>AuthorRule</code> должно вернуть
<code>true</code> при вызове метода <code>execute</code>. Метод получает <code>$params</code>, переданный при вызове метода <code>can</code>, значение которого равно
<code>['post' =&gt; $post]</code>. Если всё правильно, мы увидим, что <code>author</code> привязан к John.</p>
<p>В случае Jane это немного проще, потому что она admin:</p>
<p><img class="img-responsive" src="https://www.yiiframework.com/doc/guide/2.0/ru/images/rbac-access-check-3.png" alt="Проверка доступа" title="Проверка доступа" /></p>
<p>Есть несколько способов реализовать авторизацию в контроллере. Если вам необходимы отдельные права на
добавление и удаление, то проверку стоит делать в каждом действии. Вы можете либо использовать условие выше в каждом
методе действия, либо использовать <a href="https://www.yiiframework.com/doc/api/2.0/yii-filters-accesscontrol">yii\filters\AccessControl</a>:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> [
        <span class="hljs-string">'access'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; AccessControl::class,
            <span class="hljs-string">'rules'</span> =&gt; [
                [
                    <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                    <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'index'</span>],
                    <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'managePost'</span>],
                ],
                [
                    <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                    <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'view'</span>],
                    <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'viewPost'</span>],
                ],
                [
                    <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                    <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'create'</span>],
                    <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'createPost'</span>],
                ],
                [
                    <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                    <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'update'</span>],
                    <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'updatePost'</span>],
                ],
                [
                    <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                    <span class="hljs-string">'actions'</span> =&gt; [<span class="hljs-string">'delete'</span>],
                    <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'deletePost'</span>],
                ],
            ],
        ],
    ];
}
</code></pre>
<p>Если права на все CRUD операции выдаются вместе, то лучшее решение в этом случае — завести одно разрешение
вроде <code>managePost</code> и проверять его в <a href="https://www.yiiframework.com/doc/api/2.0/yii-web-controller#beforeAction()-detail">yii\web\Controller::beforeAction()</a>.</p>
<h3 id="ispolzovanie-roli-po-umolcaniu">Использование роли по умолчанию <a href="security-authorization.html#ispolzovanie-roli-po-umolcaniu" class="hashlink">&para;</a></h3><p>Роль по умолчанию — это роль, которая <em>неявно</em> присваивается <em>всем</em> пользователям. Вызов метода
<a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-managerinterface#assign()-detail">yii\rbac\ManagerInterface::assign()</a> не требуется, и авторизационные данные не содержат информации о назначении.</p>
<p>Роль по умолчанию обычно связывают с правилом, определяющим к какой роли принадлежит каждый пользователь.</p>
<p>Роли по умолчанию обычно используются в приложениях, которые уже имеют какое-то описание ролей. Для примера, приложение
может иметь столбец "group" в таблице пользователей, и каждый пользователь принадлежит к какой-то группе. Если каждая
группа может быть сопоставлена роли в модели RBAC, вы можете использовать роль по умолчанию для автоматического назначения
каждому пользователю роли RBAC. Давайте используем пример, чтобы понять как это можно сделать.</p>
<p>Предположим что в таблице пользователей у вас есть столбец <code>group</code>, в котором значение 1 представляет группу "администратор",
а 2 — группу "автор". Вы планируете иметь две RBAC роли: <code>admin</code> и <code>author</code>, представляющие разрешения для двух
соответствующих групп. Вы можете настроить данные роли как показано ниже.</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">rbac</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Yii</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">rbac</span>\<span class="hljs-title">Rule</span>;

<span class="hljs-comment">/**
 * Checks if user group matches
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserGroupRule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rule</span>
</span>{
    <span class="hljs-keyword">public</span> $name = <span class="hljs-string">'userGroup'</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execute</span><span class="hljs-params">($user, $item, $params)</span>
    </span>{
        <span class="hljs-keyword">if</span> (!Yii::$app-&gt;user-&gt;isGuest) {
            $group = Yii::$app-&gt;user-&gt;identity-&gt;group;
            <span class="hljs-keyword">if</span> ($item-&gt;name === <span class="hljs-string">'admin'</span>) {
                <span class="hljs-keyword">return</span> $group == <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">elseif</span> ($item-&gt;name === <span class="hljs-string">'author'</span>) {
                <span class="hljs-keyword">return</span> $group == <span class="hljs-number">1</span> || $group == <span class="hljs-number">2</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
}

$auth = Yii::$app-&gt;authManager;

$rule = <span class="hljs-keyword">new</span> \app\rbac\UserGroupRule;
$auth-&gt;add($rule);

$author = $auth-&gt;createRole(<span class="hljs-string">'author'</span>);
$author-&gt;ruleName = $rule-&gt;name;
$auth-&gt;add($author);
<span class="hljs-comment">// ... add permissions as children of $author ...</span>

$admin = $auth-&gt;createRole(<span class="hljs-string">'admin'</span>);
$admin-&gt;ruleName = $rule-&gt;name;
$auth-&gt;add($admin);
$auth-&gt;addChild($admin, $author);
<span class="hljs-comment">// ... add permissions as children of $admin ...</span>
</code></pre>
<p>Обратите внимание, так как "author" добавлен как дочерняя роль к "admin", следовательно, в реализации метода <code>execute()</code>
класса правила вы должны учитывать эту иерархию. Именно поэтому для роли "author" метод <code>execute()</code> вернёт истину,
если пользователь принадлежит к группам 1 или 2 (это означает, что пользователь находится в группе
администраторов или авторов)</p>
<p>Далее настроим <code>authManager</code> с помощью перечисления ролей в свойстве <a href="https://www.yiiframework.com/doc/api/2.0/yii-rbac-basemanager#$defaultRoles-detail">yii\rbac\BaseManager::$defaultRoles</a>:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-string">'components'</span> =&gt; [
        <span class="hljs-string">'authManager'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\rbac\PhpManager'</span>,
            <span class="hljs-string">'defaultRoles'</span> =&gt; [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'author'</span>],
        ],
        <span class="hljs-comment">// ...</span>
    ],
];
</code></pre>
<p>Теперь, если вы выполните проверку доступа, для обоих ролей <code>admin</code> и <code>author</code> будет выполнена проверка правила,
асоциированного с ними. Если правило вернёт истину, это будет означать, что роль применяется к текущему пользователю.
На основании правила, реализованного выше: если пользователь входит в группу 1, пользователю будет назначена роль <code>admin</code>;
и если значение <code>group</code> равно 2, будет применена роль <code>author</code>.</p>

    <div class="prev-next">
        <div class="prev-next__left"><a href="https://www.yiiframework.com/doc/guide/2.0/ru/security-authentication"><span class="chevron-left" aria-hidden="true"></span> Аутентификация</a></div><div class="prev-next__center"><a href="security-authorization.html#top">Go to Top <span class="chevron-up" aria-hidden="true"></span></a></div><div class="prev-next__right"><a href="https://www.yiiframework.com/doc/guide/2.0/ru/security-passwords">Работа с паролями <span class="chevron-right" aria-hidden="true"></span></a></div>    </div>

        <div class="edit-box">
        <div class="edit-icon"><i class="fa fa-github"></i></div>
        <p class="lang-en">
            Found a typo or you think this page needs improvement?<br />
                <a href="https://github.com/yiisoft/yii2/edit/master/docs/guide-ru/security-authorization.md">Edit it on github</a> !
        </p>
    </div>
    
</div>
        </div>
    </div>
</div>

    <div class="comments-wrapper">
        <div class="container comments">
            
<div class="row" id="user-notes">
    <div class="col-md-offset-2 col-md-9">
                    <span class="heading">User Contributed Notes</span>
            </div>
</div>
<div class="row">
    <div class="col-md-offset-2 col-md-9">
        <div class="component-comments lang-en" id="comments">
                    </div>
    </div>
</div>
<div class="row">
    <div class="col-md-offset-2 col-md-9">
        <span class="heading">Leave a comment</span>
    </div>
</div>
<div class="row">
    <div class="col-md-offset-2 col-md-9">
                    <p><a href="https://www.yiiframework.com/signup">Signup</a> or <a href="https://www.yiiframework.com/login">Login</a> in order to comment.</p>
            </div>
</div>
        </div>
    </div>

            <div class="footer-wrapper">
    <footer>
        <div class="container">
            <div class="footer-inner">
                <div class="row">
                    <div class="col-md-2 col-sm-4 hidden-xs">
                        <ul class="footerList">
  <li class="footerList_item">
    <div>About</div>
  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/doc/guide/2.0/en/intro-yii">About Yii</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/news">News</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/license">License</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/contact">Contact Us</a>  </li>
</ul>
                    </div>
                    <div class="col-md-2 col-sm-4 hidden-xs">
                        <ul class="footerList">
  <li class="footerList_item">
    <div>Downloads</div>
  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/download">Framework</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/download#offline-documentation">Documentation</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/extensions">Extensions</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/logo">Logo</a>  </li>
</ul>
                    </div>
                    <div class="col-md-2 col-sm-4 hidden-xs">
                        <ul class="footerList">
  <li class="footerList_item">
    <div>Documentation</div>
  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/doc/guide">Guide</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/doc/api">API</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/wiki">Wiki</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/resources">Resources</a>  </li>
</ul>
                    </div>
                    <div class="col-md-2 col-sm-4 hidden-xs">
                        <ul class="footerList">
  <li class="footerList_item">
    <div>Development</div>
  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/contribute">Contribute</a>  </li>
  <li class="footerList_item">
    <a href="https://github.com/yiisoft/yii2/commits/master" rel="noopener noreferrer" target="_blank">Latest Updates</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/report-issue">Report a Bug</a>  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/security">Report Security Issue</a>  </li>
</ul>
                    </div>
                    <div class="col-md-2 col-sm-4 hidden-xs">
                        <ul class="footerList">
    <li class="footerList_item">
        <div>Community</div>
    </li>
    <li class="footerList_item">
        <a href="https://www.yiiframework.com/forum">Forum</a>    </li>
    <li class="footerList_item">
        <a href="https://www.yiiframework.com/chat">Live Chat</a>    </li>
    <li class="footerList_item">
        <a href="https://www.facebook.com/groups/yiitalk/" target="_blank" rel="noopener noreferrer">Facebook Group</a>
    </li>
    <li class="footerList_item">
        <a href="https://www.yiiframework.com/user/halloffame">Hall of Fame</a>    </li>
    <li class="footerList_item">
        <a href="https://www.yiiframework.com/badges">Badges</a>    </li>
</ul>
                    </div>
                    <div class="col-md-2 col-sm-4 hidden-xs">
                        <ul class="footerList">
  <li class="footerList_item">
      <span class="social">
          <a href="https://github.com/yiisoft" aria-label="GitHub Account" target="_blank" rel="noopener noreferrer"><i class="fa fa-github"></i></a>
          <a href="https://twitter.com/yiiframework" aria-label="Twitter Account" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i></a>
          <a href="https://www.facebook.com/groups/yiitalk/" aria-label="Facebook Group" target="_blank" rel="noopener noreferrer"><i class="fa fa-facebook"></i></a>
          <a href="https://www.yiiframework.com/rss.xml" aria-label="RSS Feed"><i class="fa fa-rss"></i></a>      </span>
  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/tos">Terms of service</a>  </li>
  <li class="footerList_item">
      <a href="https://www.yiiframework.com/license">License</a>  </li>
  <li class="footerList_item">
      <a href="https://github.com/yiisoft-contrib/yiiframework.com" target="_blank" rel="noopener noreferrer">Website Source Code</a>
  </li>
  <li class="footerList_item">
      &nbsp;
  </li>
  <li class="footerList_item">
    &copy; 2008 - 2022 Yii
  </li>
  <li class="footerList_item">
      Design: <a href="https://www.eshill.ru/" target="_blank" rel="noopener noreferrer">Eshill</a>
  </li>
</ul>
                    </div>
                    <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                        <div class="center-block">
                            <div>
                                <ul class="footerList">
  <li class="footerList_item">
      <span class="social">
          <a href="https://github.com/yiisoft" aria-label="GitHub Account" target="_blank" rel="noopener noreferrer"><i class="fa fa-github"></i></a>
          <a href="https://twitter.com/yiiframework" aria-label="Twitter Account" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i></a>
          <a href="https://www.facebook.com/groups/yiitalk/" aria-label="Facebook Group" target="_blank" rel="noopener noreferrer"><i class="fa fa-facebook"></i></a>
          <a href="https://www.yiiframework.com/rss.xml" aria-label="RSS Feed"><i class="fa fa-rss"></i></a>      </span>
  </li>
  <li class="footerList_item">
    <a href="https://www.yiiframework.com/tos">Terms of service</a>  </li>
  <li class="footerList_item">
      <a href="https://www.yiiframework.com/license">License</a>  </li>
  <li class="footerList_item">
      <a href="https://github.com/yiisoft-contrib/yiiframework.com" target="_blank" rel="noopener noreferrer">Website Source Code</a>
  </li>
  <li class="footerList_item">
      &nbsp;
  </li>
  <li class="footerList_item">
    &copy; 2008 - 2022 Yii
  </li>
  <li class="footerList_item">
      Design: <a href="https://www.eshill.ru/" target="_blank" rel="noopener noreferrer">Eshill</a>
  </li>
</ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 text-center">
                        <ul class="footerList">
    <li class="footerList_item">
        <div>Supported by</div>
    </li>
    <li class="footerList_item">
            <a href="https://opencollective.com/yiisoft" aria-label="OpenCollective" target="_blank" rel="noopener
            noreferrer"><img
                    alt="OpenCollective" height="40" src="https://www.yiiframework.com/image/collective.png"/></a>
    </li>
    <li class="footerList_item">
        <a href="https://www.jetbrains.com/?from=yii" aria-label="JetBrains website" target="_blank" rel="noopener
        noreferrer"><img
                alt="JetBrains logo" width="80" src="https://www.yiiframework.com/image/jetbrains.svg"/></a>
    </li>
</ul>




                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>

        </div> <!-- close the id="page-wrapper" -->

        <script src="https://www.yiiframework.com/assets/85247087/js/all.min.js?v=1645275708"></script>
<script>jQuery(function ($) {

  $('[data-toggle="offcanvas"]').click(function () {
    $('.row-offcanvas').toggleClass('active')
  });

});</script>    </body>
</html>
