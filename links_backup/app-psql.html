<!DOCTYPE html>

	









<html lang="ru">
<head>
    <title>PostgreSQL : Документация: 9.6: psql : Компания Postgres Professional</title>
	
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="msapplication-TileImage" content="/img/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
	<meta name="p:domain_verify" content="26bcf8b79467031bea9a8631dd6f0b11"/>
	<meta name="google-site-verification" content="Vy_P_vr-Jp6rfy_wQpPSplaU1p3wfEPSwtHOQBFZU7Q" />
    <meta name="csrf-token" content="">

	<meta property="og:url"             content="https://postgrespro.ru/docs/postgresql/9.6/app-psql" >
	<meta property="fb:app_id"          content="546521955527856" >
	<meta property="og:type"            content="website" >
	<meta property="og:title"       content="PostgreSQL : Документация: 9.6: psql" >
	<meta property="og:image"       content="https://postgrespro.ru/img/v3/logo2.png" >
	
	
	<link rel="alternate" type="application/rss+xml" title="RSS" href="https://postgrespro.ru/rss">
	<link rel="apple-touch-icon" sizes="57x57" href="https://postgrespro.ru/img/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://postgrespro.ru/img/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://postgrespro.ru/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://postgrespro.ru/img/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://postgrespro.ru/img/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://postgrespro.ru/img/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://postgrespro.ru/img/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://postgrespro.ru/img/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://postgrespro.ru/img/apple-touch-icon-180x180.png">
    <link rel="apple-touch-icon" href="https://postgrespro.ru/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/favicon-16x16.png" sizes="16x16">
    <link rel="manifest"  href="https://postgrespro.ru/img/manifest.json">
    <link rel="mask-icon" href="https://postgrespro.ru/img/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="https://postgrespro.ru/img/favicon.ico">


	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/bootstrap.min.css">
	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/style_v3.css">
	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/hljs.css">
	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/docs.css">

	<script src="https://postgrespro.ru/j/all.js?1"></script>
	



	
<style>
.main > section {
	padding-top: 0;
}

.doc-list h3 {
	margin-bottom: 25px;
}

.doc-nav-versions li > a.disabled { 
	pointer-events: none;
	color: #525f62;
	text-decoration: none;
}
.doc-list { list-style: none; color: #343a3d; }
.doc-list ul { margin: 2px 0 2px -26px }
.doc-list li { display: inline; padding-right: 4px; }
.doc-list li.separator { padding-right: 10px; }
.doc-list a.disabled {
	color: #343a3d;
	pointer-events: none;
}
.doc-list a::before {
	position:relative; 
	left: -2px; 
	top: 2px; 
} 

.menu-docs { 
	font-weight: 500; 
    margin: 0 auto 0 auto ;
    
    padding-top: 3em;
    padding-bottom: 0;
    width: 100%;
}
.menu-docs a.disabled {
	pointer-events: none;
}
.menu-product-wrapper {
	margin-bottom: 1em;
	display: inline-block; text-align: left; padding-left:2em;vertical-align: top;
}
.menu-product-wrapper a.active{
	font-weight: 700;
}
.menu-product-wrapper a.active.disabled{
	color: black !important;
}
.menu-versions-wrapper {
	margin-top: 0.5em;
}

#toggle-lang input[type="radio"] {
	position: absolute;clip: 
	rect(0, 0, 0, 0);
	pointer-events: none;
}


.menu-doc-files-group {
	position: absolute;
	right: 0;
	margin-right: 1em; 
}

.toggle-lang-group {
	top: 96px; 
	position:sticky;
	display: block; 
	float:right; 
	margin-top: 42px;
}

nav.menu-docs .btn-group {
	vertical-align: inherit;
	
}

.autolink:before {
	content: '\e80f'; 
	font-family: "fontello";
	font-size: 2em;
	float: left;
	margin-top: -0.4em;
	margin-left: -1.5em;
	color: black;
	opacity: 0;
	transition: opacity 1s ;
}

dt:hover > .autolink:before,
div:hover > .autolink:before {
	opacity: 0.4;
	transition: opacity 0.5s ;
}

</style>

	
	
	<script type="text/javascript">
		var LANG = 'ru';
	</script>
	

</head>
<body>
	
<div class="modal fade" id="loginForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog"><div class="modal-content"><div class="modal-header">
		<h5 class="modal-title">Вход в личный кабинет</h5>
	</div><div class="modal-body">
			<input type="text"     required name="email"    class="primary" placeholder="введите e-mail"  >
			<input type="password" required name="password" class="primary" placeholder="введите пароль">
	</div>
	<div class="modal-footer" >
		<button type="submit" class="btn btn-primary ">Войти</button>
		<div class="text-center" style="display: block;width: 100%; margin-left:0; margin-top:0.5em;">
			<button type="button" class="btn btn-psevdo btn-restore float-left">Забыли пароль?</button>
			<button type="button" class="btn btn-outline-primary btn-reg float-right">Регистрация</button><hr style="clear: both;margin-top:4em;">
			<button type="button" class="btn btn-outline-success " onClick="document.location.href = '/';">Спасибо, потом</button>
		</div>
	</div>
	</div></div>
	</form>
</div>

<div class="modal fade" id="regForm" role="dialog" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h5 class="modal-title">Регистрация пользователя</h5>
	</div>
	<div class="modal-body">		
		<input type="text"     required name="email"          placeholder="E-mail" >
		<input type="password" required name="password"       placeholder="Пароль" >
		<input type="password" required name="passw2"         placeholder="Пароль повторно"  >
		<input type="text"     required name="last_name_ru"   placeholder="Фамилия">
		<input type="text"     required name="first_name_ru"  placeholder="Имя"    >
		<!-- input type="text"              name="middle_name_ru" placeholder="Отчество">
		<input type="text"              name="phone"          placeholder="Телефон" -->
		<label><input id="agree" name="agree" type="checkbox"/> Подтверждаю</label>
	 		<span class="toggler" style="display:inline"  onClick="loadAgreement();">согласие с обработкой персональных данных</span>
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary ">Зарегистрироваться</button>
		<button class="btn btn-psevdo btn-back">назад</button>
	</div></div></div>
	</form>
</div>

<style>
	.cabinet-modal .modal-dialog{
		margin: 5em 2em auto auto;
	}
	.cabinet-modal .icon-cabinet {
		display:block;
		margin:auto;
		font-size: 2em;
	}
</style>


<div class="modal fade cabinet-modal" id="cabinet-modal-info" tabindex="-1" role="dialog" aria-labelledby="cabinet-modal-infoLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
         <span class="fa fa-sign-in fa-lg icon-cabinet cabinet-button btn btn-primary xs-none text-center invisible"></span>
      </div>
      <div class="modal-body">
	      <p id="name" class="text-center text-muted"></p>
	      <p id="e-mail" class="text-center font-weight-light"></p>
	      <p class="text-center"><a href="https://postgrespro.ru/user">Личный кабинет</a></p>
      </div>
      <div class="modal-footer" style="width: 85%;margin: auto;">
	      <button class="text-center btn btn-warning" id="cabinet-action-button" style="width: 100%;" onClick="logout();">Выйти</button>
      </div>
    </div>
  </div>
</div>



<div id="warp-agreement" style="z-index: 10000;">
<div class="pop-up-agreement" style="display: none;z-index: 10000;"  onClick="$(this).slideToggle(150);" >
<div class="agreement" >
<div class="pop-up-close">&#10006;</div>
<div id="agreement">
</div>
</div>
</div>
</div>



<div class="modal fade" id="restoreForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h5 class="modal-title">Восстановление пароля</h5>
	</div>
	<div class="modal-body">
		<p>Укажите e-mail, на который будет выслан код восстановления пароля.</p>
		<input type="text" name="email" required placeholder="введите e-mail">
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary ">Продолжить</button>
		<button type="button" class="btn btn-psevdo btn-back">назад</button>
	</div></div></div>
	</form>
</div>

<div class="modal fade" id="confirmForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h4 class="modal-title">Подтверждение аккаунта</h4>
	</div>
	<div class="modal-body">
		<p>На указанный вами адрес e-mail был выслан код подтверждения аккаунта. Введите полученный код для продолжения:</p>
		<input type="text" name="key" required placeholder="введите код">
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary ">Продолжить</button>
		<button type="button" class="btn btn-psevdo btn-back">назад</button>
	</div></div></div>
	</form>
</div>

<div class="modal fade" id="newPasswordForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h4 class="modal-title">Изменение пароля</h4>
	</div><div class="modal-body">
		<p>Введите новый пароль два раза:</p>
		<input required type="password" name="password"><br>
		<input required type="password" name="pass2">
	</div><div class="modal-footer">
		<div class="row">
			<div class="col-sm-12"><button type="submit" class="btn btn-success ">Продолжить</button></div>
		</div>
	</div></div></div>
	</form>
</div>

	
	
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.7";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
		
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5&appId=860619283960577";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
		</script>
		<script src="https://apis.google.com/js/platform.js" async defer>
		  {lang: 'ru'}
		</script>
		

	
	

	
    <header>
	<nav class="navbar navbar-expand-xl navbar-light bg-light justify-content-between">
		<!-- div class="mr-2">
			<span class=" d-none d-xl-inline">{XL}</span>
			<span class=" d-none d-lg-inline d-xl-none">{LG}</span>
			<span class=" d-none d-md-inline d-lg-none">{MD}</span>
			<span class=" d-none d-sm-inline d-md-none">{SM}</span>
			<span class=" d-block d-sm-none">{XS}</span>
		</div -->
		
		<a class="navbar-brand" href="https://postgrespro.ru/">
			<img src="https://postgrespro.ru/img/v3/PostgresPro_logo.svg" alt="Postgres Pro" title="Postgres Pro">			
		</a>
		
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		  
		
		<div class="collapse navbar-collapse" id="navbarNavDropdown">			
			
	<ul class="nav navbar-nav float-left">
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="app-psql.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" > Компания</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="app-psql.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/about" class="dropdown-item
						">О компании</a>
				
					<a href="https://postgrespro.ru/about/team" class="dropdown-item
						">Руководство</a>
				
					<a href="https://postgrespro.ru/about/license" class="dropdown-item
						">Документы</a>
				
					<a href="https://postgrespro.ru/partners" class="dropdown-item
						">Партнёры</a>
				
					<a href="https://postgrespro.ru/vacancies" class="dropdown-item
						">Вакансии</a>
				
					<a href="https://postgrespro.ru/contacts" class="dropdown-item
						">Контакты</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="app-psql.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Продукты</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="app-psql.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/products/postgrespro/enterprise" class="dropdown-item
						">СУБД POSTGRES PRO ENTERPRISE</a>
				
					<a href="https://postgrespro.ru/products/postgrespro/enterprisecertified" class="dropdown-item
						">СУБД POSTGRES PRO ENTERPRISE CERTIFIED</a>
				
					<a href="https://postgrespro.ru/products/postgrespro/certified" class="dropdown-item
						">СУБД POSTGRES PRO CERTIFIED</a>
				
					<a href="https://postgrespro.ru/products/postgrespro/standard" class="dropdown-item
						">СУБД POSTGRES PRO STANDARD</a>
				
					<a href="https://postgrespro.ru/windows" class="dropdown-item
						">СУБД PostgreSQL для Windows</a>
				
					<a href="https://postgrespro.ru/roadmap" class="dropdown-item
						">План разработок</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="app-psql.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Услуги</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="app-psql.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/services/support" class="dropdown-item
						">Техподдержка СУБД</a>
				
					<a href="https://postgrespro.ru/services/audit" class="dropdown-item
						">Аудит СУБД</a>
				
					<a href="https://postgrespro.ru/services/migration" class="dropdown-item
						">Миграция СУБД</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="app-psql.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" > Клиенты</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="app-psql.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/trusted" class="dropdown-item
						">Нам доверяют</a>
				
					<a href="https://postgrespro.ru/reviews" class="dropdown-item
						">Отзывы</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="https://postgrespro.ru/education" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Образование</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="app-psql.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/docs" class="dropdown-item
						">Документация</a>
				
					<a href="https://postgrespro.ru/education/books" class="dropdown-item
						">Книги</a>
				
					<a href="https://postgrespro.ru/education/courses" class="dropdown-item
						">Учебные курсы</a>
				
					<a href="https://postgrespro.ru/education/cert" class="dropdown-item
						">Сертификация</a>
				
					<a href="https://postgrespro.ru/education/university" class="dropdown-item
						">Курсы для ВУЗов</a>
				
					<a href="https://postgrespro.ru/education/glossary" class="dropdown-item
						">Глоссарий</a>
				
					<a href="https://postgrespro.ru/education/demodb" class="dropdown-item
						">Демо-база</a>
				
					<a href="https://postgrespro.ru/list" class="dropdown-item
						">Списки рассылки</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="app-psql.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Новости</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="app-psql.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/blog" class="dropdown-item
						">Блог</a>
				
					<a href="https://postgrespro.ru/blog/media" class="dropdown-item
						">СМИ  о нас</a>
				
					<a href="https://postgrespro.ru/blog/postgresso" class="dropdown-item
						">Дайджест Postgresso</a>
				
					<a href="https://postgrespro.ru/events" class="dropdown-item
						">Мероприятия</a>
				
					<a href="https://postgrespro.ru/about/press" class="dropdown-item
						">Контакты для СМИ</a>
				
				</div>
			</li>
		
	</ul>
	
<script type="text/template" id="menu-tmpl">
</script>
		<ul class="navbar-nav d-xl-none" style="display: inline-block; float: right;">
			<li class="nav-item " style="display: inline-block !important; padding-right: 1em;"><a href="https://postgrespro.ru/search" class="nav-item nav-link icon-search text-primary"></a></li>
			
			<li class="nav-item "       style="display: inline-block !important;"><a class="nav-item nav-link " href="app-psql.html#">RU</a></li>
			<li class="nav-item active" style="display: inline-block !important;"><a class="nav-item nav-link active" href="https://postgrespro.com/docs/postgresql/9.6/app-psql">EN</a></li>
			
			<div style="display: inline-block;">
				
<style>
	.account-menu { 
		display: inline-block; 
		white-space: nowrap;
	}
	.cabinet-button  {
		margin: 0 0 0 1em;
		padding: 0.5em 0.5em;
		border-radius: 50%;		
	}
	.cabinet-info {
		font-weight: 700;
		cursor: pointer;		
	}
	.cabinet-info:hover {
		color: green;		
	}
</style>
	<li class="nav-item ">
		<div class="account-menu" data-action="info" id="cabinet-buttons" >
			<a class="fa fa-sign-in  fa-lg btn btn-primary cabinet-button invisible" onClick="showLoginLogout(this); return false;" href="https://postgrespro.ru/user" title="Личный кабинет"></a>
			<span class="nav-item cabinet-info invisible" onClick="return showAccountInfo();"  title="Дополнительно…">⋮</span>
		</div>
	</li>

			</div>
		</ul>
	


		</div>

		
<script type="text/template" id="menu-tmpl">
</script>
	<div class=" d-none d-xl-flex">
		<ul class="navbar-nav float-right">
			<li id="li-search"><a class="nav-item nav-link icon-search text-primary" id="search-button" data-action="null" style="font-size: 1.6em;top: -6px;position: relative;" onClick="showSearch(this);"></a></li>
			
			<li class="nav-item "><a class="nav-item nav-link " href="app-psql.html#">RU</a></li>
			<li class="nav-item active"><a class="nav-item nav-link active" href="https://postgrespro.com/docs/postgresql/9.6/app-psql">EN</a></li>
			
			
<style>
	.account-menu { 
		display: inline-block; 
		white-space: nowrap;
	}
	.cabinet-button  {
		margin: 0 0 0 1em;
		padding: 0.5em 0.5em;
		border-radius: 50%;		
	}
	.cabinet-info {
		font-weight: 700;
		cursor: pointer;		
	}
	.cabinet-info:hover {
		color: green;		
	}
</style>
	<li class="nav-item ">
		<div class="account-menu" data-action="info" id="cabinet-buttons" >
			<a class="fa fa-sign-in  fa-lg btn btn-primary cabinet-button invisible" onClick="showLoginLogout(this); return false;" href="https://postgrespro.ru/user" title="Личный кабинет"></a>
			<span class="nav-item cabinet-info invisible" onClick="return showAccountInfo();"  title="Дополнительно…">⋮</span>
		</div>
	</li>

		</ul>
	</div>
	

		
	</nav>
    </header>
    
    <main name="main">
    <div class="main" name="main">
		

<script>
$(function() {
	if ("" != "")
		toggleLang('', 'postgresql', '9.6', 'app-psql');
		
$('div.sect2').each(function(i,r){
	var _id = $(r).attr('id');
	if (_id !== undefined) {
		if ($(r).find('h3:first').length > 0) {
			$(r).html('<a href="app-psql.html#'+_id+'" class="autolink"></a>'+$(r).html());
		}
	} 
});		

$('dt').each(function(i,r){
	var _id = $(r).attr('id');
	if (_id !== undefined) {
		$(r).html('<a href="app-psql.html#'+_id+'" class="autolink"></a>'+$(r).html());
	}
});		
	

	
})
</script>


<nav class="menu-docs text-center">
	<div  class="--d-none --d-sm-inline" style="float: right;">
		
			<div id="menu-doc-files" class="menu-doc-files-group d-none d-xl-inline" >
				
					<a href="https://postgrespro.ru/media/docs/postgresql/9.6/ru/postgres-A4-fop.pdf" class="pdf btn btn-outline-primary" title="pdf"></a><br>
				
					<a href="https://postgrespro.ru/media/docs/postgresql/9.6/ru/postgres.epub" class="epub btn btn-outline-primary" title="epub"></a><br>
				
			</div>
		
	
	</div>
	
	
		
	<div class="doc-menu-wrapper doc-menu-wrapper-ru  ">
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgrespro" >Postgres Pro Standard</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/14/app-psql" 
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/13/app-psql" 
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/12/app-psql" 
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/11/app-psql" 
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/10/app-psql" 
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.6/app-psql" 
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.5/app-psql" 
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/enterprise" >Postgres Pro Enterprise</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/13/app-psql" 
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/12/app-psql" 
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/11/app-psql" 
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/10/app-psql" 
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/9.6/app-psql" 
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgresql" class="active" style="font-weight: 700;">PostgreSQL</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/14/app-psql" 
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/13/app-psql" 
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/12/app-psql" 
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/11/app-psql" 
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/10/app-psql" 
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"app-psql.html" 
							 
							class="disabled active btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.5/app-psql" 
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.4/app-psql" 
							 
							class=" btn btn-outline-primary">
							9.4										
						</a>	
					    	
		    	
				</div>
			</div>
		
		
	</div>

		
	<div class="doc-menu-wrapper doc-menu-wrapper-en  d-none">
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgrespro" >Postgres Pro Standard</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/14/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/13/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/12/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/11/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/10/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.6/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.5/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/enterprise" >Postgres Pro Enterprise</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/13/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/12/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/11/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/10/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/9.6/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgresql" class="active" style="font-weight: 700;">PostgreSQL</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/14/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/13/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/12/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/11/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/10/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.6/app-psql?lang=en"
							 
							class="disabled active btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.5/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.4/app-psql?lang=en"
							 
							class=" btn btn-outline-primary">
							9.4										
						</a>	
					    	
		    	
				</div>
			</div>
		
		
	</div>

		
	<div class="doc-menu-wrapper doc-menu-wrapper-ru-en  d-none">
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgrespro" >Postgres Pro Standard</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/14/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/13/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/12/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/11/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/10/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.6/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.5/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/enterprise" >Postgres Pro Enterprise</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/13/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/12/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/11/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/10/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/9.6/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgresql" class="active" style="font-weight: 700;">PostgreSQL</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/14/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/13/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/12/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/11/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/10/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.6/app-psql?lang=ru-en"
							 
							class="disabled active btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.5/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.4/app-psql?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.4										
						</a>	
					    	
		    	
				</div>
			</div>
		
		
	</div>


	

</nav>

				
<section class="container-fluid">
		<div id="toggle-lang" class="btn-group toggle-lang-group  " style="
		">
			<label class="btn btn-outline-success active" name="ru" style="cursor: pointer; margin: 0; width: 100%;">
				<input type="radio" autocomplete="off" name="ru" value="ru" checked onChange="toggleLang(this.value, 'postgresql', '9.6', 'app-psql'); return false;"> RU
			</label><br>
			<label class="btn btn-outline-success" name="en" style="cursor: pointer; margin: 0; width: 100%;">
				<input type="radio" autocomplete="off" name="en" value="en"  onChange="toggleLang(this.value, 'postgresql', '9.6', 'app-psql'); return false;"> EN
			</label><br>
			<label class="btn btn-outline-success" name="ru-en" style="cursor: pointer; margin: 0; width: 100%;">
				<input type="radio" autocomplete="off" name="ru-en" value="ru-en" onChange="toggleLang(this.value, 'postgresql', '9.6', 'app-psql'); return false;" > RU EN
			</label>
		</div>
<div class="container">
<div class="row docs content" id="docContent-wrapper-ppg">
    <div class="col-md-12" id="divDocRu">
    	
			<div><div class="navheader" xmlns="http://www.w3.org/TR/xhtml1/transitional"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="5"><span class="application" xmlns="http://www.w3.org/1999/xhtml">psql</span></th></tr><tr><td align="left" width="10%"><a accesskey="p" href="https://postgrespro.ru/docs/postgresql/9.6/app-pgrestore" title="pg_restore">Пред.</a> </td><td align="left" width="10%"><a accesskey="u" href="https://postgrespro.ru/docs/postgresql/9.6/reference-client" title="Клиентские приложения PostgreSQL">Наверх</a></td><th align="center" width="60%">Клиентские приложения PostgreSQL</th><td align="right" width="10%"><a accesskey="h" href="https://postgrespro.ru/docs/postgresql/9.6/index" title="Документация к PostgreSQL 9.6.24">Начало</a></td><td align="right" width="10%"> <a accesskey="n" href="https://postgrespro.ru/docs/postgresql/9.6/app-reindexdb" title="reindexdb">След.</a></td></tr></table><hr /></div><div class="refentry" id="app-psql"><div class="titlepage"></div><a class="indexterm" id="idp99536"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">psql</span></span></h2><p><span class="application">psql</span> — интерактивный терминал <span class="productname">PostgreSQL</span></div><div class="refsynopsisdiv"><h2>Синтаксис</h2><div class="cmdsynopsis"><p id="idp99549"><code class="command">psql</code> [<em class="replaceable"><code>параметр</code></em>...] [<em class="replaceable"><code>имя_бд</code></em> [<em class="replaceable"><code>имя_пользователя</code></em>]]</div></div><div class="refsect1" id="idp99557"><h2>Описание</h2><p>Программа <span class="application">psql</span> — это терминальный клиент для работы с <span class="productname">PostgreSQL</span>. Она позволяет интерактивно вводить запросы, передавать их в <span class="productname">PostgreSQL</span> и видеть результаты. Также запросы могут быть получены из файла или из аргументов командной строки. Кроме того, <span class="application">psql</span> предоставляет ряд метакоманд и различные возможности, подобные тем, что имеются у командных оболочек, для облегчения написания скриптов и автоматизации широкого спектра задач.</div><div class="refsect1" id="r1-app-psql-3"><h2>Параметры</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a</code><br /></span><span class="term"><code class="option">--echo-all</code></span><dd><p>Отправляет в стандартный вывод все непустые входные строки по мере их чтения. (Это не относится к строкам, считанным в интерактивном режиме.) Эквивалентно установке переменной <code class="varname">ECHO</code> в значение <code class="literal">all</code>.<dt><span class="term"><code class="option">-A</code><br /></span><span class="term"><code class="option">--no-align</code></span><dd><p>Переключение на невыровненный режим вывода. (По умолчанию, наоборот, используется выровненный режим вывода.)<dt><span class="term"><code class="option">-b</code><br /></span><span class="term"><code class="option">--echo-errors</code></span><dd><p>Печатает все команды SQL с ошибками в стандартный вывод. Равнозначно присвоению переменной <code class="varname">ECHO</code> значения <code class="literal">errors</code>.<dt><span class="term"><code class="option">-c <em class="replaceable"><code>команда</code></em></code><br /></span><span class="term"><code class="option">--command=<em class="replaceable"><code>команда</code></em></code></span><dd><p>Передаёт <span class="application">psql</span> <em class="replaceable"><code>команду</code></em> для выполнения. Этот ключ можно повторять и комбинировать в любом порядке с ключом <code class="option">-f</code>. Когда указывается <code class="option">-c</code> или <code class="option">-f</code>, <span class="application">psql</span> не читает команды со стандартного ввода; вместо этого она завершается сразу после обработки всех ключей <code class="option">-c</code> и <code class="option">-f</code> по порядку.<p>Заданная <em class="replaceable"><code>команда</code></em> должна быть либо командной строкой, которая полностью интерпретируется сервером (т. е. не использует специфические функции <span class="application">psql</span>), либо одиночной командой с обратной косой чертой. Таким образом, используя <code class="option">-c</code>, нельзя смешивать метакоманды <acronym class="acronym">SQL</acronym> и <span class="application">psql</span>. Но это можно сделать, передав несколько ключей <code class="option">-c</code> или передав строку в <span class="application">psql</span> через канал: <pre class="programlisting">psql -c '\x' -c 'SELECT * FROM foo;'</pre><p> или <pre class="programlisting">echo '\x \\ SELECT * FROM foo;' | psql</pre><p> (<code class="literal">\\</code> — разделитель метакоманд.)<p>Каждая строка <acronym class="acronym">SQL</acronym>-команд, заданная ключом <code class="option">-c</code>, передаётся на сервер как один запрос. Поэтому сервер выполняет её в одной транзакции, даже когда эта строка содержит несколько команд <acronym class="acronym">SQL</acronym>, если только в ней не содержатся явные команды <code class="command">BEGIN</code>/<code class="command">COMMIT</code>, разделяющие её на несколько транзакций. Кроме того, <span class="application">psql</span> печатает результат только последней <acronym class="acronym">SQL</acronym>-команды в строке. Это отличается от поведения, когда та же строка считывается из файла или подаётся на стандартный ввод <span class="application">psql</span>, так как в последнем случае <span class="application">psql</span> передаёт каждую команду <acronym class="acronym">SQL</acronym> отдельно.<p>Из-за такого поведения указание нескольких команд в одной строке <code class="option">-c</code> часто приводит к неожиданным результатам. Поэтому лучше использовать несколько ключей <code class="option">-c</code> или подавать команды на стандартный ввод <span class="application">psql</span>, применяя либо <span class="application">echo</span>, как показано выше, либо создаваемый прямо в оболочке документ, например: <pre class="programlisting">psql &lt;&lt;EOF
\x
SELECT * FROM foo;
EOF</pre><dt><span class="term"><code class="option">-d <em class="replaceable"><code>имя_бд</code></em></code><br /></span><span class="term"><code class="option">--dbname=<em class="replaceable"><code>имя_бд</code></em></code></span><dd><p>Указывает имя базы данных для подключения. Равнозначно указанию <em class="replaceable"><code>имя_бд</code></em> в первом аргументе, не являющемся ключом, в командной строке. Вместо имени может задаваться <a class="link" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-connect#libpq-connstring" title="32.1.1. Строки параметров подключения">строка подключения</a>. В этом случае параметры в строке подключения переопределяют одноимённые параметры, заданные в командной строке.<dt><span class="term"><code class="option">-e</code><br /></span><span class="term"><code class="option">--echo-queries</code></span><dd><p>Посылает все команды SQL, отправленные на сервер, ещё и на стандартный вывод. Эквивалентно установке переменной <code class="varname">ECHO</code> в значение <code class="literal">queries</code>.<dt><span class="term"><code class="option">-E</code><br /></span><span class="term"><code class="option">--echo-hidden</code></span><dd><p>Отображает фактические запросы, генерируемые <code class="command">\d</code> и другими командами, начинающимися с \. Это можно использовать для изучения внутренних операций в <span class="application">psql</span>. Эквивалентно установке переменной <code class="varname">ECHO_HIDDEN</code> значения <code class="literal">on</code>.<dt><span class="term"><code class="option">-f <em class="replaceable"><code>имя_файла</code></em></code><br /></span><span class="term"><code class="option">--file=<em class="replaceable"><code>имя_файла</code></em></code></span><dd><p>Читает команды из файла <em class="replaceable"><code>имя_файла</code></em>, а не из стандартного ввода. Этот ключ можно повторять и комбинировать в любом порядке с ключом <code class="option">-c</code>. Если указан ключ <code class="option">-c</code> или <code class="option">-f</code>, программа <span class="application">psql</span> не читает команды со стандартного ввода; вместо этого она завершается после обработки всех ключей <code class="option">-c</code> и <code class="option">-f</code> по очереди. Не считая этого, данный ключ по большому счёту равнозначен метакоманде <code class="command">\i</code>.<p>Если <em class="replaceable"><code>имя_файла</code></em> задано символом <code class="literal">-</code> (минус), считывается стандартный ввод до признака конца файла или до метакоманды <code class="command">\q</code>. Это позволяет перемежать интерактивный ввод с вводом из файлов. Однако заметьте, что Readline в этом случае не применяется (так же, как и с ключом <code class="option">-n</code>).<p>Использование этого параметра немного отличается от <code class="literal">psql &lt; <em class="replaceable"><code>имя_файла</code></em></code>. В основном, оба варианта будут делать то, что вы ожидаете, но с <code class="literal">-f</code> доступны некоторые полезные свойства, такие как сообщения об ошибках с номерами строк. Также есть небольшая вероятность, что запуск в таком режиме будет быстрее. С другой стороны, вариант с перенаправлением ввода из командного интерпретатора (в теории) гарантирует получение точно такого же вывода, какой вы получили бы, если бы ввели всё вручную.<dt><span class="term"><code class="option">-F <em class="replaceable"><code>разделитель</code></em></code><br /></span><span class="term"><code class="option">--field-separator=<em class="replaceable"><code>разделитель</code></em></code></span><dd><p>Использование <em class="replaceable"><code>разделитель</code></em> в качестве разделителя полей при невыровненном режиме вывода. Эквивалентно <code class="command">\pset fieldsep</code> или <code class="command">\f</code>.<dt><span class="term"><code class="option">-h <em class="replaceable"><code>компьютер</code></em></code><br /></span><span class="term"><code class="option">--host=<em class="replaceable"><code>компьютер</code></em></code></span><dd><p>Указывает имя компьютера, на котором работает сервер. Если значение начинается с косой черты, оно определяет каталог Unix-сокета.<dt><span class="term"><code class="option">-H</code><br /></span><span class="term"><code class="option">--html</code></span><dd><p>Включает табличный вывод в формате <acronym class="acronym">HTML</acronym>. Эквивалентно <code class="literal">\pset format html</code> или команде <code class="command">\H</code>.<dt><span class="term"><code class="option">-l</code><br /></span><span class="term"><code class="option">--list</code></span><dd><p>Выводит список всех доступных баз данных и завершает работу. Другие параметры, не связанные с соединением, игнорируются. Это похоже на метакоманду <code class="command">\list</code>.<dt><span class="term"><code class="option">-L <em class="replaceable"><code>имя_файла</code></em></code><br /></span><span class="term"><code class="option">--log-file=<em class="replaceable"><code>имя_файла</code></em></code></span><dd><p>В дополнение к обычному выводу, записывает вывод результатов всех запросов в файл <em class="replaceable"><code>имя_файла</code></em>.<dt><span class="term"><code class="option">-n</code><br /></span><span class="term"><code class="option">--no-readline</code></span><dd><p>Отключает использование <span class="application">Readline</span> для редактирования командной строки и использования истории команд. Может быть полезно для выключения расширенных действий клавиши табуляции при вырезании и вставке.<dt><span class="term"><code class="option">-o <em class="replaceable"><code>имя_файла</code></em></code><br /></span><span class="term"><code class="option">--output=<em class="replaceable"><code>имя_файла</code></em></code></span><dd><p>Записывает вывод результатов всех запросов в файл <em class="replaceable"><code>имя_файла</code></em>. Эквивалентно команде <code class="command">\o</code>.<dt><span class="term"><code class="option">-p <em class="replaceable"><code>порт</code></em></code><br /></span><span class="term"><code class="option">--port=<em class="replaceable"><code>порт</code></em></code></span><dd><p>Указывает TCP-порт или расширение файла локального Unix-сокета, через который сервер принимает подключения. Значение по умолчанию определяется переменной среды <code class="envar">PGPORT</code>, если она установлена, либо числом, заданным при компиляции, обычно 5432.<dt><span class="term"><code class="option">-P <em class="replaceable"><code>присвоение</code></em></code><br /></span><span class="term"><code class="option">--pset=<em class="replaceable"><code>присвоение</code></em></code></span><dd><p>Задаёт параметры печати, в стиле команды <code class="command">\pset</code>. Обратите внимание, что имя параметра и значение разделяются знаком равенства, а не пробела. Например, чтобы установить формат вывода в <span class="application">LaTeX</span>, нужно написать <code class="literal">-P format=latex</code>.<dt><span class="term"><code class="option">-q</code><br /></span><span class="term"><code class="option">--quiet</code></span><dd><p>Указывает, что <span class="application">psql</span> должен работать без вывода дополнительных сообщений. По умолчанию, выводятся приветствия и различные информационные сообщения. Этого не произойдёт с использованием данного параметра. Полезно вместе с параметром <code class="option">-c</code>. Этот же эффект можно получить, установив для переменной <code class="varname">QUIET</code> значение <code class="literal">on</code>.<dt><span class="term"><code class="option">-R <em class="replaceable"><code>разделитель</code></em></code><br /></span><span class="term"><code class="option">--record-separator=<em class="replaceable"><code>разделитель</code></em></code></span><dd><p>Использует <em class="replaceable"><code>разделитель</code></em> как разделитель записей при невыровненном режиме вывода. Эквивалентно команде <code class="command">\pset recordsep</code>.<dt><span class="term"><code class="option">-s</code><br /></span><span class="term"><code class="option">--single-step</code></span><dd><p>Запуск в пошаговом режиме. Это означает, что пользователь будет подтверждать выполнение каждой команды, отправляемой на сервер, с возможностью отменить выполнение. Используется для отладки скриптов.<dt><span class="term"><code class="option">-S</code><br /></span><span class="term"><code class="option">--single-line</code></span><dd><p>Запуск в однострочном режиме, при котором символ новой строки завершает SQL-команды, так же как это делает точка с запятой.<div class="note"><h3 class="title">Примечание</h3><p>Этот режим реализован для тех, кому он нужен, но это не обязательно означает, что и вам нужно его использовать. В частности, если смешивать в одной строке команды <acronym class="acronym">SQL</acronym> и метакоманды, порядок их выполнения может быть не всегда понятен для неопытного пользователя.</div><dt><span class="term"><code class="option">-t</code><br /></span><span class="term"><code class="option">--tuples-only</code></span><dd><p>Отключает вывод имён столбцов и результирующей строки с количеством выбранных записей. Эквивалентно команде <code class="command">\t</code>.<dt><span class="term"><code class="option">-T <em class="replaceable"><code>параметры_таблицы</code></em></code><br /></span><span class="term"><code class="option">--table-attr=<em class="replaceable"><code>параметры_таблицы</code></em></code></span><dd><p>Задаёт атрибуты, которые будут вставлены в тег <acronym class="acronym">HTML</acronym> <code class="sgmltag-element">table</code>. За подробностями обратитесь к описанию <code class="command">\pset</code>.<dt><span class="term"><code class="option">-U <em class="replaceable"><code>имя_пользователя</code></em></code><br /></span><span class="term"><code class="option">--username=<em class="replaceable"><code>имя_пользователя</code></em></code></span><dd><p>Использовать для подключения к базе данных <em class="replaceable"><code>имя_пользователя</code></em> вместо подразумеваемого по умолчанию. (Разумеется, это потребует соответствующего разрешения.)<dt><span class="term"><code class="option">-v <em class="replaceable"><code>присвоение</code></em></code><br /></span><span class="term"><code class="option">--set=<em class="replaceable"><code>присвоение</code></em></code><br /></span><span class="term"><code class="option">--variable=<em class="replaceable"><code>присвоение</code></em></code></span><dd><p>Выполняет присвоение значения переменной, как метакоманда <code class="command">\set</code>. Обратите внимание на то, что необходимо разделить имя переменной и значение (при наличии) знаком равенства в командной строке. Чтобы сбросить переменную, опустите знак равенства. Чтобы установить пустое значение, поставьте знак равенства, но опустите значение. Присваивания выполняются на очень ранней стадии запуска, поэтому если переменные зарезервированы для внутренних целей, то позже они могут быть перезаписаны.<dt><span class="term"><code class="option">-V</code><br /></span><span class="term"><code class="option">--version</code></span><dd><p>Выводит версию <span class="application">psql</span> и завершает работу.<dt><span class="term"><code class="option">-w</code><br /></span><span class="term"><code class="option">--no-password</code></span><dd><p>Не выдавать запрос на ввод пароля. Если сервер требует аутентификацию по паролю и пароль нельзя получить из других источников, например из файла <code class="filename">.pgpass</code>, попытка соединения не удастся. Этот параметр может быть полезен в пакетных заданиях и скриптах, где нет пользователя, который вводит пароль.<p>Обратите внимание, что этот параметр действует на протяжении всей сессии и, таким образом, влияет на метакоманду <code class="command">\connect</code>, так же как и на первую попытку соединения.<dt><span class="term"><code class="option">-W</code><br /></span><span class="term"><code class="option">--password</code></span><dd><p>Принудительно запрашивать пароль перед подключением к базе данных, даже если он не будет использоваться.<p>Если сервер требует аутентификацию по паролю и пароль нельзя получить из других источников, например из файла <code class="filename">.pgpass</code>, <span class="application">psql</span> запросит пароль в любом случае. Однако чтобы понять, что требуется пароль, <span class="application">psql</span> лишний раз подключится к серверу. Поэтому иногда имеет смысл ввести <code class="option">-W</code>, чтобы исключить эту ненужную попытку подключения.<p>Обратите внимание, что этот параметр действует на протяжении всей сессии и, таким образом, влияет на метакоманду <code class="command">\connect</code>, так же как и на первую попытку соединения.<dt><span class="term"><code class="option">-x</code><br /></span><span class="term"><code class="option">--expanded</code></span><dd><p>Включает режим развёрнутого вывода таблицы. Эквивалентно команде <code class="command">\x</code>.<dt><span class="term"><code class="option">-X,</code><br /></span><span class="term"><code class="option">--no-psqlrc</code></span><dd><p>Не читать стартовые файлы (ни общесистемный файл <code class="filename">psqlrc</code>, ни пользовательский файл <code class="filename">~/.psqlrc</code>).<dt><span class="term"><code class="option">-z</code><br /></span><span class="term"><code class="option">--field-separator-zero</code></span><dd><p>Установить нулевой байт в качестве разделителя полей для невыровненного режима вывода.<dt><span class="term"><code class="option">-0</code><br /></span><span class="term"><code class="option">--record-separator-zero</code></span><dd><p>Установить нулевой байт в качестве разделителя записей для невыровненного режима вывода. Это полезно при взаимодействии с другими программами, например, с <code class="literal">xargs -0</code>.<dt><span class="term"><code class="option">-1</code><br /></span><span class="term"><code class="option">--single-transaction</code></span><dd><p>Этот параметр может применяться только в сочетании с одним или несколькими параметрами <code class="option">-c</code> и/или <code class="option">-f</code>. С ним <span class="application">psql</span> выполняет команду <code class="command">BEGIN</code> перед обработкой первого такого параметра и <code class="command">COMMIT</code> после последнего, заворачивая таким образом все команды в одну транзакцию. Это гарантирует, что либо все команды завершатся успешно, либо никакие изменения не сохранятся.<p>Если в самих этих командах содержатся операторы <code class="command">BEGIN</code>, <code class="command">COMMIT</code> или <code class="command">ROLLBACK</code>, этот параметр не даст желаемого эффекта. Кроме того, если какая-либо отдельная команда не может выполняться внутри блока транзакции, с этим параметром вся транзакция прервётся с ошибкой.<dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help[=<em class="replaceable"><code>тема</code></em>]</code></span><dd><p>Показать справку по <span class="application">psql</span> и завершиться. Необязательный параметр <em class="replaceable"><code>тема</code></em> (по умолчанию <code class="literal">options</code>) выбирает описание интересующей части <span class="application">psql</span>: <code class="literal">commands</code> описывает команды <span class="application">psql</span> с обратной косой чертой; <code class="literal">options</code> описывает параметры командной строки, которые можно передать <span class="application">psql</span>; а <code class="literal">variables</code> выдаёт справку по переменным конфигурации <span class="application">psql</span>.</dl></div></div><div class="refsect1" id="idp99964"><h2>Код завершения</h2><p>При нормальном завершении <span class="application">psql</span> возвращает 0 в командную оболочку ОС, 1 — если произошла фатальная ошибка в самом <span class="application">psql</span> (например, нехватка памяти, файл не найден), 2 — при неудачном соединении с сервером неинтерактивного сеанса, 3 — при ошибке в скрипте и установленной переменной <code class="varname">ON_ERROR_STOP</code>.</div><div class="refsect1" id="idp99970"><h2>Использование</h2><div class="refsect2" id="r2-app-psql-connecting"><h3>Подключение к базе данных</h3><p><span class="application">psql</span> это клиент для <span class="productname">PostgreSQL</span>. Для подключения к базе данных нужно знать имя базы данных, имя сервера, номер порта сервера и имя пользователя, под которым вы хотите подключиться. Эти свойства можно задать через аргументы командной строки, а именно <code class="option">-d</code>, <code class="option">-h</code>, <code class="option">-p</code> и <code class="option">-U</code> соответственно. Если в командной строке есть аргумент, который не относится к параметрам <span class="application">psql</span>, то он используется в качестве имени базы данных (или имени пользователя, если база данных уже задана). Задавать все эти аргументы необязательно, у них есть разумные значения по умолчанию. Если опустить имя сервера, <span class="application">psql</span> будет подключаться через Unix-сокет к локальному серверу, либо подключаться к <code class="literal">localhost</code> по TCP/IP в системах, не поддерживающих UNIX-сокеты. Номер порта по умолчанию определяется во время компиляции. Поскольку сервер базы данных использует то же значение по умолчанию, чаще всего указывать номер порта не нужно. Имя пользователя по умолчанию, как и имя базы данных по умолчанию, совпадает с именем пользователя в операционной системе. Заметьте, что просто так подключаться к любой базе данных под любым именем пользователя вы не сможете. Узнать о ваших правах можно у администратора баз данных.<p>Если значения по умолчанию не подходят, можно сэкономить на вводе параметров подключения, установив переменные среды <code class="envar">PGDATABASE</code>, <code class="envar">PGHOST</code>, <code class="envar">PGPORT</code> и/или <code class="envar">PGUSER</code>. (Другие переменные среды описаны в <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-envars" title="32.14. Переменные окружения">Разделе 32.14</a>.) Также удобно иметь файл <code class="filename">~/.pgpass</code>, чтобы не вводить пароли снова и снова. За дополнительными сведениями обратитесь к <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-pgpass" title="32.15. Файл паролей">Разделу 32.15</a>.<p>Альтернативный вариант указания параметров подключения — использование строки <em class="parameter"><code>conninfo</code></em> или <acronym class="acronym">URI</acronym> вместо имени базы данных. Этот механизм даёт широкие возможности для управления соединением. Например: <pre class="programlisting">$ <strong class="userinput"><code>psql "service=myservice sslmode=require"</code></strong>
$ <strong class="userinput"><code>psql postgresql://dbmaster:5433/mydb?sslmode=require</code></strong></pre><p> Этот способ также позволяет использовать <acronym class="acronym">LDAP</acronym> для получения параметров подключения, как описано в <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-ldap" title="32.17. Получение параметров соединения через LDAP">Разделе 32.17</a>. Более полно все имеющиеся параметры соединения описаны в <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-connect#libpq-paramkeywords" title="32.1.2. Ключевые слова-параметры">Подразделе 32.1.2</a>.<p>Если соединение не может быть установлено по любой причине (например, нет прав, сервер не работает и т. д.), <span class="application">psql</span> вернёт ошибку и прекратит работу.<p>Если и стандартный ввод, и стандартный вывод являются терминалом, то <span class="application">psql</span> установит кодировку клиента в <span class="quote">«<span class="quote">auto</span>»</span>, и подходящая клиентская кодировка будет определяться из локальных установок (переменная окружения <code class="envar">LC_CTYPE</code> в Unix). Если это работает не так, как ожидалось, кодировку клиента можно изменить, установив переменную окружения <code class="envar">PGCLIENTENCODING</code>.</div><div class="refsect2" id="r2-app-psql-4"><h3>Ввод SQL-команд</h3><p>Как правило, приглашение <span class="application">psql</span> состоит из имени базы данных, к которой <span class="application">psql</span> в данный момент подключён, а затем строки <code class="literal">=&gt;</code>. Например: <pre class="programlisting">$ <strong class="userinput"><code>psql testdb</code></strong>
psql (9.6.24)
Type "help" for help.

testdb=&gt;</pre><p>В командной строке пользователь может вводить команды <acronym class="acronym">SQL</acronym>. Обычно введённые строки отправляются на сервер, когда встречается точка с запятой, завершающая команду. Конец строки не завершает команду. Это позволяет разбивать команды на несколько строк для лучшего понимания. Если команда была отправлена и выполнена без ошибок, то результат команды выводится на экран.<p>Если к базе данных, которая не приведена в соответствие <a class="link" href="https://postgrespro.ru/docs/postgresql/9.6/ddl-schemas#ddl-schemas-patterns" title="5.8.6. Шаблоны использования">шаблону безопасного использования схем</a>, имеют доступ недоверенные пользователи, начинайте сеанс с удаления доступных им для записи схем из пути поиска (<code class="varname">search_path</code>). Для этого можно добавить <code class="literal">options=-csearch_path=</code> в строку подключения или выполнить команду <code class="literal">SELECT pg_catalog.set_config('search_path', '', false)</code> перед другими командами SQL. Это касается не только <span class="application">psql</span>, но и любых других интерфейсов для выполнения произвольных SQL-команд.<p>При каждом выполнении команды <span class="application">psql</span> также проверяет асинхронные уведомления о событиях, генерируемые командами <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-listen" title="LISTEN"><span class="refentrytitle">LISTEN</span></a> и <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-notify" title="NOTIFY"><span class="refentrytitle">NOTIFY</span></a>.<p>Комментарии в стиле C передаются для обработки на сервер, в то время как комментарии в стандарте SQL <span class="application">psql</span> удаляет перед отправкой.</div><div class="refsect2" id="app-psql-meta-commands"><h3>Метакоманды</h3><p>Всё, что вводится в <span class="application">psql</span> не взятое в кавычки и начинающееся с обратной косой черты, является метакомандой <span class="application">psql</span> и обрабатывается самим <span class="application">psql</span>. Эти команды делают <span class="application">psql</span> полезным для задач администрирования и разработки скриптов.<p>Формат команды <span class="application">psql</span> следующий: обратная косая черта, сразу за ней команда, затем аргументы. Аргументы отделяются от команды и друг от друга любым количеством пробелов.<p>Чтобы включить пробел в значение аргумента, нужно заключить его в одинарные кавычки. Чтобы включить одинарную кавычку в значение аргумента, нужно написать две одинарные кавычки внутри текста в одинарных кавычках. Всё, что содержится в одинарных кавычках подлежит заменам, принятым в языке C: <code class="literal">\n</code> (новая строка), <code class="literal">\t</code> (табуляция), <code class="literal">\b</code> (backspace), <code class="literal">\r</code> (возврат каретки), <code class="literal">\f</code> (подача страницы), <code class="literal">\</code><em class="replaceable"><code>цифры</code></em> (восьмеричное число), и <code class="literal">\x</code><em class="replaceable"><code>цифры</code></em> (шестнадцатеричное число). Если внутри текста в одинарных кавычках встречается обратная косая перед любым другим символом, то она экранирует этот символ.<p>Текст аргумента, заключённый в обратные кавычки (<code class="literal">`</code>), считается командной строкой, которая передаётся в командную оболочку ОС. Вывод от этой команды (с удалёнными в конце символами новой строки) заменяет текст в обратных кавычках.<p>Если внутри аргумента не в кавычках встречается имя переменной <span class="application">psql</span> с предшествующим двоеточием (<code class="literal">:</code>), оно заменяется значением переменной, как описано в <a class="xref" href="app-psql.html#app-psql-interpolation" title="Интерполяция SQL">Интерполяция <acronym class="acronym">SQL</acronym></a>.<p>Некоторые команды принимают идентификатор <acronym class="acronym">SQL</acronym> (например, имя таблицы) в качестве аргумента. Такие аргументы следуют правилам синтаксиса <acronym class="acronym">SQL</acronym>: буквы, не взятые в кавычки, преобразуются в нижний регистр, буквы, взятые в двойные кавычки (<code class="literal">"</code>) предотвращают преобразование регистра и позволяют включать пробелы в идентификатор. Внутри двойных кавычек две двойные кавычки сокращаются до одной. Например, <code class="literal">FOO"BAR"BAZ</code> интерпретируется как <code class="literal">fooBARbaz</code>, а <code class="literal">"A weird"" name"</code> становится <code class="literal">A weird" name</code>.<p>Разбор аргументов останавливается в конце строки или когда встречается другая обратная косая черта, не внутри кавычек. Обратная косая не внутри кавычек рассматривается как начало новой метакоманды. Специальная последовательность <code class="literal">\\</code> (две обратных косых черты) обозначает окончание аргументов, далее продолжается разбор команд <acronym class="acronym">SQL</acronym>, если таковые имеются. Таким образом, команды <acronym class="acronym">SQL</acronym> и <span class="application">psql</span> можно свободно смешивать в одной строке. Но в любом случае аргументы метакоманды не могут выходить за пределы текущей строки.<p>Определены следующие метакоманды: <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">\a</code></span><dd><p>Если текущий режим вывода таблицы невыровненный, то он переключается на выровненный режим. Если текущий режим выровненный, то устанавливается невыровненный. Эта команда поддерживается для обратной совместимости. См. <code class="command">\pset</code> для более общего решения.<dt><span class="term"><code class="literal">\c</code> или <code class="literal">\connect [ -reuse-previous=<em class="replaceable"><code>on|off</code></em> ] [ <em class="replaceable"><code>имя_бд</code></em> [ <em class="replaceable"><code>имя_пользователя</code></em> ] [ <em class="replaceable"><code>компьютер</code></em> ] [ <em class="replaceable"><code>порт</code></em> ] | <em class="replaceable"><code>строка_подключения</code></em> ]</code></span><dd><p>Устанавливает новое подключение к серверу <span class="productname">PostgreSQL</span>. Параметры подключения можно указывать как позиционно (один или несколько по списку: база данных, пользователь, компьютер и порт), так и передавая аргумент <em class="replaceable"><code>строка_подключения</code></em> (подробнее о строках подключения рассказывается в <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-connect#libpq-connstring" title="32.1.1. Строки параметров подключения">Подразделе 32.1.1</a>). Если аргументы отсутствуют, новое подключение устанавливается с теми же параметрами, что и предыдущее.<p>Указание в параметре <em class="replaceable"><code>имя_бд</code></em>, <em class="replaceable"><code>имя_пользователя</code></em>, <em class="replaceable"><code>компьютер</code></em> или <em class="replaceable"><code>порт</code></em> значения <code class="literal">-</code> равносильно опущению этого параметра.<p>Новое подключение может повторно использовать параметры предыдущего — не только имя базы данных, пользователя, компьютер и порт, но и, например, <em class="replaceable"><code>режим_ssl</code></em>. По умолчанию параметры используются повторно при позиционной записи, но не когда задана <em class="replaceable"><code>строка_подключения</code></em>. Это поведение может переопределяться первым аргументом, <code class="literal">-reuse-previous=on</code> или <code class="literal">-reuse-previous=off</code>. В случае повторного использования параметров любой параметр, явно не заданный в виде позиционного или в <em class="replaceable"><code>строке_подключения</code></em>, заимствуется из параметров текущего подключения. Исключение составляет параметр <em class="replaceable"><code>hostaddr</code></em> — если он был задан в предыдущем подключении, а в новом в позиционной записи задаётся другое значение <em class="replaceable"><code>host</code></em>, значение <em class="replaceable"><code>hostaddr</code></em> сбрасывается. Кроме того, пароль существующего подключения будет использоваться повторно, только если имя пользователя, узел и порт не меняются. Если какой-либо параметр не указан в этой команде и не используется повторно, действует принятое в <span class="application">libpq</span> значение по умолчанию.<p>Если новое подключение успешно установлено, предыдущее подключение закрывается. Если попытка подключения не удалась (неверное имя пользователя, доступ запрещён и т. д.), то предыдущее соединение останется активным, только если <span class="application">psql</span> находится в интерактивном режиме. Если скрипт выполняется неинтерактивно, обработка немедленно останавливается с сообщением об ошибке. Различное поведение выбрано для удобства пользователя в качестве защиты от опечаток с одной стороны и в качестве меры безопасности, не позволяющей случайно запустить скрипты в неправильной базе, с другой.<p>Примеры:<pre class="programlisting">=&gt; \c mydb myuser host.dom 6432
=&gt; \c service=foo
=&gt; \c "host=localhost port=5432 dbname=mydb connect_timeout=10 sslmode=disable"
=&gt; \c -reuse-previous=on sslmode=require    -- меняется только sslmode
=&gt; \c postgresql://tom@localhost/mydb?application_name=myapp</pre><dt><span class="term"><code class="literal">\C [ <em class="replaceable"><code>заголовок</code></em> ]</code></span><dd><p>Задаёт заголовок, который будет выводиться для результатов любых запросов или отменяет установленный ранее заголовок. Эта команда эквивалентна <code class="literal">\pset title <em class="replaceable"><code>заголовок</code></em></code>. (Название этой команды происходит от <span class="quote">«<span class="quote">caption</span>»</span> (заголовок), так как изначально она применялась только для задания заголовков <acronym class="acronym">HTML</acronym>-таблиц.)<dt><span class="term"><code class="literal">\cd [ <em class="replaceable"><code>каталог</code></em> ]</code></span><dd><p>Сменяет текущий рабочий каталог на <em class="replaceable"><code>каталог</code></em>. Без аргумента устанавливается домашний каталог текущего пользователя.<div class="tip"><h3 class="title">Подсказка</h3><p>для печати текущего рабочего каталога используйте <code class="literal">\! pwd</code>.</div><dt><span class="term"><code class="literal">\conninfo</code></span><dd><p>Выводит информацию о текущем подключении к базе данных.<dt id="app-psql-meta-commands-copy"><span class="term"><code class="literal">\copy { <em class="replaceable"><code>таблица</code></em> [ ( <em class="replaceable"><code>список_столбцов</code></em> ) ] | ( <em class="replaceable"><code>запрос</code></em> ) } { <code class="literal">from</code> | <code class="literal">to</code> } { <em class="replaceable"><code>'имя_файла'</code></em> | program <em class="replaceable"><code>'команда'</code></em> | stdin | stdout | pstdin | pstdout } [ [ with ] ( <em class="replaceable"><code>параметр</code></em> [, ...] ) ]</code></span><dd><p>Производит копирование данных с участием клиента. При этом выполняется <acronym class="acronym">SQL</acronym>-команда <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-copy" title="COPY"><span class="refentrytitle">COPY</span></a>, но вместо чтения или записи в файл на сервере, <span class="application">psql</span> читает или записывает файл и пересылает данные между сервером и локальной файловой системой. Это означает, что для доступа к файлам используются привилегии локального пользователя, а не сервера, и не требуются привилегии суперпользователя SQL.<p>С указанием <code class="literal">program</code> <span class="application">psql</span> выполняет <em class="replaceable"><code>команду</code></em> и данные, поступающие из/в неё, передаются между сервером и клиентом. Это опять же означает, что для выполнения программ используются привилегии локального пользователя, а не сервера, и не требуются привилегии суперпользователя SQL.<p>При выполнении <code class="literal">\copy ... from stdin</code> строки с данными считываются из источника, выполнившего команду, и считываются до тех пор, пока не встретится <code class="literal">\.</code> или не будет достигнут конец файла. Этот параметр полезен для заполнения таблиц прямо в SQL-скриптах. При выполнении <code class="literal">\copy ... to stdout</code> вывод направляется в то же место, что и вывод <span class="application">psql</span> команд. Статус команды <code class="literal">COPY <em class="replaceable"><code>count</code></em></code> не отображается, чтобы не перепутать со строкой данных. Для чтения/записи стандартного ввода/вывода <span class="application">psql</span>, вне зависимости от источника текущей команды или параметра <code class="literal">\o</code>, используйте <code class="literal">from pstdin</code> или <code class="literal">to pstdout</code>.<p>Синтаксис команды похож на синтаксис <acronym class="acronym">SQL</acronym>-команды <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-copy" title="COPY"><span class="refentrytitle">COPY</span></a>. Все параметры, кроме источника и получателя данных, соответствуют параметрам <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-copy" title="COPY"><span class="refentrytitle">COPY</span></a>. Поэтому к команде <code class="command">\copy</code> применяются специальные правила разбора. В частности, не применяются правила подстановки переменных и экранирование с обратной косой чертой.<div class="tip"><h3 class="title">Подсказка</h3><p>Альтернативный способ получить тот же результат, что и с <code class="literal">\copy ... to</code> — использовать <acronym class="acronym">SQL</acronym>-команду <code class="literal">COPY ... TO STDOUT</code> и завершить её командой <code class="literal">\g <em class="replaceable"><code>имя</code></em></code> или <code class="literal">\g |<em class="replaceable"><code>программа</code></em></code>. В отличие от <code class="literal">\copy</code>, этот подход позволяет разбивать команду на несколько строк, а также использовать интерполяцию переменных и раскрытие обратных кавычек (<code class="literal">`</code>).</div><div class="tip"><h3 class="title">Подсказка</h3><p>Эти операции не так эффективны, как <acronym class="acronym">SQL</acronym>-команда <code class="command">COPY</code>, в которой источником или получателем данных является файл или программа, потому что все данные перемещаются между клиентом и сервером. Для больших объёмов данных <acronym class="acronym">SQL</acronym>-команда может быть предпочтительнее.</div><dt><span class="term"><code class="literal">\copyright</code></span><dd><p>Показывает информацию об авторских правах и условиях распространения <span class="productname">PostgreSQL</span>.<dt id="app-psql-meta-commands-crosstabview"><span class="term"><code class="literal">\crosstabview [ <em class="replaceable"><code>столбВ</code></em> [ <em class="replaceable"><code>столбГ</code></em> [ <em class="replaceable"><code>столбТ</code></em> [ <em class="replaceable"><code>столбсортГ</code></em> ] ] ] ]</code></span><dd><p>Выполняет содержимое буфера текущего запроса (как <code class="literal">\g</code>) и показывает результат в виде перекрёстной таблицы. Заданный запрос должен возвращать минимум три столбца. Столбец результата, заданный параметром <em class="replaceable"><code>столбВ</code></em>, будет образовывать вертикальные заголовки, а столбец, заданный параметром <em class="replaceable"><code>столбГ</code></em>, — горизонтальные. Заданный параметром <em class="replaceable"><code>столбТ</code></em> столбец будет поставлять данные для отображения внутри таблицы. Столбец, выбранный параметром <em class="replaceable"><code>столбсортГ</code></em>, будет необязательным столбцом сортировки горизонтальных заголовков.<p>Каждое указание столбца может представлять собой имя или номер столбца (начиная с 1). К именам применяются обычные принятые в SQL правила учёта регистра и кавычек. По умолчанию в качестве <em class="replaceable"><code>столбВ</code></em> подразумевается столбец 1, а в качестве <em class="replaceable"><code>столбГ</code></em> — столбец 2. Если <em class="replaceable"><code>столбВ</code></em> и <em class="replaceable"><code>столбГ</code></em> задаются явно, они должны различаться. Если <em class="replaceable"><code>столбТ</code></em> не задан, в результате запроса должно быть ровно три столбца, и в качестве <em class="replaceable"><code>столбТ</code></em> выбирается столбец, отличный от <em class="replaceable"><code>столбВ</code></em> и <em class="replaceable"><code>столбГ</code></em>.<p>Вертикальный заголовок, выводимый в самом левом столбце, содержит значения из столбца <em class="replaceable"><code>столбВ</code></em>, в том же порядке, в каком их возвращает запрос, но без дубликатов.<p>Горизонтальный заголовок, выводимый в первой строке, содержит значения из столбца <em class="replaceable"><code>столбГ</code></em>, без дубликатов. По умолчанию они располагаются в том порядке, в каком их возвращает запрос. Но если задан необязательный аргумент <em class="replaceable"><code>столбсортГ</code></em>, он определяет столбец, который должен содержать целые числа, и тогда значения из <em class="replaceable"><code>столбГ</code></em> будут располагаться в горизонтальном заголовке по порядку значений в <em class="replaceable"><code>столбсортГ</code></em>.<p>Внутри перекрёстной таблицы для каждого уникального значения <code class="literal">x</code> в <em class="replaceable"><code>столбГ</code></em> и каждого уникального значения <code class="literal">y</code> в <em class="replaceable"><code>столбВ</code></em>, ячейка, размещённая на пересечении <code class="literal">(x,y)</code> содержит значение <code class="literal">столбТ</code> в строке результата запроса, в которой значение <em class="replaceable"><code>столбГ</code></em> равно <code class="literal">x</code>, а значение <em class="replaceable"><code>столбВ</code></em> — <code class="literal">y</code>. Если такой строки не находится, ячейка остаётся пустой. Если же находится несколько таких строк, выдаётся ошибка.<dt><span class="term"><code class="literal">\d[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Для каждого отношения (таблицы, представления, материализованного представления, индекса, последовательности, внешней таблицы) или составного типа, соответствующих <em class="replaceable"><code>шаблону</code></em>, показывает все столбцы, их типы, табличное пространство (если оно изменено) и любые специальные атрибуты, такие как <code class="literal">NOT NULL</code> или значения по умолчанию. Также показываются связанные индексы, ограничения, правила и триггеры. Для сторонних таблиц также показывается связанный сторонний сервер. (<span class="quote">«<span class="quote">Соответствие шаблону</span>»</span> определяется ниже в <a class="xref" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска">Шаблоны поиска</a>.)<p>Для некоторых типов отношений <code class="literal">\d</code> показывает дополнительную информацию по каждому столбцу: значения столбца для последовательностей, индексируемые выражения для индексов и параметры обёртки сторонних данных для сторонних таблиц.<p>Вариант команды <code class="literal">\d+</code> похож на <code class="literal">\d</code>, но выводит больше информации: комментарии к столбцам таблицы, наличие в таблице OID, для представления показывается его определение, отличные от значений по умолчанию установки <a class="link" href="https://postgrespro.ru/docs/postgresql/9.6/sql-altertable#sql-createtable-replica-identity">replica identity</a>.<p>По умолчанию отображаются только объекты, созданные пользователем. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>.<div class="note"><h3 class="title">Примечание</h3><p>Если <code class="command">\d</code> используется без аргумента <em class="replaceable"><code>шаблон</code></em>, эта команда удобства ради воспринимается как <code class="command">\dtvmsE</code> и выдаёт список всех видимых таблиц, представлений, мат. представлений, последовательностей и сторонних таблиц.</div><dt><span class="term"><code class="literal">\da[S] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список агрегатных функций вместе с типом возвращаемого значения и типами данных, которыми они оперируют. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те агрегатные функции, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>.<dt><span class="term"><code class="literal">\dA[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список методов доступа. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те методы доступа, имена которых соответствуют ему. При добавлении <code class="literal">+</code> к команде для каждого метода доступа показывается его описание и связанная функция-обработчик.<dt><span class="term"><code class="literal">\db[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список табличных пространств. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те табличные пространства, имена которых соответствуют ему. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно выводятся параметры, объём на диске, права доступа и описание.<dt><span class="term"><code class="literal">\dc[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список преобразований между кодировками наборов символов. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те преобразования кодировок, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будет выводиться описание.<dt><span class="term"><code class="literal">\dC[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список приведений типов. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те приведения типов, имена которых соответствуют ему. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будет выводиться описание.<dt><span class="term"><code class="literal">\dd[S] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Показывает описания объектов следующих видов: <code class="literal">ограничение</code>, <code class="literal">класс операторов</code>, <code class="literal">семейство операторов</code>, <code class="literal">правило</code> и <code class="literal">триггер</code>. Описания остальных объектов можно посмотреть соответствующими метакомандами для этих типов объектов.<p><code class="literal">\dd</code> показывает описания для объектов, соответствующих <em class="replaceable"><code>шаблону</code></em>, или для доступных объектов указанных типов, если аргументы не заданы. Но в любом случае выводятся только те объекты, которые имеют описание. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>.<p>Описания объектов создаются <acronym class="acronym">SQL</acronym>-командой <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-comment" title="COMMENT"><span class="refentrytitle">COMMENT</span></a>.<dt><span class="term"><code class="literal">\ddp [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список прав доступа по умолчанию. Выводится строка для каждой роли (и схемы, если применимо), для которой права доступа по умолчанию отличаются от встроенных. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся строки только для тех ролей и схем, имена которых соответствуют ему.<p>Права доступа по умолчанию устанавливаются командой <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-alterdefaultprivileges" title="ALTER DEFAULT PRIVILEGES"><span class="refentrytitle">ALTER DEFAULT PRIVILEGES</span></a>. Смысл отображаемых прав объясняется в описании <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-grant" title="GRANT"><span class="refentrytitle">GRANT</span></a>.<dt><span class="term"><code class="literal">\dD[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список доменов. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те домены, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будут выводиться права доступа и описание.<dt><span class="term"><code class="literal">\dE[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code><br /></span><span class="term"><code class="literal">\di[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code><br /></span><span class="term"><code class="literal">\dm[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code><br /></span><span class="term"><code class="literal">\ds[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code><br /></span><span class="term"><code class="literal">\dt[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code><br /></span><span class="term"><code class="literal">\dv[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>В этой группе команд буквы <code class="literal">E</code>, <code class="literal">i</code>, <code class="literal">m</code>, <code class="literal">s</code>, <code class="literal">t</code> и <code class="literal">v</code> обозначают соответственно: внешнюю таблицу, индекс, материализованное представление, последовательность, таблицу и представление. Можно указывать все или часть этих букв, в произвольном порядке, чтобы получить список объектов этих типов. Например, <code class="literal">\dit</code> выводит список индексов и таблиц. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будут выводиться физический размер на диске и описание, при наличии. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только объекты, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>.<dt><span class="term"><code class="literal">\des[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список сторонних серверов (мнемоника: <span class="quote">«<span class="quote">external servers</span>»</span>). Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те серверы, имена которых соответствуют ему. Если используется форма <code class="literal">\des+</code>, то выводится полное описание каждого сервера, включая права доступа, тип, версию, параметры и описание.<dt><span class="term"><code class="literal">\det[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список сторонних таблиц (мнемоника: <span class="quote">«<span class="quote">external tables</span>»</span>). Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те записи, имя таблицы или схемы которых соответствуют ему. Если используется форма <code class="literal">\det+</code>, то дополнительно выводятся общие параметры и описание сторонней таблицы.<dt><span class="term"><code class="literal">\deu[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список сопоставлений пользователей (мнемоника: <span class="quote">«<span class="quote">external users</span>»</span>). Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только сопоставления, в которых имена пользователей соответствуют ему. Если используется форма <code class="literal">\deu+</code>, то выводится дополнительная информация о каждом сопоставлении пользователей.<div class="caution"><h3 class="title">Внимание</h3><p><code class="literal">\deu+</code> также может отображать имя и пароль удалённого пользователя, поэтому следует позаботиться о том, чтобы не раскрывать их.</div><dt><span class="term"><code class="literal">\dew[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список обёрток сторонних данных (мнемоника: <span class="quote">«<span class="quote">external wrappers</span>»</span>). Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те обёртки сторонних данных, имена которых соответствуют ему. Если используется форма <code class="literal">\dew+</code>, то дополнительно выводятся права доступа, параметры и описание обёртки.<dt><span class="term"><code class="literal">\df[antwS+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список функций с типами данных их результатов, аргументов и классификацией: <span class="quote">«<span class="quote">agg</span>»</span> (агрегатная), <span class="quote">«<span class="quote">normal</span>»</span> (обычная), <span class="quote">«<span class="quote">trigger</span>»</span> (триггерная) или <span class="quote">«<span class="quote">window</span>»</span> (оконная). Чтобы получить функции только определённого вида (видов), добавьте в команду соответствующие буквы <code class="literal">a</code>, <code class="literal">n</code>, <code class="literal">t</code> или <code class="literal">w</code>. Если задан <em class="replaceable"><code>шаблон</code></em>, показываются только те функции, имена которых соответствуют ему. По умолчанию показываются только функции, созданные пользователями; для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. Если используется форма <code class="literal">\df+</code>, то дополнительно выводятся характеристики каждой функции: изменчивость, допустимость распараллеливания, владелец, классификация по безопасности, права доступа, язык, исходный код и описание.<div class="tip"><h3 class="title">Подсказка</h3><p>Чтобы найти функции с аргументами или возвращаемыми значениями определённого типа данных, воспользуйтесь имеющейся в постраничнике возможностью поиска в выводе <code class="literal">\df</code>.</div><dt><span class="term"><code class="literal">\dF[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список конфигураций текстового поиска. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те конфигурации, имена которых соответствуют ему. Если используется форма <code class="literal">\dF+</code>, то выводится полное описание для каждой конфигурации, включая базовый синтаксический анализатор и используемые словари для каждого типа фрагментов.<dt><span class="term"><code class="literal">\dFd[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список словарей текстового поиска. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только словари, имена которых соответствуют ему. Если используется форма <code class="literal">\dFd+</code>, то выводится дополнительная информация о каждом словаре, включая базовый шаблон текстового поиска и параметры инициализации.<dt><span class="term"><code class="literal">\dFp[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список анализаторов текстового поиска. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только те анализаторы, имена которых соответствуют ему. Если используется форма <code class="literal">\dFp+</code>, то выводится полное описание для каждого анализатора, включая базовые функции и список типов фрагментов.<dt><span class="term"><code class="literal">\dFt[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список шаблонов текстового поиска. Если указан <em class="replaceable"><code>шаблон</code></em>, показываются только шаблоны, имена которых соответствуют ему. Если используется форма <code class="literal">\dFt+</code>, то выводится дополнительная информация о каждом шаблоне, включая имена основных функций.<dt><span class="term"><code class="literal">\dg[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список ролей базы данных. (Так как понятия <span class="quote">«<span class="quote">пользователи</span>»</span> и <span class="quote">«<span class="quote">группы</span>»</span> были объединены в <span class="quote">«<span class="quote">роли</span>»</span>, эта команда теперь эквивалентна <code class="literal">\du</code>.) По умолчанию выводятся только роли, созданные пользователями: чтобы увидеть и системные роли, добавьте модификатор <code class="literal">S</code>. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те роли, имена которых соответствуют ему. Если используется форма <code class="literal">\dg+</code>, то выводится дополнительная информация о каждой роли; в настоящее время это комментарий роли.<dt><span class="term"><code class="literal">\dl</code></span><dd><p>Это псевдоним для <code class="command">\lo_list</code>, показывает список больших объектов.<dt><span class="term"><code class="literal">\dL[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список процедурных языков. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те языки, имена которых соответствуют ему. По умолчанию показываются только языки, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. При добавлении <code class="literal">+</code> к команде для каждого языка дополнительно будут выводиться: обработчик вызова, функция проверки, права доступа и является ли язык системным объектом.<dt><span class="term"><code class="literal">\dn[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список схем (пространств имён). Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те схемы, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будут выводиться права доступа и описание, при наличии.<dt><span class="term"><code class="literal">\do[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список операторов, их операндов и типы результата. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те операторы, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. При добавлении <code class="literal">+</code> к команде для каждого оператора будет выводиться дополнительная информация, сейчас это имя функции, на которой основан оператор.<dt><span class="term"><code class="literal">\dO[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список правил сортировки. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те правила, имена которых соответствуют ему. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будет выводиться описание, при наличии. Обратите внимание, что отображаются только правила сортировки, применимые к кодировке текущей базы данных, поэтому результат команды может отличаться для различных баз данных этой же установки <span class="productname">PostgreSQL</span>.<dt><span class="term"><code class="literal">\dp [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список таблиц, представлений и последовательностей с их правами доступа. Если указан <em class="replaceable"><code>шаблон</code></em>, отображаются только таблицы, представления и последовательности, имена которых соответствуют ему.<p>Для установки прав доступа используются команды <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-grant" title="GRANT"><span class="refentrytitle">GRANT</span></a> и <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-revoke" title="REVOKE"><span class="refentrytitle">REVOKE</span></a>. Смысл отображаемых прав объясняется в описании <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-grant" title="GRANT"><span class="refentrytitle">GRANT</span></a>.<dt><span class="term"><code class="literal">\drds [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон-ролей</code></em></a> [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон-баз</code></em></a> ] ]</code></span><dd><p>Выводит список установленных параметров конфигурации. Эти параметры могут быть специфичными для роли, специфичными для базы данных, или обеих. Параметры <em class="replaceable"><code>шаблон-ролей</code></em> и <em class="replaceable"><code>шаблон-баз</code></em> используются для отбора определённых ролей и баз данных, соответственно. Если они опущены, или указано <code class="literal">*</code>, выводятся все параметры конфигурации, в том числе не относящиеся к ролям или базам данных.<p>Команды <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-alterrole" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a> и <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-alterdatabase" title="ALTER DATABASE"><span class="refentrytitle">ALTER DATABASE</span></a> используются для определения параметров конфигурации, специфичных для роли или базы данных.<dt><span class="term"><code class="literal">\dT[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список типов данных. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те типы, имена которых соответствуют ему. При добавлении <code class="literal">+</code> к команде для каждого типа данных дополнительно будет выводиться: внутреннее имя типа, размер, допустимые значения для типа <code class="type">enum</code> и права доступа. По умолчанию показываются только объекты, созданные пользователями. Для включения системных объектов нужно задать шаблон или добавить модификатор <code class="literal">S</code>.<dt><span class="term"><code class="literal">\du[S+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список ролей базы данных. (Так как понятия <span class="quote">«<span class="quote">пользователи</span>»</span> и <span class="quote">«<span class="quote">группы</span>»</span> были объединены в <span class="quote">«<span class="quote">роли</span>»</span>, эта команда теперь равнозначна <code class="literal">\dg</code>.) По умолчанию выводятся только роли, созданные пользователями: чтобы увидеть и системные роли, добавьте модификатор <code class="literal">S</code>. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те роли, имена которых соответствуют ему. Если используется форма <code class="literal">\du+</code>, то выводится дополнительная информация о каждой роли; в настоящее время это комментарий роли.<dt><span class="term"><code class="literal">\dx[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список установленных расширений. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только расширения, имена которых соответствуют ему. Если используется форма <code class="literal">\dx+</code>, то для каждого расширения выводятся все принадлежащие ему объекты.<dt><span class="term"><code class="literal">\dy[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список событийных триггеров. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только те событийные триггеры, имена которых соответствуют ему. При добавлении <code class="literal">+</code> к команде для каждого объекта дополнительно будет выводиться описание.<dt><span class="term"><code class="literal">\e</code> или <code class="literal">\edit</code> <code class="literal">[<span class="optional"><em class="replaceable"><code>имя_файла</code></em></span>] [<span class="optional"><em class="replaceable"><code>номер_строки</code></em></span>]</code></span><dd><p>Если указано <em class="replaceable"><code>имя_файла</code></em>, файл открывается для редактирования. После выхода из редактора его содержимое копируется в буфер запроса. Если не указано имя файла, буфер текущего запроса копируется во временный файл и открывается в редакторе.<p>Затем новый буфер запроса повторно анализируется согласно обычным правилам <span class="application">psql</span>, при этом весь буфер рассматривается как одна строка. (Таким образом, это не подходит для создания скриптов. Для скриптов используйте <code class="command">\i</code>.) Если запрос заканчивается (или содержит) точкой с запятой, он немедленно выполняется. В противном случае он просто будет ждать в буфере запроса. Введите точку с запятой или <code class="literal">\g</code> для отправки на выполнение или <code class="literal">\r</code> для отмены.<p>Если указан номер строки, <span class="application">psql</span> будет позиционировать курсор на указанную строку файла или буфера запроса. Обратите внимание, что если указан один аргумент и он числовой, <span class="application">psql</span> предполагает, что это номер строки, а не имя файла.<div class="tip"><h3 class="title">Подсказка</h3><p>Как настроить редактор и изменить его поведение, рассказывается в разделе <a class="xref" href="app-psql.html#app-psql-environment" title="Переменные окружения">Переменные окружения</a>.</div><dt><span class="term"><code class="literal">\echo <em class="replaceable"><code>текст</code></em> [ ... ]</code></span><dd><p>Печатает аргументы в стандартный вывод, разделяя их одним пробелом и добавляя в конце перевод строки. Команда полезна для формирования вывода из скриптов. Например: <pre class="programlisting">=&gt; <strong class="userinput"><code>\echo `date`</code></strong>
Tue Oct 26 21:40:57 CEST 1999</pre><p> Если первый аргумент <code class="literal">-n</code> без кавычек, то перевод строки в конце не ставится.<div class="tip"><h3 class="title">Подсказка</h3><p>Если используется команда <code class="command">\o</code> для перенаправления вывода запросов, возможно, следует применять команду <code class="command">\qecho</code> вместо этой.</div><dt><span class="term"><code class="literal">\ef [<span class="optional"><em class="replaceable"><code>описание_функции</code></em> [<span class="optional"><em class="replaceable"><code>номер_строки</code></em></span>]</span>]</code></span><dd><p>Эта команда извлекает из базы данных определение заданной функции в форме <code class="command">CREATE OR REPLACE FUNCTION</code> и отправляет его на редактирование. Редактирование осуществляется таким же образом, как и для <code class="literal">\edit</code>. После выхода из редактора изменённая команда будет находиться в буфере запроса. Введите точку с запятой или <code class="literal">\g</code> для выполнения или <code class="literal">\r</code> для отмены.<p>Для функции может быть задано только имя или имя и аргументы, например <code class="literal">foo(integer, text)</code>. Типы аргументов необходимы, если существует более чем одна функция с тем же именем.<p>Если функция не указана, для редактирования открывается пустая заготовка <code class="command">CREATE FUNCTION</code>.<p>Если указан номер строки, <span class="application">psql</span> будет позиционировать курсор на указанную строку тела функции. (Обратите внимание, что тело функции обычно не начинается на первой строке файла).<div class="tip"><h3 class="title">Подсказка</h3><p>Как настроить редактор и изменить его поведение, рассказывается в разделе <a class="xref" href="app-psql.html#app-psql-environment" title="Переменные окружения">Переменные окружения</a>.</div><dt><span class="term"><code class="literal">\encoding [ <em class="replaceable"><code>кодировка</code></em> ]</code></span><dd><p>Устанавливает кодировку набора символов на клиенте. Без аргумента команда показывает текущую кодировку.<dt><span class="term"><code class="literal">\errverbose</code></span><dd><p>Повторяет последнее серверное сообщение об ошибке с максимальным уровнем детализации, как если бы переменная <code class="varname">VERBOSITY</code> имела значение <code class="literal">verbose</code>, а <code class="varname">SHOW_CONTEXT</code> — <code class="literal">always</code>.<dt><span class="term"><code class="literal">\ev [<span class="optional"><em class="replaceable"><code>имя_представления</code></em> [<span class="optional"><em class="replaceable"><code>номер_строки</code></em></span>]</span>]</code></span><dd><p>Эта команда извлекает и открывает на редактирование определение указанного представления в форме команды <code class="command">CREATE OR REPLACE VIEW</code>. Редактирование осуществляется так же, как и с <code class="literal">\edit</code>. После выхода из редактора изменённая команда остаётся в буфере запроса; введите точку с запятой или <code class="literal">\g</code>, чтобы выполнить её, либо <code class="literal">\r</code>, чтобы её сбросить.<p>Если представление не указано, для редактирования открывается пустая заготовка <code class="command">CREATE VIEW</code>.<p>Если указан номер строки, <span class="application">psql</span> установит курсор на заданную строку в определении представления.<dt><span class="term"><code class="literal">\f [ <em class="replaceable"><code>строка</code></em> ]</code></span><dd><p>Устанавливает разделитель полей для невыровненного режима вывода запросов. По умолчанию используется вертикальная черта (<code class="literal">|</code>). См. также <code class="command">\pset</code> для универсального способа настройки параметров вывода.<dt><span class="term"><code class="literal">\g [ <em class="replaceable"><code>имя_файла</code></em> ]</code><br /></span><span class="term"><code class="literal">\g [ |<em class="replaceable"><code>команда</code></em> ]</code></span><dd><p>Отправляет содержимое буфера текущего запроса на сервер для выполнения, с возможностью сохранения результата запроса в файле <em class="replaceable"><code>имя_файла</code></em> или перенаправления вывода в команду оболочки ОС <em class="replaceable"><code>команда</code></em>. Вывод направляется в файл или команду, только если запрос успешно вернул 0 или более строк. Этого не происходит, если запрос завершился неудачно или выполнялась команда, не возвращающая данные.<p><code class="literal">\g</code> без аргументов, по сути, эквивалентен точке с запятой. <code class="literal">\g</code> с аргументом является разовой альтернативой команде <code class="command">\o</code>.<dt><span class="term"><code class="literal">\gexec</code></span><dd><p>Отправляет буфер ввода текущего запроса на сервер, а затем обрабатывает содержимое каждого столбца каждой строки результата запроса (если он непустой) как SQL-оператор, то есть исполняет его. Например, следующая команда создаст индексы по каждому столбцу <code class="structname">my_table</code>: <pre class="programlisting">=&gt; <strong class="userinput"><code>SELECT format('create index on my_table(%I)', attname)</code></strong>
-&gt; <strong class="userinput"><code>FROM pg_attribute</code></strong>
-&gt; <strong class="userinput"><code>WHERE attrelid = 'my_table'::regclass AND attnum &gt; 0</code></strong>
-&gt; <strong class="userinput"><code>ORDER BY attnum</code></strong>
-&gt; <strong class="userinput"><code>\gexec</code></strong>
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE INDEX</pre><p>Генерируемые запросы выполняются в том порядке, в каком возвращаются строки, слева направо, если возвращается несколько столбцов. Поля NULL игнорируются. Эти запросы передаются для обработки на сервер буквально, так что это не могут быть метакоманды <span class="application">psql</span> или запросы, использующие переменные <span class="application">psql</span>. В случае сбоя в одном из запросов, выполнение оставшихся запросов продолжается, если только не установлена переменная <code class="varname">ON_ERROR_STOP</code>. На выполнение каждого запроса оказывает влияние параметр <code class="varname">ECHO</code>. (Применяя команду <code class="command">\gexec</code>, рекомендуется устанавливать в <code class="varname">ECHO</code> режим <code class="literal">all</code> или <code class="literal">queries</code>.) Такие расширенные средства, как протоколирование запросов, пошаговый режим, замер времени и т. п., так же действуют при выполнении каждого генерируемого запроса.<dt><span class="term"><code class="literal">\gset [ <em class="replaceable"><code>префикс</code></em> ]</code></span><dd><p>Отправляет буфер текущего запроса на сервер для выполнения и сохраняет результат запроса в переменных <span class="application">psql</span> (см. раздел <a class="xref" href="app-psql.html#app-psql-variables" title="Переменные">Переменные</a>). Выполняемый запрос должен возвращать ровно одну строку. Каждый столбец строки результата сохраняется в отдельной переменной, которая называется так же, как и столбец. Например: <pre class="programlisting">=&gt; <strong class="userinput"><code>SELECT 'hello' AS var1, 10 AS var2</code></strong>
-&gt; <strong class="userinput"><code>\gset</code></strong>
=&gt; <strong class="userinput"><code>\echo :var1 :var2</code></strong>
hello 10</pre><p>Если указан <em class="replaceable"><code>префикс</code></em>, то он добавляется в начале к именам переменных: <pre class="programlisting">=&gt; <strong class="userinput"><code>SELECT 'hello' AS var1, 10 AS var2</code></strong>
-&gt; <strong class="userinput"><code>\gset result_</code></strong>
=&gt; <strong class="userinput"><code>\echo :result_var1 :result_var2</code></strong>
hello 10</pre><p>Если значение столбца NULL, то вместо присвоения значения соответствующая переменная удаляется.<p>Если запрос завершается ошибкой или не возвращает одну строку, то никакие переменные не меняются.<dt><span class="term"><code class="literal">\h</code> или <code class="literal">\help</code> <code class="literal">[ <em class="replaceable"><code>команда</code></em> ]</code></span><dd><p>Выводит подсказку по синтаксису указанной команды <acronym class="acronym">SQL</acronym>. Если <em class="replaceable"><code>команда</code></em> не указана, то <span class="application">psql</span> выводит список всех команд, для которых доступна справка. Если в качестве command указана звёздочка (<code class="literal">*</code>), то выводится справка по всем командам <acronym class="acronym">SQL</acronym>.<div class="note"><h3 class="title">Примечание</h3><p>Для упрощения ввода команды, состоящие из нескольких слов, можно не заключать в кавычки. Таким образом, можно просто писать <strong class="userinput"><code>\help alter table</code></strong>.</div><dt><span class="term"><code class="literal">\H</code> или <code class="literal">\html</code></span><dd><p>Включает вывод запросов в формате <acronym class="acronym">HTML</acronym>. Если формат <acronym class="acronym">HTML</acronym> уже включён, происходит переключение обратно на выровненный формат. Эта команда используется для совместимости и удобства, но в описании <code class="command">\pset</code> вы можете узнать о других вариантах вывода.<dt><span class="term"><code class="literal">\i</code> или <code class="literal">\include</code> <em class="replaceable"><code>имя_файла</code></em></span><dd><p>Читает ввод из файла <em class="replaceable"><code>имя_файла</code></em> и выполняет его, как будто он был набран на клавиатуре.<p>Если <em class="replaceable"><code>имя_файла</code></em> задано как <code class="literal">-</code> (минус), читается стандартный ввод до признака конца файла или до метакоманды <code class="command">\q</code>. Это может быть полезно для совмещения интерактивного ввода со вводом команд из файлов. Заметьте, что при этом поведение Readline будет применяться, только если оно активно на внешнем уровне.<div class="note"><h3 class="title">Примечание</h3><p>Если вы хотите видеть строки файла на экране по мере их чтения, необходимо установить для переменной <code class="varname">ECHO</code> значение <code class="literal">all</code>.</div><dt><span class="term"><code class="literal">\ir</code> или <code class="literal">\include_relative</code> <em class="replaceable"><code>имя_файла</code></em></span><dd><p>Команда <code class="literal">\ir</code> похожа на <code class="literal">\i</code>, но по-разному интерпретирует относительные имена файлов. При выполнении в интерактивном режиме две команды ведут себя одинаково. Однако при вызове из скрипта <code class="literal">\ir</code> интерпретирует имена файлов относительно каталога, в котором расположен скрипт, а не текущего рабочего каталога.<dt><span class="term"><code class="literal">\l[+]</code> или <code class="literal">\list[+] [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список баз данных на сервере и показывает их имена, владельцев, кодировку набора символов и права доступа. Если указан <em class="replaceable"><code>шаблон</code></em>, выводятся только базы данных, имена которых соответствуют ему. При добавлении <code class="literal">+</code> к команде также отображаются: размер базы данных, табличное пространство по умолчанию и описание. (Информация о размере доступна только для баз данных, к которым текущий пользователь может подключиться.)<dt><span class="term"><code class="literal">\lo_export <em class="replaceable"><code>oid_БО</code></em> <em class="replaceable"><code>имя_файла</code></em></code></span><dd><p>Читает большой объект с заданным <em class="replaceable"><code>oid_БО</code></em> из базы данных и записывает его в файл <em class="replaceable"><code>имя_файла</code></em>. Обратите внимание, что это несколько отличается от серверной функции <code class="function">lo_export</code>, действующей с правами пользователя, от имени которого работает сервер базы данных, и в файловой системе сервера.<div class="tip"><h3 class="title">Подсказка</h3><p>Используйте <code class="command">\lo_list</code> для получения <acronym class="acronym">OID</acronym> больших объектов.</div><dt><span class="term"><code class="literal">\lo_import <em class="replaceable"><code>имя_файла</code></em> [ <em class="replaceable"><code>комментарий</code></em> ]</code></span><dd><p>Сохраняет файл в большом объекте <span class="productname">PostgreSQL</span>. При этом с объектом может быть связан указанный комментарий. Пример: <pre class="programlisting">foo=&gt; <strong class="userinput"><code>\lo_import '/home/peter/pictures/photo.xcf' 'a picture of me'</code></strong>
lo_import 152801</pre><p> Ответ указывает на то, что большой объект получил OID 152801, который может быть использован для доступа к вновь созданному объекту в будущем. Для удобства чтения рекомендуется всегда связывать объекты с понятными комментариями. OID и комментарии можно посмотреть с помощью команды <code class="command">\lo_list</code>.<p>Обратите внимание, что это немного отличается от функции сервера <code class="function">lo_import</code>, так как действует от имени локального пользователя в локальной файловой системе, а не пользователя сервера в файловой системе сервера.<dt><span class="term"><code class="literal">\lo_list</code></span><dd><p>Показывает список всех больших объектов <span class="productname">PostgreSQL</span>, хранящихся в базе данных, вместе с предоставленными комментариями.<dt><span class="term"><code class="literal">\lo_unlink <em class="replaceable"><code>oid_БО</code></em></code></span><dd><p>Удаляет большой объект с <em class="replaceable"><code>oid_БО</code></em> из базы данных.<div class="tip"><h3 class="title">Подсказка</h3><p>Используйте <code class="command">\lo_list</code> для получения <acronym class="acronym">OID</acronym> больших объектов.</div><dt><span class="term"><code class="literal">\o</code> или <code class="literal">\out [ <em class="replaceable"><code>имя_файла</code></em> ]</code><br /></span><span class="term"><code class="literal">\o</code> или <code class="literal">\out [ |<em class="replaceable"><code>команда</code></em> ]</code></span><dd><p>Результаты запросов будут сохраняться в файле <em class="replaceable"><code>имя_файла</code></em> или перенаправляться команде оболочки (заданной аргументом <em class="replaceable"><code>команда</code></em>). Если аргумент не указан, результаты запросов перенаправляются на стандартный вывод.<p><span class="quote">«<span class="quote">Результаты запросов</span>»</span> включают в себя все таблицы, ответы команд, уведомления, полученные от сервера базы данных, а также вывод от метакоманд, запрашивающих базу данных (таких как <code class="command">\d</code>), но не сообщения об ошибках.<div class="tip"><h3 class="title">Подсказка</h3><p>Чтобы вставить текст между результатами запросов, используйте <code class="command">\qecho</code>.</div><dt><span class="term"><code class="literal">\p</code> или <code class="literal">\print</code></span><dd><p>Печатает содержимое буфера текущего запроса в стандартный вывод.<dt><span class="term"><code class="literal">\password [ <em class="replaceable"><code>имя_пользователя</code></em> ]</code></span><dd><p>Изменяет пароль указанного пользователя (по умолчанию, текущего пользователя). Эта команда запрашивает новый пароль, шифрует и отправляет его на сервер в виде команды <code class="command">ALTER ROLE</code>. Это гарантирует, что новый пароль не отображается в открытом виде в истории команд, журнале сервера или в другом месте.<dt><span class="term"><code class="literal">\prompt [ <em class="replaceable"><code>текст</code></em> ] <em class="replaceable"><code>имя</code></em></code></span><dd><p>Предлагает пользователю ввести значение, которое будет присвоено переменной <em class="replaceable"><code>имя</code></em>. Дополнительно можно указать <em class="replaceable"><code>текст</code></em> подсказки. (Если подсказка состоит из нескольких слов, то её текст нужно взять в одинарные кавычки).<p>По умолчанию, <code class="literal">\prompt</code> использует терминал для ввода и вывода. Однако если используется параметр командной строки <code class="option">-f</code>, <code class="literal">\prompt</code> использует стандартный ввод и стандартный вывод.<dt><span class="term"><code class="literal">\pset [ <em class="replaceable"><code>параметр</code></em> [ <em class="replaceable"><code>значение</code></em> ] ]</code></span><dd><p>Эта команда устанавливает параметры, влияющие на вывод результатов запросов. Указание <em class="replaceable"><code>параметр</code></em> определяет, какой параметр требуется установить. Семантика <em class="replaceable"><code>значения</code></em> зависит от выбранного параметра. Для некоторых параметров отсутствие <em class="replaceable"><code>значения</code></em> означает переключение значения, либо сброс значения, как описано ниже в разделе конкретного параметра. Если такое поведение не упоминается, то пропуск <em class="replaceable"><code>значения</code></em> приводит к отображению текущего значения параметра.<p><code class="command">\pset</code> без аргументов выводит текущий статус всех параметров команды.<p>Имеются следующие параметры: <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">border</code></span><dd><p>Здесь <em class="replaceable"><code>значение</code></em> должно быть числом. В целом, чем больше это число, тем больше границ и линий будет в таблицах, но детали зависят от формата. В формате <acronym class="acronym">HTML</acronym> заданное значение напрямую отображается в атрибут <code class="literal">border=...</code>. Для большинства других форматов имеют смысл только значения 0 (нет границы), 1 (внутренние разделительные линии) и 2 (граница таблицы), а значения больше 2 воспринимаются как <code class="literal">border = 2</code>. Форматы <code class="literal">latex</code> и <code class="literal">latex-longtable</code> дополнительно поддерживают значение 3, добавляющее разделительные линии между строками данных.<dt><span class="term"><code class="literal">columns</code></span><dd><p>Устанавливает максимальную ширину для формата <code class="literal">wrapped</code>, а также ограничение по ширине, свыше которого будет требоваться постраничник или произойдёт переключение в вертикальное отображение при режиме <code class="literal">expanded auto</code>. При значении 0 (по умолчанию) максимальная ширина управляется переменной среды <code class="envar">COLUMNS</code> или шириной экрана, если <code class="envar">COLUMNS</code> не установлена. Кроме того, если <code class="literal">columns</code> равно нулю, то формат <code class="literal">wrapped</code> влияет только на вывод на экран. Если <code class="literal">columns</code> не равно 0, то это также влияет на вывод в файл или в другую команду через канал.<dt><span class="term"><code class="literal">expanded</code> (или <code class="literal">x</code>)</span><dd><p>Указанное <em class="replaceable"><code>значение</code></em> допускает варианты <code class="literal">on</code> или <code class="literal">off</code>, которые включают или отключают развёрнутый режим, либо <code class="literal">auto</code>. Если <em class="replaceable"><code>значение</code></em> опущено, команда включает/отключает режим. Когда развёрнутый режим включён, результаты запроса выводятся в две колонки: имя столбца в левой, данные в правой. Этот режим полезен, если данные не помещаются на экране в обычном <span class="quote">«<span class="quote">горизонтальном</span>»</span> режиме. При выборе <code class="literal">auto</code> развёрнутый режим используется, когда результат запроса содержит несколько столбцов и по ширине не умещается на экране; в противном случае используется обычный режим. Режим <code class="literal">auto</code> распространяется только на форматы <code class="literal">aligned</code> и <code class="literal">wrapped</code>. С другими форматами он всегда равнозначен отключённому состоянию.<dt><span class="term"><code class="literal">fieldsep</code></span><dd><p>Устанавливает разделитель полей для невыровненного режима вывода запросов. Таким образом, можно формировать вывод, в котором значения будут разделены табуляцией или запятыми. Это может быть предпочтительным для использования в других программах. Для установки символа табуляции в качестве разделителя полей введите <code class="literal">\pset fieldsep '\t'</code>. По умолчанию используется вертикальная черта (<code class="literal">'|'</code>).<dt><span class="term"><code class="literal">fieldsep_zero</code></span><dd><p>Устанавливает разделитель полей для невыровненного режима вывода в нулевой байт.<dt><span class="term"><code class="literal">footer</code></span><dd><p>Возможны два варианта <em class="replaceable"><code>значения</code></em>: <code class="literal">on</code> или <code class="literal">off</code>, которые включают или отключают вывод результирующей строки с количеством выбранных записей <code class="literal">(<em class="replaceable"><code>n</code></em> строк)</code>. Если <em class="replaceable"><code>значение</code></em> не указано, то команда переключает текущее значение в <code class="literal">on</code> или <code class="literal">off</code>.<dt><span class="term"><code class="literal">format</code></span><dd><p>Устанавливает один из следующих форматов вывода: <code class="literal">unaligned</code>, <code class="literal">aligned</code>, <code class="literal">wrapped</code>, <code class="literal">html</code>, <code class="literal">asciidoc</code>, <code class="literal">latex</code> (использует <code class="literal">tabular</code>), <code class="literal">latex-longtable</code> или <code class="literal">troff-ms</code>. Допускается сокращение слова до уникального значения.<p>В формате <code class="literal">unaligned</code> все столбцы размещаются на одной строке и отделяются друг от друга текущим разделителем полей. Это полезно для создания вывода, который будут читать другие программы (например, для вывода данных с разделителем Tab или через запятую).<p>Формат <code class="literal">aligned</code> это стандартный, удобочитаемый, хорошо отформатированный текстовый вывод. Используется по умолчанию.<p>Формат <code class="literal">wrapped</code> похож на <code class="literal">aligned</code>, но переносит длинные значения столбцов на новые строки, чтобы общий вывод поместился в заданную ширину. Задание ширины вывода описано в параметре <code class="literal">columns</code>. Обратите внимание, что <span class="application">psql</span> не будет пытаться переносить на новые строки заголовки столбцов. Поэтому формат <code class="literal">wrapped</code> работает так же, как <code class="literal">aligned</code> если общая ширина, требуемая для всех заголовков столбцов, превышает установленную максимальную ширину.<p>Форматы <code class="literal">html</code>, <code class="literal">asciidoc</code>, <code class="literal">latex</code>, <code class="literal">latex-longtable</code> и <code class="literal">troff-ms</code> выводят таблицы, которые предназначены для включения в документы с помощью соответствующего языка разметки. Они не являются полноценными документами! Это может быть не критично для <acronym class="acronym">HTML</acronym>, но для <span class="application">LaTeX</span> обязателен документ-контейнер. Формат <code class="literal">latex-longtable</code> также требует наличия пакетов <span class="application">LaTeX</span> <code class="literal">longtable</code> и <code class="literal">booktabs</code>.<dt><span class="term"><code class="literal">linestyle</code></span><dd><p>Задаёт стиль отрисовки линий границы: <code class="literal">ascii</code>, <code class="literal">old-ascii</code> или <code class="literal">unicode</code>. Допускается сокращение слова до уникального значения. (Это значит, что одной буквы будет достаточно.) Значение по умолчанию: <code class="literal">ascii</code>. Этот параметр действует только в форматах <code class="literal">aligned</code> и <code class="literal">wrapped</code>.<p>Стиль <code class="literal">ascii</code> использует обычные символы <acronym class="acronym">ASCII</acronym>. Символы новой строки в данных показываются с использованием символа <code class="literal">+</code> в правом поле. Когда при формате <code class="literal">wrapped</code> происходит перенос данных на новую строку (без символа новой строки), ставится точка (<code class="literal">.</code>) в правом поле первой строки и точка в левом поле следующей строки.<p>Стиль <code class="literal">old-ascii</code> использует обычные символы <acronym class="acronym">ASCII</acronym> в стиле <span class="productname">PostgreSQL</span> 8.4 и раньше. Символы новой строки в данных отображаются, используя символ <code class="literal">:</code> вместо левого разделителя полей. Когда происходит перенос данных на новую строку без символа новой строки, символ <code class="literal">;</code> используется вместо левого разделителя полей.<p>Стиль <code class="literal">unicode</code> использует символы Юникода для рисования линий. Символы новой строки в данных показываются с использованием символа возврата каретки в правом поле. Когда при формате <code class="literal">wrapped</code> происходит перенос данных на новую строку (без символа новой строки), ставится символ многоточия в правом поле первой строки и в левом поле следующей строки.<p>Когда значение <code class="literal">border</code> больше нуля, параметр <code class="literal">linestyle</code> также определяет символы, которыми будут рисоваться границы. Обычные символы <acronym class="acronym">ASCII</acronym> работают везде, но символы Юникода смотрятся лучше на терминалах, распознающих их.<dt><span class="term"><code class="literal">null</code></span><dd><p>Устанавливает строку, которая будет напечатана вместо значения null. По умолчанию не печатается ничего, что можно ошибочно принять за пустую строку. Например, можно было бы предпочесть <code class="literal">\pset null '(null)'</code>.<dt><span class="term"><code class="literal">numericlocale</code></span><dd><p>Если задаётся <em class="replaceable"><code>значение</code></em>, возможны два варианта: <code class="literal">on</code> или <code class="literal">off</code>, которые включают или отключают отображение специфичного для локали символа, разделяющего группы цифр левее десятичной точки. Если <em class="replaceable"><code>значение</code></em> не указано, то команда переключает вывод чисел с локализованного на обычный и обратно.<dt><span class="term"><code class="literal">pager</code></span><dd><p>Управляет использованием постраничника для просмотра результатов запросов и справочной информации <span class="application">psql</span>. Если переменная среды <code class="envar">PAGER</code> установлена, то данные передаются в указанную программу. В противном случае используется платформозависимая программа по умолчанию (например, <code class="filename">more</code>).<p>Если <code class="literal">pager</code> имеет значение <code class="literal">off</code>, программа постраничного просмотра (постраничник) не используется. Если <code class="literal">pager</code> имеет значение <code class="literal">on</code>, эта программа используется при необходимости, т. е. когда вывод на терминал не помещается на экране. Параметр pager также может иметь значение <code class="literal">always</code>, при этом постраничник будет использоваться всегда, независимо от того, помещается вывод на экран терминала или нет. Команда <code class="literal">\pset pager</code> без указания <em class="replaceable"><code>значения</code></em> переключает варианты <code class="literal">on</code> и <code class="literal">off</code>.<dt><span class="term"><code class="literal">pager_min_lines</code></span><dd><p>Если в <code class="literal">pager_min_lines</code> задаётся число, превышающее высоту страницы, программа постраничного вывода не будет вызываться, пока не наберётся заданное число строк для вывода. Значение по умолчанию — 0.<dt><span class="term"><code class="literal">recordsep</code></span><dd><p>Устанавливает разделитель записей (строк) для невыровненного режима вывода. По умолчанию используется символ новой строки.<dt><span class="term"><code class="literal">recordsep_zero</code></span><dd><p>Устанавливает разделитель записей для невыровненного режима вывода в нулевой байт.<dt><span class="term"><code class="literal">tableattr</code> (или <code class="literal">T</code>)</span><dd><p>Устанавливает атрибуты, которые будут помещены в тег <code class="sgmltag-element">table</code>, при формате вывода <acronym class="acronym">HTML</acronym>. Например, это может быть <code class="literal">cellpadding</code> или <code class="literal">border</code>. Заметьте, что, вероятно, не нужно здесь задавать <code class="literal">border</code>, так как для этого уже есть <code class="literal">\pset border</code>. Если <em class="replaceable"><code>значение</code></em> не задано, атрибуты таблицы удаляются.<p>В формате <code class="literal">latex-longtable</code> этот параметр контролирует пропорциональную ширину каждого столбца, данные которого выровнены по левому краю. Он указывается как список разделённых пробелами значений, например <code class="literal">'0.2 0.2 0.6'</code>. Для столбцов, которым не хватает значений, используется последнее из заданных.<dt><span class="term"><code class="literal">title</code> (или <code class="literal">C</code>)</span><dd><p>Устанавливает заголовок таблицы для любых впоследствии выводимых таблиц. Это можно использовать для задания описательных тегов при формировании вывода. Если <em class="replaceable"><code>значение</code></em> не задано, заголовок таблицы удаляется.<dt><span class="term"><code class="literal">tuples_only</code> (или <code class="literal">t</code>)</span><dd><p>Возможны два варианта <em class="replaceable"><code>значения</code></em>: <code class="literal">on</code> или <code class="literal">off</code>, которые включают или отключают режим вывода только кортежей. Если <em class="replaceable"><code>значение</code></em> не указано, то команда переключает с режима вывода только кортежей на обычный режим и обратно. Обычный вывод включает в себя дополнительную информацию, такую как заголовки столбцов и различные колонтитулы. В режиме вывода только кортежей отображаются только фактические табличные данные.<dt><span class="term"><code class="literal">unicode_border_linestyle</code></span><dd><p>Устанавливает стиль рисования границ для стиля линий <code class="literal">unicode</code>: <code class="literal">single</code> (одинарный) или <code class="literal">double</code> (двойной).<dt><span class="term"><code class="literal">unicode_column_linestyle</code></span><dd><p>Устанавливает стиль рисования колонок для стиля линий <code class="literal">unicode</code>: <code class="literal">single</code> (одинарный) или <code class="literal">double</code> (двойной).<dt><span class="term"><code class="literal">unicode_header_linestyle</code></span><dd><p>Устанавливает стиль рисования заголовка для стиля линий <code class="literal">unicode</code>: <code class="literal">single</code> (одинарный) или <code class="literal">double</code> (двойной).</dl></div><p>Иллюстрацию того, как могут выглядеть различные форматы, можно увидеть в разделе <a class="xref" href="app-psql.html#app-psql-examples" title="Примеры">Примеры</a>.<div class="tip"><h3 class="title">Подсказка</h3><p>Для некоторых параметров <code class="command">\pset</code> есть короткие команды. См. <code class="command">\a</code>, <code class="command">\C</code>, <code class="command">\f</code>, <code class="command">\H</code>, <code class="command">\t</code>, <code class="command">\T</code> и <code class="command">\x</code>.</div><dt><span class="term"><code class="literal">\q</code> или <code class="literal">\quit</code></span><dd><p>Выход из <span class="application">psql</span>. При использовании в скрипте прекращается только выполнение этого скрипта.<dt><span class="term"><code class="literal">\qecho <em class="replaceable"><code>текст</code></em> [ ... ]</code></span><dd><p>Эта команда идентична <code class="command">\echo</code> за исключением того, что вывод будет записываться в канал вывода запросов, установленный <code class="command">\o</code>.<dt><span class="term"><code class="literal">\r</code> или <code class="literal">\reset</code></span><dd><p>Сбрасывает (очищает) буфер запроса.<dt><span class="term"><code class="literal">\s [ <em class="replaceable"><code>имя_файла</code></em> ]</code></span><dd><p>Записывает историю команд <span class="application">psql</span> в файл <em class="replaceable"><code>имя_файла</code></em>. Если <em class="replaceable"><code>имя_файла</code></em> не указано, история команд выводится в стандартный вывод (с использованием постраничника, когда уместно). Этот параметр недоступен, если <span class="application">psql</span> был собран без поддержки <span class="application">Readline</span>.<dt><span class="term"><code class="literal">\set [ <em class="replaceable"><code>имя</code></em> [ <em class="replaceable"><code>значение</code></em> [ ... ] ] ]</code></span><dd><p>Задаёт <span class="application">psql</span> переменной <em class="replaceable"><code>имя</code></em> <em class="replaceable"><code>значение</code></em> или, если задано более одного значения, их конкатенацию. Если задан только один аргумент, то переменной с этим именем присваивается пустое значение. Для удаления переменной используйте команду <code class="command">\unset</code>.<p><code class="command">\set</code> без аргументов выводит имена и значения всех <span class="application">psql</span> переменных, установленных в настоящее время.<p>Имена переменных могут содержать буквы, цифры и знаки подчёркивания. Подробнее см. раздел <a class="xref" href="app-psql.html#app-psql-variables" title="Переменные">Переменные</a> ниже. Имена переменных чувствительны к регистру.<p>Хотя вы можете задать любой переменной любое значение, <span class="application">psql</span> рассматривает несколько переменных особым образом. Они документированы в разделе о переменных.<div class="note"><h3 class="title">Примечание</h3><p>Эта команда не имеет отношения к <acronym class="acronym">SQL</acronym>-команде <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/sql-set" title="SET"><span class="refentrytitle">SET</span></a>.</div><dt><span class="term"><code class="literal">\setenv <em class="replaceable"><code>имя</code></em> [ <em class="replaceable"><code>значение</code></em> ]</code></span><dd><p>Задаёт для переменной среды <em class="replaceable"><code>имя</code></em> <em class="replaceable"><code>значение</code></em> или, если <em class="replaceable"><code>значение</code></em> не задано, удаляет переменную среды. Пример: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\setenv PAGER less</code></strong>
testdb=&gt; <strong class="userinput"><code>\setenv LESS -imx4F</code></strong></pre><dt><span class="term"><code class="literal">\sf[+] <em class="replaceable"><code>описание_функции</code></em></code></span><dd><p>Извлекает из базы данных и выводит определение заданной функции в форме команды <code class="command">CREATE OR REPLACE FUNCTION</code>. Определение печатается в текущий канал вывода запросов, установленный <code class="command">\o</code>.<p>Для функции может быть задано только имя или имя и аргументы, например <code class="literal">foo(integer, text)</code>. Типы аргументов необходимы, если существует более чем одна функция с тем же именем.<p>При добавлении <code class="literal">+</code> к команде строки вывода нумеруются, первая строка тела функции получит номер 1.<dt><span class="term"><code class="literal">\sv[+] <em class="replaceable"><code>имя_представления</code></em></code></span><dd><p>Извлекает из базы данных и выводит определение указанного представления в форме команды <code class="command">CREATE OR REPLACE VIEW</code>. Определение выводится в текущий канал вывода запросов, установленный <code class="command">\o</code>.<p>При добавлении <code class="literal">+</code> к команде строки вывода нумеруются, начиная с 1.<dt><span class="term"><code class="literal">\t</code></span><dd><p>Включает/выключает отображение имён столбцов и результирующей строки с количеством выбранных записей для запросов. Эта команда эквивалентна <code class="literal">\pset tuples_only</code> и предоставлена для удобства.<dt><span class="term"><code class="literal">\T <em class="replaceable"><code>параметры_таблицы</code></em></code></span><dd><p>Устанавливает атрибуты, которые будут помещены в тег <code class="sgmltag-element">table</code> при формате вывода <acronym class="acronym">HTML</acronym>. Эта команда эквивалентна <code class="literal">\pset tableattr <em class="replaceable"><code>параметры_таблицы</code></em></code>.<dt><span class="term"><code class="literal">\timing [ <em class="replaceable"><code>on</code></em> | <em class="replaceable"><code>off</code></em> ]</code></span><dd><p>Включает/отключает отображение времени выполнения команд SQL в миллисекундах. Без параметра переключает текущий режим отображения времени выполнения.<dt><span class="term"><code class="literal">\unset <em class="replaceable"><code>имя</code></em></code></span><dd><p>Удаляет <span class="application">psql</span> переменную <em class="replaceable"><code>имя</code></em>.<dt><span class="term"><code class="literal">\w</code> или <code class="literal">\write</code> <em class="replaceable"><code>имя_файла</code></em><br /></span><span class="term"><code class="literal">\w</code> или <code class="literal">\write</code> <code class="literal">|</code><em class="replaceable"><code>команда</code></em></span><dd><p>Выводит буфер текущего запроса в файл <em class="replaceable"><code>имя_файла</code></em> или передаёт в команду ОС <em class="replaceable"><code>команда</code></em>.<dt><span class="term"><code class="literal">\watch [ <em class="replaceable"><code>секунды</code></em> ]</code></span><dd><p>Эта команда многократно выполняет текущий запрос в буфере (как <code class="literal">\g</code>), пока не будет прервана или не возникнет ошибка. Аргумент задаёт количество секунд ожидания между выполнениями запроса (по умолчанию 2). Результат каждого запроса выводится с заголовком, включающим строку <code class="literal">\pset title</code> (если она задана), время запуска запроса и интервал задержки.<dt><span class="term"><code class="literal">\x [ <em class="replaceable"><code>on</code></em> | <em class="replaceable"><code>off</code></em> | <em class="replaceable"><code>auto</code></em> ]</code></span><dd><p>Устанавливает или переключает режим развёрнутого вывода таблицы. Это эквивалентно <code class="literal">\pset expanded</code>.<dt><span class="term"><code class="literal">\z [ <a class="link" href="app-psql.html#app-psql-patterns" title="Шаблоны поиска"><em class="replaceable"><code>шаблон</code></em></a> ]</code></span><dd><p>Выводит список таблиц, представлений и последовательностей с их правами доступа. Если указан <em class="replaceable"><code>шаблон</code></em>, отображаются только таблицы, представления и последовательности, имена которых соответствуют ему.<p>Это псевдоним для <code class="command">\dp</code> (<span class="quote">«<span class="quote">показать права доступа</span>»</span>).<dt><span class="term"><code class="literal">\! [ <em class="replaceable"><code>команда</code></em> ]</code></span><dd><p>Выполняет <em class="replaceable"><code>команду</code></em> ОС. Без указания <em class="replaceable"><code>команды</code></em> запускает отдельную командную оболочку ОС. Последующие аргументы не интерпретируются, командная оболочка ОС увидит их как есть. В частности, не применяются правила подстановки переменных и экранирование с обратной косой чертой.<dt><span class="term"><code class="literal">\? [ <em class="replaceable"><code>тема</code></em> ]</code></span><dd><p>Показывает справочную информацию. Необязательный параметр <em class="replaceable"><code>тема</code></em> (по умолчанию <code class="literal">commands</code>) выбирает описание интересующей части <span class="application">psql</span>: <code class="literal">commands</code> описывает команды <span class="application">psql</span> с обратной косой чертой; <code class="literal">options</code> описывает параметры командной строки, которые можно передать <span class="application">psql</span>; а <code class="literal">variables</code> выдаёт справку по переменным конфигурации <span class="application">psql</span>.</dl></div><div class="refsect3" id="app-psql-patterns"><h4>Шаблоны поиска</h4><a class="indexterm" id="idp101368"></a><p>Различные <code class="literal">\d</code> команды принимают параметр <em class="replaceable"><code>шаблон</code></em> для указания имени (имён) объектов для отображения. В простейшем случае шаблон — это точное имя объекта. Символы внутри шаблона обычно приводятся к нижнему регистру, как и для имён SQL-объектов; к примеру <code class="literal">\dt FOO</code> выводит таблицу с именем <code class="literal">foo</code>. Как и для SQL имён, двойные кавычки вокруг шаблона предотвращают перевод в нижний регистр. Для включения символа двойной кавычки в шаблон используются два символа двойных кавычек подряд внутри шаблона в двойных кавычках. Опять же, это соответствует правилам для SQL-идентификаторов. Например <code class="literal">\dt "FOO""BAR"</code> будет выводить таблицу с именем <code class="literal">FOO"BAR</code> (но не <code class="literal">foo"bar</code>). В отличие от обычных правил для SQL-имён, можно взять в двойные кавычки только часть шаблона, например <code class="literal">\dt FOO"FOO"BAR</code> будет выводить таблицу с именем <code class="literal">fooFOObar</code>.<p>Если <em class="replaceable"><code>шаблон</code></em> вообще не указан, команды <code class="literal">\d</code> выводят все объекты, видимые с текущим путём поиска схем. Это эквивалентно указанию <code class="literal">*</code> в качестве шаблона. (Объект считается <em class="firstterm">видимым</em>, если схема, к которой он относится, находится в пути поиска, и объект с таким же типом и именем в пути поиска ещё не встречался. Это эквивалентно утверждению, что на объект можно ссылаться по имени, без явного указания схемы.) Чтобы увидеть все объекты в базе данных, независимо от видимости, используйте в качестве шаблона <code class="literal">*.*</code>.<p>Внутри шаблона <code class="literal">*</code> обозначает любое количество символов, включая отсутствие символов. <code class="literal">?</code> соответствует любому одному символу. (Это соответствует шаблонам имён файлов в Unix.) Например, <code class="literal">\dt int*</code> отображает все таблицы, имена которых начинаются на <code class="literal">int</code>. Однако внутри двойных кавычек <code class="literal">*</code> и <code class="literal">?</code> теряют своё специальное значение и становятся обычными символами.<p>Шаблон, содержащий точку (<code class="literal">.</code>), интерпретируется как шаблон имени схемы, за которым следует шаблон имени объекта. Например, <code class="literal">\dt foo*.*bar*</code> отображает все таблицы, имена которых включают <code class="literal">bar</code>, и расположенные в схемах, имена которых начинаются с <code class="literal">foo</code>. Шаблону, не содержащему точку, могут соответствовать только объекты текущей схемы. Опять же, точка внутри двойных кавычек теряет своё специальное значение.<p>Опытные пользователи могут использовать возможности регулярных выражений, такие как классы символов. Например <code class="literal">[0-9]</code> соответствует любой цифре. Все специальные символы регулярных выражений работают как описано в <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/functions-matching#functions-posix-regexp" title="9.7.3. Регулярные выражения POSIX">Подразделе 9.7.3</a>, за исключением: <code class="literal">.</code> используется в качестве разделителя, как говорилось выше; <code class="literal">*</code> соответствует регулярному выражению <code class="literal">.*</code>; <code class="literal">?</code> соответствует <code class="literal">.</code>, а также символ <code class="literal">$</code>, который не имеет специального значения. При необходимости эти символы можно эмулировать указывая <code class="literal">?</code> для эмуляции <code class="literal">.</code>, <code class="literal">(<em class="replaceable"><code>R</code></em>+|)</code> для <code class="literal"><em class="replaceable"><code>R</code></em>*</code>, <code class="literal">(<em class="replaceable"><code>R</code></em>|)</code> для <code class="literal"><em class="replaceable"><code>R</code></em>?</code>. <code class="literal">$</code> не требуется, как символ регулярного выражения, потому что шаблон должен соответствовать имени целиком, в отличие от обычной интерпретации регулярных выражений (другими словами, <code class="literal">$</code> автоматически добавляется в шаблон). Используйте <code class="literal">*</code> в начале и/или в конце, если не хотите, чтобы шаблон закреплялся. Обратите внимание, что внутри двойных кавычек, все специальные символы регулярных выражений теряют своё специальное значение и соответствуют сами себе. Также, специальные символы регулярных выражений не действуют в шаблонах для имён операторов (т. е. в аргументе команды <code class="literal">\do</code>).</div></div><div class="refsect2" id="idp101422"><h3>Расширенные возможности</h3><div class="refsect3" id="app-psql-variables"><h4>Переменные</h4><p><span class="application">psql</span> предоставляет возможности подстановки переменных подобные тем, что используются в командных оболочках Unix. Переменные представляют собой пары имя/значение, где значением может быть любая строка любой длины. Имя должно состоять из букв (включая нелатинские буквы), цифр и знаков подчёркивания.<p>Чтобы установить переменную, используется метакоманда <span class="application">psql</span> <code class="command">\set</code>. Например: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\set foo bar</code></strong></pre><p> присваивает переменной <code class="literal">foo</code> значение <code class="literal">bar</code>. Чтобы получить значение переменной, нужно поставить двоеточие перед её именем, например: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\echo :foo</code></strong>
bar</pre><p> Это работает как в обычных SQL-командах, так и в метакомандах; подробности в разделе <a class="xref" href="app-psql.html#app-psql-interpolation" title="Интерполяция SQL">Интерполяция <acronym class="acronym">SQL</acronym></a> ниже.<p>При вызове <code class="command">\set</code> без второго аргумента переменной присваивается пустая строка. Для удаления переменной используется команда <code class="command">\unset</code>. Чтобы посмотреть значения всех переменных, нужно вызвать <code class="command">\set</code> без аргументов.<div class="note"><h3 class="title">Примечание</h3><p>На аргументы <code class="command">\set</code> распространяются те же правила подстановки, что и для других команд. Таким образом можно создавать интересные ссылки, например <code class="literal">\set :foo 'something'</code>, получая <span class="quote">«<span class="quote">мягкие ссылки</span>»</span> в <span class="productname">Perl</span> или <span class="quote">«<span class="quote">переменные переменных</span>»</span> в <span class="productname"><acronym class="acronym">PHP</acronym></span>. К сожалению (или к счастью?), с этими конструкциями нельзя сделать ничего полезного. С другой стороны, <code class="literal">\set bar :foo</code> является прекрасным способом копирования переменной.</div><p>Некоторые переменные обрабатываются в <span class="application">psql</span> особым образом. Они представляют собой определённые параметры, которые могут быть изменены во время выполнения путём присваивания нового значения, а в некоторых переменных содержится изменяемое состояние <span class="application">psql</span>. Хотя эти переменные можно использовать и для других целей, делать это не рекомендуется, так как поведение программы может быстро стать очень странным. По соглашению, имена специальных переменных состоят из всех заглавных ASCII букв (и, возможно, цифр и знаков подчёркивания). Для максимальной совместимости в будущем старайтесь не использовать такие имена для собственных переменных. Далее идет список переменных, обрабатываемых особым образом.<div class="variablelist"><dl class="variablelist"><dt><span class="term"> <code class="varname">AUTOCOMMIT</code> <a class="indexterm" id="idp101459"></a> </span><dd><p>При значении <code class="literal">on</code> (по умолчанию) после каждой успешно выполненной команды выполняется фиксация изменений. Чтобы отложить фиксацию изменений в этом режиме, нужно выполнить SQL-команду <code class="command">BEGIN</code> или <code class="command">START TRANSACTION</code>. При значении <code class="literal">off</code> или если переменная не определена, фиксация изменений не происходит до тех пор, пока явно не выполнена команда <code class="command">COMMIT</code> или <code class="command">END</code>. При значении <code class="literal">off</code> неявно выполняется <code class="command">BEGIN</code> непосредственно перед любой командой, за исключением случаев когда: команда уже в транзакционном блоке; перед самой командой <code class="command">BEGIN</code> или другой командой управления транзакциями; перед командой, которая не может выполняться внутри транзакционного блока (например <code class="command">VACUUM</code>).<div class="note"><h3 class="title">Примечание</h3><p>Если режим <code class="literal">autocommit</code> отключён, необходимо явно откатывать изменения в неуспешных транзакциях, выполняя команду <code class="command">ABORT</code> или <code class="command">ROLLBACK</code>. Также имейте в виду, что при выходе из сессии без фиксации изменений несохранённые изменения будут потеряны.</div><div class="note"><h3 class="title">Примечание</h3><p>Включённый режим <code class="literal">autocommit</code> является традиционным для <span class="productname">PostgreSQL</span>, а выключенный режим ближе к спецификации SQL. Если вы предпочитаете отключить режим <code class="literal">autocommit</code>, это можно сделать в общесистемном файле <code class="filename">psqlrc</code> или в персональном файле <code class="filename">~/.psqlrc</code>.</div><dt><span class="term"><code class="varname">COMP_KEYWORD_CASE</code></span><dd><p>Определяет, какой регистр букв будет использован при автоматическом завершении ключевых слов SQL. Если установлено в <code class="literal">lower</code> или <code class="literal">upper</code>, будет использоваться нижний или верхний регистр соответственно. Если установлено в <code class="literal">preserve-lower</code> или <code class="literal">preserve-upper</code> (по умолчанию), то завершаемое слово будет в том же регистре, что и уже введённое начало слова, но последующие слова, завершаемые полностью, будут в нижнем или верхнем регистре соответственно.<dt><span class="term"><code class="varname">DBNAME</code></span><dd><p>Имя базы данных, к которой вы сейчас подключены. Устанавливается всякий раз при подключении к базе данных (в том числе при старте программы), но эту переменную можно удалить.<dt><span class="term"><code class="varname">ECHO</code></span><dd><p>Со значением <code class="literal">all</code> все непустые входящие строки печатаются в стандартный вывод по мере их чтения. (Это не относится к строкам, считываемым интерактивно.) Чтобы выбрать такое поведение при запуске программы, добавьте ключ <code class="option">-a</code>. Со значением <code class="literal">queries</code>, <span class="application">psql</span> печатает каждый запрос, отправленный серверу, в стандартный вывод. Этому значению соответствует ключ <code class="option">-e</code>. Со значением <code class="literal">errors</code> в стандартный канал ошибок выдаются только запросы, вызвавшие ошибки. Ему соответствует ключ <code class="option">-b</code>. В случае отсутствия значения и с вариантом <code class="literal">none</code> (либо другим вариантом, кроме перечисленных) запросы не выводятся.<dt><span class="term"><code class="varname">ECHO_HIDDEN</code></span><dd><p>Если эта переменная установлена в значение <code class="literal">on</code>, то при выполнении метакоманд, запрашивающих базу данных, сначала будет выводиться текст запроса. Это позволяет изучать внутреннее устройство <span class="productname">PostgreSQL</span> и реализовывать похожую функциональность в своих программах. (Чтобы включить такое поведение при старте <span class="application">psql</span>, используйте параметр <code class="option">-E</code>.) При установке переменной в значение <code class="literal">noexec</code> запросы просто отображаются, но не отправляются на сервер и не выполняются.<dt><span class="term"><code class="varname">ENCODING</code></span><dd><p>Содержит текущую кодировку набора символов клиента.<dt><span class="term"><code class="varname">FETCH_COUNT</code></span><dd><p>Если переменная установлена в целое значение &gt; 0, результаты запросов <code class="command">SELECT</code> извлекаются из базы данных и отображаются группами с таким количеством строк, в отличие от поведения по умолчанию, когда перед отображением результирующий набор накапливается целиком. Это позволяет использовать ограниченный размер памяти независимо от размера выборки. При включении этой функциональности обычно используются значения от 100 до 1000. Имейте в виду, что запрос может завершиться ошибкой после отображения некоторого количества строк.<div class="tip"><h3 class="title">Подсказка</h3><p>Хотя можно использовать любой формат вывода, формат по умолчанию <code class="literal">aligned</code> как правило выглядит хуже, потому что каждая группа по <code class="varname">FETCH_COUNT</code> строк форматируется отдельно, что может привести к разной ширине столбцов в разных группах. Остальные форматы вывода работают лучше.</div><dt><span class="term"><code class="varname">HISTCONTROL</code></span><dd><p>Если переменная имеет значение <code class="literal">ignorespace</code>, строки, начинающиеся с пробела, не сохраняются в истории. Если она имеет значение <code class="literal">ignoredups</code>, в историю не добавляются строки, которые в ней уже есть. Значение <code class="literal">ignoreboth</code> объединяет эти два варианта. В случае отсутствия значения и с вариантом <code class="literal">none</code> (либо другим вариантом, кроме перечисленных) в истории сохраняются все строки, считываемые в интерактивном режиме.<div class="note"><h3 class="title">Примечание</h3><p>Эта функциональность была бессовестно списана с <span class="application">Bash</span>.</div><dt><span class="term"><code class="varname">HISTFILE</code></span><dd><p>Имя файла для хранения истории команд. Значение по умолчанию <code class="filename">~/.psql_history</code>. Например, установив: <pre class="programlisting">\set HISTFILE ~/.psql_history- :DBNAME</pre><p> в <code class="filename">~/.psqlrc</code>, <span class="application">psql</span> будет поддерживать отдельную историю для каждой базы данных.<div class="note"><h3 class="title">Примечание</h3><p>Эта функциональность была бессовестно списана с <span class="application">Bash</span>.</div><dt><span class="term"><code class="varname">HISTSIZE</code></span><dd><p>Количество команд для хранения в истории. Значение по умолчанию 500.<div class="note"><h3 class="title">Примечание</h3><p>Эта функциональность была бессовестно списана с <span class="application">Bash</span>.</div><dt><span class="term"><code class="varname">HOST</code></span><dd><p>Имя компьютера, где работает сервер базы данных, к которому вы сейчас подключены. Устанавливается всякий раз при подключении к базе данных (в том числе при старте программы), но эту переменную можно удалить.<dt><span class="term"><code class="varname">IGNOREEOF</code></span><dd><p>Если не установлена, символ конца файла (<acronym class="acronym">EOF</acronym>, обычно <span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>D</strong></span>), переданный в интерактивном сеансе <span class="application">psql</span>, завершит приложение. Если задано числовое значение, то именно такое количество символов <acronym class="acronym">EOF</acronym> будет проигнорировано, прежде чем приложение завершит работу. Если переменная установлена, но имеет не числовое значение, подразумевается 10.<div class="note"><h3 class="title">Примечание</h3><p>Эта функциональность была бессовестно списана с <span class="application">Bash</span>.</div><dt><span class="term"><code class="varname">LASTOID</code></span><dd><p>Содержит значение последнего OID, полученного командой <code class="command">INSERT</code> или <code class="command">\lo_import</code>. Корректное значение переменной гарантируется до тех пор, пока не будет отображён результат следующей <acronym class="acronym">SQL</acronym>-команды.<dt><span class="term"> <code class="varname">ON_ERROR_ROLLBACK</code> <a class="indexterm" id="idp101600"></a> </span><dd><p>При значении <code class="literal">on</code>, если команда в транзакционном блоке выдаёт ошибку, ошибка игнорируется и транзакция продолжается. При значении <code class="literal">interactive</code> такие ошибки игнорируются только в интерактивных сессиях, но не в скриптах. Если переменная не установлена или при значении <code class="literal">off</code> команда, вызвавшая ошибку в транзакционном блоке, отменяет всю транзакцию. Режим отката транзакции при возникновении ошибки обеспечивается выполнением неявных команд <code class="command">SAVEPOINT</code> перед каждой командой в транзакционном блоке и откатом к точке сохранения в случае ошибки.<dt><span class="term"><code class="varname">ON_ERROR_STOP</code></span><dd><p>По умолчанию, после возникновения ошибки обработка команд продолжается. Если эта переменная установлена в значение <code class="literal">on</code>, обработка команд будет немедленно прекращена. В интерактивном режиме <span class="application">psql</span> вернётся в командную строку; иначе <span class="application">psql</span> прекратит работу с кодом возврата 3, чтобы отличить этот случай от фатальных ошибок, для которых используется код возврата 1. В любом случае выполнение всех запущенных скриптов (высокоуровневый скрипт и любые другие, которые он мог запустить) будет немедленно прекращено. Если высокоуровневая командная строка содержит несколько SQL-команд, выполнение завершится на текущей команде.<dt><span class="term"><code class="varname">PORT</code></span><dd><p>Содержит порт сервера базы данных, к которому вы сейчас подключены. Устанавливается всякий раз при подключении к базе данных (в том числе при старте программы), но эту переменную можно удалить.<dt><span class="term"><code class="varname">PROMPT1</code><br /></span><span class="term"><code class="varname">PROMPT2</code><br /></span><span class="term"><code class="varname">PROMPT3</code></span><dd><p>Указывают, как должны выглядеть приглашения <span class="application">psql</span>. См. <a class="xref" href="app-psql.html#app-psql-prompting" title="Настройка приглашений">Настройка приглашений</a>.<dt><span class="term"><code class="varname">QUIET</code></span><dd><p>Установка значения <code class="literal">on</code> эквивалента параметру командной строки <code class="option">-q</code>. Это, вероятно, не слишком полезно в интерактивном режиме.<dt><span class="term"><code class="varname">SHOW_CONTEXT</code></span><dd><p>Этой переменной можно присвоить значения <code class="literal">never</code> (никогда), <code class="literal">errors</code> (ошибки) или <code class="literal">always</code> (всегда), определяющие, когда в сообщениях с сервера будут выводиться поля <code class="literal">КОНТЕКСТ</code>. По умолчанию выбран вариант <code class="literal">errors</code> (который означает, что контекст будет выводиться в сообщениях об ошибках, но не в предупреждениях и уведомлениях). Этот параметр не действует, когда установлен уровень <code class="varname">VERBOSITY</code> <code class="literal">terse</code>. (Когда вам потребуется подробная версия только что выданной ошибки, может быть полезна команда <code class="command">\errverbose</code>.)<dt><span class="term"><code class="varname">SINGLELINE</code></span><dd><p>Установка значения <code class="literal">on</code> эквивалентна параметру командной строки <code class="option">-S</code>.<dt><span class="term"><code class="varname">SINGLESTEP</code></span><dd><p>Эта переменная эквивалентна параметру командной строки <code class="option">-s</code>.<dt><span class="term"><code class="varname">USER</code></span><dd><p>Содержит имя пользователя базы данных, который сейчас подключён. Устанавливается всякий раз при подключении к базе данных (в том числе при старте программы), но эту переменную можно удалить.<dt><span class="term"><code class="varname">VERBOSITY</code></span><dd><p>Этой переменной можно присвоить значения <code class="literal">default</code>, <code class="literal">verbose</code> или <code class="literal">terse</code> для изменения уровня детализации в сообщениях об ошибках. (См. также команду <code class="command">\errverbose</code>, полезную, когда требуется подробная версия только что выданной ошибки.)</dl></div></div><div class="refsect3" id="app-psql-interpolation"><h4>Интерполяция <acronym class="acronym">SQL</acronym></h4><p>Ключевой особенностью переменных <span class="application">psql</span> является возможность подставлять (<span class="quote">«<span class="quote">интерполировать</span>»</span>) их в команды <acronym class="acronym">SQL</acronym>, так же как и в аргументы метакоманд. Кроме того, <span class="application">psql</span> предоставляет средства для корректного использования кавычек для значений переменных, которые используются как литералы или идентификаторы SQL. Чтобы подставить значение без кавычек, нужно добавить перед именем переменной двоеточие (<code class="literal">:</code>). Например: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\set foo 'my_table'</code></strong>
testdb=&gt; <strong class="userinput"><code>SELECT * FROM :foo;</code></strong></pre><p> будет запрашивать таблицу <code class="literal">my_table</code>. Обратите внимание, что это может быть небезопасным: значение переменной копируется буквально, поэтому оно может содержать непарные кавычки или даже метакоманды. При применении необходимо убедиться, что это имеет смысл.<p>Когда значение будет использоваться в качестве SQL литерала или идентификатора, безопаснее заключить его в кавычки. Если значение переменной используется как SQL литерал, то после двоеточия нужно написать имя переменной в одинарных кавычках. Если значение переменной используется как SQL идентификатор, то после двоеточия нужно написать имя переменной в двойных кавычках. Эти конструкции корректно работают с кавычками и другими специальными символами, которые могут содержаться в значении переменной. Предыдущий пример более безопасно выглядит так: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\set foo 'my_table'</code></strong>
testdb=&gt; <strong class="userinput"><code>SELECT * FROM :"foo";</code></strong></pre><p>Подстановка переменных не будет выполняться, если <acronym class="acronym">SQL</acronym> литералы или идентификаторы заключены в кавычки. Поэтому конструкция <code class="literal">':foo'</code> не превратится во взятое в кавычки значение переменной (и это было бы небезопасно, если бы работало, так как обработка кавычек внутри значения переменной была бы некорректной).<p>Один из примеров использования данного механизма — это копирование содержимого файла в столбец таблицы. Сначала загрузим содержимое файла в переменную, затем подставим значение переменной как строку в кавычках: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\set content `cat my_file.txt`</code></strong>
testdb=&gt; <strong class="userinput"><code>INSERT INTO my_table VALUES (:'content');</code></strong></pre><p> (Отметим, что это пока не будет работать, если <code class="filename">my_file.txt</code> содержит байт NUL. <span class="application">psql</span> не поддерживает NUL в значениях переменных.)<p>Так как двоеточие может легально присутствовать в SQL-командах, попытка подстановки (например для <code class="literal">:name</code>, <code class="literal">:'name'</code> или <code class="literal">:"name"</code>) не выполняется, если переменная не установлена. В любом случае можно экранировать двоеточие с помощью обратной косой черты, чтобы предотвратить подстановку.<p>Использование двоеточия для переменных является стандартом <acronym class="acronym">SQL</acronym> для встраиваемых языков запросов, таких как <span class="application">ECPG</span>. Использование двоеточия для срезов массивов и приведения типов является расширениями <span class="productname">PostgreSQL</span>, что иногда может конфликтовать со стандартным использованием. Использование двоеточия и кавычек для экранирования значения переменной при подстановке в качестве SQL литерала или идентификатора — это расширение <span class="application">psql</span>.</div><div class="refsect3" id="app-psql-prompting"><h4>Настройка приглашений</h4><p>Приглашения, выдаваемые <span class="application">psql</span>, можно настроить по своему вкусу. Три переменные <code class="varname">PROMPT1</code>, <code class="varname">PROMPT2</code> и <code class="varname">PROMPT3</code> содержат строки и спецпоследовательности, задающие внешний вид приглашения. Приглашение 1 (<code class="varname">PROMPT1</code>) — это обычное приглашение, которое выдаётся, когда <span class="application">psql</span> ожидает ввода новой команды. Приглашение 2 (<code class="varname">PROMPT2</code>) выдаётся, когда при вводе команды ожидается дополнительные строки, например потому что команда не была завершена точкой с запятой или не закрыты кавычки. Приглашение 3 (<code class="varname">PROMPT3</code>) выдаётся при выполнении <acronym class="acronym">SQL</acronym>-команды <code class="command">COPY FROM STDIN</code>, когда в терминале нужно ввести значение новой строки.<p>Значения этих переменных выводятся буквально, за исключением случаев, когда в них встречается знак процента (<code class="literal">%</code>). В зависимости от следующего символа будет подставляться определённый текст. Существуют следующие подстановки: <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">%M</code></span><dd><p>Полное имя компьютера (с именем домена) сервера базы данных или <code class="literal">[local]</code>, если подключение выполнено через Unix-сокет, либо <code class="literal">[local:<em class="replaceable"><code>/каталог/имя</code></em>]</code>, если при компиляции был изменён путь Unix-сокета по умолчанию.<dt><span class="term"><code class="literal">%m</code></span><dd><p>Имя компьютера, где работает сервер баз данных, усечённое до первой точки или <code class="literal">[local]</code>, если подключение выполнено через Unix-сокет.<dt><span class="term"><code class="literal">%&gt;</code></span><dd><p>Номер порта, который прослушивает сервер базы данных.<dt><span class="term"><code class="literal">%n</code></span><dd><p>Имя пользователя базы данных для текущей сессии. (Это значение может меняться в течение сессии в результате выполнения команды <code class="command">SET SESSION AUTHORIZATION</code>.)<dt><span class="term"><code class="literal">%/</code></span><dd><p>Имя текущей базы данных.<dt><span class="term"><code class="literal">%~</code></span><dd><p>Похоже на <code class="literal">%/</code>, но выводит тильду <code class="literal">~</code>, если текущая база данных совпадает с базой данных по умолчанию.<dt><span class="term"><code class="literal">%#</code></span><dd><p>Если пользователь текущей сессии является суперпользователем базы данных, то выводит <code class="literal">#</code>, иначе <code class="literal">&gt;</code>. (Это значение может меняться в течение сессии в результате выполнения команды <code class="command">SET SESSION AUTHORIZATION</code>.)<dt><span class="term"><code class="literal">%p</code></span><dd><p>PID обслуживающего процесса для текущего подключения.<dt><span class="term"><code class="literal">%R</code></span><dd><p>В приглашении 1 это обычно символ <code class="literal">=</code>, но <code class="literal">^</code> в однострочном режиме, либо <code class="literal">!</code>, если сеанс не подключён к базе данных (что возможно при ошибке <code class="command">\connect</code>). В приглашении 2 <code class="literal">%R</code> заменяется символом, показывающим, почему <span class="application">psql</span> ожидает дополнительный ввод: <code class="literal">-</code>, если команда просто ещё не была завершена, но <code class="literal">*</code>, если не завершён комментарий <code class="literal">/* ... */</code>; апостроф, если не завершена строка в апострофах; кавычки, если не завершён идентификатор в кавычках; знак доллара, если не завершена строка в долларах; либо <code class="literal">(</code>, если после открывающей скобки не хватает закрывающей. В приглашении 3 <code class="literal">%R</code> не выдаёт ничего.<dt><span class="term"><code class="literal">%x</code></span><dd><p>Состояние транзакции: пустая строка, если не в транзакционном блоке; <code class="literal">*</code>, когда в транзакционном блоке; <code class="literal">!</code>, когда в транзакционном блоке, в котором произошла ошибка и <code class="literal">?</code>, когда состояние транзакции не определено (например, нет подключения к базе данных).<dt><span class="term"><code class="literal">%l</code></span><dd><p>Номер строки в текущем операторе, начиная с <code class="literal">1</code>.<dt><span class="term"><code class="literal">%</code><em class="replaceable"><code>цифры</code></em></span><dd><p>Подставляется символ с указанным восьмеричным кодом.<dt><span class="term"><code class="literal">%:</code><em class="replaceable"><code>имя</code></em><code class="literal">:</code></span><dd><p>Значение переменной <span class="application">psql</span> <em class="replaceable"><code>имя</code></em>. За подробностями обратитесь к разделу <a class="xref" href="app-psql.html#app-psql-variables" title="Переменные">Переменные</a>.<dt><span class="term"><code class="literal">%`</code><em class="replaceable"><code>команда</code></em><code class="literal">`</code></span><dd><p>Подставляется вывод <em class="replaceable"><code>команды</code></em>, как и в обычной подстановке с обратными апострофами.<dt><span class="term"><code class="literal">%[</code> ... <code class="literal">%]</code></span><dd><p>Приглашения могут содержать управляющие символы терминала, которые, например, изменяют цвет, фон и стиль текста приглашения или изменяют заголовок окна терминала. Для того, чтобы возможности редактирования <span class="application">Readline</span> работали правильно, непечатаемые символы нужно расположить между <code class="literal">%[</code> и <code class="literal">%]</code>, чтобы сделать невидимыми. Можно делать несколько таких включений в приглашение. Например: <pre class="programlisting">testdb=&gt; \set PROMPT1 '%[%033[1;33;40m%]%n@%/%R%[%033[0m%]%# '</pre><p> выдаст жирное (<code class="literal">1;</code>), желтое на черном (<code class="literal">33;40</code>) приглашение для VT100 совместимых цветных терминалов.</dl></div><p> Чтобы вставить знак процента, нужно написать <code class="literal">%%</code>. По умолчанию используются значения <code class="literal">'%/%R%# '</code> для <code class="varname">PROMPT1</code> и <code class="varname">PROMPT2</code> и <code class="literal">'&gt;&gt; '</code> для <code class="varname">PROMPT3</code>.<div class="note"><h3 class="title">Примечание</h3><p>Эта функциональность была бессовестно списана с <span class="application">tcsh</span>.</div></div><div class="refsect3" id="idp101856"><h4>Редактирование командной строки</h4><p><span class="application">psql</span> поддерживает библиотеку <span class="application">Readline</span> для удобного редактирования командной строки. История команд автоматически сохраняется при выходе из <span class="application">psql</span> и загружается при запуске. Завершение клавишей <code class="literal">TAB</code> также поддерживается, хотя логика завершения не претендует на роль анализатора <acronym class="acronym">SQL</acronym>. Запросы, генерируемые завершением по <code class="literal">TAB</code>, также могут конфликтовать с другими командами SQL, например <code class="literal">SET TRANSACTION ISOLATION LEVEL</code>. Если по какой-либо причине вам не нравится завершение по клавише <code class="literal">TAB</code>, его можно отключить в файле <code class="filename">.inputrc</code> в вашем домашнем каталоге: <pre class="programlisting">$if psql
set disable-completion on
$endif</pre><p> (Это возможность не <span class="application">psql</span>, а <span class="application">Readline</span>. Читайте документацию к <span class="application">Readline</span> для дополнительной информации.)</div></div></div><div class="refsect1" id="app-psql-environment"><h2>Переменные окружения</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">COLUMNS</code></span><dd><p>Если <code class="literal">\pset columns</code> равно нулю, управляет шириной формата вывода <code class="literal">wrapped</code>, а также определяет, нужно ли использовать постраничник и нужно ли переключаться в вертикальный формат в режиме <code class="literal">expanded auto</code>.<dt><span class="term"><code class="envar">PAGER</code></span><dd><p>Если результат запроса не помещается на экране, он пропускается через эту программу. Обычно это <code class="literal">more</code> или <code class="literal">less</code>. Значение по умолчанию зависит от платформы. От использования постраничника можно отказаться, очистив переменную <code class="envar">PAGER</code> или установив соответствующие параметры с помощью команды <code class="command">\pset</code>.<dt><span class="term"><code class="envar">PGDATABASE</code><br /></span><span class="term"><code class="envar">PGHOST</code><br /></span><span class="term"><code class="envar">PGPORT</code><br /></span><span class="term"><code class="envar">PGUSER</code></span><dd><p>Параметры подключения по умолчанию (см. <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-envars" title="32.14. Переменные окружения">Раздел 32.14</a>).<dt><span class="term"><code class="envar">PSQL_EDITOR</code><br /></span><span class="term"><code class="envar">EDITOR</code><br /></span><span class="term"><code class="envar">VISUAL</code></span><dd><p>Редактор, используемый командами <code class="command">\e</code>, <code class="command">\ef</code> и <code class="command">\ev</code>. Эти переменные рассматриваются в этом же порядке; в силу вступает значение, установленное первым.<p>По умолчанию в Unix-подобных системах используется <code class="filename">vi</code>, а в Windows — <code class="filename">notepad.exe</code>.<dt><span class="term"><code class="envar">PSQL_EDITOR_LINENUMBER_ARG</code></span><dd><p>Если в командах <code class="command">\e</code>, <code class="command">\ef</code> или <code class="command">\ev</code> указан номер строки, эта переменная задаёт аргумент командной строки, с которым номер строки может быть передан в редактор. Например, для редакторов <span class="productname">Emacs</span> и <span class="productname">vi</span> это знак плюс. Добавьте в конец значения пробел, если он требуется для отделения имени аргумента от номера строки. Примеры: <pre class="programlisting">PSQL_EDITOR_LINENUMBER_ARG='+'
PSQL_EDITOR_LINENUMBER_ARG='--line '</pre><p>Значение по умолчанию <code class="literal">+</code> в Unix-подобных системах (соответствует редактору по умолчанию <code class="filename">vi</code> и многим другим распространённым редакторам). На платформе Windows нет значения по умолчанию.<dt><span class="term"><code class="envar">PSQL_HISTORY</code></span><dd><p>Альтернативное расположение файла с историей команд. Допускается использование тильды (<code class="literal">~</code>).<dt><span class="term"><code class="envar">PSQLRC</code></span><dd><p>Альтернативное расположение пользовательского файла <code class="filename">.psqlrc</code>. Допускается использование тильды (<code class="literal">~</code>).<dt><span class="term"><code class="envar">SHELL</code></span><dd><p>Команда операционной системы, выполняемая метакомандой <code class="command">\!</code>.<dt><span class="term"><code class="envar">TMPDIR</code></span><dd><p>Каталог для хранения временных файлов. По умолчанию <code class="filename">/tmp</code>.</dl></div><p>Эта утилита, как и большинство других утилит <span class="productname">PostgreSQL</span>, также использует переменные среды, поддерживаемые <span class="application">libpq</span> (см. <a class="xref" href="https://postgrespro.ru/docs/postgresql/9.6/libpq-envars" title="32.14. Переменные окружения">Раздел 32.14</a>).</div><div class="refsect1" id="idp101962"><h2>Файлы</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">psqlrc</code> и <code class="filename">~/.psqlrc</code></span><dd><p>При запуске без параметра <code class="option">-X</code> программа <span class="application">psql</span> пытается считать и выполнить команды из общесистемного стартового файла (<code class="filename">psqlrc</code>), а затем из персонального стартового файла пользователя (<code class="filename">~/.psqlrc</code>), после подключения к базе данных, но перед получением обычных команд. Этими файлами можно воспользоваться для настройки клиента и/или сервера, как правило, с помощью команд <code class="command">\set</code> и <code class="command">SET</code>.<p>Общесистемный стартовый файл называется <code class="filename">psqlrc</code>, он будет искаться в каталоге установки <span class="quote">«<span class="quote">конфигурация системы</span>»</span>. Для того чтобы узнать этот каталог, надёжнее всего выполнить команду <code class="literal">pg_config --sysconfdir</code>. По умолчанию он расположен в <code class="filename">../etc/</code> относительно каталога, содержащего исполняемые файлы <span class="productname">PostgreSQL</span>. Имя этого каталога можно задать явно через переменную окружения <code class="envar">PGSYSCONFDIR</code>.<p>Персональный стартовый файл пользователя называется <code class="filename">.psqlrc</code>, он будет искаться в домашнем каталоге вызывающего пользователя. В Windows, где отсутствует такое понятие, персональный стартовый файл называется <code class="filename">%APPDATA%\postgresql\psqlrc.conf</code>. Расположение персонального стартового файла пользователя можно задать явно через переменную окружения <code class="envar">PSQLRC</code>.<p>Оба стартовых файла, общесистемный и персональный, можно привязать к конкретной версии <span class="application">psql</span>. Для этого в конце имени файла нужно добавить номер основного или корректирующего релиза <span class="productname">PostgreSQL</span>, например <code class="filename">~/.psqlrc-9.2</code> или <code class="filename">~/.psqlrc-9.2.5</code>. При наличии нескольких файлов, файл с более детальным номером версии будет иметь предпочтение.<dt><span class="term"><code class="filename">.psql_history</code></span><dd><p>История командной строки хранится в файле <code class="filename">~/.psql_history</code> или <code class="filename">%APPDATA%\postgresql\psql_history</code> на Windows.<p>Расположение файла истории можно задать явно через переменную окружения <code class="envar">PSQL_HISTORY</code>.</dl></div></div><div class="refsect1" id="idp102002"><h2>Замечания</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">psql</span> лучше всего работает с серверами той же или более старой основной версии. Сбой метакоманды наиболее вероятен, если версия сервера новее, чем версия <span class="application">psql</span>. Однако команды семейства <code class="literal">\d</code> должны работать с версиями сервера до 7.4, хотя и необязательно с серверами новее, чем сам <span class="application">psql</span>. Общая функциональность запуска SQL-команд и отображения результатов запросов также должна работать на серверах с более новой основной версией, но это не гарантируется во всех случаях.<p>Если вы хотите, применяя <span class="application">psql</span>, подключаться к нескольким серверам с различными основными версиями, рекомендуется использовать последнюю версию <span class="application">psql</span>. Также можно собрать копии <span class="application">psql</span> от каждой основной версии и использовать ту, которая соответствует версии сервера. Но на практике в этих дополнительных сложностях нет необходимости.<li class="listitem"><p>В <span class="productname">PostgreSQL</span> до версии 9.6 параметр <code class="option">-c</code> подразумевал <code class="option">-X</code> (<code class="option">--no-psqlrc</code>); теперь это не так.<li class="listitem"><p>В <span class="productname">PostgreSQL</span> до 8.4 программа <span class="application">psql</span> могла принять первый аргумент однобуквенной команды с обратной косой чертой сразу после команды, без промежуточного пробела. Теперь разделительный пробельный символ обязателен.</ul></div></div><div class="refsect1" id="idp102025"><h2>Замечания для пользователей Windows</h2><p><span class="application">psql</span> создан как <span class="quote">«<span class="quote">консольное приложение</span>»</span>. Поскольку в Windows консольные окна используют кодировку символов отличную от той, что используется для остальной системы, нужно проявить особую осторожность при использовании 8-битных символов. Если <span class="application">psql</span> обнаружит проблемную кодовую страницу консоли, он предупредит вас при запуске. Чтобы изменить кодовую страницу консоли, необходимы две вещи: <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Задать кодовую страницу, выполнив <strong class="userinput"><code>cmd.exe /c chcp 1251</code></strong>. (1251 это кодовая страница для России, замените на ваше значение.) При использовании Cygwin, эту команду можно записать в <code class="filename">/etc/profile</code>.<li class="listitem"><p>Установите консольный шрифт в <code class="literal">Lucida Console</code>, потому что растровый шрифт не работает с кодовой страницей ANSI.</ul></div></div><div class="refsect1" id="app-psql-examples"><h2>Примеры</h2><p>Первый пример показывает, что для ввода одной команды может потребоваться несколько строк. Обратите внимание, как меняется приглашение: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>CREATE TABLE my_table (</code></strong>
testdb(&gt; <strong class="userinput"><code> first integer not null default 0,</code></strong>
testdb(&gt; <strong class="userinput"><code> second text)</code></strong>
testdb-&gt; <strong class="userinput"><code>;</code></strong>
CREATE TABLE</pre><p> Теперь посмотрим на определение таблицы: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\d my_table</code></strong>
             Таблица "my_table"
 Атрибут |  Тип    |    Модификаторы
---------+---------+--------------------
 first   | integer | NOT NULL DEFAULT 0
 second  | text    |</pre><p> Теперь изменим приглашение на что-то более интересное: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>\set PROMPT1 '%n@%m %~%R%# '</code></strong>
peter@localhost testdb=&gt;</pre><p> Предположим, что вы внесли данные в таблицу и хотите на них посмотреть: <pre class="programlisting">peter@localhost testdb=&gt; SELECT * FROM my_table;
 first | second
-------+--------
     1 | Один
     2 | Два
     3 | Три  
     4 | Четыре
(4 строки)</pre><p> Таблицу можно вывести разными способами при помощи команды <code class="command">\pset</code>: <pre class="programlisting">peter@localhost testdb=&gt; <strong class="userinput"><code>\pset border 2</code></strong>
Установлен стиль границ: 2.
peter@localhost testdb=&gt; <strong class="userinput"><code>SELECT * FROM my_table;</code></strong>
+-------+--------+
| first | second |
+-------+--------+
|     1 | Один   |
|     2 | Два    |
|     3 | Три    |
|     4 | Четыре |
+-------+--------+
(4 строки)

peter@localhost testdb=&gt; <strong class="userinput"><code>\pset border 0</code></strong>
Установлен стиль границ: 0.
peter@localhost testdb=&gt; <strong class="userinput"><code>SELECT * FROM my_table;</code></strong>
first second
----- ------
    1 Один
    2 Два
    3 Три  
    4 Четыре
(4 строки)

peter@localhost testdb=&gt; <strong class="userinput"><code>\pset border 1</code></strong>
Установлен стиль границ: 1.
peter@localhost testdb=&gt; <strong class="userinput"><code>\pset format unaligned</code></strong>
Формат вывода: unaligned.
peter@localhost testdb=&gt; <strong class="userinput"><code>\pset fieldsep ','</code></strong>
Разделитель полей: ",".
peter@localhost testdb=&gt; <strong class="userinput"><code>\pset tuples_only</code></strong>
Выводятся только кортежи.
peter@localhost testdb=&gt; <strong class="userinput"><code>SELECT second, first FROM my_table;</code></strong>
Один,1
Два,2
Три,3
Четыре,4</pre><p> Также можно использовать короткие команды: <pre class="programlisting">peter@localhost testdb=&gt; <strong class="userinput"><code>\a \t \x</code></strong>
Формат вывода: aligned.
Режим вывода только кортежей выключен.
Расширенный вывод включён.
peter@localhost testdb=&gt; <strong class="userinput"><code>SELECT * FROM my_table;</code></strong>
-[ RECORD 1 ]-
first  | 1
second | Один
-[ RECORD 2 ]-
first  | 2
second | Два
-[ RECORD 3 ]-
first  | 3
second | Три  
-[ RECORD 4 ]-
first  | 4
second | Четыре</pre><p>Когда это уместно, результаты запроса можно просмотреть в виде перекрёстной таблицы с помощью команды <code class="command">\crosstabview</code>: <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>SELECT first, second, first &gt; 2 AS gt2 FROM my_table;</code></strong>
 first | second | gt2 
-------+--------+-----
     1 | one    | f
     2 | two    | f
     3 | three  | t
     4 | four   | t
(4 rows)

testdb=&gt; <strong class="userinput"><code>\crosstabview first second</code></strong>
 first | one | two | three | four 
-------+-----+-----+-------+------
     1 | f   |     |       | 
     2 |     | f   |       | 
     3 |     |     | t     | 
     4 |     |     |       | t
(4 rows)</pre><p> Второй пример показывает таблицу умножения, строки в которой отсортированы в обратном числовом порядке, а столбцы — независимо, по возрастанию числовых значений. <pre class="programlisting">testdb=&gt; <strong class="userinput"><code>SELECT t1.first as "A", t2.first+100 AS "B", t1.first*(t2.first+100) as "AxB",</code></strong>
testdb(&gt; <strong class="userinput"><code>row_number() over(order by t2.first) AS ord</code></strong>
testdb(&gt; <strong class="userinput"><code>FROM my_table t1 CROSS JOIN my_table t2 ORDER BY 1 DESC</code></strong>
testdb(&gt; <strong class="userinput"><code>\crosstabview "A" "B" "AxB" ord</code></strong>
 A | 101 | 102 | 103 | 104 
---+-----+-----+-----+-----
 4 | 404 | 408 | 412 | 416
 3 | 303 | 306 | 309 | 312
 2 | 202 | 204 | 206 | 208
 1 | 101 | 102 | 103 | 104
(4 rows)</pre></div></div><div class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="https://postgrespro.ru/docs/postgresql/9.6/app-pgrestore">Пред.</a> </td><td align="center" width="20%"><a accesskey="u" href="https://postgrespro.ru/docs/postgresql/9.6/reference-client">Наверх</a></td><td align="right" width="40%"> <a accesskey="n" href="https://postgrespro.ru/docs/postgresql/9.6/app-reindexdb">След.</a></td></tr><tr><td align="left" valign="top" width="40%">pg_restore </td><td align="center" width="20%"><a accesskey="h" href="https://postgrespro.ru/docs/postgresql/9.6/index">Начало</a></td><td align="right" valign="top" width="40%"> <span class="application">reindexdb</span></td></tr></table></div></div>
		
    </div>
    <div class="col-md-12 d-none" id="divDocEn"></div>
</div>
</div>
</section>


	</div>
    </main>

	
<div class="modal fade" id="feedback" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Есть&nbsp;вопросы? Напишите&nbsp;нам!</h5>
      </div>
      <div class="modal-body">
			<input type="text" id="feedback-email" name="email" placeholder='E-mail'
				required        msg-empty="Введите e-mail"
				min-length="3"  msg-short="Слишком короткий e-mail"
				max-length="60" msg-long="Слишком длинный e-mail"
				regexp="\w+([\-+.']\w+)*@\w+([\-.]\w+)*\.\w+([\-.]\w+)*" 
				                msg-regexp="Некорректный адрес e-mail"
			><div class="input-error"></div>
			
			<input type="text" id="feedback-name" name="name" placeholder="Имя" 
				required        msg-empty="Введите имя"
				min-length="3"  msg-short="Слишком короткое имя"
				max-length="60" msg-long ="Слишком длинное имя"
			><div class="input-error"></div>
			 
			<textarea id="feedback-message" name="message"  placeholder="Ваше сообщение" 
                required          msg-empty="Введите сообщение"
				max-length="6000" msg-long="Слишком длинное сообщение"
				min-length="10"   msg-short="Слишком короткое сообщение"
			></textarea>
			<div id="feedback-message-length" class="input-error"></div> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" style="width: 100%;" onClick="sendFeedback('feedback', 'message', '', '', 'production')">Отправить</button>
      </div>
        <p class="text-center" style="font-size: 14px;font-weight: 300;"><span class="dotted" onClick="loadAgreement();">Соглашаюсь с условиями обработки персональных данных</span></p>
    </div>
  </div>
</div>

<div class="modal fade" id="popup-message" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"></h5>
      </div>
      <div class="modal-body lead  text-center" ></div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="popup-flash" tabindex="-1" role="dialog" aria-hidden="true"  style="cursor:wait;">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"></h5>
      </div>
      <div class="modal-body text-center"></div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="popup-window" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
		<div class="pop-up-close" onClick="closePopupWindow();">&#10006;</div>
      <div class="modal-header">
        <h5 class="modal-title"></h5>
      </div>
      <div class="modal-body "></div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

	
	<form action="https://postgrespro.ru/search/" method="get" role="form" name="search-window" id="search-window" onSubmit="document.body.style.cursor='progress';return true;">
		<input id="qid" name="q">
		
			
				<input type="hidden" id="area-version" name="area" value="version" checked >
				<input type="hidden" id="area-product" name="product" value="postgresql" >
				<input type="hidden" id="area-version" name="version" value="9.6" >
			
		
	</form>


<!-- FOOTER -->
    <footer class="container-fluid">
 		<div class="container">
 		<div class="row">
			<div  class="about col-lg-3 row" style="margin-bottom:2em;">
				<div class="col-sm-6 col-lg-12"> 
					<a href="https://postgrespro.ru/" ><img src="https://postgrespro.ru/img/PostgresPro_logo_white.svg" class="logo" alt="Postgres Pro"></a> 
	
					<div class="sociallinks" style="margin-bottom:0.6em;margin-top:2em;"> 
						<div class="sociallinks-item"> 
							<a href="https://www.facebook.com/PostgresProfessional" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Facebook</desc><path style="fill:#ffffff;" d="M47.761,24c0,13.121-10.638,23.76-23.758,23.76C10.877,47.76,0.239,37.121,0.239,24c0-13.124,10.638-23.76,23.764-23.76C37.123,0.24,47.761,10.876,47.761,24 M20.033,38.85H26.2V24.01h4.163l0.539-5.242H26.2v-3.083c0-1.156,0.769-1.427,1.308-1.427h3.318V9.168L26.258,9.15c-5.072,0-6.225,3.796-6.225,6.224v3.394H17.1v5.242h2.933V38.85z"></path></svg> </a> </div> 
						<div class="sociallinks-item"> 
							<a href="https://twitter.com/PostgresPro" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Twitter</desc><path style="fill:#ffffff;" d="M47.762,24c0,13.121-10.639,23.76-23.761,23.76S0.24,37.121,0.24,24c0-13.124,10.639-23.76,23.761-23.76 S47.762,10.876,47.762,24 M38.031,12.375c-1.177,0.7-2.481,1.208-3.87,1.481c-1.11-1.186-2.694-1.926-4.455-1.926 c-3.364,0-6.093,2.729-6.093,6.095c0,0.478,0.054,0.941,0.156,1.388c-5.063-0.255-9.554-2.68-12.559-6.367 c-0.524,0.898-0.825,1.947-0.825,3.064c0,2.113,1.076,3.978,2.711,5.07c-0.998-0.031-1.939-0.306-2.761-0.762v0.077 c0,2.951,2.1,5.414,4.889,5.975c-0.512,0.14-1.05,0.215-1.606,0.215c-0.393,0-0.775-0.039-1.146-0.109 c0.777,2.42,3.026,4.182,5.692,4.232c-2.086,1.634-4.712,2.607-7.567,2.607c-0.492,0-0.977-0.027-1.453-0.084 c2.696,1.729,5.899,2.736,9.34,2.736c11.209,0,17.337-9.283,17.337-17.337c0-0.263-0.004-0.527-0.017-0.789 c1.19-0.858,2.224-1.932,3.039-3.152c-1.091,0.485-2.266,0.811-3.498,0.958C36.609,14.994,37.576,13.8,38.031,12.375"></path></svg> </a> </div> 
						<div class="sociallinks-item"> 
							<a href="https://vk.com/public101507899" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>VK</desc><path style="fill:#ffffff;" d="M47.761,24c0,13.121-10.639,23.76-23.76,23.76C10.878,47.76,0.239,37.121,0.239,24c0-13.123,10.639-23.76,23.762-23.76C37.122,0.24,47.761,10.877,47.761,24 M35.259,28.999c-2.621-2.433-2.271-2.041,0.89-6.25c1.923-2.562,2.696-4.126,2.45-4.796c-0.227-0.639-1.64-0.469-1.64-0.469l-4.71,0.029c0,0-0.351-0.048-0.609,0.106c-0.249,0.151-0.414,0.505-0.414,0.505s-0.742,1.982-1.734,3.669c-2.094,3.559-2.935,3.747-3.277,3.524c-0.796-0.516-0.597-2.068-0.597-3.171c0-3.449,0.522-4.887-1.02-5.259c-0.511-0.124-0.887-0.205-2.195-0.219c-1.678-0.016-3.101,0.007-3.904,0.398c-0.536,0.263-0.949,0.847-0.697,0.88c0.31,0.041,1.016,0.192,1.388,0.699c0.484,0.656,0.464,2.131,0.464,2.131s0.282,4.056-0.646,4.561c-0.632,0.347-1.503-0.36-3.37-3.588c-0.958-1.652-1.68-3.481-1.68-3.481s-0.14-0.344-0.392-0.527c-0.299-0.222-0.722-0.298-0.722-0.298l-4.469,0.018c0,0-0.674-0.003-0.919,0.289c-0.219,0.259-0.018,0.752-0.018,0.752s3.499,8.104,7.573,12.23c3.638,3.784,7.764,3.36,7.764,3.36h1.867c0,0,0.566,0.113,0.854-0.189c0.265-0.288,0.256-0.646,0.256-0.646s-0.034-2.512,1.129-2.883c1.15-0.36,2.624,2.429,4.188,3.497c1.182,0.812,2.079,0.633,2.079,0.633l4.181-0.056c0,0,2.186-0.136,1.149-1.858C38.281,32.451,37.763,31.321,35.259,28.999"></path></svg> </a> </div> 
						<div class="sociallinks-item"> 
							<a href="https://www.youtube.com/channel/UCawnwMqZ6JeoSiEhrS6X69A/videos" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Youtube</desc><path style="fill:#ffffff;" d="M24 0.0130005C37.248 0.0130005 47.987 10.753 47.987 24C47.987 37.247 37.247 47.987 24 47.987C10.753 47.987 0.0130005 37.247 0.0130005 24C0.0130005 10.753 10.752 0.0130005 24 0.0130005ZM35.815 18.093C35.565 16.756 34.452 15.758 33.173 15.635C30.119 15.439 27.054 15.28 23.995 15.278C20.936 15.276 17.882 15.432 14.828 15.625C13.544 15.749 12.431 16.742 12.182 18.084C11.898 20.017 11.756 21.969 11.756 23.92C11.756 25.871 11.898 27.823 12.182 29.756C12.431 31.098 13.544 32.21 14.828 32.333C17.883 32.526 20.935 32.723 23.995 32.723C27.053 32.723 30.121 32.551 33.173 32.353C34.452 32.229 35.565 31.084 35.815 29.747C36.101 27.817 36.244 25.868 36.244 23.919C36.244 21.971 36.101 20.023 35.815 18.093ZM21.224 27.435V20.32L27.851 23.878L21.224 27.435Z"></path></svg> </a> </div> 
					</div>
					<span class="copyright">©  Postgres Pro</span>
				</div>
				
				<div  class="col-sm-6 col-lg-12" style="margin-top:2em;">
					<a href="https://postgrespro.ru/privacy">Политика кофиденциальности</a><br>
					<a href="https://postgrespro.ru/useragreement">Пользовательское соглашение</a><br>
					<a href="https://postgrespro.ru/products/postgrespro/eula">Лицензионное соглашение</a><br>
					<a href="https://postgrespro.ru/media/RUS_EULA_for_cloud_Postgres_Pro_Standard_Postgres_Pro_Enterprise.pdf" target="_blank">Лицензионное соглашение (при использовании в составе облачных сервисов)</a><br>
					<a href="https://postgrespro.ru/CoC">Кодекс поведения сообщества PostgreSQL</a>
				</div>
			</div>

			<nav class="col-lg-9 bottom-menu"> 
				
<nav>
<ul class="row">
<li class="col-sm-4">
	<h6>
	
		Продукты
	
	</h6>

	
		<ul><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/standard" >Postgres Pro Standard</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/certified" >Postgres Pro Certified</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/enterprise" >Postgres Pro Enterprise</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/enterprisecertified" >Postgres Pro Enterprise Certified</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/1c" >Postgres Pro для 1С</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/windows" >PostgreSQL для Windows</a>
					
				</li></ul>
	
</li><li class="col-sm-4">
	<h6>
	
		Образование
	
	</h6>

	
		<ul><li>
					
						<a href="https://postgrespro.ru/docs" >Документация</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/courses" >Учебные курсы</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/books" >Книги</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/cert" >Сертификация специалистов</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/university" >Курсы для вузов</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education" >Обучение PostgreSQL</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/glossary" >Глоссарий</a>
					
				</li></ul>
	
</li><li class="col-sm-4">
	<h6>
	
		Услуги
	
	</h6>

	
		<ul><li>
					
						<a href="https://postgrespro.ru/services/support" >Техподдержка СУБД</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/services/migration" >Миграция СУБД</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/services/audit" >Аудит СУБД</a>
					
				</li></ul>
	
</li></ul>
</nav>


			</nav>
		</div> 
    	</div>

		<div id="bottom-bar">
			<div id="to-top-button" class="float-left" onClick="$('html, body').animate({scrollTop: 0});return false;">
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="50px" height="50px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"> <path style="fill:#0aa7f5;" d="M43.006,47.529H4.964c-2.635,0-4.791-2.156-4.791-4.791V4.697c0-2.635,2.156-4.791,4.791-4.791h38.042 c2.635,0,4.791,2.156,4.791,4.791v38.042C47.797,45.373,45.641,47.529,43.006,47.529z M25.503,16.881l6.994,7.049 c0.583,0.588,1.532,0.592,2.121,0.008c0.588-0.583,0.592-1.533,0.008-2.122l-9.562-9.637c-0.281-0.283-0.664-0.443-1.063-0.443 c0,0,0,0-0.001,0c-0.399,0-0.782,0.159-1.063,0.442l-9.591,9.637c-0.584,0.587-0.583,1.537,0.005,2.121 c0.292,0.292,0.675,0.437,1.058,0.437c0.385,0,0.77-0.147,1.063-0.442L22.5,16.87v19.163c0,0.828,0.671,1.5,1.5,1.5 s1.5-0.672,1.5-1.5L25.503,16.881z"></path> </svg>
			</div>
	
			<div class="pulsate float-right" id="bell">
				<div class="pulsate-circle"  id="bell-run"  onClick="$('#feedback').modal('toggle'); return false;"></div>
				<svg class="icon" width="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.6 17.5" id="tip"    onClick="$('#feedback').modal('toggle'); return false;"><desc>Write</desc><path d="M3.7 17.5v-4.8H2c-1.1 0-2-.9-2-2V2C0 .9.9 0 2 0h14.6c1.1 0 2 .9 2 2v8.8c0 1.1-.9 2-2 2H9l-5.3 4.7zM2 1c-.6 0-1 .4-1 1v8.8c0 .5.4 1 1 1h2.8v3.5l3.8-3.5h8c.5 0 1-.4 1-1V2c0-.5-.4-1-1-1H2z"></path></svg> 
				<svg class="icon" width="16px" height="16px" viewBox="0 0 23 23" version="1.1"            id="close"  onClick="$('#feedback').modal('toggle'); return false;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <desc>Close</desc> <g stroke="none" stroke-width="1" fill="#000" fill-rule="evenodd"> <rect transform="translate(11.313708, 11.313708) rotate(-45.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect> <rect transform="translate(11.313708, 11.313708) rotate(-315.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect> </g> </svg> 
			</div>

		</div>
    </footer>
	
<script>
checkJQuery();

$(document).ready( function(){
	window.lang = 'ru';
	
	$(".toggler").click(function(){
	    $(this).next().slideToggle(150);
	});

	$("#feedback").on('hide.bs.modal', function (e) {triggerBell(e);});
	$("#feedback").on('show.bs.modal', function (e) {triggerBell(e);});

	

	whoIam();

	$('ul.nav li.dropdown').hover(function() {
	  $(this).find('.dropdown-menu').stop(true, true).delay(100).fadeIn(300);
	}, function() {
	  $(this).find('.dropdown-menu').stop(true, true).delay(100).fadeOut(300);
	});

	var input = $('#search-window input')
	input.focusout(function(e){
		if (!$.trim($(this).val()).length) {
			$('#search-window').fadeOut();
		}
	});
	input.keydown(function(eventObject){
		if( eventObject.which == 27 ){
			if ($.trim($(this).val()).length) {
				$(this).val('');
			} else {
				$('#search-window').fadeOut();
			}
		};
	});
	$(document).scroll(function () {
		if (!$.trim(input.val()).length) {
			$('#search-window').fadeOut();
		}
	});
	
	setTimeout(function(){
		$("#to-top-button").addClass("animation-opacity");
		$("#bell").addClass("animation-opacity");
	} , 2000);
});

function triggerBell(e) {
	var bell = $('#bell');
	var bell2 = $('#bell-run');

	bell.toggleClass('active pulsate');
	bell2.toggleClass('active pulsate-circle');
	bell.find('#close').toggle();
}

var formatDate_month=["января","февраля","марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"];
var formatDate_weekday=["воскресенье","понедельник","вторник","среда","четверг", "пятница","суббота"];

function formatTime(i) {
	if (i<10) {	i="0" + i; }
	return i;
}

function formatDate(s, format) {
	var d = qwx.iso2time(s);
	
	return d.getDate() + " " + formatDate_month[d.getMonth()] + " " + d.getFullYear() + 
		(format == 'date' ? "" : ", " + formatDate_weekday[d.getDay()] + ", " + 
		formatTime(d.getHours()) + ":" + formatTime(d.getMinutes()));
}
	


</script>	

	

	<script type="text/javascript">
		var m500 = 'Произошла ошибка на сервере';
		var incorrectFormMessage = 'Форма заполнена неправильно';
	</script>
	
	

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55152600-2', 'auto');


  ga('send', 'pageview');
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter32485545 = new Ya.Metrika({
                    id:32485545,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/32485545" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
	

	
</html>

















