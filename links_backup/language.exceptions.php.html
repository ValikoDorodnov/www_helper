<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: Исключения - Manual </title>

 <link rel="shortcut icon" href="https://www.php.net/favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="language.exceptions.php.html">
 <link rel="shorturl" href="https://www.php.net/exceptions">
 <link rel="alternate" href="https://www.php.net/exceptions" hreflang="x-default">

 <link rel="contents" href="https://www.php.net/manual/ru/index.php">
 <link rel="index" href="https://www.php.net/manual/ru/langref.php">
 <link rel="prev" href="https://www.php.net/manual/ru/language.errors.php7.php">
 <link rel="next" href="https://www.php.net/manual/ru/language.exceptions.extending.php">

 <link rel="alternate" href="https://www.php.net/manual/en/language.exceptions.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/language.exceptions.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/language.exceptions.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/language.exceptions.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/language.exceptions.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/language.exceptions.php" hreflang="ja">
 <link rel="alternate" href="language.exceptions.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/language.exceptions.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/language.exceptions.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1639034403&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="https://www.php.net/images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.1/index.php">
          <img src="https://www.php.net/images/php8/logo_php8_1.svg" alt="php8.1" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="https://www.php.net/manual/ru/language.exceptions.extending.php">
          Наследование исключений &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="https://www.php.net/manual/ru/language.errors.php7.php">
          &laquo; Ошибки в PHP 7        </a>
      </div>
          <ul>
            <li><a href='https://www.php.net/manual/ru/index.php'>Руководство по PHP</a></li>      <li><a href='https://www.php.net/manual/ru/langref.php'>Справочник языка</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/language.exceptions.php'>English</option>
            <option value='pt_BR/language.exceptions.php'>Brazilian Portuguese</option>
            <option value='zh/language.exceptions.php'>Chinese (Simplified)</option>
            <option value='fr/language.exceptions.php'>French</option>
            <option value='de/language.exceptions.php'>German</option>
            <option value='ja/language.exceptions.php'>Japanese</option>
            <option value='ru/language.exceptions.php' selected="selected">Russian</option>
            <option value='es/language.exceptions.php'>Spanish</option>
            <option value='tr/language.exceptions.php'>Turkish</option>
            <option value="help-translate.php">Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/language/exceptions.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Flanguage.exceptions%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="language.exceptions" class="chapter">
 <h1>Исключения</h1>
<h2>Содержание</h2><ul class="chunklist chunklist_chapter"><li><a href="https://www.php.net/manual/ru/language.exceptions.extending.php">Наследование исключений</a></li></ul>


 

 <div class="simplesect" id="language.exceptions.introduction">
  <p class="para">
   Модель исключений (exceptions) в PHP похожа с используемыми в других языках программирования.
   Исключение можно сгенерировать (выбросить) при помощи оператора
   <a href="language.exceptions.php.html" class="link"><code class="literal">throw</code></a>, и можно перехватить (поймать)
   оператором <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>. Код генерирующий исключение, должен
   быть окружён блоком <a href="language.exceptions.php.html" class="link"><code class="literal">try</code></a>, для того, чтобы можно было
   перехватить исключение. Каждый блок <a href="language.exceptions.php.html" class="link"><code class="literal">try</code></a>
   должен иметь как минимум один соответствующий ему блок <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> или <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a>.
  </p>
  <p class="para">
   В случае, если выброшено исключение, для которого нет блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> в текущей функции,
   это исключение будет &quot;всплывать&quot; по стеку вызова, пока не будет найден
   подходящий блок <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>. При этом, все встреченные блоки <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> будут исполнены.
   Если стек вызовов раскрутится до глобальной области видимости, не встретив подходящего
   блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, программа завершит работу с фатальной ошибкой, если только у вас
   не настроен глобальный обработчик исключений.
  </p>
  <p class="para">
   Генерируемый объект должен принадлежать классу <span class="classname"><a href="https://www.php.net/manual/ru/class.exception.php" class="classname">Exception</a></span>
   или наследоваться от <span class="classname"><a href="https://www.php.net/manual/ru/class.exception.php" class="classname">Exception</a></span>. Попытка сгенерировать
   исключение другого класса приведёт к фатальной ошибке PHP.
  </p>
  <p class="para">
   Начиная с PHP 8.0.0, ключевое слово <a href="language.exceptions.php.html" class="link"><code class="literal">throw</code></a> является выражением и может использоваться
   в контексте других выражений. В более ранних версиях оно являлось оператором и требовало
   размещения в отдельной строке.
  </p>
 </div>

 <div class="simplesect" id="language.exceptions.catch">
  <h3 class="title"><code class="literal">catch</code></h3>
  <p class="para">
   Блок <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> определяет то, как следует реагировать на выброшенное исключение.
   В блоке <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> указывается один или более типов исключений или ошибок(Error), которые он
   будет обрабатывать. Также указывается и переменная, которой будет присвоено
   пойманное исключение (начиная с PHP 8.0.0 задавать эту переменную не обязательно).
   Выброшенное исключение или ошибка будут обработаны первым подходящим блоком <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>.
  </p>
  <p class="para">
   Можно использовать несколько блоков <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, перехватывающих различные классы
   исключений. Нормальное выполнение (когда не генерируются исключения в блоках
   <a href="language.exceptions.php.html" class="link"><code class="literal">try</code></a>) будет продолжено за последним блоком <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>. Исключения могут быть
   сгенерированы (или вызваны ещё раз) оператором <a href="language.exceptions.php.html" class="link"><code class="literal">throw</code></a> внутри блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>.
   Если нет, то исполнение будет продолжено после отработки блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>.
  </p>
  <p class="para">
   При генерации исключения код, следующий после описываемого выражения,
   не будет выполнен, а PHP попытается найти
   первый блок <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, перехватывающий исключение данного
   класса. Если исключение не будет перехвачено, PHP выдаст фатальную
   ошибку: &quot;<code class="literal">Uncaught Exception ...</code>&quot; (Неперехваченное
   исключение), если не был определён обработчик ошибок при помощи
   функции <span class="function"><a href="https://www.php.net/manual/ru/function.set-exception-handler.php" class="function">set_exception_handler()</a></span>.
  </p>
  <p class="para">
   Начиная с PHP 7.1.0, блок <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> может принимать несколько типов исключений с помощью
   символа (<code class="literal">|</code>). Это полезно, когда разные исключения из разных
   иерархий классов обрабатываются одинаково.
  </p>
  <p class="para">
   Начиная с PHP 8.0.0, задание переменной для пойманного исключения опционально.
   Если она не задана, блок <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> будет исполняться, но не будет иметь доступа
   к объекту исключения.
  </p>
 </div>

 <div class="simplesect" id="language.exceptions.finally">
  <h3 class="title"><code class="literal">finally</code></h3>
  <p class="para">
   Блок <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> также можно использовать
   после или вместо блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>. Код в блоке
   <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> всегда будет выполняться после кода в блоках
   <a href="language.exceptions.php.html" class="link"><code class="literal">try</code></a> и <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, независимо от того, было ли
   выброшено исключение, перед тем как продолжится нормальное выполнение кода.
  </p>
  <p class="para">
   Одно важное взаимодействие происходит между блоком <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> и оператором <a href="https://www.php.net/manual/ru/function.return.php" class="link"><code class="literal">return</code></a>.
   Если оператор <a href="https://www.php.net/manual/ru/function.return.php" class="link"><code class="literal">return</code></a> встречается внутри блоков <a href="language.exceptions.php.html" class="link"><code class="literal">try</code></a> или <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, блок <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> всё равно будет выполнен. Кроме того, оператор <a href="https://www.php.net/manual/ru/function.return.php" class="link"><code class="literal">return</code></a> выполняется, когда встречается, но результат будет возвращён после выполнения блока <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a>.
   Если блок <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> также содержит оператор <a href="https://www.php.net/manual/ru/function.return.php" class="link"><code class="literal">return</code></a>, возвращается значение, указанное в блоке <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a>.
  </p>
 </div>

 <div class="simplesect" id="language.exceptions.exception-handler">
  <h3 class="title"><code class="literal">Глобальный обработчик исключений</code></h3>
  <p class="para">
   Если исключение дошло по стеку вызовов до глобальной области видимости, оно может быть
   обработано глобальным обработчиком исключений, если он задан.
   С помощью функции <span class="function"><a href="https://www.php.net/manual/ru/function.set-exception-handler.php" class="function">set_exception_handler()</a></span> можно задать функцию,
   которая будет выполнена вместо блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, если не нашлось подходящего. Эффект
   аналогичен тому, как будто мы всю нашу программу обернули в блок <a href="language.exceptions.php.html" class="link"><code class="literal">try</code></a>-<a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a>, где
   за реализацию блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> отвечает установленная функция.
  </p>
 </div>

 <div class="simplesect" id="language.exceptions.notes">
  <h3 class="title">Примечания</h3>

  <blockquote class="note"><p><strong class="note">Замечание</strong>: 
   <p class="para">
    Внутренние функции PHP в основном используют
    <a href="https://www.php.net/manual/ru/errorfunc.configuration.php#ini.error-reporting" class="link">сообщения об ошибках</a>, и только
    новые <a href="https://www.php.net/manual/ru/language.oop5.php" class="link">объектно-ориентированные</a>
    модули используют исключения. Однако, ошибки можно легко преобразовать
    в исключения с помощью класса <a href="https://www.php.net/manual/ru/class.errorexception.php" class="link">ErrorException</a>.
    Однако это не сработает для фатальных ошибок.
   </p>
   <div class="example" id="example-324">
    <p><strong>Пример #3 Преобразование сообщения об ошибках в исключение</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">exceptions_error_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$severity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$message</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lineno</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">ErrorException</span><span style="color: #007700">(</span><span style="color: #0000BB">$message</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$severity</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lineno</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">set_error_handler</span><span style="color: #007700">(</span><span style="color: #DD0000">'exceptions_error_handler'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p></blockquote>
  <div class="tip"><strong class="tip">Подсказка</strong>
   <p class="para">
    <a href="https://www.php.net/manual/ru/intro.spl.php" class="link">Стандартная библиотека PHP (SPL)</a> предоставляет
    хороший набор <a href="https://www.php.net/manual/ru/spl.exceptions.php" class="link">встроенных классов исключений</a>.
   </p>
  </div>
 </div>

 <div class="simplesect" id="language.exceptions.examples">
  <h3 class="title">Примеры</h3>

  <div class="example" id="example-325">
   <p><strong>Пример #4 Выбрасывание исключений</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">inverse</span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$x</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Деление&nbsp;на&nbsp;ноль.'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">/</span><span style="color: #0000BB">$x</span><span style="color: #007700">;<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">inverse</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">inverse</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Выброшено&nbsp;исключение:&nbsp;'</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Продолжение&nbsp;выполнения<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Привет,&nbsp;мир\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Результат выполнения данного примера:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
0.2
Выброшено исключение: Деление на ноль.
Привет, мир
</pre></div>
   </div>
  </div>
  <div class="example" id="example-326">
   <p><strong>Пример #5 Обработка исключений с помощью блока <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a></strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">inverse</span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$x</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Деление&nbsp;на&nbsp;ноль.'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">/</span><span style="color: #0000BB">$x</span><span style="color: #007700">;<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">inverse</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Поймано&nbsp;исключение:&nbsp;'</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}&nbsp;finally&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Первый&nbsp;блок&nbsp;finally.\n"</span><span style="color: #007700">;<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">inverse</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Поймано&nbsp;исключение:&nbsp;'</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}&nbsp;finally&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Второй&nbsp;блок&nbsp;finally.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Продолжение&nbsp;нормального&nbsp;выполнения<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"Привет,&nbsp;мир\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Результат выполнения данного примера:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
0.2
Первый блок finally.
Поймано исключение: Деление на ноль.
Второй блок finally.
Привет, мир
</pre></div>
   </div>
  </div>
  <div class="example" id="example-327">
   <p><strong>Пример #6 Взаимодействие между блоками <a href="language.exceptions.php.html#language.exceptions.finally" class="link"><code class="literal">finally</code></a> и <a href="https://www.php.net/manual/ru/function.return.php" class="link"><code class="literal">return</code></a></strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'catch'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;finally&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'finally'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />echo&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Результат выполнения данного примера:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
finally
</pre></div>
   </div>
  </div>
  <div class="example" id="example-328">
   <p><strong>Пример #7 Вложенные исключения</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyException&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Exception&nbsp;</span><span style="color: #007700">{&nbsp;}<br /><br />class&nbsp;</span><span style="color: #0000BB">Test&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">testing</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">MyException</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo!'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MyException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;повторный&nbsp;выброс&nbsp;исключения<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">throw&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Test</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">testing</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Результат выполнения данного примера:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
string(4) &quot;foo!&quot;
</pre></div>
   </div>
  </div>
  <div class="example" id="example-329">
   <p><strong>Пример #8 Обработка нескольких исключений в одном блоке catch</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyException&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Exception&nbsp;</span><span style="color: #007700">{&nbsp;}<br /><br />class&nbsp;</span><span style="color: #0000BB">MyOtherException&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Exception&nbsp;</span><span style="color: #007700">{&nbsp;}<br /><br />class&nbsp;</span><span style="color: #0000BB">Test&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">testing</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">MyException</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">MyException&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">MyOtherException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Test</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">testing</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>Результат выполнения данного примера:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
string(11) &quot;MyException&quot;
</pre></div>
   </div>
  </div>
  <div class="example" id="example-330">
   <p><strong>Пример #9 Пример блока <a href="language.exceptions.php.html#language.exceptions.catch" class="link"><code class="literal">catch</code></a> без указания переменной</strong></p>
   <div class="example-contents"><p>Допустимо начиная с PHP 8.0.0</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">SpecificException&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Exception&nbsp;</span><span style="color: #007700">{}<br /><br />function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">SpecificException</span><span style="color: #007700">(</span><span style="color: #DD0000">'Ой!'</span><span style="color: #007700">);<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">();<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">SpecificException</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">"Было&nbsp;поймано&nbsp;исключение&nbsp;SpecificException,&nbsp;но&nbsp;нам&nbsp;безразлично,&nbsp;что&nbsp;у&nbsp;него&nbsp;внутри."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-331">
   <p><strong>Пример #10 Throw как выражение</strong></p>
   <div class="example-contents"><p>Допустимо начиная с PHP 8.0.0</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">SpecificException&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Exception&nbsp;</span><span style="color: #007700">{}<br /><br />function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">do_something_risky</span><span style="color: #007700">()&nbsp;or&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Всё&nbsp;сломалось'</span><span style="color: #007700">);<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">();<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

</div>

<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=language.exceptions&amp;redirect=https://www.php.net/manual/ru/language.exceptions.php"><img src='https://www.php.net/images/notes-add@2x.png' alt='add a note' width='12' height='12'> <small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">12 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="91159">  <div class="votes">
    <div id="Vu91159">
    <a href="https://www.php.net/manual/vote-note.php?id=91159&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd91159">
    <a href="https://www.php.net/manual/vote-note.php?id=91159&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V91159" title="68% like this...">
    101
    </div>
  </div>
  <a href="language.exceptions.php.html#91159" class="name">
  <strong class="user"><em>ask at nilpo dot com</em></strong></a><a class="genanchor" href="language.exceptions.php.html#91159"> &para;</a><div class="date" title="2009-05-27 12:19"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom91159">
<div class="phpcode"><code><span class="html">
If you intend on creating a lot of custom exceptions, you may find this code useful.&nbsp; I've created an interface and an abstract exception class that ensures that all parts of the built-in Exception class are preserved in child classes.&nbsp; It also properly pushes all information back to the parent constructor ensuring that nothing is lost.&nbsp; This allows you to quickly create new exceptions on the fly.&nbsp; It also overrides the default __toString method with a more thorough one.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">interface </span><span class="default">IException<br /></span><span class="keyword">{<br />&nbsp; &nbsp; </span><span class="comment">/* Protected methods inherited from Exception class */<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getMessage</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Exception message <br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getCode</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// User-defined Exception code<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getFile</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Source filename<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getLine</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Source line<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getTrace</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// An array of the backtrace()<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">getTraceAsString</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Formated string of trace<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; /* Overrideable methods inherited from Exception class */<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__toString</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// formated string for display<br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$message </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$code </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">);<br />}<br /><br />abstract class </span><span class="default">CustomException </span><span class="keyword">extends </span><span class="default">Exception </span><span class="keyword">implements </span><span class="default">IException<br /></span><span class="keyword">{<br />&nbsp; &nbsp; protected </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Unknown exception'</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Exception message<br />&nbsp; &nbsp; </span><span class="keyword">private&nbsp;&nbsp; </span><span class="default">$string</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Unknown<br />&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$code&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// User-defined exception code<br />&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$file</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Source filename of exception<br />&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$line</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Source line of exception<br />&nbsp; &nbsp; </span><span class="keyword">private&nbsp;&nbsp; </span><span class="default">$trace</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Unknown<br /><br />&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$message </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$code </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$message</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">$this</span><span class="keyword">(</span><span class="string">'Unknown '</span><span class="keyword">. </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$message</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; public function </span><span class="default">__toString</span><span class="keyword">()<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">) . </span><span class="string">" '</span><span class="keyword">{</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">message</span><span class="keyword">}</span><span class="string">' in </span><span class="keyword">{</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">file</span><span class="keyword">}</span><span class="string">(</span><span class="keyword">{</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">line</span><span class="keyword">}</span><span class="string">)\n"<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">. </span><span class="string">"</span><span class="keyword">{</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getTraceAsString</span><span class="keyword">()}</span><span class="string">"</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />}<br /></span><span class="default">?&gt;<br /></span><br />Now you can create new exceptions in one line:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">TestException </span><span class="keyword">extends </span><span class="default">CustomException </span><span class="keyword">{}<br /></span><span class="default">?&gt;<br /></span><br />Here's a test that shows that all information is properly preserved throughout the backtrace.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">exceptionTest</span><span class="keyword">()<br />{<br />&nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">TestException</span><span class="keyword">();<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; catch (</span><span class="default">TestException $e</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"Caught TestException ('</span><span class="keyword">{</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">()}</span><span class="string">')\n</span><span class="keyword">{</span><span class="default">$e</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; catch (</span><span class="default">Exception $e</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"Caught Exception ('</span><span class="keyword">{</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">()}</span><span class="string">')\n</span><span class="keyword">{</span><span class="default">$e</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />}<br /><br />echo </span><span class="string">'&lt;pre&gt;' </span><span class="keyword">. </span><span class="default">exceptionTest</span><span class="keyword">() . </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br /></span><span class="default">?&gt;<br /></span><br />Here's a sample output:<br /><br />Caught TestException ('Unknown TestException')<br />TestException 'Unknown TestException' in C:\xampp\htdocs\CustomException\CustomException.php(31)<br />#0 C:\xampp\htdocs\CustomException\ExceptionTest.php(19): CustomException-&gt;__construct()<br />#1 C:\xampp\htdocs\CustomException\ExceptionTest.php(43): exceptionTest()<br />#2 {main}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103819">  <div class="votes">
    <div id="Vu103819">
    <a href="https://www.php.net/manual/vote-note.php?id=103819&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103819">
    <a href="https://www.php.net/manual/vote-note.php?id=103819&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103819" title="61% like this...">
    70
    </div>
  </div>
  <a href="language.exceptions.php.html#103819" class="name">
  <strong class="user"><em>Johan</em></strong></a><a class="genanchor" href="language.exceptions.php.html#103819"> &para;</a><div class="date" title="2011-05-05 01:18"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103819">
<div class="phpcode"><code><span class="html">
Custom error handling on entire pages can avoid half rendered pages for the users:<br /><br /><span class="default">&lt;?php<br />ob_start</span><span class="keyword">();<br />try {<br />&nbsp; &nbsp; </span><span class="comment">/*contains all page logic <br />&nbsp; &nbsp; and throws error if needed*/<br />&nbsp; &nbsp; </span><span class="keyword">...<br />} catch (</span><span class="default">Exception $e</span><span class="keyword">) {<br />&nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">();<br />&nbsp; </span><span class="default">displayErrorPage</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">());<br />}<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121228">  <div class="votes">
    <div id="Vu121228">
    <a href="https://www.php.net/manual/vote-note.php?id=121228&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121228">
    <a href="https://www.php.net/manual/vote-note.php?id=121228&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121228" title="66% like this...">
    11
    </div>
  </div>
  <a href="language.exceptions.php.html#121228" class="name">
  <strong class="user"><em>christof+php[AT]insypro.com</em></strong></a><a class="genanchor" href="language.exceptions.php.html#121228"> &para;</a><div class="date" title="2017-06-15 10:12"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121228">
<div class="phpcode"><code><span class="html">
In case your E_WARNING type of errors aren't catchable with try/catch you can change them to another type of error like this:<br /><br /><span class="default">&lt;?php <br />&nbsp; &nbsp; set_error_handler</span><span class="keyword">(function(</span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$errfile</span><span class="keyword">, </span><span class="default">$errline</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$errno </span><span class="keyword">=== </span><span class="default">E_WARNING</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// make it more serious than a warning so it can be caught<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">E_ERROR</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// fallback to default php error handler<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; });<br /><br />&nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// code that might result in a E_WARNING<br />&nbsp; &nbsp; </span><span class="keyword">} catch(</span><span class="default">Exception $e</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// code to handle the E_WARNING (it's actually changed to E_ERROR at this point)<br />&nbsp; &nbsp; </span><span class="keyword">} finally {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">restore_error_handler</span><span class="keyword">();<br />&nbsp; &nbsp; }<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86476">  <div class="votes">
    <div id="Vu86476">
    <a href="https://www.php.net/manual/vote-note.php?id=86476&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86476">
    <a href="https://www.php.net/manual/vote-note.php?id=86476&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86476" title="61% like this...">
    16
    </div>
  </div>
  <a href="language.exceptions.php.html#86476" class="name">
  <strong class="user"><em>Shot (Piotr Szotkowski)</em></strong></a><a class="genanchor" href="language.exceptions.php.html#86476"> &para;</a><div class="date" title="2008-10-21 12:13"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom86476">
<div class="phpcode"><code><span class="html">
‘Normal execution (when no exception is thrown within the try block, *or when a catch matching the thrown exception’s class is not present*) will continue after that last catch block defined in sequence.’<br /><br />‘If an exception is not caught, a PHP Fatal Error will be issued with an “Uncaught Exception …” message, unless a handler has been defined with set_exception_handler().’<br /><br />These two sentences seem a bit contradicting about what happens ‘when a catch matching the thrown exception’s class is not present’ (and the second sentence is actually correct).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112507">  <div class="votes">
    <div id="Vu112507">
    <a href="https://www.php.net/manual/vote-note.php?id=112507&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112507">
    <a href="https://www.php.net/manual/vote-note.php?id=112507&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112507" title="57% like this...">
    17
    </div>
  </div>
  <a href="language.exceptions.php.html#112507" class="name">
  <strong class="user"><em>Edu</em></strong></a><a class="genanchor" href="language.exceptions.php.html#112507"> &para;</a><div class="date" title="2013-06-24 06:13"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112507">
<div class="phpcode"><code><span class="html">
The "finally" block can change the exception that has been throw by the catch block.<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">try{<br />&nbsp; &nbsp; &nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new \</span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Hello"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; } catch(\</span><span class="default">Exception $e</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">().</span><span class="string">" catch in\n"</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw </span><span class="default">$e</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; } finally {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">().</span><span class="string">" finally \n"</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new \</span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Bye"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />} catch (\</span><span class="default">Exception $e</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">().</span><span class="string">" catch out\n"</span><span class="keyword">;<br />}<br /></span><span class="default">?&gt;<br /></span><br />The output is:<br /><br />Hello catch in<br />Hello finally <br />Bye catch out</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117029">  <div class="votes">
    <div id="Vu117029">
    <a href="https://www.php.net/manual/vote-note.php?id=117029&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117029">
    <a href="https://www.php.net/manual/vote-note.php?id=117029&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117029" title="59% like this...">
    10
    </div>
  </div>
  <a href="language.exceptions.php.html#117029" class="name">
  <strong class="user"><em>Simo</em></strong></a><a class="genanchor" href="language.exceptions.php.html#117029"> &para;</a><div class="date" title="2015-04-04 02:47"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117029">
<div class="phpcode"><code><span class="html">
#3 is not a good example. inverse("0a") would not be caught since (bool) "0a" returns true, yet 1/"0a" casts the string to integer zero and attempts to perform the calculation.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121673">  <div class="votes">
    <div id="Vu121673">
    <a href="https://www.php.net/manual/vote-note.php?id=121673&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121673">
    <a href="https://www.php.net/manual/vote-note.php?id=121673&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121673" title="55% like this...">
    3
    </div>
  </div>
  <a href="language.exceptions.php.html#121673" class="name">
  <strong class="user"><em>daviddlowe dot flimm at gmail dot com</em></strong></a><a class="genanchor" href="language.exceptions.php.html#121673"> &para;</a><div class="date" title="2017-09-22 01:13"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121673">
<div class="phpcode"><code><span class="html">
Starting in PHP 7, the classes Exception and Error both implement the Throwable interface. This means, if you want to catch both Error instances and Exception instances, you should catch Throwable objects, like this:<br /><br /><span class="default">&lt;?php<br /><br /></span><span class="keyword">try {<br />&nbsp; &nbsp; throw new </span><span class="default">Error</span><span class="keyword">( </span><span class="string">"foobar" </span><span class="keyword">);<br />&nbsp; &nbsp; </span><span class="comment">// or:<br />&nbsp; &nbsp; // throw new Exception( "foobar" );<br /></span><span class="keyword">}<br />catch (</span><span class="default">Throwable $e</span><span class="keyword">) {<br />&nbsp; &nbsp; </span><span class="default">var_export</span><span class="keyword">( </span><span class="default">$e </span><span class="keyword">);<br />}<br /><br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122434">  <div class="votes">
    <div id="Vu122434">
    <a href="https://www.php.net/manual/vote-note.php?id=122434&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122434">
    <a href="https://www.php.net/manual/vote-note.php?id=122434&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122434" title="54% like this...">
    3
    </div>
  </div>
  <a href="language.exceptions.php.html#122434" class="name">
  <strong class="user"><em>mlaopane at gmail dot com</em></strong></a><a class="genanchor" href="language.exceptions.php.html#122434"> &para;</a><div class="date" title="2018-02-24 09:49"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom122434">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br /><br /></span><span class="comment">/**<br /> * You can catch exceptions thrown in a deep level function<br /> */<br /><br /></span><span class="keyword">function </span><span class="default">employee</span><span class="keyword">()<br />{<br />&nbsp; &nbsp; throw new \</span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"I am just an employee !"</span><span class="keyword">);<br />}<br /><br />function </span><span class="default">manager</span><span class="keyword">()<br />{<br />&nbsp; &nbsp; </span><span class="default">employee</span><span class="keyword">();<br />}<br /><br />function </span><span class="default">boss</span><span class="keyword">()<br />{<br />&nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">manager</span><span class="keyword">();<br />&nbsp; &nbsp; } catch (\</span><span class="default">Exception $e</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />&nbsp; &nbsp; }<br />}<br /><br /></span><span class="default">boss</span><span class="keyword">(); </span><span class="comment">// output: "I am just an employee !"</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115240">  <div class="votes">
    <div id="Vu115240">
    <a href="https://www.php.net/manual/vote-note.php?id=115240&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd115240">
    <a href="https://www.php.net/manual/vote-note.php?id=115240&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V115240" title="53% like this...">
    4
    </div>
  </div>
  <a href="language.exceptions.php.html#115240" class="name">
  <strong class="user"><em>telefoontoestel at nospam dot org</em></strong></a><a class="genanchor" href="language.exceptions.php.html#115240"> &para;</a><div class="date" title="2014-06-18 12:34"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom115240">
<div class="phpcode"><code><span class="html">
When using finally keep in mind that when a exit/die statement is used in the catch block it will NOT go through the finally block. <br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">try {<br />&nbsp; &nbsp; echo </span><span class="string">"try block&lt;br /&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"test"</span><span class="keyword">);<br />} catch (</span><span class="default">Exception $ex</span><span class="keyword">) {<br />&nbsp; &nbsp; echo </span><span class="string">"catch block&lt;br /&gt;"</span><span class="keyword">;<br />} finally {<br />&nbsp; &nbsp; echo </span><span class="string">"finally block&lt;br /&gt;"</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">// try block<br />// catch block<br />// finally block<br /></span><span class="default">?&gt;<br /></span><br /><span class="default">&lt;?php<br /></span><span class="keyword">try {<br />&nbsp; &nbsp; echo </span><span class="string">"try block&lt;br /&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"test"</span><span class="keyword">);<br />} catch (</span><span class="default">Exception $ex</span><span class="keyword">) {<br />&nbsp; &nbsp; echo </span><span class="string">"catch block&lt;br /&gt;"</span><span class="keyword">;<br />&nbsp; &nbsp; exit(</span><span class="default">1</span><span class="keyword">);<br />} finally {<br />&nbsp; &nbsp; echo </span><span class="string">"finally block&lt;br /&gt;"</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">// try block<br />// catch block<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116273">  <div class="votes">
    <div id="Vu116273">
    <a href="https://www.php.net/manual/vote-note.php?id=116273&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116273">
    <a href="https://www.php.net/manual/vote-note.php?id=116273&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116273" title="52% like this...">
    2
    </div>
  </div>
  <a href="language.exceptions.php.html#116273" class="name">
  <strong class="user"><em>Tom Polomsk</em></strong></a><a class="genanchor" href="language.exceptions.php.html#116273"> &para;</a><div class="date" title="2014-12-04 01:45"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom116273">
<div class="phpcode"><code><span class="html">
Contrary to the documentation it is possible in PHP 5.5 and higher use only try-finally blocks without any catch block.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106696">  <div class="votes">
    <div id="Vu106696">
    <a href="https://www.php.net/manual/vote-note.php?id=106696&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd106696">
    <a href="https://www.php.net/manual/vote-note.php?id=106696&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V106696" title="49% like this...">
    -1
    </div>
  </div>
  <a href="language.exceptions.php.html#106696" class="name">
  <strong class="user"><em>Sawsan</em></strong></a><a class="genanchor" href="language.exceptions.php.html#106696"> &para;</a><div class="date" title="2011-11-28 09:36"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom106696">
<div class="phpcode"><code><span class="html">
the following is an example of a re-thrown exception and the using of getPrevious function:<br /><br /><span class="default">&lt;?php<br /><br />$name </span><span class="keyword">= </span><span class="string">"Name"</span><span class="keyword">;<br /><br /></span><span class="comment">//check if the name contains only letters, and does not contain the word name<br /><br /></span><span class="keyword">try<br />&nbsp;&nbsp; {<br />&nbsp;&nbsp; try<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^a-z]/i'</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">)) <br />&nbsp; &nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"</span><span class="default">$name</span><span class="string"> contains character other than a-z A-Z"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp;&nbsp; <br />&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">), </span><span class="string">'name'</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"</span><span class="default">$name</span><span class="string"> contains the word name"</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp;&nbsp; }<br />&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"The Name is valid"</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br />&nbsp;&nbsp; catch(</span><span class="default">Exception $e</span><span class="keyword">)<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"insert name again"</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$e</span><span class="keyword">);<br />&nbsp; &nbsp;&nbsp; }<br />&nbsp;&nbsp; }<br /> <br />catch (</span><span class="default">Exception $e</span><span class="keyword">)<br />&nbsp;&nbsp; {<br />&nbsp;&nbsp; if (</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getPrevious</span><span class="keyword">())<br />&nbsp;&nbsp; {<br />&nbsp; &nbsp; echo </span><span class="string">"The Previous Exception is: "</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getPrevious</span><span class="keyword">()-&gt;</span><span class="default">getMessage</span><span class="keyword">().</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />&nbsp;&nbsp; }<br />&nbsp;&nbsp; echo </span><span class="string">"The Exception is: "</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">().</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />&nbsp;&nbsp; }<br /><br /> </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126196">  <div class="votes">
    <div id="Vu126196">
    <a href="https://www.php.net/manual/vote-note.php?id=126196&amp;page=language.exceptions&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126196">
    <a href="https://www.php.net/manual/vote-note.php?id=126196&amp;page=language.exceptions&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126196" title="23% like this...">
    -7
    </div>
  </div>
  <a href="language.exceptions.php.html#126196" class="name">
  <strong class="user"><em>Daan</em></strong></a><a class="genanchor" href="language.exceptions.php.html#126196"> &para;</a><div class="date" title="2021-06-25 02:54"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom126196">
<div class="phpcode"><code><span class="html">
I would like to emphasise that you can not rethrow an Exception inside a catch-block and expect that the next catch-block will handle it.<br /><br /><span class="default">&lt;?php <br /><br /></span><span class="keyword">try {<br />&nbsp; &nbsp; throw new </span><span class="default">RuntimeException</span><span class="keyword">(</span><span class="string">'error'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />} catch (</span><span class="default">RuntimeException $e</span><span class="keyword">) {<br />&nbsp; &nbsp; throw </span><span class="default">$e</span><span class="keyword">;<br />} catch (</span><span class="default">Exception $e</span><span class="keyword">) {<br />&nbsp; &nbsp; </span><span class="comment">// this will not be executed[<br /></span><span class="keyword">}<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 <div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=language.exceptions&amp;redirect=https://www.php.net/manual/ru/language.exceptions.php"><img src='https://www.php.net/images/notes-add@2x.png' alt='add a note' width='12' height='12'> <small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="https://www.php.net/manual/ru/langref.php">Справочник языка</a>

                                    <ul class='child-menu-list'>

                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.basic-syntax.php" title="Основы синтаксиса">Основы синтаксиса</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.types.php" title="Типы">Типы</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.variables.php" title="Переменные">Переменные</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.constants.php" title="Константы">Константы</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.expressions.php" title="Выражения">Выражения</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.operators.php" title="Операторы">Операторы</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.control-structures.php" title="Управляющие конструкции">Управляющие конструкции</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.functions.php" title="Функции">Функции</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.oop5.php" title="Классы и объекты">Классы и объекты</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.namespaces.php" title="Пространства имён">Пространства имён</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.enumerations.php" title="Перечисления">Перечисления</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.errors.php" title="Ошибки">Ошибки</a>
                        </li>
                                                <li class="current">
                            <a href="language.exceptions.php.html" title="Исключения">Исключения</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.fibers.php" title="Fibers">Fibers</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.generators.php" title="Генераторы">Генераторы</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.attributes.php" title="Атрибуты">Атрибуты</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/language.references.php" title="Объяснение ссылок">Объяснение ссылок</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/reserved.variables.php" title="Предопределённые переменные">Предопределённые переменные</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/reserved.exceptions.php" title="Предопределённые исключения">Предопределённые исключения</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/reserved.interfaces.php" title="Встроенные интерфейсы и классы">Встроенные интерфейсы и классы</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/context.php" title="Контекстные опции и параметры">Контекстные опции и параметры</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/wrappers.php" title="Поддерживаемые протоколы и обёртки">Поддерживаемые протоколы и обёртки</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2022 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
        <li><a href="https://github.com/php/web-php/blob/master/manual%2Fru%2Flanguage.exceptions.php">View Source</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" integrity="sha384-aBL3Lzi6c9LNDGvpHkZrrm3ZVsIwohDD7CDozL0pk8FwCrfmV7H9w8j3L7ikEv6h" crossorigin="anonymous"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/modernizr.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/hogan-2.0.0.min.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/typeahead.min.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/mousetrap.min.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/search.js"></script>
<script src="https://www.php.net/cached.php?t=1637324403&amp;f=/js/common.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="https://www.php.net/images/to-top@2x.png"></a>

</body>
</html>
