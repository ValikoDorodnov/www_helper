

<!doctype html>
<html id="magnolia" lang="ru">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="fb:pages" content="115407078489594" />
<meta name="description" content="Узнайте, как отменить изменения в Git. В этом обучающем руководстве описываются четыре популярные команды для отмены коммитов и изменений в Git.">
<meta name="author" content="Atlassian">
<link rel="canonical" href="undoing-changes.1.html"/>
<title>Git — Отмена изменений | Atlassian Git Tutorial</title>
<style>body { display: none; }</style>
<link href="https://wac-cdn.atlassian.com" rel="preconnect">
<link rel="alternate" href="https://www.atlassian.com/git/tutorials/undoing-changes" hreflang="x-default" />
<link rel="alternate" href="https://www.atlassian.com/git/tutorials/undoing-changes" hreflang="en" />
<link rel="alternate" href="https://www.atlassian.com/ja/git/tutorials/undoing-changes" hreflang="ja" />
<link rel="alternate" href="https://www.atlassian.com/fr/git/tutorials/undoing-changes" hreflang="fr" />
<link rel="alternate" href="https://www.atlassian.com/de/git/tutorials/undoing-changes" hreflang="de" />
<link rel="alternate" href="https://www.atlassian.com/es/git/tutorials/undoing-changes" hreflang="es" />
<link rel="alternate" href="https://www.atlassian.com/br/git/tutorials/undoing-changes" hreflang="pt-BR" />
<link rel="alternate" href="https://www.atlassian.com/zh/git/tutorials/undoing-changes" hreflang="zh-Hans" />
<link rel="alternate" href="https://www.atlassian.com/ko/git/tutorials/undoing-changes" hreflang="ko" />
<link rel="alternate" href="undoing-changes.1.html" hreflang="ru" />
<link rel="alternate" href="https://www.atlassian.com/pl/git/tutorials/undoing-changes" hreflang="pl" />
<link rel="alternate" href="https://www.atlassian.com/it/git/tutorials/undoing-changes" hreflang="it" />
<link rel="alternate" href="https://www.atlassian.com/nl/git/tutorials/undoing-changes" hreflang="nl" />
<link rel="alternate" href="https://www.atlassian.com/hu/git/tutorials/undoing-changes" hreflang="hu" />
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/favicon.png" sizes="32x32" />
<link rel="mask-icon" href="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/safari-pinned-tab.svg" color="#59afe1">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://wac-cdn.atlassian.com/assets/img/favicons/gitguide/mstile-144x144.png" />
<meta name="theme-color" content="#205081">
<meta property="og:title" content="Git — Отмена изменений | Atlassian Git Tutorial" />
<meta property="og:description" content="Узнайте, как отменить изменения в Git. В этом обучающем руководстве описываются четыре популярные команды для отмены коммитов и изменений в Git." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.atlassian.com/ru/git/tutorials/undoing-changes" />
<meta property="og:site_name" content="Atlassian" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@Atlassian" />
<script src="https://wac-cdn.atlassian.com/static/master/737/assets/build/js/jquery.js?cdnVersion=235"></script>
<script type="text/javascript">
window.featureFlags = "".split('&amp;')
.reduce((flags, flagStr) => {
const [flagKey, flagValue] = flagStr.split('=');
return { ...flags, [flagKey]: flagValue };
}, {})
</script>
<script type="text/javascript">
var LOCALIZED_PRICING_CONTENTFUL_SPACE = "3s3v3nq72la0";
var LOCALIZED_PRICING_CONTENTFUL_ENVIRONMENT = "master";
var LOCALIZED_PRICING_CONTENTFUL_ACCESS_TOKEN = "b9c3ea8d9c664146e9c7dd136a1d40ff8415715c3ef8ee222536f36fb2056613";
var LOCALIZED_CCP_PRICING_CONTENTFUL_ENVIRONMENT = "ccp_dev";
var LOCALIZED_CCP_PRICING_CONTENTFUL_ACCESS_TOKEN = "3SWtzulQjrRd4OdxZm8zhe_ohy5J2-Jafj0Zkr5grS4";
var LOCALIZED_PRICING_USE_GEO_CURRENCY = true;
</script>
</head>
<body id="undoing-changes" class="wac git tutorials undoing-changes">
<div id="header">
<div class="tutorial-sidebar is-active">
<div class="_bumper"></div>
<div class="_wrap">
<ol>
<div class="_group">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-git-with-bitbucket-cloud" class="cms-link cms-link--text group-link" >Узнать о Git</a>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-git-with-bitbucket-cloud" class="cms-link cms-link--text tutorial-link" >Изучите Git с помощью Bitbucket Cloud</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-git-with-bitbucket-cloud#create-the-repository" class="cms-link cms-link--text section-link" >Создание репозитория Git</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-git-with-bitbucket-cloud#copy-and-add-files" class="cms-link cms-link--text section-link" >Копирование репозитория Git и добавление файлов</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-git-with-bitbucket-cloud#pull-changes" class="cms-link cms-link--text section-link" >Получение изменений из репозитория Git в Bitbucket Cloud</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-git-with-bitbucket-cloud#git-branch-to-merge" class="cms-link cms-link--text section-link" >Использование команды git branch для слияния файла</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-about-code-review-in-bitbucket-cloud" class="cms-link cms-link--text tutorial-link" >Узнайте о проверке кода в Bitbucket Cloud</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-about-code-review-in-bitbucket-cloud#create-repository" class="cms-link cms-link--text section-link" >Создание репозитория</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-about-code-review-in-bitbucket-cloud#clone-branch" class="cms-link cms-link--text section-link" >Клонирование и внесение изменений в новую ветку</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-about-code-review-in-bitbucket-cloud#im-using-git" class="cms-link cms-link--text section-link" >Если вы используете командную строку</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-about-code-review-in-bitbucket-cloud#im-using-sourcetree" class="cms-link cms-link--text section-link" >Если вы используете Sourcetree</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-about-code-review-in-bitbucket-cloud#create-a-pull-request-to-merge-your-change" class="cms-link cms-link--text section-link" >Создание запроса pull для слияния изменений</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-branching-with-bitbucket-cloud" class="cms-link cms-link--text tutorial-link" >Узнайте о ветвлении в Bitbucket Cloud</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-branching-with-bitbucket-cloud#create-the-repository" class="cms-link cms-link--text section-link" >Настройка</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-branching-with-bitbucket-cloud#review-branching-workflow" class="cms-link cms-link--text section-link" >Ознакомьтесь с процессом ветвления</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-undoing-changes-with-bitbucket" class="cms-link cms-link--text tutorial-link" >Научитесь отменять изменения в Bitbucket Cloud</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/learn-undoing-changes-with-bitbucket#git-status" class="cms-link cms-link--text section-link" >git status</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-undoing-changes-with-bitbucket#git-log" class="cms-link cms-link--text section-link" >git log</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-undoing-changes-with-bitbucket#git-reset" class="cms-link cms-link--text section-link" >git reset</a>
<a href="https://www.atlassian.com/ru/git/tutorials/learn-undoing-changes-with-bitbucket#git-revert" class="cms-link cms-link--text section-link" >git revert</a>
</div>
</div>
</div>
<div class="_group">
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-version-control" class="cms-link cms-link--text group-link" >Для начинающих</a>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-version-control" class="cms-link cms-link--text tutorial-link" >Что такое контроль версий?</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-version-control#benefits-of-version-control" class="cms-link cms-link--text section-link" >Преимущества контроля версий</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/source-code-management" class="cms-link cms-link--text tutorial-link" >Управление исходным кодом</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-git" class="cms-link cms-link--text tutorial-link" >Что такое Git?</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-git#performance" class="cms-link cms-link--text section-link" >Производительность</a>
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-git#security" class="cms-link cms-link--text section-link" >Безопасность</a>
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-git#flexibility" class="cms-link cms-link--text section-link" >Гибкость</a>
<a href="https://www.atlassian.com/ru/git/tutorials/what-is-git#version-control-with-git" class="cms-link cms-link--text section-link" >Контроль версий с помощью Git</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/why-git" class="cms-link cms-link--text tutorial-link" >Зачем вашей организации нужен Git?</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-developers" class="cms-link cms-link--text section-link" >Git для разработки</a>
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-marketing" class="cms-link cms-link--text section-link" >Git для маркетинга</a>
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-product-management" class="cms-link cms-link--text section-link" >Git для управления продуктами</a>
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-designers" class="cms-link cms-link--text section-link" >Git для дизайнеров</a>
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-customer-support" class="cms-link cms-link--text section-link" >Git для службы поддержки</a>
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-human-resources" class="cms-link cms-link--text section-link" >Git для службы персонала</a>
<a href="https://www.atlassian.com/ru/git/tutorials/why-git#git-for-anyone-managing-budget" class="cms-link cms-link--text section-link" >Git для управления бюджетом</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/install-git" class="cms-link cms-link--text tutorial-link" >Установка Git</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/install-git#mac-os-x" class="cms-link cms-link--text section-link" >Установка Git на Mac OS X</a>
<a href="https://www.atlassian.com/ru/git/tutorials/install-git#windows" class="cms-link cms-link--text section-link" >Установка Git на Windows</a>
<a href="https://www.atlassian.com/ru/git/tutorials/install-git#linux" class="cms-link cms-link--text section-link" >Установка Git на Linux</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-ssh" class="cms-link cms-link--text tutorial-link" >Git SSH</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/export-git-archive" class="cms-link cms-link--text tutorial-link" >Архив репозитория Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/gitops" class="cms-link cms-link--text tutorial-link" >GitOps</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/atlassian-git-cheatsheet" class="cms-link cms-link--text tutorial-link" >Шпаргалка по Git</a>
</div>
</div>
<div class="_group">
<a href="https://www.atlassian.com/ru/git/tutorials/setting-up-a-repository" class="cms-link cms-link--text group-link" >Начало работы</a>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/setting-up-a-repository" class="cms-link cms-link--text tutorial-link" >Настройка репозитория</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/setting-up-a-repository/git-init" class="cms-link cms-link--text section-link" >git init</a>
<a href="https://www.atlassian.com/ru/git/tutorials/setting-up-a-repository/git-clone" class="cms-link cms-link--text section-link" >git clone</a>
<a href="https://www.atlassian.com/ru/git/tutorials/setting-up-a-repository/git-config" class="cms-link cms-link--text section-link" >git config</a>
<a href="https://www.atlassian.com/ru/git/tutorials/git-alias" class="cms-link cms-link--text section-link" >git alias</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/saving-changes" class="cms-link cms-link--text tutorial-link" >Сохранение изменений</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/saving-changes" class="cms-link cms-link--text section-link" >git add</a>
<a href="https://www.atlassian.com/ru/git/tutorials/saving-changes/git-commit" class="cms-link cms-link--text section-link" >git commit</a>
<a href="https://www.atlassian.com/ru/git/tutorials/saving-changes/git-diff" class="cms-link cms-link--text section-link" >git diff</a>
<a href="https://www.atlassian.com/ru/git/tutorials/saving-changes/git-stash" class="cms-link cms-link--text section-link" >git stash</a>
<a href="https://www.atlassian.com/ru/git/tutorials/saving-changes/gitignore" class="cms-link cms-link--text section-link" >.gitignore</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/inspecting-a-repository" class="cms-link cms-link--text tutorial-link" >Проверка репозитория</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/inspecting-a-repository" class="cms-link cms-link--text section-link" >git status</a>
<a href="https://www.atlassian.com/ru/git/tutorials/inspecting-a-repository/git-tag" class="cms-link cms-link--text section-link" >git tag</a>
<a href="https://www.atlassian.com/ru/git/tutorials/inspecting-a-repository/git-blame" class="cms-link cms-link--text section-link" >git blame</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="undoing-changes.1.html" class="cms-link cms-link--text tutorial-link" >Отмена изменений</a>
<div aria-hidden="true" class="_toc">
<a href="undoing-changes.1.html" class="cms-link cms-link--text section-link" >Git checkout</a>
<a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-clean" class="cms-link cms-link--text section-link" >git clean</a>
<a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-revert" class="cms-link cms-link--text section-link" >git revert</a>
<a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-reset" class="cms-link cms-link--text section-link" >git reset</a>
<a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-rm" class="cms-link cms-link--text section-link" >git rm</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/rewriting-history" class="cms-link cms-link--text tutorial-link" >Переписывание истории</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/rewriting-history#git-commit--amend" class="cms-link cms-link--text section-link" >git commit --amend</a>
<a href="https://www.atlassian.com/ru/git/tutorials/rewriting-history/git-rebase" class="cms-link cms-link--text section-link" >git rebase</a>
<a href="https://www.atlassian.com/ru/git/tutorials/rewriting-history#git-rebase-i" class="cms-link cms-link--text section-link" >git rebase -i</a>
<a href="https://www.atlassian.com/ru/git/tutorials/rewriting-history/git-reflog" class="cms-link cms-link--text section-link" >git reflog</a>
</div>
</div>
</div>
<div class="_group">
<a href="https://www.atlassian.com/ru/git/tutorials/syncing" class="cms-link cms-link--text group-link" >Совместная работа</a>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/syncing" class="cms-link cms-link--text tutorial-link" >Синхронизация</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/syncing" class="cms-link cms-link--text section-link" >git remote</a>
<a href="https://www.atlassian.com/ru/git/tutorials/syncing/git-fetch" class="cms-link cms-link--text section-link" >git fetch</a>
<a href="https://www.atlassian.com/ru/git/tutorials/syncing/git-push" class="cms-link cms-link--text section-link" >git push</a>
<a href="https://www.atlassian.com/ru/git/tutorials/syncing/git-pull" class="cms-link cms-link--text section-link" >git pull</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/making-a-pull-request" class="cms-link cms-link--text tutorial-link" >Выполнение запроса pull</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/making-a-pull-request#how-it-works" class="cms-link cms-link--text section-link" >Порядок действий</a>
<a href="https://www.atlassian.com/ru/git/tutorials/making-a-pull-request#example" class="cms-link cms-link--text section-link" >Пример</a>
<a href="https://www.atlassian.com/ru/git/tutorials/making-a-pull-request#where-to-go" class="cms-link cms-link--text section-link" >Куда можно перейти отсюда</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/using-branches" class="cms-link cms-link--text tutorial-link" >Использование веток</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/using-branches" class="cms-link cms-link--text section-link" >git branch</a>
<a href="https://www.atlassian.com/ru/git/tutorials/using-branches/git-checkout" class="cms-link cms-link--text section-link" >Git checkout</a>
<a href="https://www.atlassian.com/ru/git/tutorials/using-branches/git-merge" class="cms-link cms-link--text section-link" >Git merge</a>
<a href="https://www.atlassian.com/ru/git/tutorials/using-branches/merge-conflicts" class="cms-link cms-link--text section-link" >Слияние конфликтов</a>
<a href="https://www.atlassian.com/ru/git/tutorials/using-branches/merge-strategy" class="cms-link cms-link--text section-link" >Стратегии слияния</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/comparing-workflows" class="cms-link cms-link--text tutorial-link" >Сравнение процессов</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/comparing-workflows#centralized-workflow" class="cms-link cms-link--text section-link" >Централизованный рабочий процесс</a>
<a href="https://www.atlassian.com/ru/git/tutorials/comparing-workflows/feature-branch-workflow" class="cms-link cms-link--text section-link" >Рабочий процесс с функциональными ветками</a>
<a href="https://www.atlassian.com/ru/git/tutorials/comparing-workflows/gitflow-workflow" class="cms-link cms-link--text section-link" >Рабочий процесс Gitflow Workflow</a>
<a href="https://www.atlassian.com/ru/git/tutorials/comparing-workflows/forking-workflow" class="cms-link cms-link--text section-link" >Рабочий процесс Forking Workflow</a>
</div>
</div>
</div>
<div class="_group">
<a href="https://www.atlassian.com/ru/git/tutorials/svn-to-git-prepping-your-team-migration" class="cms-link cms-link--text group-link" >Переход к Git</a>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/svn-to-git-prepping-your-team-migration" class="cms-link cms-link--text tutorial-link" >Подготовка к миграции из SVN в Git</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/svn-to-git-prepping-your-team-migration#for-administrators" class="cms-link cms-link--text section-link" >Для администраторов</a>
<a href="https://www.atlassian.com/ru/git/tutorials/svn-to-git-prepping-your-team-migration#basic-git-commands" class="cms-link cms-link--text section-link" >Основные команды Git</a>
<a href="https://www.atlassian.com/ru/git/tutorials/svn-to-git-prepping-your-team-migration#git-migration-tools" class="cms-link cms-link--text section-link" >Инструменты миграции Git</a>
<a href="https://www.atlassian.com/ru/git/tutorials/svn-to-git-prepping-your-team-migration#for-developers" class="cms-link cms-link--text section-link" >Для разработчиков</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/migrating-overview" class="cms-link cms-link--text tutorial-link" >Переход от SVN к Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/migrating-prepare" class="cms-link cms-link--text tutorial-link" >Подготовка</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/migrating-convert" class="cms-link cms-link--text tutorial-link" >Преобразование</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/migrating-synchronize" class="cms-link cms-link--text tutorial-link" >Синхронизация</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/migrating-share" class="cms-link cms-link--text tutorial-link" >Обмен</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/migrating-migrate" class="cms-link cms-link--text tutorial-link" >Переход</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/perforce-git" class="cms-link cms-link--text tutorial-link" >Зачем переходить из Perforce в Git?</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/perforce-git-migration" class="cms-link cms-link--text tutorial-link" >Переход от Perforce к Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-move-repository" class="cms-link cms-link--text tutorial-link" >Перемещение репозитория Git вместе с историей</a>
</div>
</div>
<div class="_group">
<a href="https://www.atlassian.com/ru/git/tutorials/advanced-overview" class="cms-link cms-link--text group-link" >Дополнительные советы</a>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/advanced-overview" class="cms-link cms-link--text tutorial-link" >Расширенные учебные руководства по Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/merging-vs-rebasing" class="cms-link cms-link--text tutorial-link" >Сравнение слияния и перебазирования</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/merging-vs-rebasing#conceptual-overview" class="cms-link cms-link--text section-link" >Обзор основных моментов</a>
<a href="https://www.atlassian.com/ru/git/tutorials/merging-vs-rebasing#the-golden-rule-of-rebasing" class="cms-link cms-link--text section-link" >Золотое правило перебазирования</a>
<a href="https://www.atlassian.com/ru/git/tutorials/merging-vs-rebasing#workflow-walkthrough" class="cms-link cms-link--text section-link" >Пошаговый разбор процесса</a>
<a href="https://www.atlassian.com/ru/git/tutorials/merging-vs-rebasing#summary" class="cms-link cms-link--text section-link" >Резюме</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/resetting-checking-out-and-reverting" class="cms-link cms-link--text tutorial-link" >Команды reset, checkout и revert</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-log" class="cms-link cms-link--text tutorial-link" >Расширенный журнал Git</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/git-log#formatting-log-output" class="cms-link cms-link--text section-link" >Форматирование вывода команды log</a>
<a href="https://www.atlassian.com/ru/git/tutorials/git-log#filtering-the-commit-history" class="cms-link cms-link--text section-link" >Фильтрация истории коммитов</a>
<a href="https://www.atlassian.com/ru/git/tutorials/git-log#summary" class="cms-link cms-link--text section-link" >Резюме</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-hooks" class="cms-link cms-link--text tutorial-link" >Скрипты Git hook</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/git-hooks#conceptual-overview" class="cms-link cms-link--text section-link" >Обзор основных моментов</a>
<a href="https://www.atlassian.com/ru/git/tutorials/git-hooks#local-hooks" class="cms-link cms-link--text section-link" >Локальные скрипты hook</a>
<a href="https://www.atlassian.com/ru/git/tutorials/git-hooks#server-side-hooks" class="cms-link cms-link--text section-link" >Серверные скрипты hook</a>
<a href="https://www.atlassian.com/ru/git/tutorials/git-hooks#summary" class="cms-link cms-link--text section-link" >Резюме</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog" class="cms-link cms-link--text tutorial-link" >Ссылки и журнал ссылок</a>
<div aria-hidden="true" class="_toc">
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#hashes" class="cms-link cms-link--text section-link" >Хеши</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#refs" class="cms-link cms-link--text section-link" >Ссылки</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#packed-refs" class="cms-link cms-link--text section-link" >Упакованные ссылки</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#special-refs" class="cms-link cms-link--text section-link" >Специальные ссылки</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#refspecs" class="cms-link cms-link--text section-link" >Спецификации ссылок</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#relative-refs" class="cms-link cms-link--text section-link" >Относительные ссылки</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#the-reflog" class="cms-link cms-link--text section-link" >Журнал ссылок</a>
<a href="https://www.atlassian.com/ru/git/tutorials/refs-and-the-reflog#summary" class="cms-link cms-link--text section-link" >Резюме</a>
</div>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-submodule" class="cms-link cms-link--text tutorial-link" >Подмодули Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-subtree" class="cms-link cms-link--text tutorial-link" >Поддерево Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/big-repositories" class="cms-link cms-link--text tutorial-link" >Большие репозитории в Git</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-lfs" class="cms-link cms-link--text tutorial-link" >Git LFS</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-gc" class="cms-link cms-link--text tutorial-link" >Команда git gc</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-prune" class="cms-link cms-link--text tutorial-link" >Git prune</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-bash" class="cms-link cms-link--text tutorial-link" >Git Bash</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/dotfiles" class="cms-link cms-link--text tutorial-link" >Как хранить скрытые файлы (с точкой перед именем)</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/cherry-pick" class="cms-link cms-link--text tutorial-link" >Git Cherry Pick</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/gitk" class="cms-link cms-link--text tutorial-link" >GitK</a>
</div>
<div aria-hidden="true" class="_group-wrap">
<a href="https://www.atlassian.com/ru/git/tutorials/git-show" class="cms-link cms-link--text tutorial-link" >git-show</a>
</div>
</div>
</ol>
</div>
</div>
<div class="hamburger ">
<div class="_layer -top"></div>
<div class="_layer -mid"></div>
<div class="_layer -bottom"></div>
</div>
<div class="primary-nav">
<div class="_wrapper">
<ul class="_nav-list">
<div>
<li>
<a href="https://www.atlassian.com/ru/git" class="cms-link cms-link--text _nav-item -home" >Главная</a>
</li>
</div>
<div>
<li class="tutorials-nav" id="tutorials-nav-mobile">
<h4 class="_nav-item -tutorials">Tutorials</h4>
<div class="_sublist"></div>
</li>
<li>
<a href="https://www.atlassian.com/ru/git/tutorials" class="cms-link cms-link--text _nav-item -tutorials" >Обучающие материалы</a>
</li>
</div>
<div>
<li>
<a href="https://www.atlassian.com/ru/git/articles" class="cms-link cms-link--text _nav-item -articles" >Статьи</a>
</li>
</div>
<div>
<li>
<a href="https://www.atlassian.com/ru/git/glossary" class="cms-link cms-link--text _nav-item -glossary" >ГЛОССАРИЙ</a>
</li>
</div>
</ul>
</div>
</div>
<div class="topbar is-tutorial">
<div class="_header -is-tutorial">
<a href="https://www.atlassian.com/ru/git/tutorials" class="active">Tutorials</a>
</div>
</div>
<form class="newsletter">
<input class="is-empty _input" type="email" placeholder="Enter Your Email For Git News">
<button type="submit" class="_status icon-email-submit">Submit</button>
</form>
<a href="undoing-changes.1.html#footer" class="button green-hollow secondary newsletter-cta" >Регистрация</a>
<a href="https://www.atlassian.com/ru/git/search" class="search-button search-open ">
<span class="_link icon-search">Search</span>
</a>
<a href="https://www.atlassian.com/ru/git" class="search-button search-close -in-page hidden">
<span class="_link icon-search-close -close">Search</span>
</a>
</div>
<div class="page-wrap is-active -gray-bg tutorial-detail">
<div id="content" class="_content">
<div class="tutorial-hero">
<div class="g-column g-12-12 text-center">
<img src="https://wac-cdn.atlassian.com/dam/jcr:5c4cb0f2-856c-4d39-b014-9340ef1d05e4/hero.svg?cdnVersion=235" loading="lazy" alt="Отмена изменений">
<h1 > Отмена коммитов и изменений
</h1>
<div class="g-column g-12-12 t-12-12 m-12-12 breadcrumbs">
<a href="undoing-changes.1.html" class="cms-link cms-link--text xx-active-parent-page-link" >Git checkout</a>
<a href="undoing-changes.1.html" class="cms-link cms-link--text xx-active-parent-page-link" >git clean</a>
<a href="undoing-changes.1.html" class="cms-link cms-link--text xx-active-parent-page-link" >git revert</a>
<a href="undoing-changes.1.html" class="cms-link cms-link--text xx-active-parent-page-link" >git reset</a>
<a href="undoing-changes.1.html" class="cms-link cms-link--text xx-active-parent-page-link" >git rm</a>
</div></div></div>
<div class="g-row">
<div class="g-column g-12-12 g-centered">
<p>В этом разделе мы обсудим доступные стратегии и команды Git для выполнения отмены изменений. Прежде всего необходимо отметить, что в Git не существует традиционной системы отмены, как в текстовых редакторах. Лучше воздержаться от сопоставления операций Git с какой бы то ни было традиционной концепцией отмены изменений. Кроме того, Git имеет собственную систему терминов для операций отмены, и в обсуждении лучше всего использовать их. В числе таких терминов — сброс (reset), возврат (revert), переключение (checkout), очистка (clean) и другие.</p> <p>Git можно рассматривать как инструмент для управления временной шкалой. Коммиты — это снимки моментов времени или точек интереса на временной шкале истории проекта. Кроме того, с помощью веток можно управлять несколькими временными шкалами. Когда вы выполняете операцию отмены в Git, вы, как правило, перемещаетесь назад во времени или на другую временную шкалу, где ошибок не было.</p> <p>Это руководство предоставляет все необходимые навыки для работы с предыдущими версиями проекта по разработке программного обеспечения. Сначала мы рассмотрим, как исследовать старые коммиты, а затем изучим разницу между отменой публичных коммитов в истории проекта и сбросом неопубликованных изменений на локальном компьютере.</p>
<h2 > Поиск утерянного: просмотр старых коммитов
</h2>
<p>В основе любой системы управления версиями лежит идея хранения «безопасных» копий проекта, чтобы у разработчиков не возникало опасений безвозвратно испортить базу кода. Когда в проекте сохранена история коммитов, можно повторно оценивать и анализировать любые ранее выполненные коммиты. Один из лучших инструментов для просмотра истории репозитория Git — команда <code>git log</code>. В примере ниже мы используем команду <code><a href="https://www.atlassian.com/ru/git/tutorials/git-log" data-event="clicked" data-uuid="4c01e4f1-66" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git log</a></code> для получения последних коммитов популярной графической библиотеки с открытым исходным кодом.</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;log&nbsp;--oneline<br/>e2f9a78fe&nbsp;Replaced&nbsp;FlyControls&nbsp;with&nbsp;OrbitControls<br/>d35ce0178&nbsp;Editor:&nbsp;Shortcuts&nbsp;panel&nbsp;Safari&nbsp;support.<br/>9dbe8d0cf&nbsp;Editor:&nbsp;Sidebar.Controls&nbsp;to&nbsp;Sidebar.Settings.Shortcuts.&nbsp;Clean&nbsp;up.<br/>05c5288fc&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12612&nbsp;from&nbsp;TyLindberg/editor-controls-panel<br/>0d8b6e74b&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12805&nbsp;from&nbsp;harto/patch-1<br/>23b20c22e&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12801&nbsp;from&nbsp;gam0022/improve-raymarching-example-v2<br/>fe78029f1&nbsp;Fix&nbsp;typo&nbsp;in&nbsp;documentation<br/>7ce43c448&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12794&nbsp;from&nbsp;WestLangley/dev-x<br/>17452bb93&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12778&nbsp;from&nbsp;OndrejSpanel/unitTestFixes<br/>b5c1b5c70&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12799&nbsp;from&nbsp;dhritzkiv/patch-21<br/>1b48ff4d2&nbsp;Updated&nbsp;builds.<br/>88adbcdf6&nbsp;WebVRManager:&nbsp;Clean&nbsp;up.<br/>2720fbb08&nbsp;Merge&nbsp;pull&nbsp;request&nbsp;#12803&nbsp;from&nbsp;dmarcos/parentPoseObject<br/>9ed629301&nbsp;Check&nbsp;parent&nbsp;of&nbsp;poseObject&nbsp;instead&nbsp;of&nbsp;camera<br/>219f3eb13&nbsp;Update&nbsp;GLTFLoader.js<br/>15f13bb3c&nbsp;Update&nbsp;GLTFLoader.js<br/>6d9c22a3b&nbsp;Update&nbsp;uniforms&nbsp;only&nbsp;when&nbsp;onWindowResize<br/>881b25b58&nbsp;Update&nbsp;ProjectionMatrix&nbsp;on&nbsp;change&nbsp;aspect</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Каждый коммит имеет уникальный идентифицирующий хеш SHA-1. Эти идентификаторы используются для перемещения по временной шкале коммитов и возвращения к коммитам. По умолчанию <code>git log</code> показывает только коммиты текущей выбранной ветки. Но не исключено, что искомый коммит находится в другой ветке. Для просмотра всех коммитов во всех ветках используется команда <code>git log --branches=*</code>. Команда <code><a href="https://www.atlassian.com/ru/git/tutorials/using-branches" data-event="clicked" data-uuid="09799081-61" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git branch</a></code> используется для просмотра и посещения других веток. Так, команда <code>git branch -a</code> возвращает список имен всех известных веток. Просмотреть весь журнал коммитов одной из этих веток можно с помощью команды <code>git log <имя_ветки></code>.</p> <p>После того как вы нашли ссылку на нужный коммит в истории, для перехода к нему можно использовать команду <code>git checkout</code>. Команда <code>git checkout</code> — это простой способ «загрузить» любой из этих сохраненных снимков на компьютер разработчика. При стандартном процессе разработки указатель <code>HEAD</code> обычно указывает на главную ветку <code>main</code> или другую локальную ветку. Но при переключении на предыдущий коммит <code>HEAD</code> указывает уже не на ветку, а непосредственно на сам коммит. Такая ситуация называется состоянием открепленного указателя <code>HEAD</code>, и ее можно представить так:</p>
<img src="https://wac-cdn.atlassian.com/dam/jcr:9b234e0d-ee33-4463-ac14-298c9559015d/01%20Checking%20out%20a%20previous%20commit.svg?cdnVersion=235" loading="lazy" alt="Обучающее руководство по Git: переключение на предыдущий коммит">
<p>Переход к старой версии файла не перемещает указатель <code>HEAD</code>. Он остается в той же ветке и в том же коммите, что позволяет избежать открепления указателя HEAD. После этого можно выполнить коммит старой версии файла в новый снимок состояния, как и в случае других изменений. Соответственно, такое использование команды <code>git checkout</code> применительно к файлу позволяет откатиться к прежней версии отдельного файла. Для получения дополнительной информации об этих двух режимах посетите страницу команды <code><a href="https://www.atlassian.com/ru/git/tutorials/using-branches/git-checkout" data-event="clicked" data-uuid="de6055b4-9b" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git checkout</a></code>.</p>
<h2 > Просмотр старых версий
</h2>
<p>В этом примере предполагается, что вы начали разработку безумного эксперимента, но не уверены, хотите его сохранить или нет. Чтобы принять решение, вы хотите взглянуть на состояние проекта до начала эксперимента. Прежде всего, нужно найти идентификатор редакции, которую вы хотите просмотреть.</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;log&nbsp;--oneline</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Допустим, история вашего проекта выглядит примерно так:</p>
<div class="component component--codeblock">
<pre><code>b7119f2&nbsp;Continue&nbsp;doing&nbsp;crazy&nbsp;things<br/>872fa7e&nbsp;Try&nbsp;something&nbsp;crazy<br/>a1e8fb5&nbsp;Make&nbsp;some&nbsp;important&nbsp;changes&nbsp;to&nbsp;hello.txt<br/>435b61d&nbsp;Create&nbsp;hello.txt<br/>9773e52&nbsp;Initial&nbsp;import</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Для просмотра коммита «Make some important changes to hello.txt» можно использовать команду <code>git checkout</code> в следующем виде:</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;checkout&nbsp;a1e8fb5</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Это приведет к тому, что ваш рабочий каталог будет в точности соответствовать состоянию коммита <code>a1e8fb5</code>. Вы можете просматривать файлы, компилировать проект, запускать тесты и даже редактировать файлы, не боясь потерять текущее состояние проекта. Никакие внесенные здесь изменения не будут сохранены в репозитории. Чтобы продолжить разработку, необходимо вернуться к текущему состоянию проекта:</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;checkout&nbsp;main</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Предположим, вы ведете разработку в главной ветке <code>main</code> по умолчанию. При каждом возвращении в ветку <code>main</code> можно использовать команду <code><a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-revert" data-event="clicked" data-uuid="dfac3eaa-01" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git revert </a></code>или <code><a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-reset" data-event="clicked" data-uuid="dfac3eaa-01" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git reset</a></code> для отмены нежелательных изменений.</p>
<h2 > Отмена коммита снимка
</h2>
<p>Технически существует несколько стратегий отмены коммитов. В дальнейших примерах предполагается, что история коммитов выглядит следующим образом:</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;log&nbsp;--oneline<br/>872fa7e&nbsp;Try&nbsp;something&nbsp;crazy<br/>a1e8fb5&nbsp;Make&nbsp;some&nbsp;important&nbsp;changes&nbsp;to&nbsp;hello.txt<br/>435b61d&nbsp;Create&nbsp;hello.txt<br/>9773e52&nbsp;Initial&nbsp;import</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Займемся отменой коммита <code>872fa7e Try something crazy</code>. Возможно, безумный эксперимент зашел слишком далеко.</p>
<h2 > Отмена коммита с помощью git checkout
</h2>
<p>С помощью команды <code>git checkout</code> мы можем перейти к предыдущему коммиту , <code>a1e8fb5,</code> и вернуть репозиторий в состояние, предшествовавшее этому безумному коммиту. Переход к отдельному коммиту переведет репозиторий в состояние открепленного указателя <font face="monospace">HEAD</font>. Работа при этом перестает принадлежать какой-либо из веток. При открепленном указателе HEAD все новые коммиты будут оставаться без родителя, пока вы не вернете ветки в положенное состояние. «Сборщик мусора» в Git удаляет коммиты без родителя. Этот сервис работает с определенными интервалами и удаляет такие коммиты без возможности восстановления. Чтобы такие коммиты не были удалены «сборщиком мусора», перед их выполнением нужно убедиться, что мы работаем в ветке.</p> <p>При наличии открепленного указателя <font face="monospace">HEAD</font> можно выполнить команду <code>git checkout -b new_branch_without_crazy_commit</code>. Она создаст новую ветку с именем <code>new_branch_without_crazy_commit</code> и совершит переход в это состояние. Теперь репозиторий находится на новой временной шкале, где коммита <code>872fa7e</code> не существует. На этом этапе мы можем продолжить работу в новой ветке, где коммита <code>872fa7e</code> не существует и его можно считать «отмененным». К сожалению, если вам нужна предыдущая ветка (возможно, это главная ветка <code>main</code>), такая стратегия не подходит. Поэтому рассмотрим другие стратегии отмены. Более детальную информацию и примеры см. в нашей подробной статье о <code><a href="https://www.atlassian.com/ru/git/tutorials/using-branches/git-checkout" data-event="clicked" data-uuid="591df866-46" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git checkout</a></code>.</p>
<h2 > Отмена публичного коммита с помощью git revert
</h2>
<p>Предположим, мы вернулись к исходному примеру истории коммитов. Истории, в которую входит коммит <code>872fa7e</code>. В этот раз попробуем отмену путем обратной операции. При исполнении команды <code>git revert HEAD</code> Git создаст новый коммит с операцией, обратной последнему коммиту. В текущую историю ветки будет добавлен новый коммит, и она будет выглядеть следующим образом:</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;log&nbsp;--oneline<br/>e2f9a78&nbsp;Revert&nbsp;&quot;Try&nbsp;something&nbsp;crazy&quot;<br/>872fa7e&nbsp;Try&nbsp;something&nbsp;crazy<br/>a1e8fb5&nbsp;Make&nbsp;some&nbsp;important&nbsp;changes&nbsp;to&nbsp;hello.txt<br/>435b61d&nbsp;Create&nbsp;hello.txt<br/>9773e52&nbsp;Initial&nbsp;import</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>На этом этапе мы снова технически «отменили» коммит <code>872fa7e</code>. Хотя коммит <code>872fa7e</code> по-прежнему существует в истории, новый коммит <code>e2f9a78</code> отменил изменения <code>872fa7e</code>. В отличие от нашей предыдущей стратегии переключения с помощью команды checkout, мы можем продолжить работать с этой же веткой, поэтому данная стратегия является удовлетворительной. Это идеальный способ отмены при работе в открытых общих репозиториях, однако если у вас есть требование вести минимальную «очищенную» историю Git, эта стратегия может не подойти.</p>
<h2 > Отмена коммита с помощью git reset
</h2>
<p>Рассмотрение этой стратегии отмены мы продолжим на нашем рабочем примере. Команда <code><a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-reset" data-event="clicked" data-uuid="edfd0725-f4" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git reset</a></code> — это расширяемая команда с разнообразными функциями и вариантами использования. Если мы выполним команду <code>git reset --hard a1e8fb5</code>, история коммитов будет сброшена до указанного коммита. Просмотр истории коммитов с помощью команды <code>git log</code> теперь будет выглядеть так:</p>
<div class="component component--codeblock">
<pre><code>git&nbsp;log&nbsp;--oneline<br/>a1e8fb5&nbsp;Make&nbsp;some&nbsp;important&nbsp;changes&nbsp;to&nbsp;hello.txt<br/>435b61d&nbsp;Create&nbsp;hello.txt<br/>9773e52&nbsp;Initial&nbsp;import</code></pre>
</div>
<script type="text/x-component">
{
"type":"imkt.wpl.CodeBlock",
"params": {
}
}
</script>
<p>Вывод команды log показывает, что коммиты <code>e2f9a78</code> и <code>872fa7e</code> больше не существуют в истории. На этом этапе мы можем продолжить работу и создавать новые коммиты так, словно «безумных» коммитов никогда не было. Этот метод отмены изменений оставляет историю максимально чистой. Отмена с помощью команды reset отлично подходит для локальных изменений, но при работе в общем удаленном репозитории создает сложности. Если у нас есть общий удаленный репозиторий, в котором с помощью команды push опубликован коммит <code>872fa7e</code>, и мы попытаемся выполнить команду <code>git push</code> для ветки, в которой с помощью команды reset была сброшена история, система Git обнаружит это и выдаст ошибку. Git будет считать, что публикуемая ветка не была обновлена, поскольку в ней отсутствуют коммиты. В таких случаях лучше использовать отмену с помощью команды <code>git revert</code>.</p>
<h2 > Отмена последнего коммита
</h2>
<p>В предыдущем разделе мы рассмотрели различные стратегии отмены коммитов. Эти стратегии также можно применять и к последнему коммиту. Однако иногда последний коммит можно не удалять и не сбрасывать. Например, если вы просто сделали коммит преждевременно. В этом случае его можно исправить. После того как вы внесете дополнительные изменения в рабочий каталог и добавите их в раздел проиндексированных файлов с помощью команды <code><a href="https://www.atlassian.com/ru/git/tutorials/saving-changes" data-event="clicked" data-uuid="53539d30-e0" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git add</a></code>, выполните команду <code>git commit --amend</code>. При этом Git откроет настроенный системный редактор, где вы сможете изменить комментарий к последнему коммиту. Новые изменения будут добавлены в исправленный коммит.</p>
<h2 > Отмена неотправленных изменений
</h2>
<p>Пока не выполнен коммит изменений в историю репозитория, они находятся в разделе проиндексированных файлов и в рабочем каталоге. Вам может потребоваться отменить изменения в этих двух областях. Раздел проиндексированных файлов и рабочий каталог являются внутренними механизмами управления состоянием Git. Подробную информацию о том, как работают эти два механизма, см. на странице <code><a href="https://www.atlassian.com/ru/git/tutorials/resetting-checking-out-and-reverting" data-event="clicked" data-uuid="7e9c72f9-33" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git reset</a></code>, где приводится их подробное описание.</p>
<h2 > Рабочий каталог
</h2>
<p>Рабочий каталог обычно синхронизируется с локальной файловой системой. Чтобы отменить изменения в рабочем каталоге, можно просто отредактировать файлы с помощью привычного редактора. Git имеет два инструмента для управления рабочим каталогом. Это команда <code><a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-clean" data-event="clicked" data-uuid="b07325c3-e6" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git clean</a></code> — удобная утилита для отмены изменений в рабочем каталоге, и команда <code>git reset</code>, которую можно вызвать с параметрами <code>--mixed</code> или <code>--hard</code>, чтобы сбросить изменения в рабочем каталоге.</p>
<h2 > Раздел проиндексированных файлов
</h2>
<p>Команда <code><a href="https://www.atlassian.com/ru/git/tutorials/saving-changes" data-event="clicked" data-uuid="1ae8651e-97" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git add</a></code> используется для добавления изменений в раздел проиндексированных файлов. Команда <code>git reset</code> предназначена главным образом для отмены изменений в разделе проиндексированных файлов. Команда reset с параметром <code>--mixed</code> перемещает все ожидающие изменения из раздела проиндексированных файлов обратно в рабочий каталог.</p>
<h2 > Отмена публичных изменений
</h2>
<p>При командной работе в удаленных репозиториях необходимо подходить к отмене изменений с особой осторожностью. Команда <code>git reset</code>, как правило, считается методом локальной отмены. Ее следует использовать для отмены изменений в частной ветке. Она безопасно изолирует удаление коммитов от других веток, которые могут использоваться другими разработчиками. Проблемы возникают, когда команда reset выполняется в общей ветке и затем эта ветка удаленно публикуется с помощью команды <code>git push</code>. В этом случае Git блокирует выполнение команды push и сообщает, что публикуемая ветка устарела, поскольку в ней отсутствуют коммиты, которые есть в удаленной ветке.</p> <p>Предпочтительная команда для отмены общей истории коммитов — <code>git revert</code>. Команда revert безопаснее, чем reset, так как она не удаляет коммиты из общей истории. Команда revert сохраняет отменяемые вами коммиты и создает новый коммит с операцией, обратной последнему коммиту. Этот метод можно безопасно применять в общих распределенных рабочих средах, так как удаленный разработчик может выполнить пул ветки и получить новый коммит, который отменяет его нежелательный коммит.</p>
<h2 > Резюме
</h2>
<p>Мы рассмотрели множество общих стратегий отмены изменений в Git. Важно помнить, что отменить изменения в проекте Git можно несколькими способами. Кроме того, здесь были затронуты и более сложные темы, которые подробно рассматриваются на страницах, посвященных соответствующим командам Git. Наиболее часто используемые инструменты для отмены — это команды <code><a href="https://www.atlassian.com/ru/git/tutorials/using-branches/git-checkout" data-event="clicked" data-uuid="242d5e5f-bb" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git checkout</a>, <a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-revert" data-event="clicked" data-uuid="242d5e5f-bb" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git revert</a></code> и <code><a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-reset" data-event="clicked" data-uuid="242d5e5f-bb" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git reset</a></code>. Вот несколько ключевых моментов, о которых следует помнить.</p> <ul> <li>Обычно после коммита внесенные изменения отменить невозможно</li> <li>Используйте <code>git checkout</code> для переходов и просмотра истории коммитов</li> <li>Команда <code>git revert</code> — лучший инструмент для отмены общих публичных изменений.</li> <li>Команду <code>git reset</code> лучше всего использовать для отмены локальных частных изменений.</li> </ul> <p>Помимо основных команд отмены, мы рассмотрели другие команды Git: <code><a href="https://www.atlassian.com/ru/git/tutorials/git-log" data-event="clicked" data-uuid="242d5e5f-bb" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git log</a></code> для поиска потерянных коммитов, <code><a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-clean" data-event="clicked" data-uuid="242d5e5f-bb" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git clean</a></code> для отмены изменений, не подтвержденных коммитами, и <code><a href="https://www.atlassian.com/ru/git/tutorials/saving-changes" data-event="clicked" data-uuid="242d5e5f-bb" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" >git add</a></code> для изменения индексирования.</p> <p>Каждая из этих команд имеет собственную подробную документацию. Чтобы узнать больше о той или иной команде, пройдите по соответствующим ссылкам.</p>
</div></div>
<div class="_footer">
<div class="g-column g-6-12 g-centered">
<div class="_hero">
<img src="https://wac-cdn.atlassian.com/dam/jcr:8e57216e-269e-49e6-aff2-5c03b8512e73/hero.svg?cdnVersion=235" loading="lazy" alt="Переписывание истории">
</div>
<h5 > Далее:
</h5>
<h4 > Git clean
</h4>
<a href="https://www.atlassian.com/ru/git/tutorials/undoing-changes/git-clean" class="cms-link cms-link--text" >Перейти к следующему обучающему руководству</a>
</div></div>
</div>
</div>
<div id="footer" class="footer is-tutorial ">
<div class="g-row _atlassian-logo">
<div class="g-column g-12-12">
<h5 > Работает на платформе
</h5>
<a href="https://bitbucket.org" class="cms-link cms-link--image" ><img src="https://wac-cdn.atlassian.com/dam/jcr:c3392b46-dcac-4283-8855-dd8fda6918a0/Bitbucket-white.svg?cdnVersion=235" loading="lazy" alt="ATLASSIAN"></a>
</div></div>
<div class="g-row">
<div class="g-column g-4-12 t-12-12 m-12-12 t-gutterless">
<h6 > Рекомендовать
</h6>
<a href="https://twitter.com/home?status=Switching%20to%20%23Git?%20Use%20the%20Atlassian%20Git%20tutorials%20to%20jumpstart%20your%20training%20in%20Git%20commands%20and%20workflows.%20https://www.atlassian.com/git" class="cms-link cms-link--image social-code" ><img src="https://wac-cdn.atlassian.com/dam/jcr:69b49692-9452-4dd9-aca1-df56b2bbadbd/icon-twitter.svg?cdnVersion=235" loading="lazy" alt="Twitter"></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=https://www.atlassian.com/git" class="cms-link cms-link--image social-code" ><img src="https://wac-cdn.atlassian.com/dam/jcr:9c8da5cb-5272-4e89-9cc1-9a3f52265380/icon-facebook.svg?cdnVersion=235" loading="lazy" alt="Facebook"></a>
<a href="https://plus.google.com/share?url=https://www.atlassian.com/git" class="cms-link cms-link--image social-code" ><img src="https://wac-cdn.atlassian.com/dam/jcr:3b592a98-07ca-48a6-8b95-e59eae543341/icon-gplus.svg?cdnVersion=235" loading="lazy" alt="Google+"></a>
</div><div class="g-column g-4-12 t-12-12 m-12-12 t-gutterless">
<h6 > Хотите узнавать о новых статьях?
</h6>
<form class="newsletter">
<input class="is-empty _input" type="email" placeholder="Enter Your Email For Git News">
<button type="submit" class="_status icon-email-submit">Submit</button>
</form>
</div><div class="g-column g-4-12 t-12-12 m-12-12 t-gutterless">
<h6 > Сайт размещен
</h6>
<a href="https://www.atlassian.com/ru/" class="cms-link cms-link--image" ><img src="https://wac-cdn.atlassian.com/dam/jcr:ffd56b30-ad4d-4cb5-94be-79c1dd68b1fb/Atlassian-horizontal-white-rgb.svg?cdnVersion=235" loading="lazy" alt="Bitbucket" class="_bitbucket-logo"></a>
</div></div>
<div class="g-row">
<div class="g-column g-12-12 t-12-12 m-12-12">
<p class="license"><a class="icon-global-cclicense" href="http://creativecommons.org/licenses/by/2.5/au/" data-event="clicked" data-uuid="028d468a-75" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" data-event="clicked" data-uuid="028d468a-75" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" rel="nofollow">creativecommons.org</a>За исключением случаев, когда указано иное, все содержимое лицензировано в соответствии с лицензией <a href="http://creativecommons.org/licenses/by/2.5/au/" data-event="clicked" data-uuid="028d468a-75" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" data-event="clicked" data-uuid="028d468a-75" data-event-component="linkButton" data-event-container="richText" data-schema-version="1" data-product-key="bitbucket" rel="nofollow">Creative Commons «Атрибуция» версии 2.5 для Австралии</a>.</p> <style type="text/css">.tutorial-sidebar ._group > a:hover { color: #ccc !important; } .tutorial-sidebar ._group-wrap > a:hover, .tutorial-sidebar ._toc > a:hover { color: #fff; } </style>
</div></div>
</div>
<script type="text/javascript">
var FEATURE_FLAG_CONSENTHUB_V2 = false
</script>
<script type="text/javascript">
var HTTP_PREFIX = "";
var FEATURE_FLAG_USE_GDPR = true;
</script>
<script type="text/javascript" src="https://wac-cdn.atlassian.com/static/master/737/assets/build/js/gitguide/git-app-lite.js?cdnVersion=235"></script>
<link rel="stylesheet" href="https://wac-cdn.atlassian.com/static/master/737/assets/build/css/gitguide/site.css?cdnVersion=235" />
<script type="text/javascript">
(function(){
var imkt = window.imkt || (window.imkt = {});
imkt.isEditMode = false;
imkt.isProduction = true;
imkt.constants = imkt.constants || {};
imkt.constants.rootPath = "/";
imkt.constants.assetPath = "https://wac-cdn.atlassian.com/static/master/737" + "/assets/";
imkt.constants.libPath = imkt.constants.assetPath + "bower_components/";
imkt.constants.cdnVersionQuery = "?cdnVersion=235";
imkt.constants.isDevUser = false;
imkt.constants.isFreeEnabled = true;
imkt.constants.getUserAccounts = false;
imkt.constants.headerLoginMenu = true;
imkt.constants.public = true;
imkt.constants.mobileBreakpoint = 640;
})();
</script>
<script type="text/x-component">
{
"type":"imkt.pages.WACPage",
"params": {
}
}
</script>
<script>
function initializeATLAnalytics() {
var pageViewProperties = { contentSite: 'Git Microsite', contentType: 'Microsite', contentProduct: 'Bitbucket' };
/* get url path, convert to dash format and add it to page view properties. */
var originProduct = window.location.pathname;
pageViewProperties.originProduct = "wac" + (originProduct === '/' ? "" : originProduct.replace(new RegExp('/', 'g'),"-"));
if (typeof ace !== 'undefined') {
ace.analytics.Initializer.initWithPageAnalytics('kiv6wyh2nw', pageViewProperties, null, null, window.atlGlobalLoadStart);
}
}
</script>
<script type = "text/javascript">
/**
* function to load external js through javascript.
*
* @param url - javascript url
* @param location - location of the dom (e.g. document.head)
*/
var loadExternalJS = function(url, location, callback){
var scriptTag = document.createElement('script');
scriptTag.src = url;
scriptTag.type = 'text/javascript';
/* Then bind the event to the callback function.
There are several events for cross browser compatibility. */
scriptTag.onreadystatechange = callback;
scriptTag.onload = callback;
window.atlGlobalLoadStart = new Date();
/* Fire the loading */
location.appendChild(scriptTag);
};
</script>
<script type="text/javascript" class="optanon-category-2">
loadExternalJS("https://atl-global.atlassian.com/js/atl-global.min.js", document.body, initializeATLAnalytics);
</script>
</body>
<!-- LastRendered: 01.03.2022 0:36:52 -->
</html>
