<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <meta name="referrer" content="unsafe-url">
  <title>Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.92df6f6d.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.2822d469ec31a56409ac330bbcf7fcbf.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/307714\/"},"headline":"Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня","datePublished":"2016-08-24T14:12:23+03:00","dateModified":"2021-09-29T10:20:50+03:00","author":{"@type":"Person","name":"Денис"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике.","url":"https:\/\/habr.com\/ru\/post\/307714\/#post-content-body","about":["h_sys_admin","h_it-infrastructure","h_cisconetworks","h_network_technologies","f_admin"],"image":["https:\/\/habr.com\/share\/publication\/307714\/606d9cfec30e4088f9567cdc6c0fe6f7\/"]}</script>
  <script src="https://www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.64.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. 




                       ..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. 




                       ..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. 




                       ..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. 




                       ..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. 




                       ..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/307714/606d9cfec30e4088f9567cdc6c0fe6f7/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/307714/606d9cfec30e4088f9567cdc6c0fe6f7/" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/307714/606d9cfec30e4088f9567cdc6c0fe6f7/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/307714/606d9cfec30e4088f9567cdc6c0fe6f7/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/307714/606d9cfec30e4088f9567cdc6c0fe6f7/?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="307714" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2016-08-24T11:12:23.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/post/307714/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="cisco, network, ccna, education, application layer, http, dns, dhcp, telnet, ssh, pop3, smtp, ftp, tftp">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/307714/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="index.html.1.15.html" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/307714/606d9cfec30e4088f9567cdc6c0fe6f7/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/307714/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="https://habr.com/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="https://habr.com/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="https://habr.com/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="https://habr.com/ru/flows/all" class="tm-main-menu__item">
        Все потоки
      </a> <a href="https://habr.com/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="https://habr.com/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="https://habr.com/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="https://habr.com/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="https://habr.com/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="https://habr.com/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="https://habr.com/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="https://habr.com/ru/users/solid_93/" title="solid_93" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" src="https://habrastorage.org/r/w32/getpro/habr/avatars/c76/5a4/153/c765a41531defb16ae3d33f1f10408a1.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/solid_93/" class="tm-user-info__username">
      solid_93
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2016-08-24T11:12:23.000Z" title="2016-08-24, 14:12">24  августа  2016 в 14:12</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/sys_admin/" class="tm-article-snippet__hubs-item-link"><span>Системное администрирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/it-infrastructure/" class="tm-article-snippet__hubs-item-link"><span>IT-инфраструктура</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/cisconetworks/" class="tm-article-snippet__hubs-item-link"><span>Cisco</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/network_technologies/" class="tm-article-snippet__hubs-item-link"><span>Сетевые технологии</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label tm-article-snippet__label_variant-tutorial"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. <br/>
<br/>
<a href="https://habrahabr.ru/post/307714/" rel="nofollow noopener noreferrer"><div style="text-align:center;"><img src="https://habrastorage.org/r/w780q1/files/862/c3d/0cc/862c3d0cc98c43f783af823c60b1cab6.jpg" data-src="https://habrastorage.org/files/862/c3d/0cc/862c3d0cc98c43f783af823c60b1cab6.jpg" data-blurred="true"/></div></a><br/>
<a name="habracut"></a><br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">Содержание</b>
                        <div class="spoiler_text">1) <a href="https://habrahabr.ru/post/307252/" rel="nofollow noopener noreferrer">Основные сетевые термины, сетевая модель OSI и стек протоколов TCP/IP.</a><br/>
2) Протоколы верхнего уровня.<br/>
3) <a href="https://habrahabr.ru/post/308636/" rel="nofollow noopener noreferrer">Протоколы нижних уровней (транспортного, сетевого и канального).</a><br/>
4) <a href="https://habrahabr.ru/post/312340/" rel="nofollow noopener noreferrer">Сетевые устройства и виды применяемых кабелей.</a><br/>
5) <a href="https://habrahabr.ru/post/314484/" rel="nofollow noopener noreferrer">Понятие IP адресации, масок подсетей и их расчет.</a><br/>
6) <a href="https://habrahabr.ru/post/319080/" rel="nofollow noopener noreferrer">Понятие VLAN, Trunk и протоколы VTP и DTP.</a><br/>
7) <a href="https://habrahabr.ru/post/321132/" rel="nofollow noopener noreferrer">Протокол связующего дерева: STP.</a><br/>
8) <a href="https://habrahabr.ru/post/334778/" rel="nofollow noopener noreferrer">Протокол агрегирования каналов: Etherchannel.</a><br/>
9) <a href="https://habr.com/ru/post/335090/">Маршрутизация: статическая и динамическая на примере RIP, OSPF и EIGRP.</a><br/>
<br/>
P.S. Возможно, со временем список дополнится.</div>
                    </div><br/>
Как вы помните из прошлой статьи (если не читали, то в содержании есть ссылка на нее), модель OSI в нынешнее время служит только в качестве обучения ролям каждого уровня. Работают же сети по стеку протоколов TCP/IP. Хоть TCP/IP состоит из 4 уровней, он вполне реализует все функциональные возможности, реализуемые в модели OSI. Ниже на картинке приведены сравнения уровней и их ролей.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/16e/d41/5be/16ed415be3174c06a61b13ef96b03a37.PNG"/></div><br/>
Начинаем разговор про протоколы верхнего уровня. Я не просто так назвал тему «Протоколы верхнего уровня», а не «Протоколы верхних уровней». Так как разбираем мы этот уровень по стеку TCP/IP, то у нас он «один за трех». <br/>
<br/>
Вообще с точки зрения сетевика, нам все равно, что происходит внутри прикладного уровня. Этим, как правило, занимаются программисты. Но важно знать, как формируются данные и инкапсулируются в нижестоящие уровни.<br/>
У нас на работе, например, есть правило: мы обеспечиваем запуск приложения и его безошибочную передачу по сети. Если проблема заключается во внутренних программных сбоях, то мы переключаем на разработчиков, и это становится их заботой. Но бывают и проблемы, которые идут по тонкой грани между нами, и мы решаем их вместе. <br/>
<br/>
Итак, протоколы прикладного уровня обеспечивают взаимодействие между человеком и сетью. Этих протоколов огромное количество, и выполняют они совершенно различные роли. Я приведу примеры часто используемых протоколов в сети и покажу, как они работают на практике: HTTP, DNS, DHCP, SMTP и POP3, Telnet, SSH, FTP, TFTP.<br/>
<br/>
<b>I) Протокол HTTP (англ. HyperText Transport Protocol).</b> Протокол передачи данных, используемый обычно для получения информации с веб-сайтов. С каждым годом этот протокол становится все популярнее, и возможностей для его применения становится все больше. Использует он «клиент-серверную» модель. То есть существуют клиенты, которые формируют и отправляют запрос. И серверы, которые слушают запросы и, соответственно, на них отвечают. <br/>
<br/>
В качестве клиентов выступают известные многим веб-браузеры: Internet Explorer, Mozilla Firefox, Google Chrome и т.д. А в качестве серверного ПО используют:Apache, IIS, nginx и т.д.<br/>
<br/>
Для того, чтобы разобраться глубже в протоколе HTTP, взглянем на HTTP запрос от клиента к серверу.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3ac/9a5/f9a/3ac9a5f9acbc449c98408ac2d08a46d4.PNG"/></div><br/>
Нас интересуют только самая верхняя и самая нижняя строчки.<br/>
<br/>
В первой строчке используется такое понятие, как <b>GET</b>. Это, по сути, ключ запроса. Так как после GET стоит символ "/", то это означает, что запрашивается главная или корневая страница по <b>URL (англ. Uniform Resource Locator)</b> пути. <br/>
<br/>
<b>URL</b> — это некий идентификатор какого-либо ресурса в сети. <br/>
<br/>
Так же в этой строчке присутствует такая запись, как <b>HTTP/1.1</b>. Это версия протокола. Довольно популярная версия. Выпустили ее в 1999 году, и до сих пор она служит верой и правдой. Хоть недавно был анонс версии 2.0, версия 1.1 занимает пока лидирующее положение.<br/>
<br/>
Теперь о нижней строчке. Здесь указывается адрес сервера или имя, на котором располагается нужный ресурс. Давайте посмотрим, как это работает на практике. Я буду использовать свою любимую программу Cisco Packet Tracer 6.2 (в дальнейшем CPT). Она проста в освоении и для демонстрации описанного идеально подходит. Могу сказать с уверенностью, что для подготовки к CCNA R&amp;S, ее хватает вполне. Но только для нее. <br/>
<br/>
Открываем программу и добавим туда компьютер с сервером (находятся они на вкладке «End Devices»), как на картинке ниже<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/9fe/512/9b6/9fe5129b6bcc41de87f670f1dc6b33c8.PNG"/></div><br/>
Соединяем компьютер с сервером перекрестным кабелем (англ. crossover cable). В CPT он находится на вкладке «Connections», обозначается пунктиром и называется «Copper Cross-Over». <br/>
<br/>
Теперь займемся настройкой компьютера и веб-сервера.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/47c/12a/bbb/47c12abbb6f4482c9736528dd75669dc.PNG"/></div><br/>
<strong>1)</strong> Отрываем вкладки «Desktop» на рабочем компьютере и сервере, далее переходим в окно «IP Configuration». Откроются окна, как на рисунке выше. Это окна конфигурации узлов в сети.<br/>
<br/>
<strong>2)</strong> Укажем IP-адреса в строки, указанные цифрой 2. Как помним из предыдущей статьи, IP-адреса нужны для идентификации узлов в сети. Подробнее мы разберем эту тему позже. Сейчас главное понимать, для чего нужен IP-адрес. Я специально выбрал сеть, начинающуюся с «192.168», так как она встречается чаще всего в домашних сетях.<br/>
<br/>
<strong>3)</strong> В поля, указанные цифрой 3, вводится маска подсети. Она нужна для того, чтобы узлу было понятно, в одной подсети он находится с другим узлом или нет. Но об этом позже. <br/>
Остальные значения оставим пустыми.<br/>
<br/>
Теперь требуется включить сервис HTTP на сервере.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/df4/271/4f1/df42714f1f9c44e6894ee221a8c20d11.PNG"/></div><br/>
<strong>1)</strong> Переходим на вкладку «Services».<br/>
<strong>2)</strong> Выбираем слева сервис HTTP.<br/>
<strong>3)</strong> Открывается окно настройки сервиса и файловый менеджер. Если у кого есть навыки по работе c HTML, то можете здесь создать страницу. Но у нас уже есть готовый шаблон, и мы им воспользуемся. Не забываем включить службу HTTP и HTTPS.<br/>
<br/>
Раз уже зашла речь о HTTPS (HyperText Transfer Protocol Secure), то скажу про него пару слов. Это, по сути, расширение протокола HTTP, которое поддерживает криптографические протоколы и передает информацию не в открытом виде, а в зашифрованном. В CPT очень поверхностно показана его работа, но для понимания вполне достаточно. Вспоминаем и запоминаем: HTTP использует 80 порт, а HTTPS 443 порт. Вообще номеров портов очень много, и все запомнить тяжело, но часто встречающиеся лучше запомнить. <br/>
<br/>
Теперь самое интересное. Нам надо перевести CPT из режима «Realtime» в режим «Simulation». Отличие их в том, что в режиме «Realtime» сеть ведет себя так, как она повела бы себя в реальной жизни и в реальном времени. Режим «Simulation» позволяет нам наблюдать за поведением сети в разные временные интервалы, а также проследить за каждым пакетом, раскрыть его и посмотреть, что он в себе несет. Переключаем среду, как показано на рисунке ниже.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/e53/5a0/631/e535a063118b4e02910ea5a86f7fd00d.PNG"/></div><br/>
Здесь открывается «Simulation Panel», в которой несколько опций. Есть фильтр, в котором можно указать протоколы, которые вы хотите отслеживать, скорость перемещения пакета и навигационная панель, где можно наблюдать за сетью вручную, нажатием «Capture/Forward» или автоматически, при помощи кнопки «Auto Capture/Play». <br/>
<br/>
Оставляем все, как есть, и открываем компьютер. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8f6/25a/f19/8f625af19c594dc2beddec5df895124b.PNG"/></div><br/>
Переходим на вкладку «Desktop» и открываем «WEB Browser». Перед нами открывается окно веб-браузера. В строке URL пишем адрес нашего веб-сервера, нажимаем кнопку «Go» и наблюдаем следующую картину.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/2b8/1f3/b57/2b81f3b5714746febacf9d31e01bf229.PNG"/></div><br/>
Появились первые посылаемые данные на схеме и в окне «Simulation Panel». Это сегменты TCP, которые создадут сессию между компьютером и сервером. Сейчас нам это не интересно, и мы об этом поговорим в следующей статье. Поэтому я пропущу их до момента, когда будут созданы HTTP. Делать я это буду при помощи кнопки «Capture/Forward». <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/443/1bf/769/4431bf76952c44c197e90433f29999a2.PNG"/></div><br/>
И вот после установления соединения, компьютер формирует первые HTTP данные. В дальнейшем я буду называть их PDU, чтобы вы привыкали к данным терминам.<br/>
<br/>
<strong>1)</strong> Смотрим на схему и видим, что появилось 2 конверта. Это и есть наши данные. Нас интересует фиолетовый конверт. Это и есть созданный PDU. <br/>
<br/>
<strong>2)</strong> Теперь смотрим на «Simulation Panel» и видим, что в таблице появилась запись с типом HTTP. Эти данные нас интересуют. Также рядом с записью показан цвет, которым окрашены эти данные на схеме.<br/>
<br/>
<strong>3)</strong> Кликаем по HTTP (фиолетовый конверт), и перед нами открывается окно данных. Тут кратко показаны все нужные сведения по каждому уровню модели OSI. Можно кликнуть по любому уровню и получить информацию о том, что происходит на нем. <br/>
<br/>
Если вам интересно полностью раскрыть данные и рассмотреть подробно, из каких полей они состоят и что в них происходит, есть вкладка «Outbound PDU Details». Давайте перейдем на нее и посмотрим, как выглядят HTTP данные.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7f7/a51/138/7f7a511381c043cdb0c89ddcbda08c0c.PNG"/></div><br/>
На этой вкладке будут выводиться данные на всех уровнях. Нам пока надо посмотреть на HTTP. Они находятся в самом низу, поэтому тянем бегунок вниз. Выглядят они так же, как я и описывал их раньше. <br/>
<br/>
Теперь нам интересен этап, когда веб-сервер получит запрос и начнет предпринимать какие-то действия. Давайте нажмем на «Capture/Forward» и посмотрим, чем веб-сервер ответит. И вот, на рисунке ниже видим, что он отправил компьютеру какие-то данные. Давайте посмотрим, как они выглядят.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/666/6e3/913/6666e391370c46c18df597f1e70a4b2c.PNG"/></div><br/>
<strong>1)</strong> Я случайно пережал кнопку и он уже начал формировать TCP на закрытие сессии. Ничего страшного. Находим PDU, адресованные от веб-сервера к клиенту. Как видим, он сразу показывает нам на схеме момент времени, в который я кликнул. Выбираем нужный конверт.<br/>
<br/>
<strong>2)</strong> Здесь уже видим другую картину. Сверху указывается версия HTTP, код «200 OK», означающий, что отправляется запрашиваемая страница, а не сообщение об ошибке. Далее указывается длина контента, тип файла, а также с какого сервера отправляется. И в самой нижней строке указывается, что передаются какие-то данные. После того, как данные дойдут до компьютера, можно наблюдать, что веб-браузер компьютера открыл страницу.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b7b/066/ca1/b7b066ca1775498388e9274c6b21c85d.PNG"/></div><br/>
Вот так работает протокол HTTP. Давайте рассмотрим его расширенную версию HTTPS. Как мы помним, эта версия поддерживает шифрование и не передает данные в открытом виде. В самом начале, мы включили сервис HTTP и HTTPS. Поэтому все готово, и можно запрашивать страницу. Отличие запроса в том, что перед адресом страницы вместо HTTP, пишем HTTPS.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3ae/0eb/543/3ae0eb5432584e9b983f7d8e781ea33d.PNG"/></div><br/>
Видим надпись, что данные защищены, и мы их прочитать не можем. В принципе это все отличия, которые может показать CPT, но для базового понимания этого достаточно. От себя добавлю, что когда вы переходите на сайт, работающем по HTTPS, в браузере он обозначается в виде замка. Например <img src="https://habrastorage.org/files/066/3ef/0ff/0663ef0ff83646038ac4f255e1f40348.PNG"/><br/>
<br/>
Для тех, кто хочет самостоятельно поковырять и посмотреть, как это работает, могут скачать данную лабу <a href="https://drive.google.com/file/d/0BzKZChrEeV7zaDFENzBnZ0hqRTQ/view?usp=sharing&amp;resourcekey=0-Q60Tngolo3_sjMUnM_iAWg" rel="nofollow noopener noreferrer">здесь</a>.<br/>
<br/>
Мы поговорили про HTTP, и теперь время разобрать протокол DNS. Данный протокол тесно связан с предыдущим протоколом, и скоро вы поймете почему. <br/>
<br/>
<b>II) DNS (Domain Name System)</b>. Система доменных имен. Если говорить в целом, то она хранит информацию о доменах. Например, какому IP адресу соответствует определенное имя. Приведу пример: когда вы открываете свой любимый сайт, то обращаетесь к нему по имени. Но в поля Source Address и Destination Address, которые работают на сетевом уровне (это тема следующей статьи, но я немного забегу вперед), нельзя вставить имя. Там обязательно должен присутствовать именно IP адрес. Вот DNS как раз этим и занимается. Она сообщает, какой IP адрес у запрошенного имени. Вы, к примеру, обращаетесь на google.ru. Ваш компьютер понятия не имеет, кто и что это. Он спрашивает у DNS-сервера: Кто такой google.ru? И сервер отвечает, что google.ru — это 74.125.232.239 (это один из его адресов). И уже после этого, компьютер отправляет запрос на 74.125.232.239. Для пользователя все останется по-прежнему, и в адресной строке он также будет видеть google.ru. <br/>
<br/>
Как обычно, покажу это на картинке<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/278/339/033/27833903316840fabe32e4076c252304.PNG"/></div><br/>
Думаю, что выше описанное понятно, и двигаемся дальше. Служба эта иерархичная. И часто DNS-сервер (на котором запущена эта служба) работает в связке с другими DNS-серверами. Давайте разберем, что это значит. Иерархичность его заключается в том, что он работает с доменами уровня. Работает он от младшего уровня к старшему, слева направо.<br/>
<br/>
Например имя: ru.wikipedia.org. Cамым старшим будет доменное имя «org», а младшим — «ru». Но часто бывают случаи, когда DNS-сервер не может нам рассказать о каком-то доменном имени, и тогда он обращается к старшему DNS-серверу, который отвечает за доменные имена более высокого уровня. Не буду изобретать велосипед и приведу картинку из википедии. Там эта работа проиллюстрирована хорошо.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/cd4/753/406/cd47534066c69df973fe10c28f6612c0.png" data-src="https://habrastorage.org/getpro/habr/post_images/cd4/753/406/cd47534066c69df973fe10c28f6612c0.png"/></div><br/>
Предположим, мы набрали в браузере адрес ru.wikipedia.org. Браузер спрашивает у сервера DNS: «какой IP-адрес у ru.wikipedia.org»? Однако сервер DNS может ничего не знать не только о запрошенном имени, но даже обо всём домене wikipedia.org. В этом случае сервер обращается к корневому серверу — например, 198.41.0.4. Этот сервер сообщает — «У меня нет информации о данном адресе, но я знаю, что 204.74.112.1 является ответственным за зону org.» Тогда сервер DNS направляет свой запрос к 204.74.112.1, но тот отвечает «У меня нет информации о данном сервере, но я знаю, что 207.142.131.234 является ответственным за зону wikipedia.org.» Наконец, тот же запрос отправляется к третьему DNS-серверу и получает ответ — IP-адрес, который и передаётся клиенту — браузеру.<br/>
<br/>
Открываю CPT и показываю, как это работает. Эта и следующие лабораторные работы буду основываться на предыдущей. Поэтому адресация будет такой же. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/15e/2f1/198/15e2f1198ed942d3a508c1f5ea873b5c.PNG"/></div><br/>
Здесь добавлен еще один сервер, который будет выполнять роль DNS-сервера и коммутатор. Когда в сети появляются 3 и более устройств, то для их соединения используют коммутатор.<br/>
<br/>
Займемся настройкой DNS-сервера. Зайдем в «IP Configuration» и пропишем IP адрес с маской.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7ef/db6/bfe/7efdb6bfe36a40d2adb3f0c053c3c7da.PNG"/></div><br/>
<br/>
Теперь зайдем в сервисы и настроим DNS службу. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/0fd/678/c26/0fd678c262d34bf090320f456a4043e7.PNG"/></div><br/>
<strong>1)</strong> В окне «Name» запишем имя, которое хотим привязать к IP адресу. (я написал имя своего будущего сайта, над которым идет работа).<br/>
<strong>2)</strong> В окне «Address», соответственно, IP-адрес, который будет работать в связке с выше написанным именем. (здесь укажем тот же адрес, что и в лабораторной по HTTP — 192.168.1.2).<br/>
<strong>3)</strong> Нажимаем кнопку «Add», чтобы добавить эту запись.<br/>
<strong>4)</strong> Не забываем включить саму службу! <br/>
<br/>
Если все выполнили верно, то картина должна быть такой.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/53f/2d5/b3b/53f2d5b3b3ff42d3b0454790cb6a8df1.PNG"/></div><br/>
Теперь надо в настройках сервера и компьютера указать адрес DNS-сервера.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/4e0/4b3/e33/4e04b3e3377c4893b9b589b8a02a3aad.PNG"/></div><br/>
Настройка DNS-сервера и узлов закончена, и самое время проверить, как это дело работает. Переключаем среду в режим симуляции и попробуем с компьютера зайти на сайт по имени «cisadmin.ru».<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/cdb/5c6/dea/cdb5c6dea4c04253b9cff4c51534808f.PNG"/></div><br/>
И видим, что создаются 2 конверта. Первый — это DNS, а второй — ARP. О ARP мы толком не говорили, так как это тема следующей статьи. Но раз он показал себя, то вкратце расскажу, для чего он. Как мы помним, для обмена между узлами недостаточно IP адреса, так как еще используются MAC-адреса, работающие на канальном уровне. Мы указали компьютеру IP адрес DNS-сервера. Но он не знает, какой у узла с IP-адресом 192.168.1.3 MAC-адрес. Он формирует ARP сообщение и выбрасывает его в сеть. Данный кадр (данные на канальном уровне называются — кадры) является широковещательным, то есть его получат все участники, находящиеся в одной локальной сети (правильно сказать все участники в одном широковещательном домене, но пока мы это не затрагивали, и я не буду грузить вас этим термином). И тот, у кого этот адрес, отправит обратное сообщение и сообщит свой MAC-адрес. Все остальные участники отбросят этот кадр. Смотрим рисунки.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/77c/5d9/200/77c5d92001284a67a3b9b1c4b45fcba1.PNG"/></div><br/>
Вот кадр пришел на коммутатор, и теперь его задача разослать этот кадр на все порты, кроме того, откуда он пришел. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/46c/1f5/2fb/46c1f52fb9104608b7251a7444ed35d2.PNG"/></div><br/>
Кадры были разосланы и наблюдаем следующее. Кадр, который пришел на веб-сервер был отброшен, о чем говорит перечеркнутый конверт. Следовательно, кадр отбрасывается. А DNS-сервер, наоборот, узнал свой адрес и должен сформировать ответ.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b79/5fd/ccf/b795fdccfff248ab9ae798820c724afe.PNG"/></div><br/>
И как видим, был создан ARP-ответ. Давайте немного разберем его.<br/>
<br/>
<strong>1)</strong> MAC-адреса. В Source MAC он записывает свой MAC-адрес, а в Destination MAC (Target MAC) адрес компьютера.<br/>
<strong>2)</strong> В Source IP свой IP адрес, а в Target IP адрес ПК.<br/>
<br/>
Я думаю, здесь все понятно. Если непонятно, то спрашивайте. В следующей статье я более подробно о нем расскажу.<br/>
<br/>
Я нажимаю на «Capture/Forward» и смотрю, что будет дальше происходить.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/a0e/630/afa/a0e630afac134c019eae18178dad5d51.PNG"/></div><br/>
И вижу, что компьютер успешно получил ARP от сервера. Теперь он знает MAC-адрес DNS-сервера, а значит, и как с ним связаться. И сразу решает узнать у него, кто такой «cisadmin.ru». Мы можем открыть эти данные и посмотреть, что он там решил отправить. Открываем «Outbound PDU Details» и спускаемся в самый низ. Видим, что в верхнем поле «NAME» он записал запрашиваемое имя. Жмем кнопку «Capture/Forward» и cмотрим.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/139/8eb/89b/1398eb89b2074923a11826e4b033c313.PNG"/></div><br/>
DNS-сервер получает DNS-запрос. Он лезет в свою таблицу и видит, что такая запись у него присутствует, и формирует ответ. Открываем и видим, что изменилось поле LENGTH и равняется 4. То есть 4 байта. Столько занимает IP адрес. И, соответственно, записывает сам IP-адрес — 192.168.1.2. Это и есть адрес веб-сервера. Двигаюсь дальше.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b0c/a3b/ed5/b0ca3bed59524e86b0e4e28be31f1ba2.PNG"/></div><br/>
Видим, что компьютер получил сообщение от DNS-сервера, о чем свидетельствует галочка на коричневом конверте. И теперь он знает IP адрес веб-сервера. Сразу же он пытается установить TCP сессию, но возникает проблема. Он не знает MAC-адрес веб-сервера и запускает аналогичный ARP запрос, чтобы узнать. Смотрим.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/96b/21b/814/96b21b814d7c4f2f9f6d91670252ae7b.PNG"/></div><br/>
И тут аналогично предыдущему. DNS-сервер понял, что сообщение не для него, и отбрасывает. А веб-сервер узнает свой IP адрес и формирует ARP ответ.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/15d/f18/920/15df189201184436a8863aa41a39b490.PNG"/></div><br/>
Дошел до компьютера ARP ответ. Теперь он знает MAC-адрес веб-сервера и пытается установить TCP сессию. Отправляет он TCP сегмент на 80-й порт. Раз уж протокол TCP снова дал о себе знать, и в следующих протоколах он тоже будет фигурировать, то вкратце объясню зачем он нужен. Как вы помните из первой статьи, я говорил, что он устанавливает соединение. Так вот теперь каждый блок данных, который будет отправлен от сервера компьютеру, будет промаркирован. Это нужно для того, чтобы клиент понимал, все ли данные он получил или какие-то потерялись. И, если какие-то данные потерялись, он сможет запросить их повторно. Потеря блока данных сайта может привести к тому, что сайт перекосит, и он отобразится криво. Но сейчас главное понимать, что TCP располагается на транспортном уровне и работает с портами. Я специально открыл окно, где это написано, чтобы вы постепенно привыкали к этим полям. <br/>
<br/>
Посмотрим, чем ответит компьютеру веб-сервер. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/bea/1cc/90b/bea1cc90b6df4353887913c41fc33fd8.PNG"/></div><br/>
Веб-сервер отправляет компьютеру ответное сообщение, и устанавливается сессия. И, когда все готово, компьютер формирует HTTP и отсылает его веб-серверу. Давайте посмотрим, что изменилось. А изменилась у нас самая последняя строчка. Если раньше там был записан IP адрес веб-сервера, то теперь там красуется доменное имя «cisadmin.ru». Но не забывайте, что доменное имя тут записано только в данных прикладного уровня. IP-адрес никуда не делся. Он располагается на сетевом уровне. Поэтому давайте сразу покажу IP пакет, где представлены эти адреса.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3fd/b04/f4b/3fdb04f4bbe7488abd6bd3dac9428f7e.PNG"/></div><br/>
И как видите, IP адреса на месте.<br/>
<br/>
Далее процесс аналогичен лабораторной по HTTP. Поэтому приведу финальный этап, где по имени «cisadmin.ru» откроется страница, находящаяся на сервере с IP адресом 192.168.1.2.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/85e/98f/c13/85e98fc139a3419fac29ead3b59d356c.PNG"/></div><br/>
<br/>
Соответственно видим, что все прекрасно работает, и сайт открывается по доменному имени. <br/>
И напоследок упомяну об одной очень важной утилите под названием <b>nslookup</b>. Она позволяет обратиться к DNS-серверу и узнать у него информацию о имени или IP-адресе. В CPT эта команда присутствует, и я предлагаю взглянуть на нее.<br/>
<br/>
Кликаем по компьютеру на схеме и на вкладке «Desktop» выбираем «Command Prompt». Это имитация командной строки.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/c9d/57c/a97/c9d57ca9708a49c793a05a511a3541c3.PNG"/></div><br/>
Открывается у нас окошко, подобное cmd в ОС Windows. Можно ввести знак "?" и нажать ENTER. Она покажет список всех доступных команд. Нам нужна команда nslookup. Введем ее и нажмем ENTER.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7c5/380/ad6/7c5380ad65ce41a8861960e65111b884.PNG"/></div><br/>
Открывается сама утилита, о чем свидетельствует знак птички слева. Показывается нам адрес DNS-сервера и его имя. Так как имени нету, то он дублирует туда строку с IP-адресом.<br/>
<br/>
Ну и самое время вписать туда доменное имя и узнать, что он выдаст в ответ.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/158/fc6/917/158fc6917a85474c9f46ae92ed6a33a0.PNG"/></div><br/>
Выдает он имя и адрес, как и предполагалось. В принципе, когда вы обращаетесь на веб-сайт, он сам выполняет эту процедуру. Вы видели этот запрос выше. <br/>
<br/>
Есть еще один файл в каждой ОС, который тесно связан с DNS. Название у него «hosts». Стандартное расположение его в Windows системах «windows\system32\drivers\etc\hosts». А в *nix подобных системах: "/etc/hosts". Делает он то же самое, что и DNS-сервера. И контролируется этот файл администратором компьютера. И самое важное: он имеет приоритет перед DNS-сервером. И, если у вас в файле написано, что сайту habrahabr.ru соответствует IP адрес, который на самом деле соответствует google.ru, то, соответственно, открывать он будет google, а не habrahabr. Этим часто пользуются злоумышленники, когда вносят исправления в этот файл. Приведу скрин этого файла со своего компьютера.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/1ba/123/0c6/1ba1230c60e048cb8f84a6e377944620.PNG"/></div><br/>
Вот так он выглядит. Можете открыть его у себя и поймете, что он точно такой же.<br/>
<br/>
Вот такая интересная служба и протокол. Также как и с HTTP, приведу <a href="https://drive.google.com/file/d/0BzKZChrEeV7zWmg4bVd2NEpaYXM/view?usp=sharing&amp;resourcekey=0-2fnQV-Tmt3dXKGICAgRDRQ" rel="nofollow noopener noreferrer">ссылку</a> на скачивание данной лабы.<br/>
<br/>
А мы двигаемся дальше и разбираем протокол DHCP.<br/>
<br/>
<b>III) DHCP (Dynamic Host Configuration Protocol).</b> Протокол динамической настройки узла. Он позволяет узлам динамически получать IP адреса и другие параметры для корректной работы в сети (основной шлюз, маску подсети, адреса DNS-серверов). От себя скажу, что этот протокол спасает жизнь многим сисадминам по всему миру. Согласитесь, что ходить и вручную прописывать IP параметры каждому узлу, не самое приятное занятие. <br/>
<br/>
При помощи DHCP можно обеспечить полный контроль над IP адресами: создавать отдельные пулы для каждой подсети, выдавать адреса в аренду, резервировать адреса и многое другое.<br/>
<br/>
Работа его очень тяжела для нынешнего понимания. Слишком много пакетов, данных и кадров должно передаться, прежде чем запрошенный адрес будет присвоен компьютеру. <br/>
<br/>
Давайте посмотрим, как он работает на практике.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/45e/837/f4e/45e837f4e42c44349208cc5ecda19f61.PNG"/></div><br/>
И видим, что добавился новый сервер. Конечно можно было все роли отдать одному серверу, но, чтобы вы понимали, как ходят данные, пусть для каждой роли будет отдельный сервер.<br/>
<br/>
Настроим сервер.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/ac7/4e7/309/ac74e7309df74f8ba7f6afc6fe9b7d1b.PNG"/></div><br/>
Присваиваем свободный адрес и маску. Перейдем к роли DHCP.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/4b3/dbc/b24/4b3dbcb246bc4c39a86ee91b6c600eeb.PNG"/></div><br/>
<strong>1)</strong> Выбираем службу DHCP, и тут уже создан стандартный пул. Его удалить нельзя. Только изменить. Можете сами создать несколько пулов и вытворять с ними, что угодно, вплоть до удаления. Но стандартный всегда останется. Нам дополнительные пулы не нужны, поэтому переделаем под себя стандартный.<br/>
<br/>
<strong>2)</strong> Здесь можно добавить адрес шлюза, адрес DNS-сервера. Мы пока не касались вопроса шлюза, поэтому пока не будем его трогать. DNS-сервер у нас есть, и его можно указать. Ну и старт адресов оставим, как есть.<br/>
<br/>
<strong>3)</strong> Не забываем включить сервер!<br/>
<br/>
Переключаем среду в режим симуляции и посмотрим, как компьютер получит адрес. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/092/333/b13/092333b137d94609b273e3323a4da95a.PNG"/></div><br/>
Соответственно переходим в настройки конфигурации и переключаем на DHCP. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5a6/e96/843/5a6e96843b8846e9a84188e4f3128b03.PNG"/></div><br/>
Видим, что создался DHCP-запрос. Давайте пройдемся по каждому его уровню и поверхностно посмотрим, что внутри. <br/>
<br/>
<strong>1)</strong> Протокол канального уровня (Ethernet). В «Source MAC» записывается адрес компьютера. А в «Destination MAC» записан широковещательный адрес (то есть всем).<br/>
<br/>
<strong>2)</strong> Протокол сетевого уровня (IP). В «Source IP» записывается адрес «0.0.0.0». Этот адрес вставляется, когда у запрашиваемого нет адреса. А в «Destination IP» вставляется широковещательный адрес «255.255.255.255».<br/>
 <br/>
Смотрим дальше.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/29e/17f/136/29e17f1365ad40dfaf0706c9a89bfe3e.PNG"/></div><br/>
Посмотрим на поле UDP. Здесь используются порты 67 и 68. Это UDP порты, зарезервированные для DHCP.<br/>
Теперь смотрим на поле DHCP. Здесь все по нулям, и только в поле «CLIENT HARDWARE ADDRESS» записан MAC-адрес компьютера.<br/>
<br/>
Мы знаем, как работает широковещательная рассылка, и посмотрим, как будут реагировать на нее участники сети.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/c27/744/70b/c2774470b70d463699073bb0cc49cefb.PNG"/></div><br/>
И видим, что все кроме DHCP-сервера отбросили данные. <br/>
<br/>
Дальше работу протокола расскажу на словах, потому что очень много пакетов и кадров будет сформировано, перед тем как DHCP-сервер выдаст адрес. Как только он получит запрос, он начинает искать свободный адрес в базе. Как только адрес найден, начинается следующий этап — это проверка адреса. Ведь, как мы помним, адрес можно назначить и вручную, в обход DHCP-сервера. Такое часто происходит, и даже в корпоративной среде находятся умники, которые вручную вписывают адрес. Для этого DHCP-сервер перед выдачей этого адреса, отправляет ICMP сообщение или ping.<br/>
<br/>
Мы пока не говорили и об этом. Поэтому заранее скажу, что утилита ping позволяет проверить доступность узла по IP-адресу. И, если на ping DHCP-серверу кто-то ответит, то значит адрес занят и всю процедуру он будет повторять, но с другим IP-адресом. Но это тоже не самое толковое решение. Сами понимаете, что если компьютер со статически назначенным адресом будет выключен, то он не ответит на ping DHCP-сервера, и, соответственно, DHCP решит, что адрес не занят и присвоит его какому-то узлу. Но, как только компьютер включится, появится 2 компьютера с одинаковыми IP-адресами. И тут могут начаться дикие чудеса. Современные системы уже научились правильно реагировать на это, но все же не стоит этого допускать и важно следить за этим. Я пропущу в CPT все эти данные, иначе получится диафильм из однообразных картинок. Я прикреплю эту лабу ниже, и вы сможете сами в этом убедиться. Приведу только конечный итог, который сформирует DHCP-сервер.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5de/716/645/5de716645fc242d2b9781156768390ed.PNG"/></div><br/>
И видим, что в поле "«YOUR» CLIENT ADDRESS" добавился адрес 192.168.1.1. Это адрес, который DHCP-сервер предлагает компьютеру. В поле «SERVER ADDRESS» DHCP-сервер добавляет свой адрес, чтобы компьютер знал, кто предлагает ему адрес. В поле «CLIENT HARDWARE ADDRESS» добавляется MAC-адрес компьютера (то есть того, кто запросил). И в самом низу представлена опция «DHCP Domain Name Server Option». Сюда записывается адрес DNS-сервера, который мы указали в настройках сервиса DHCP.<br/>
<br/>
Посмотрим, как компьютер получит адрес.<br/>
<br/>
<img src="https://habrastorage.org/files/b06/021/b41/b06021b415ee4c6eb373d6fd7606e27c.PNG"/><br/>
И наблюдаем сообщение «DHCP Request Successful». Что означает, что данные успешно получены, о чем свидетельствуют заполненные поля ниже.<br/>
<br/>
Вот так работает протокол DHCP. Как обещал, <a href="https://drive.google.com/file/d/0BzKZChrEeV7zdTZRc3pZb0VQWlE/view?usp=sharing&amp;resourcekey=0-L3Q1F08utcGyqmL8LQzAbQ" rel="nofollow noopener noreferrer">ссылка</a> для скачивания.<br/>
<br/>
Переходим дальше, и дошла очередь до протоколов POP3 и SMTP. Я специально упомянул эти протоколы вместе и сейчас объясню, почему. <br/>
<br/>
<b>IV) POP3 (англ. Post Office Protocol Version 3).</b> Протокол почтового отделения версии 3. Протокол, который используют клиенты для получения почтовых писем с сервера. Версии 1-ая и 2-ая устарели и в нынешнее время не используются. Работает он по принципу «загрузи и удали». Что это значит? Это значит, что клиент заходит на сервер и смотрит, есть ли для него письмо. И если оно присутствует, он загружает его к себе и ставит отметку об удалении на сервере. Хорошо это или плохо, вопрос спорный. Кто-то утверждает, что это хорошо, так как сервер не бывает перегружен ненужными письмами. Я считаю иначе. Во-первых современная инфраструктура позволяет хранить большой объем писем, а во-вторых часто случается, что пользователь удаляет или теряет важное письмо, и найти его потом становится трудно. Хотя, стоит упомянуть, что некоторые клиенты можно настроить так, чтобы они не удаляли письма с сервера. Однако при стандартных настройках они удаляют письма с сервера. Поэтому будьте внимательнее. Порт, который он прослушивает — 110. Довольно известный номер порта, поэтому возьмите себе на заметку. Так же как и у протокола HTTP, у него есть расширенная версия — POP3S. При помощи дополнительного криптографического протокола, как SSL, шифруется содержимое, и письма передаются в защищенном виде. POP3S использует 995 порт. Мы обязательно рассмотрим протокол POP3 на практике, после того, как узнаем про протокол SMTP.<br/>
<br/>
Стоит упомянуть про аналог POP3. Это протокол <b>IMAP (англ. Internet Message Access Protocol).</b> Протокол доступа к электронной почте. Он более умный и посложнее, чем POP3. Но главное их различие в том, что клиент, заходя на сервер, не удаляет почту, а копирует ее. Таким образом, у клиента отображается копия почтового ящика, который хранится на почтовом сервере. И если клиент у себя удаляет какое-либо письмо, то оно удаляется только у него. На сервере оригинал остается целым. Слушает он 143 порт. Рассмотреть IMAP подробно в CPT не получится, так как полноценно он там не реализован. <br/>
<br/>
<b>V) SMTP (англ. Simple Mail Transfer Protocol).</b> Простой протокол передачи почты. Используется он, как вы поняли, для передачи почты на почтовый сервер. Вот почему мы изучаем POP3 и SMTP параллельно. Использует он 25 порт. Это тоже важно помнить.<br/>
<br/>
Также важно помнить, что все почтовые протоколы работают по TCP-соединению. То есть с установлением соединения. Здесь важно получить каждый пакет в целости и сохранности. <br/>
<br/>
Думаю, с теоретической точки зрения все понятно. Давайте перейдем к практике и посмотрим, как это работает.<br/>
<br/>
Открою я прошлую лабораторную работу по DHCP и слегка ее модернизирую.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/fe7/e4a/56e/fe7e4a56ebf645b482bc9a7348cb10ff.PNG"/></div><br/>
Убрал я HTTP-сервер и вместо него добавил компьютер рабочего, и назвал WORKER-PC. Присвою ему IP-адрес, который был у HTTP-сервера. То есть 192.168.1.2. Старый компьютер переименовал в DIRECTOR-PC. DNS-сервер я оставил. Он нам в этой лабе еще понадобится. Сервер DHCP переименовал в Mail-Server. И давайте его настроим.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/c76/40a/5bd/c7640a5bd10c450e9ec2d5eebfa11f82.PNG"/></div><br/>
Адрес я не менял, и он остался от прошлой лабы. Пускай таким и остается. Переходим в службы и находим «EMAIL».<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b8c/013/7df/b8c0137dff0a4f8ab3916150355d8ee6.PNG"/></div><br/>
<strong>1)</strong> В поле «Domain Name» надо записать имя домена. Это то, что будет писаться после знака "@". Обязательное требование. Любая почта записывается в таком формате — логин@домен. И нажимаем кнопку «Set». Я ее уже нажал, поэтому она не активна, но если внести изменения в поле ввода доменного имени, то она снова станет активной.<br/>
<br/>
<strong>2)</strong> И создадим пользователей. В поле «User» запишем первого пользователя. Это будет «Director». И зададим пароль «123». И нажимаем на знак "+", чтобы добавить его в базу. Аналогично создадим второго пользователя. Это будет «Worker» с таким же паролем «123».<br/>
<br/>
Создание пользователей закончено, и наблюдаем следующую картину.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/a96/014/4d7/a960144d78ae4a6e9c26fe0aa25c12d8.PNG"/></div><br/>
<strong>1)</strong> Видим в базе список созданных пользователей. Их можно удалять, добавлять и менять пароли при помощи кнопок справа.<br/>
<strong>2)</strong> Не забываем включить службы POP3 и SMTP. Они по умолчанию включены, но проверка лишней не будет.<br/>
<br/>
На этом настройка на стороне сервера заканчивается, и теперь перейдем к настройке на стороне клиентов. Начнем с компьютера директора. Открываем вкладку «Desktop» и выбираем Email.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/116/cd2/6b8/116cd26b865049f994c2fb3436452823.PNG"/></div><br/>
После этого сразу откроется окно настройки.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/89a/636/bea/89a636bea5944e92a13c9bf60cce0a94.PNG"/></div><br/>
<strong>1)</strong> В поле «Your Name» пишем любое имя. Я напишу Director.<br/>
<strong>2)</strong> В поле «Email Address» пишем почтовый ящик. Для директора — это director@cisadmin.ru.<br/>
<strong>3)</strong> В поля «Incoming Mail Server» и «Outgoing Mail Server» записываем адрес почтового сервера (192.168.1.4)<br/>
<strong>4)</strong> В поле «User Name» пишем сам логин. То есть Director и соответственно пароль 123.<br/>
Нажимаем кнопку «Save», и перед нами открывается почтовый клиент. CPT назвал его почтовым обозревателем.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5fd/ea1/4e5/5fdea14e58d7480da5f8133c8e11895f.PNG"/></div><br/>
<br/>
Аналогичная настройка будет на компьютере рабочего. Привожу скрин.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/6a7/12a/9e7/6a712a9e79534eee8ec72d568a45826a.PNG"/></div><br/>
<br/>
Теперь самое время посмотреть, как работает почта. Давайте сначала посмотрим, как она работает в режиме реального времени, а после разберем подробнее в режиме симуляции.<br/>
<br/>
Открываем почтовый клиент на компьютере директора и создадим письмо.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3f3/45c/27d/3f345c27d6a14f4f9af753ff8f1ee8ca.PNG"/></div><br/>
Жмем на кнопу «Compose», и перед нами открывается привычное окно.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b3a/ac2/cad/b3aac2cad6654f4bbfdbc04b3a3a0701.PNG"/></div><br/>
Здесь все как обычно. Пишем кому отправляем, тему письма, сам текст письма и нажимаем кнопку «Send».<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/596/81d/aca/59681dacacfd4999ad888f42c31b4b06.PNG"/></div><br/>
Видим следующее сообщение о том, что отправка завершена успешно. Замечательно! Теперь посмотрим, как письмо будет доставлено рабочему.<br/>
<br/>
Открываем почтовый клиент на компьютере рабочего.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/4c8/3bc/8b3/4c83bc8b33be4ccdb4a992f05db423cf.PNG"/></div><br/>
И видим, что письма нету. А все потому, что клиент в CPT не поддерживает автоматическое обновление и приходится это делать вручную. Нажимаем кнопку «Receive».<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/cc2/ff0/8d0/cc2ff08d0af245579c1e687ceddd474e.PNG"/></div><br/>
Видим появившееся письмо и сообщение об успешном получении. Откроем письмо и посмотрим, не побилось ли.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/dc4/468/02d/dc446802defb410f8733e892eb5ffb89.PNG"/></div><br/>
И да, письмо, действительно, дошло целым и невредимым. Ответим на это письмо и заодно проверим, что письма ходят в обе стороны. Нажимаю я кнопку «Reply» и пишу ответ.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/4e6/53e/c88/4e653ec889774ead8a38e3c6dbbca179.PNG"/></div><br/>
Отправляю письмо и перехожу к компьютеру директора. И, соответственно, жму кнопку «Receive», чтобы обновить почту.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/bf3/e5e/1a1/bf3e5e1a1588479b9a5a95f3551338e6.PNG"/></div><br/>
Появилось письмо, а ниже и сообщение об успешном получении.<br/>
<br/>
Открываем письмо, чтобы до конца удостовериться.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5b1/898/938/5b18989384e245c7a7e9709f06aa2ef1.PNG"/></div><br/>
Письмо дошло, а значит все работает.<br/>
<br/>
Давайте разберем поподробнее. Переключим среду в режим симуляции и отправим письмо. Не буду я создавать что-то новое, а просто отвечу на выше полученное письмо.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5b2/6c8/8cb/5b26c88cbac74c039a2598f868c7d81d.PNG"/></div><br/>
Как я говорил ранее, все почтовые протоколы работают с TCP. А это значит, что перед тем, как начнет работать почтовый протокол, а в данном случае протокол SMTP, должно установиться предварительное соединение между компьютером и сервером. Это мы сейчас и наблюдаем.<br/>
<br/>
Сейчас процесс установления соединения нас мало интересует. Мы сейчас говорим про почтовые протоколы, и поэтому я пропущу этот процесс и буду ждать появления SMTP.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e5/c89/dd8/8e5c89dd89214ee08a22b6d4a90e521a.PNG"/></div><br/>
<strong>1)</strong> Появился долгожданный SMTP, о чем свидетельствует запись в панели симуляции, и откроем их. Обратим внимания на TCP-порты, чтобы удостовериться, что это он. И видим, что в «Destination Port» стоит 25 номер. А в «Source Port» записан динамически придуманный порт, чтобы сервер мог идентифицировать клиента. Все правильно.<br/>
<br/>
<strong>2)</strong> Смотрим ниже на данные SMTP, и здесь нет ничего интересного. CPT показывает нам его, как обычный блок данных.<br/>
<br/>
Дальше он передает эти данные серверу. Посмотрим, что будет происходить дальше.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/312/6fa/49f/3126fa49fced441c910ca4fa10d0407a.PNG"/></div><br/>
Сервер, получив данные от компьютера, формирует ответное сообщение. Обратите внимание на изменения. Номера, которые присутствовали ранее, поменялись местами, а именно «Source Port» и «Destination Port». Теперь источником является сервер, а назначением — компьютер. Это сообщение о доставке письма серверу.<br/>
<br/>
После этого работа протокола SMTP закончена, и компьютер может начать закрывать TCP-сессию. Чем он и займется.<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/309/f8c/49e/309f8c49ea2844daa202ec0681e57d09.PNG"/></div><br/>
<br/>
Теперь когда письмо отправлено, и мы знаем, что оно лежит на сервере, попробуем получить это письмо. Открываем компьютер рабочего и жмем кнопку «Receive». <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/70b/ea2/45c/70bea245c55b498da70ff04577d9912e.PNG"/></div><br/>
Как и с SMTP, в POP3 тоже создается TCP-сессия. Посмотрим на номера портов. В «Destination Port» стоит 110 номер порта. Это и есть стандартный номер порта для протокола POP3. В «Source Port» стоит порт 1028. <br/>
<br/>
Смотрим дальше и ждем выхода POP3.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/be7/a9f/d4f/be7a9fd4ff934b93bff3ad4e23412d2c.PNG"/></div><br/>
Вот он появился и наблюдаем, что в поле POP3 такая же картина, что и в SMTP, т.е. все то, что и так было понятно.<br/>
<br/>
Дальше он отправляет этот запрос на сервер, и сервер должен ответить письмом, если оно там есть. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/a8b/7d5/c6c/a8b7d5c6c7654cf6ae22329feb8025af.PNG"/></div><br/>
Мы знаем, что оно там есть и наблюдаем, как сервер формирует ответное сообщение. И также как с SMTP, он меняет местами порты отправления и назначения. На прикладном уровне запакованы какие-то POP3 данные. Это и есть само письмо.<br/>
<br/>
Как только данные попадут на компьютер, они сразу должны высветиться в почтовом клиенте. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f8e/3e8/859/f8e3e88592d04c84be65689c9a32a1be.PNG"/></div><br/>
И как только данные получены, о чем здесь свидетельствует галочка на фиолетовом пакете, письмо сразу же высвечивается в клиенте. Дальше, как и в SMTP, будет закрытие TCP-сессии. <br/>
<br/>
Привожу <a href="https://drive.google.com/file/d/0BzKZChrEeV7zYzRUZ1Z5MFJDZVk/view?usp=sharing&amp;resourcekey=0-PxaQEfUe7jyCpT6Xdk4Lwg" rel="nofollow noopener noreferrer">ссылку</a> на скачивание этой лабы.<br/>
<br/>
И еще, что я хотел бы показать в дополнение к почтовым протоколам — это роль DNS-сервера. Вы видели, что при совершении какого-либо действия в почтовом клиенте, он внизу нам писал IP-адрес сервера. Но есть возможность указывать не IP-адрес, а доменное имя. Давайте посмотрим, как это сделать. <br/>
<br/>
Ну и самое логичное, что приходит в голову — это то, что у нас есть почтовый сервер с адресом 192.168.1.4. И с этим адресом у нас будет работать доменное имя. Соответственно заходим на DNS-сервер и сопоставим этому адресу имя.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/0f6/34f/753/0f634f753aca48f28937de8f8e330440.PNG"/></div><div style="text-align:center;"><img src="https://habrastorage.org/files/249/692/db9/249692db9e3049618c15fc44b3905fcb.PNG"/></div><br/>
<br/>
Настройка на стороне DNS-сервера закончена, и осталось изменить 2 строчки в почтовых клиентах компьютеров. Открываем клиент на компьютере директора.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5d0/905/979/5d0905979fa64d37ae74c0501aa57dac.PNG"/></div><br/>
И нажимаем на кнопку «Configure Mail».<br/>
<br/>
Открывается окно, которое мы видели на этапе начальной конфигурации клиента.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/306/f3a/7e7/306f3a7e74ae40e2941af306d322e071.PNG"/></div><br/>
Здесь надо поменять строки «Incoming Mail Server» и «Outgoing Mail Server». Вместо IP-адреса записываем доменное имя и нажимаем кнопку «Save».<br/>
<br/>
То же самое проделываем и на компьютере рабочего. Не буду давать лишних подробностей, просто приведу скрин.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/a4d/564/75f/a4d56475f4cc430a9c256498fd6609e8.PNG"/></div><br/>
<br/>
Сразу попробуем написать письмо директору и отправить.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/2af/1df/c11/2af1dfc1123246ffb5370d2ad81c6691.PNG"/></div><br/>
И после нажатия кнопки «Send», наблюдаем следующее.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/598/152/3ea/5981523ea9c447c0b93dd09acef8e7cb.PNG"/></div><br/>
Внизу появляется сообщение о том, что он спросил у DNS-сервера адрес, и тот ему выдал IP-адрес почтового сервера. Отправка прошла успешно.<br/>
<br/>
Теперь зайдем на компьютер директора и нажмем на кнопку «Receive».<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/bb4/b48/f4a/bb4b48f4afd340f9bbcc49e21838adc3.PNG"/></div><br/>
Получаем письмо, а надпись ниже свидетельствует об успешной доставке. Вот еще один пример использования DNS-сервера в сети. <br/>
<br/>
Разобрали мы почтовые протоколы. И переходим к разбору следующего протокола.<br/>
<br/>
<b>VI) Telnet (от англ. terminal network).</b> Если переводить дословно, то это сетевой терминал. Основы этого протокола были заложены давным давно, и до сих пор он не теряет своей актуальности. Применяется он для отображения текстового интерфейса, а также для управления ОС. Очень полезный протокол, и каждый сетевой инженер обязан уметь работать с ним. Объясню почему. Каждое сетевое устройство, интерфейс которого представляет собой командную строку, настраивается либо при помощи специального консольного кабеля, либо через виртуальные терминалы, в который и входит протокол Telnet. И, если консольный кабель требует нахождения специалиста рядом с настраиваемым оборудованием, то настройка при помощи виртуальных терминалов, а в данном случае Telnet, не ограничивает специалиста в расстоянии. Можно находиться в другой комнате, здании, городе и все равно иметь возможность доступа к оборудованию. Я считаю это огромным плюсом. Из минусов данного протокола отмечу, что он фактически не защищенный и все передается в открытом виде. Использует он 23 порт. А самые популярные дистрибутивы, которые работают с этим протоколом — это Putty, Kitty, XShell и т.д. Я думаю закрепим его работу на практике. <br/>
<br/>
Использовать Telnet мы будем для доступа к коммутатору Cisco 2960. Он, как и все Cisco устройства, использует разработанную компанией Cisco операционную систему IOS. А интерфейс командной строки называется CLI (Command Line Interface). Давайте для начала настроим коммутатор. Повесим на него IP-адрес, так как без него мы не сможем попасть на коммутатор и разрешим доступ по Telnet. Я не буду приводить скриншоты, так как там нет графики. Просто дам список вводимых команд и поясню для чего они.<br/>
<br/>
Switch>enable — <i>переход в привилегированный режим. Отсюда доступно большинство команд.</i><br/>
<br/>
Switch#configure terminal — <i>переход в режим глобальной конфигурации. В этом режиме возможен ввод<br/>
команд, позволяющих конфигурировать общие характеристики системы. Из режима глобальной конфигурации можно перейти во множество режимов конфигурации, специфических для<br/>
конкретного протокола или функции.</i><br/>
<br/>
Switch(config)#username admin secret cisco — <i>создаем пользователя с именем admin и паролем cisco.</i><br/>
<br/>
Switch(config)#interface vlan 1 — <i>переходим в виртуальный интерфейс и повесим на него IP-адрес. Здесь прелесть заключается в том, что не важно, на каком именно из 24-х портов он будет висеть. Нам главное, чтобы просто с какого-либо порта был доступ до него.</i><br/>
<br/>
Switch(config-if)#ip address 192.168.1.254 255.255.255.0 — <i>присваиваем последний адрес 192.168.1.254 с маской 255.255.255.0</i><br/>
<br/>
Switch(config-if)#no shutdown — <i>по умолчанию интерфейс выключен, поэтому включаем его. В IOS 90% команд отменяются или выключаются путем приписывания перед командой «no».</i><br/>
<br/>
Switch(config)#line vty 0 15 — <i>переходим в настройки виртуальных линий, где как раз живет Telnet. От 0 до 15 означает, что применяем это для всех линий. Всего можно установить на нем до 16 одновременных соединений.</i><br/>
<br/>
Switch(config-line)#transport input all — <i>и разрешаем соединение для всех протоколов. Я специально настроил для всех протоколов, так как чуть позже будет рассматриваться другой протокол и лезть сюда ради одной команды не считаю разумным.</i><br/>
<br/>
Switch(config-line)#login local — <i>указываем, что учетная запись локальная, и он будет проверять ее с той, что мы создали.</i><br/>
<br/>
Switch#copy running-config startup-config — <i>обязательно сохраняем конфигурацию. Иначе после перезагрузки коммутатора все сбросится.</i><br/>
<br/>
Итак коммутатор настроен. Давайте подключимся к нему c рабочего компьютера. Открываем командную строку. Мы ее открывали, когда рассматривали nslookup. И пишем следующее.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/1eb/872/734/1eb8727341704bb89d6c2c0bd2a3035f.PNG"/></div><br/>
То есть команда telnet и адрес, куда подсоединиться.<br/>
<br/>
Если все верно, то открывается следующее окно с запросом логина и пароля.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b0b/7b2/c0f/b0b7b2c0fb4e44f7b22661bb99eb6d69.PNG"/></div><br/>
Соответственно пишем логин:admin и пароль:cisco (мы создавали его на коммутаторе).<br/>
<br/>
И он сразу пускает нас на коммутатор. Для проверки проверим доступность компьютера директора, при помощи команды ping.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/4ad/467/0e1/4ad4670e14924ce4a154bdfb2dcd096d.PNG"/></div><br/>
Ping успешен. Надеюсь, понятно, что проверка доступности осуществляется не с компьютера рабочего, а с коммутатора. Компьютер здесь является управляющим устройством и все. Рассматривать его в режиме симуляции я не буду. Он работает точно так же, как и почтовые протоколы, то есть создается TCP-сессия, и, после установления соединения, начинает работать Telnet. Как только он отрабатывает, он начинает разрывать соединение. Тут все просто. Привожу <a href="https://drive.google.com/file/d/0BzKZChrEeV7zajZzYkhTVjc3c00/view?usp=sharing&amp;resourcekey=0-yhn-YN2eEALrf4xSQjq7mw" rel="nofollow noopener noreferrer">ссылку</a> на скачивание.<br/>
<br/>
Давайте теперь разберем протокол SSH.<br/>
<br/>
<b>VII) SSH (англ. Secure Shell).</b> В переводе с английского — безопасная оболочка. Как и Telnet позволяет управлять ОС. Отличие его в том, что он шифрует весь трафик и передаваемые пароли. Шифруется при помощи алгоритма <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%94%D0%B8%D1%84%D1%84%D0%B8_%E2%80%94_%D0%A5%D0%B5%D0%BB%D0%BB%D0%BC%D0%B0%D0%BD%D0%B0" rel="nofollow noopener noreferrer">Диффи-Хеллмана</a>. Кому интересно почитайте. Практически все современные ОС системы умеют работать с этим протоколом. Если у вас стоит выбор, какой протокол применять, то используйте SSH. Сначала немного помучаетесь в настройке, и многое будет непонятно, но со временем в голове уляжется. Главное запомните сейчас, что самое главное отличие SSH от Telnet — это то, что SSH шифрует трафик, а Telnet нет. Я думаю пора перейти к практике и посмотреть, как это работает. Подключаться и управлять мы будем тем же коммутатором. Давайте попробуем подключиться по SSH с компьютера директора к коммутатору.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7fe/41c/fbb/7fe41cfbb115427c8bee15f2681f7929.PNG"/></div><br/>
Здесь синтаксис команды немного другой, нежели при подключении по Telnet. Пишем ssh с ключом l, после набираем логин (у нас это admin) и адрес, куда подключаемся (192.168.1.254). Завершаем это дело клавишей ENTER. Выдается сообщение, что соединение было закрыто внешним хостом. То есть коммутатор закрыл соединение. Все потому, что не были созданы ключи, которые работают с шифрованием. Зайду на коммутатор и настрою его для корректной работы по SSH.<br/>
<br/>
Switch(config)#hostname SW1 — <i>меняем имя коммутатора. С этим стандартным именем нельзя прописать домен, который нужен для генерации ключей.</i><br/>
<br/>
SW1(config)#ip domain-name cisadmin.ru — <i>прописываем домен.</i><br/>
<br/>
SW1(config)#crypto key generate rsa — <i>генерируем RSA ключи.</i><br/>
<br/>
The name for the keys will be: SW1.cisadmin.ru<br/>
Choose the size of the key modulus in the range of 360 to 2048 for your<br/>
 General Purpose Keys. Choosing a key modulus greater than 512 may take<br/>
 a few minutes.<br/>
<br/>
How many bits in the modulus [512]: 1024 — <i>Указываем размер ключа. По умолчанию предлагается 512, но я введу 1024.</i><br/>
% Generating 1024 bit RSA keys, keys will be non-exportable...[OK]<br/>
Выходит сообщение о удачной генерации ключей.<br/>
<br/>
Настройка завершена, и попробуем еще раз подключиться к коммутатору.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/db5/eea/157/db5eea157c274d17b3fc5df6a21f7b68.PNG"/></div><br/>
И уже выдается другое сообщение, с запросом на ввод пароля. Вводим пароль «cisco» и оказываемся на коммутаторе.<br/>
<br/>
Осталось проверить работу. Я воспользуюсь командой ping и проверю доступность рабочего компьютера.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/385/82b/20e/38582b20eb4541e093957dcb348309ba.PNG"/></div><br/>
И убедился, что все прекрасно работает. Привожу <a href="https://drive.google.com/file/d/0BzKZChrEeV7zaW8yQjhubFpLLUU/view?usp=sharing&amp;resourcekey=0-wEKr8HoTJjXRf9t8ebnlVQ" rel="nofollow noopener noreferrer">ссылку</a>, чтобы убедились и вы.<br/>
<br/>
А я перехожу к следующему протоколу. <br/>
<br/>
<b>VIII) FTP (англ. File Transfer Protocol).</b> Протокол передачи файлов. Думаю из названия протокола ясно, что он передает файлы. Очень древний протокол, вышедший в начале 70-х годов. Появился он еще до HTTP и стека TCP/IP. Как работал раньше, так и сейчас работает по «клиент-сервер» модели. То есть, присутствует инициатор соединения и тот, кто его слушает. Есть несколько модификаций, которые поддерживают шифрование, туннелирование и так далее. Раньше с этим протоколом работали разные консольные утилиты, у которых не было графики и работали они, при помощи ввода определенных команд. В нынешнее время присутствуют и графические программы. Самой популярной и простой является Filezilla. В CPT реализован только консольный метод. <br/>
<br/>
Переходим к практике. За основу я возьму предыдущую лабораторку и почтовый сервер заменю FTP-сервером.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b38/921/bff/b38921bffe2b4ec8a0c9de56f6d3f3b7.PNG"/></div><br/>
В принципе схема аналогична предыдущей. <br/>
<br/>
Откроем FTP-сервер и перейдем в сервис FTP. <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/386/8ec/c22/3868ecc22eaa4bfb9633aaa114df642a.PNG"/></div><br/>
По умолчанию служба включена, но лучше проверить. <br/>
<br/>
<strong>1)</strong> Цифрой 1 я отметил учетку, которая по умолчанию была здесь создана. Это стандартная учетная запись с логином «cisco» и таким же паролем. В правой колонке видим «Permission» — это права доступа. И видим, что данная учетка имеет все права. В тестовой среде нам как раз это и надо, но, работая в компании, всегда следите за правами каждой учетки.<br/>
<br/>
<strong>2)</strong> Цифрой 2 отмечено хранилище FTP. Здесь в основном прошивки для цисковских устройств. <br/>
<br/>
Сервис настроен и раз все так прекрасно, попробуем с ним поработать. Но для начала создам текстовый файл на компьютере директора, который потом выкачаю на FTP-сервер. <br/>
<br/>
Открываю компьютер директора и выбираю «Text Editor». Это аналог блокнота в ОС Windows.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5b4/0d7/274/5b40d7274cda467cbe9b8b7ef532eedb.PNG"/></div><br/>
Напишу туда текст и сохраню его.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/83c/2d0/b44/83c2d0b448dd410c9ab071531a38c44c.PNG"/></div><br/>
<br/>
Теперь попробуем залить этот файл на FTP-сервер. Открываем командную строку и пишем<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f9b/ce4/929/f9bce49295a74ed0b6eebe7c2a9b5af7.PNG"/></div><br/>
То есть, как помним ранее, в начале пишется используемый протокол, а потом следует адрес. Далее, после соединения, спрашивается логин (вводим cisco) и пароль (тоже cisco). И после аутентификации попадаем на сам FTP-сервер. Список доступных команд можно проверить командой "?". <br/>
<br/>
Чтобы что-то залить, используется команда «put», а скачать команда «get». Заливаем наш файл.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7c3/118/5d4/7c31185d428d499f99c4d8d507047033.PNG"/></div><br/>
Ввел я команду «put» и название файла, которое хочу скопировать. И показывает он нам сообщение, что все скопировано. Файл весит 20 байтов, а скорость передачи 487 байтов в секунду. Далее ввел команду «dir», чтобы проверить содержимое сервера. И засветился на нем файл message.txt под 17 номером. <br/>
<br/>
Осталось дело за малым. Это скачать файл на компьютер рабочего. Открываю я WORKER-PC и захожу в командную строку.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/d96/059/80d/d9605980d33b4acd84f4b62be988897d.PNG"/></div><br/>
Выполняю я практически те же действия, что и ранее. За исключением команды «get», а не «put». Видим, что файл скачен. Еще я ввел команду «dir», чтобы показать, что при скачивании файла, оригинал не удаляется. Скачивается его копия.<br/>
<br/>
И раз он скачал файл, то он должен появиться на компьютере. Открываю «Text Editor» и нажимаю File->Open.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/bce/b8b/d08/bceb8bd08f9d447cb3aa9ea603c581c3.PNG"/></div><br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/81c/1d7/69f/81c1d769f2284d8e96ec63a2a8e1b0c3.PNG"/></div><br/>
Вижу, что файл действительно присутствует и пробую его открыть.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/88d/cf9/8be/88dcf98be8af42ad98e95a83b9fb112d.PNG"/></div><br/>
Файл пришел целым. Весь текст присутствует. <br/>
<br/>
Не буду повторно засорять вам голову, как это работает. Потому что работает оно точно так же, как и почтовые протоколы, Telnet, SSH и так далее. То есть создается TCP-сессия, и начинается передача/скачивание файла. Приведу только структуру его.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/e84/2db/319/e842db31941e4c669ae38b6782091a2e.PNG"/></div><br/>
В TCP обращаем внимание на номер порта. Это 21 порт (стандартный порт FTP). И в поле данных FTP обозначено, что это какие-то двоичные данные.<br/>
<br/>
Вот так в принципе работает всемирно известный протокол. Более расширенные версии здесь не поддерживаются, но работают они практически так же. Вот <a href="https://drive.google.com/file/d/0BzKZChrEeV7zTjNjR1NCNll3UkU/view?usp=sharing&amp;resourcekey=0-x3MQLQTc2c_wDPjnAt75gA" rel="nofollow noopener noreferrer">ссылка</a> на лабораторку.<br/>
<br/>
И последний протокол, который остался — это TFTP.<br/>
<br/>
<b>IX) TFTP (англ. Trivial File Transfer Protocol).</b> Простой протокол передачи файлов. Придумали его в 80-х годах. Хоть FTP был достаточно популярным, не все его функции были нужны для решения простых задач. И был придуман его простой аналог. Он работает по UDP, то есть не требует установления соединения. Также он не требует аутентификации и авторизации. Достаточно знать его IP-адрес и самому его иметь. Это конечно не безопасно, так как адрес можно подделать. Но когда нужен простой протокол и не требуется авторизация, выбор падает на него. Очень плотно с ним работает цисковское оборудование, для копирования образа или скачивания на flash-память.<br/>
<br/>
Ничто не учит лучше, чем практика. Поэтому переходим к ней. Чудесным образом я обнаружил, что компьютеры в CPT не умеют работать с TFTP. Хорошо, что с цисковского оборудования не выпилили эту функцию. Поэтому будем учиться на нашем любимом коммутаторе. Схема остается такой же. Просто на FTP-сервере я включу сервис TFTP.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7d5/3ed/61f/7d53ed61fb184fb3a98601c3ad0682a6.PNG"/></div><br/>
Вот так он выглядит. В базе куча разных прошивок для многих устройств.<br/>
<br/>
Перейдем к коммутатору.<br/>
<br/>
SW1#dir — <i> команда вывода содержимого файловой системы</i><br/>
Directory of flash:/<br/>
<br/>
1 -rw- 4414921  c2960-lanbase-mz.122-25.FX.bin<br/>
 9 -rw- 1168  config.text<br/>
<br/>
64016384 bytes total (59600295 bytes free)<br/>
<br/>
У нас есть файл config.text. Попробуем его залить на TFTP — сервер.<br/>
<br/>
SW1#copy flash: tftp: — <i>то есть указываем откуда, а потом куда. Здесь это с flash-памяти на tftp-сервер</i><br/>
<br/>
Source filename []? config.text — <i>здесь он спрашивает имя файла, которое надо скопировать.</i><br/>
<br/>
Address or name of remote host []? 192.168.1.4 — <i>указываем куда скопировать.</i><br/>
<br/>
Destination filename [config.text]? — <i>и тут надо указать, под каким именем сохранить его на сервере. По умолчанию он предлагает сохранить его с тем же названием.И, если нажать клавишу ENTER, он выберет имя по умолчанию. Меня это устраивает, и я оставлю его таким же.</i><br/>
<br/>
Writing config.text....!!!<br/>
[OK — 1168 bytes]<br/>
<br/>
1168 bytes copied in 3.048 secs (383 bytes/sec)<br/>
<br/>
И в заключительном сообщении он показывает, что все успешно скопировалось. Перейдем на TFTP-сервер и проверим.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/d11/a62/f1f/d11a62f1fecf49cf8590cfc4b3aa0b38.PNG"/></div><br/>
И вижу, что действительно он там присутствует. Значит коммутатор меня не обманул.<br/>
<br/>
Теперь попробуем что-нибудь скачать с сервера на коммутатор.<br/>
<br/>
SW1#copy tftp: flash: — <i>здесь пишем наоборот. Сначала tftp, а потом flash</i><br/>
<br/>
Address or name of remote host []? 192.168.1.4 — <i> адрес TFTP-сервера</i><br/>
<br/>
Далее он спросит, что скопировать. Я не помню точное название прошивки и открою TFTP, чтобы посмотреть.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/files/560/fab/660/560fab66079645f7a1183f5e55bbf817.PNG"/></div><br/>
Записываю название<br/>
Source filename []? c2960-lanbasek9-mz.150-2.SE4.bin<br/>
<br/>
Destination filename [c2960-lanbasek9-mz.150-2.SE4.bin]? — <i>здесь он спрашивает, как назвать его на самом коммутаторе. Я нажму ENTER и оставлю имя по умолчанию.</i><br/>
<br/>
Accessing tftp://192.168.1.4/c2960-lanbasek9-mz.150-2.SE4.bin…<br/>
Loading c2960-lanbasek9-mz.150-2.SE4.bin from 192.168.1.4:!!!<br/>
[OK — 4670455 bytes]<br/>
<br/>
4670455 bytes copied in 0.057 secs (6587503 bytes/sec)<br/>
<br/>
Выдал он мне сообщение, что загрузка прошла успешно. Проверю я наличие прошивки командой «dir».<br/>
<br/>
SW1#dir<br/>
Directory of flash:/<br/>
<br/>
1 -rw- 4414921  c2960-lanbase-mz.122-25.FX.bin<br/>
 10 -rw- 4670455  c2960-lanbasek9-mz.150-2.SE4.bin<br/>
 9 -rw- 1168  config.text<br/>
<br/>
64016384 bytes total (54929840 bytes free)<br/>
<br/>
Вижу, что действительно все на месте. И вдобавок он мне сообщает об объеме памяти и наличии свободного места.<br/>
<br/>
Закончили мы рассматривать протоколы верхнего уровня. Не думал я, что получится настолько длинная статья. Наверное виноваты картинки. Но постарался максимально кратко и по делу. Протоколов мы рассмотрели много, и все они не заменимы. Часто выручают жизнь сисадминам и любимым нами пользователям. Спасибо, что дочитали. Если что-то непонятно, оставляйте комментарии или сразу пишите в личку. А я пошел ставить чайник и пить вкусный чай с пирожными!</div></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bcisco%5D" class="tm-tags-list__link">cisco</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bnetwork%5D" class="tm-tags-list__link">network</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bccna%5D" class="tm-tags-list__link">ccna</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Beducation%5D" class="tm-tags-list__link">education</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bapplication%20layer%5D" class="tm-tags-list__link">application layer</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhttp%5D" class="tm-tags-list__link">http</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdns%5D" class="tm-tags-list__link">dns</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdhcp%5D" class="tm-tags-list__link">dhcp</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Btelnet%5D" class="tm-tags-list__link">telnet</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bssh%5D" class="tm-tags-list__link">ssh</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bpop3%5D" class="tm-tags-list__link">pop3</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bsmtp%5D" class="tm-tags-list__link">smtp</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bftp%5D" class="tm-tags-list__link">ftp</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Btftp%5D" class="tm-tags-list__link">tftp</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/sys_admin/" class="tm-hubs-list__link">
    Системное администрирование
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/it-infrastructure/" class="tm-hubs-list__link">
    IT-инфраструктура
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/cisconetworks/" class="tm-hubs-list__link">
    Cisco
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/network_technologies/" class="tm-hubs-list__link">
    Сетевые технологии
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 44: ↑43 и ↓1</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-rating"></use></svg> <span title="Всего голосов 44: ↑43 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+42</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">388K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    1035
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <DIV class="v-portal" style="display:none;"></DIV> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="https://habr.com/ru/users/solid_93/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="https://habrastorage.org/getpro/habr/avatars/c76/5a4/153/c765a41531defb16ae3d33f1f10408a1.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 72 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    64
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Денис</span> <a href="https://habr.com/ru/users/solid_93/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @solid_93
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="https://habr.com/ru/post/307714/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 27 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner11351" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner11352" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section data-async-called="true" class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Работа</h2> <!----></header> <div class="tm-block__body"><div class="tm-vacancies-block__item"><a href="https://career.habr.com/vacancies/devops" target="_blank" class="tm-vacancies-block__vacancy-title">
        DevOps инженер
      </a> <div class="tm-vacancies-block__vacancies-count">
        87
    вакансий
      </div></div><div class="tm-vacancies-block__item"><a href="https://career.habr.com/vacancies/sistemnij_administrator" target="_blank" class="tm-vacancies-block__vacancy-title">
        Системный администратор
      </a> <div class="tm-vacancies-block__vacancies-count">
        130
    вакансий
      </div></div></div> <footer class="tm-block__footer"><a href="https://career.habr.com/catalog" class="tm-block-extralink">
      Все вакансии
    </a></footer></section></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/post/307714/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr-register/?back=/ru/post/307714/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="https://habr.com/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="https://habr.com/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="https://habr.com/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2022 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"307714":{"id":"307714","timePublished":"2016-08-24T11:12:23+00:00","isCorporative":false,"lang":"ru","titleHtml":"Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня","leadData":{"textHtml":"И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F307714\u002F\" rel=\"nofollow noopener noreferrer\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F862\u002Fc3d\u002F0cc\u002F862c3d0cc98c43f783af823c60b1cab6.jpg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Приятного чтения","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":64,"votesCount":72},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"752121","alias":"solid_93","fullname":"Денис","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc76\u002F5a4\u002F153\u002Fc765a41531defb16ae3d33f1f10408a1.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":27,"favoritesCount":1035,"readingCount":387983,"score":42,"votesCount":44},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"relatedData":null,"id":"6900","alias":"cisconetworks","type":"collective","title":"Cisco","titleHtml":"Cisco","isProfiled":true},{"relatedData":null,"id":"17123","alias":"network_technologies","type":"collective","title":"Сетевые технологии","titleHtml":"Сетевые технологии","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EИ снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F307714\u002F\" rel=\"nofollow noopener noreferrer\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Ffiles\u002F862\u002Fc3d\u002F0cc\u002F862c3d0cc98c43f783af823c60b1cab6.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F862\u002Fc3d\u002F0cc\u002F862c3d0cc98c43f783af823c60b1cab6.jpg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003EСодержание\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003E1) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F307252\u002F\" rel=\"nofollow noopener noreferrer\"\u003EОсновные сетевые термины, сетевая модель OSI и стек протоколов TCP\u002FIP.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n2) Протоколы верхнего уровня.\u003Cbr\u002F\u003E\r\n3) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F308636\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПротоколы нижних уровней (транспортного, сетевого и канального).\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n4) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F312340\u002F\" rel=\"nofollow noopener noreferrer\"\u003EСетевые устройства и виды применяемых кабелей.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n5) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F314484\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПонятие IP адресации, масок подсетей и их расчет.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n6) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F319080\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПонятие VLAN, Trunk и протоколы VTP и DTP.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n7) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F321132\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПротокол связующего дерева: STP.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n8) \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F334778\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПротокол агрегирования каналов: Etherchannel.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n9) \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F335090\u002F\"\u003EМаршрутизация: статическая и динамическая на примере RIP, OSPF и EIGRP.\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nP.S. Возможно, со временем список дополнится.\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКак вы помните из прошлой статьи (если не читали, то в содержании есть ссылка на нее), модель OSI в нынешнее время служит только в качестве обучения ролям каждого уровня. Работают же сети по стеку протоколов TCP\u002FIP. Хоть TCP\u002FIP состоит из 4 уровней, он вполне реализует все функциональные возможности, реализуемые в модели OSI. Ниже на картинке приведены сравнения уровней и их ролей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F16e\u002Fd41\u002F5be\u002F16ed415be3174c06a61b13ef96b03a37.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНачинаем разговор про протоколы верхнего уровня. Я не просто так назвал тему «Протоколы верхнего уровня», а не «Протоколы верхних уровней». Так как разбираем мы этот уровень по стеку TCP\u002FIP, то у нас он «один за трех». \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВообще с точки зрения сетевика, нам все равно, что происходит внутри прикладного уровня. Этим, как правило, занимаются программисты. Но важно знать, как формируются данные и инкапсулируются в нижестоящие уровни.\u003Cbr\u002F\u003E\r\nУ нас на работе, например, есть правило: мы обеспечиваем запуск приложения и его безошибочную передачу по сети. Если проблема заключается во внутренних программных сбоях, то мы переключаем на разработчиков, и это становится их заботой. Но бывают и проблемы, которые идут по тонкой грани между нами, и мы решаем их вместе. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, протоколы прикладного уровня обеспечивают взаимодействие между человеком и сетью. Этих протоколов огромное количество, и выполняют они совершенно различные роли. Я приведу примеры часто используемых протоколов в сети и покажу, как они работают на практике: HTTP, DNS, DHCP, SMTP и POP3, Telnet, SSH, FTP, TFTP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EI) Протокол HTTP (англ. HyperText Transport Protocol).\u003C\u002Fb\u003E Протокол передачи данных, используемый обычно для получения информации с веб-сайтов. С каждым годом этот протокол становится все популярнее, и возможностей для его применения становится все больше. Использует он «клиент-серверную» модель. То есть существуют клиенты, которые формируют и отправляют запрос. И серверы, которые слушают запросы и, соответственно, на них отвечают. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ качестве клиентов выступают известные многим веб-браузеры: Internet Explorer, Mozilla Firefox, Google Chrome и т.д. А в качестве серверного ПО используют:Apache, IIS, nginx и т.д.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля того, чтобы разобраться глубже в протоколе HTTP, взглянем на HTTP запрос от клиента к серверу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F3ac\u002F9a5\u002Ff9a\u002F3ac9a5f9acbc449c98408ac2d08a46d4.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНас интересуют только самая верхняя и самая нижняя строчки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ первой строчке используется такое понятие, как \u003Cb\u003EGET\u003C\u002Fb\u003E. Это, по сути, ключ запроса. Так как после GET стоит символ \"\u002F\", то это означает, что запрашивается главная или корневая страница по \u003Cb\u003EURL (англ. Uniform Resource Locator)\u003C\u002Fb\u003E пути. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EURL\u003C\u002Fb\u003E — это некий идентификатор какого-либо ресурса в сети. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТак же в этой строчке присутствует такая запись, как \u003Cb\u003EHTTP\u002F1.1\u003C\u002Fb\u003E. Это версия протокола. Довольно популярная версия. Выпустили ее в 1999 году, и до сих пор она служит верой и правдой. Хоть недавно был анонс версии 2.0, версия 1.1 занимает пока лидирующее положение.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь о нижней строчке. Здесь указывается адрес сервера или имя, на котором располагается нужный ресурс. Давайте посмотрим, как это работает на практике. Я буду использовать свою любимую программу Cisco Packet Tracer 6.2 (в дальнейшем CPT). Она проста в освоении и для демонстрации описанного идеально подходит. Могу сказать с уверенностью, что для подготовки к CCNA R&amp;S, ее хватает вполне. Но только для нее. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрываем программу и добавим туда компьютер с сервером (находятся они на вкладке «End Devices»), как на картинке ниже\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F9fe\u002F512\u002F9b6\u002F9fe5129b6bcc41de87f670f1dc6b33c8.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСоединяем компьютер с сервером перекрестным кабелем (англ. crossover cable). В CPT он находится на вкладке «Connections», обозначается пунктиром и называется «Copper Cross-Over». \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь займемся настройкой компьютера и веб-сервера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F47c\u002F12a\u002Fbbb\u002F47c12abbb6f4482c9736528dd75669dc.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Отрываем вкладки «Desktop» на рабочем компьютере и сервере, далее переходим в окно «IP Configuration». Откроются окна, как на рисунке выше. Это окна конфигурации узлов в сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Укажем IP-адреса в строки, указанные цифрой 2. Как помним из предыдущей статьи, IP-адреса нужны для идентификации узлов в сети. Подробнее мы разберем эту тему позже. Сейчас главное понимать, для чего нужен IP-адрес. Я специально выбрал сеть, начинающуюся с «192.168», так как она встречается чаще всего в домашних сетях.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E3)\u003C\u002Fstrong\u003E В поля, указанные цифрой 3, вводится маска подсети. Она нужна для того, чтобы узлу было понятно, в одной подсети он находится с другим узлом или нет. Но об этом позже. \u003Cbr\u002F\u003E\r\nОстальные значения оставим пустыми.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь требуется включить сервис HTTP на сервере.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fdf4\u002F271\u002F4f1\u002Fdf42714f1f9c44e6894ee221a8c20d11.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Переходим на вкладку «Services».\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Выбираем слева сервис HTTP.\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E3)\u003C\u002Fstrong\u003E Открывается окно настройки сервиса и файловый менеджер. Если у кого есть навыки по работе c HTML, то можете здесь создать страницу. Но у нас уже есть готовый шаблон, и мы им воспользуемся. Не забываем включить службу HTTP и HTTPS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРаз уже зашла речь о HTTPS (HyperText Transfer Protocol Secure), то скажу про него пару слов. Это, по сути, расширение протокола HTTP, которое поддерживает криптографические протоколы и передает информацию не в открытом виде, а в зашифрованном. В CPT очень поверхностно показана его работа, но для понимания вполне достаточно. Вспоминаем и запоминаем: HTTP использует 80 порт, а HTTPS 443 порт. Вообще номеров портов очень много, и все запомнить тяжело, но часто встречающиеся лучше запомнить. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь самое интересное. Нам надо перевести CPT из режима «Realtime» в режим «Simulation». Отличие их в том, что в режиме «Realtime» сеть ведет себя так, как она повела бы себя в реальной жизни и в реальном времени. Режим «Simulation» позволяет нам наблюдать за поведением сети в разные временные интервалы, а также проследить за каждым пакетом, раскрыть его и посмотреть, что он в себе несет. Переключаем среду, как показано на рисунке ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fe53\u002F5a0\u002F631\u002Fe535a063118b4e02910ea5a86f7fd00d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗдесь открывается «Simulation Panel», в которой несколько опций. Есть фильтр, в котором можно указать протоколы, которые вы хотите отслеживать, скорость перемещения пакета и навигационная панель, где можно наблюдать за сетью вручную, нажатием «Capture\u002FForward» или автоматически, при помощи кнопки «Auto Capture\u002FPlay». \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОставляем все, как есть, и открываем компьютер. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F8f6\u002F25a\u002Ff19\u002F8f625af19c594dc2beddec5df895124b.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПереходим на вкладку «Desktop» и открываем «WEB Browser». Перед нами открывается окно веб-браузера. В строке URL пишем адрес нашего веб-сервера, нажимаем кнопку «Go» и наблюдаем следующую картину.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F2b8\u002F1f3\u002Fb57\u002F2b81f3b5714746febacf9d31e01bf229.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПоявились первые посылаемые данные на схеме и в окне «Simulation Panel». Это сегменты TCP, которые создадут сессию между компьютером и сервером. Сейчас нам это не интересно, и мы об этом поговорим в следующей статье. Поэтому я пропущу их до момента, когда будут созданы HTTP. Делать я это буду при помощи кнопки «Capture\u002FForward». \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F443\u002F1bf\u002F769\u002F4431bf76952c44c197e90433f29999a2.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ вот после установления соединения, компьютер формирует первые HTTP данные. В дальнейшем я буду называть их PDU, чтобы вы привыкали к данным терминам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Смотрим на схему и видим, что появилось 2 конверта. Это и есть наши данные. Нас интересует фиолетовый конверт. Это и есть созданный PDU. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Теперь смотрим на «Simulation Panel» и видим, что в таблице появилась запись с типом HTTP. Эти данные нас интересуют. Также рядом с записью показан цвет, которым окрашены эти данные на схеме.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E3)\u003C\u002Fstrong\u003E Кликаем по HTTP (фиолетовый конверт), и перед нами открывается окно данных. Тут кратко показаны все нужные сведения по каждому уровню модели OSI. Можно кликнуть по любому уровню и получить информацию о том, что происходит на нем. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли вам интересно полностью раскрыть данные и рассмотреть подробно, из каких полей они состоят и что в них происходит, есть вкладка «Outbound PDU Details». Давайте перейдем на нее и посмотрим, как выглядят HTTP данные.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F7f7\u002Fa51\u002F138\u002F7f7a511381c043cdb0c89ddcbda08c0c.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНа этой вкладке будут выводиться данные на всех уровнях. Нам пока надо посмотреть на HTTP. Они находятся в самом низу, поэтому тянем бегунок вниз. Выглядят они так же, как я и описывал их раньше. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь нам интересен этап, когда веб-сервер получит запрос и начнет предпринимать какие-то действия. Давайте нажмем на «Capture\u002FForward» и посмотрим, чем веб-сервер ответит. И вот, на рисунке ниже видим, что он отправил компьютеру какие-то данные. Давайте посмотрим, как они выглядят.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F666\u002F6e3\u002F913\u002F6666e391370c46c18df597f1e70a4b2c.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Я случайно пережал кнопку и он уже начал формировать TCP на закрытие сессии. Ничего страшного. Находим PDU, адресованные от веб-сервера к клиенту. Как видим, он сразу показывает нам на схеме момент времени, в который я кликнул. Выбираем нужный конверт.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Здесь уже видим другую картину. Сверху указывается версия HTTP, код «200 OK», означающий, что отправляется запрашиваемая страница, а не сообщение об ошибке. Далее указывается длина контента, тип файла, а также с какого сервера отправляется. И в самой нижней строке указывается, что передаются какие-то данные. После того, как данные дойдут до компьютера, можно наблюдать, что веб-браузер компьютера открыл страницу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb7b\u002F066\u002Fca1\u002Fb7b066ca1775498388e9274c6b21c85d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВот так работает протокол HTTP. Давайте рассмотрим его расширенную версию HTTPS. Как мы помним, эта версия поддерживает шифрование и не передает данные в открытом виде. В самом начале, мы включили сервис HTTP и HTTPS. Поэтому все готово, и можно запрашивать страницу. Отличие запроса в том, что перед адресом страницы вместо HTTP, пишем HTTPS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F3ae\u002F0eb\u002F543\u002F3ae0eb5432584e9b983f7d8e781ea33d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВидим надпись, что данные защищены, и мы их прочитать не можем. В принципе это все отличия, которые может показать CPT, но для базового понимания этого достаточно. От себя добавлю, что когда вы переходите на сайт, работающем по HTTPS, в браузере он обозначается в виде замка. Например \u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F066\u002F3ef\u002F0ff\u002F0663ef0ff83646038ac4f255e1f40348.PNG\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля тех, кто хочет самостоятельно поковырять и посмотреть, как это работает, могут скачать данную лабу \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zaDFENzBnZ0hqRTQ\u002Fview?usp=sharing&amp;resourcekey=0-Q60Tngolo3_sjMUnM_iAWg\" rel=\"nofollow noopener noreferrer\"\u003Eздесь\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМы поговорили про HTTP, и теперь время разобрать протокол DNS. Данный протокол тесно связан с предыдущим протоколом, и скоро вы поймете почему. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EII) DNS (Domain Name System)\u003C\u002Fb\u003E. Система доменных имен. Если говорить в целом, то она хранит информацию о доменах. Например, какому IP адресу соответствует определенное имя. Приведу пример: когда вы открываете свой любимый сайт, то обращаетесь к нему по имени. Но в поля Source Address и Destination Address, которые работают на сетевом уровне (это тема следующей статьи, но я немного забегу вперед), нельзя вставить имя. Там обязательно должен присутствовать именно IP адрес. Вот DNS как раз этим и занимается. Она сообщает, какой IP адрес у запрошенного имени. Вы, к примеру, обращаетесь на google.ru. Ваш компьютер понятия не имеет, кто и что это. Он спрашивает у DNS-сервера: Кто такой google.ru? И сервер отвечает, что google.ru — это 74.125.232.239 (это один из его адресов). И уже после этого, компьютер отправляет запрос на 74.125.232.239. Для пользователя все останется по-прежнему, и в адресной строке он также будет видеть google.ru. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак обычно, покажу это на картинке\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F278\u002F339\u002F033\u002F27833903316840fabe32e4076c252304.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nДумаю, что выше описанное понятно, и двигаемся дальше. Служба эта иерархичная. И часто DNS-сервер (на котором запущена эта служба) работает в связке с другими DNS-серверами. Давайте разберем, что это значит. Иерархичность его заключается в том, что он работает с доменами уровня. Работает он от младшего уровня к старшему, слева направо.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНапример имя: ru.wikipedia.org. Cамым старшим будет доменное имя «org», а младшим — «ru». Но часто бывают случаи, когда DNS-сервер не может нам рассказать о каком-то доменном имени, и тогда он обращается к старшему DNS-серверу, который отвечает за доменные имена более высокого уровня. Не буду изобретать велосипед и приведу картинку из википедии. Там эта работа проиллюстрирована хорошо.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fcd4\u002F753\u002F406\u002Fcd47534066c69df973fe10c28f6612c0.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fcd4\u002F753\u002F406\u002Fcd47534066c69df973fe10c28f6612c0.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПредположим, мы набрали в браузере адрес ru.wikipedia.org. Браузер спрашивает у сервера DNS: «какой IP-адрес у ru.wikipedia.org»? Однако сервер DNS может ничего не знать не только о запрошенном имени, но даже обо всём домене wikipedia.org. В этом случае сервер обращается к корневому серверу — например, 198.41.0.4. Этот сервер сообщает — «У меня нет информации о данном адресе, но я знаю, что 204.74.112.1 является ответственным за зону org.» Тогда сервер DNS направляет свой запрос к 204.74.112.1, но тот отвечает «У меня нет информации о данном сервере, но я знаю, что 207.142.131.234 является ответственным за зону wikipedia.org.» Наконец, тот же запрос отправляется к третьему DNS-серверу и получает ответ — IP-адрес, который и передаётся клиенту — браузеру.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрываю CPT и показываю, как это работает. Эта и следующие лабораторные работы буду основываться на предыдущей. Поэтому адресация будет такой же. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F15e\u002F2f1\u002F198\u002F15e2f1198ed942d3a508c1f5ea873b5c.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗдесь добавлен еще один сервер, который будет выполнять роль DNS-сервера и коммутатор. Когда в сети появляются 3 и более устройств, то для их соединения используют коммутатор.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗаймемся настройкой DNS-сервера. Зайдем в «IP Configuration» и пропишем IP адрес с маской.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F7ef\u002Fdb6\u002Fbfe\u002F7efdb6bfe36a40d2adb3f0c053c3c7da.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь зайдем в сервисы и настроим DNS службу. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F0fd\u002F678\u002Fc26\u002F0fd678c262d34bf090320f456a4043e7.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E В окне «Name» запишем имя, которое хотим привязать к IP адресу. (я написал имя своего будущего сайта, над которым идет работа).\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E В окне «Address», соответственно, IP-адрес, который будет работать в связке с выше написанным именем. (здесь укажем тот же адрес, что и в лабораторной по HTTP — 192.168.1.2).\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E3)\u003C\u002Fstrong\u003E Нажимаем кнопку «Add», чтобы добавить эту запись.\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E4)\u003C\u002Fstrong\u003E Не забываем включить саму службу! \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли все выполнили верно, то картина должна быть такой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F53f\u002F2d5\u002Fb3b\u002F53f2d5b3b3ff42d3b0454790cb6a8df1.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nТеперь надо в настройках сервера и компьютера указать адрес DNS-сервера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F4e0\u002F4b3\u002Fe33\u002F4e04b3e3377c4893b9b589b8a02a3aad.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНастройка DNS-сервера и узлов закончена, и самое время проверить, как это дело работает. Переключаем среду в режим симуляции и попробуем с компьютера зайти на сайт по имени «cisadmin.ru».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fcdb\u002F5c6\u002Fdea\u002Fcdb5c6dea4c04253b9cff4c51534808f.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ видим, что создаются 2 конверта. Первый — это DNS, а второй — ARP. О ARP мы толком не говорили, так как это тема следующей статьи. Но раз он показал себя, то вкратце расскажу, для чего он. Как мы помним, для обмена между узлами недостаточно IP адреса, так как еще используются MAC-адреса, работающие на канальном уровне. Мы указали компьютеру IP адрес DNS-сервера. Но он не знает, какой у узла с IP-адресом 192.168.1.3 MAC-адрес. Он формирует ARP сообщение и выбрасывает его в сеть. Данный кадр (данные на канальном уровне называются — кадры) является широковещательным, то есть его получат все участники, находящиеся в одной локальной сети (правильно сказать все участники в одном широковещательном домене, но пока мы это не затрагивали, и я не буду грузить вас этим термином). И тот, у кого этот адрес, отправит обратное сообщение и сообщит свой MAC-адрес. Все остальные участники отбросят этот кадр. Смотрим рисунки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F77c\u002F5d9\u002F200\u002F77c5d92001284a67a3b9b1c4b45fcba1.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВот кадр пришел на коммутатор, и теперь его задача разослать этот кадр на все порты, кроме того, откуда он пришел. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F46c\u002F1f5\u002F2fb\u002F46c1f52fb9104608b7251a7444ed35d2.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКадры были разосланы и наблюдаем следующее. Кадр, который пришел на веб-сервер был отброшен, о чем говорит перечеркнутый конверт. Следовательно, кадр отбрасывается. А DNS-сервер, наоборот, узнал свой адрес и должен сформировать ответ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb79\u002F5fd\u002Fccf\u002Fb795fdccfff248ab9ae798820c724afe.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ как видим, был создан ARP-ответ. Давайте немного разберем его.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E MAC-адреса. В Source MAC он записывает свой MAC-адрес, а в Destination MAC (Target MAC) адрес компьютера.\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E В Source IP свой IP адрес, а в Target IP адрес ПК.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ думаю, здесь все понятно. Если непонятно, то спрашивайте. В следующей статье я более подробно о нем расскажу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ нажимаю на «Capture\u002FForward» и смотрю, что будет дальше происходить.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fa0e\u002F630\u002Fafa\u002Fa0e630afac134c019eae18178dad5d51.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ вижу, что компьютер успешно получил ARP от сервера. Теперь он знает MAC-адрес DNS-сервера, а значит, и как с ним связаться. И сразу решает узнать у него, кто такой «cisadmin.ru». Мы можем открыть эти данные и посмотреть, что он там решил отправить. Открываем «Outbound PDU Details» и спускаемся в самый низ. Видим, что в верхнем поле «NAME» он записал запрашиваемое имя. Жмем кнопку «Capture\u002FForward» и cмотрим.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F139\u002F8eb\u002F89b\u002F1398eb89b2074923a11826e4b033c313.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nDNS-сервер получает DNS-запрос. Он лезет в свою таблицу и видит, что такая запись у него присутствует, и формирует ответ. Открываем и видим, что изменилось поле LENGTH и равняется 4. То есть 4 байта. Столько занимает IP адрес. И, соответственно, записывает сам IP-адрес — 192.168.1.2. Это и есть адрес веб-сервера. Двигаюсь дальше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb0c\u002Fa3b\u002Fed5\u002Fb0ca3bed59524e86b0e4e28be31f1ba2.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВидим, что компьютер получил сообщение от DNS-сервера, о чем свидетельствует галочка на коричневом конверте. И теперь он знает IP адрес веб-сервера. Сразу же он пытается установить TCP сессию, но возникает проблема. Он не знает MAC-адрес веб-сервера и запускает аналогичный ARP запрос, чтобы узнать. Смотрим.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F96b\u002F21b\u002F814\u002F96b21b814d7c4f2f9f6d91670252ae7b.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ тут аналогично предыдущему. DNS-сервер понял, что сообщение не для него, и отбрасывает. А веб-сервер узнает свой IP адрес и формирует ARP ответ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F15d\u002Ff18\u002F920\u002F15df189201184436a8863aa41a39b490.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nДошел до компьютера ARP ответ. Теперь он знает MAC-адрес веб-сервера и пытается установить TCP сессию. Отправляет он TCP сегмент на 80-й порт. Раз уж протокол TCP снова дал о себе знать, и в следующих протоколах он тоже будет фигурировать, то вкратце объясню зачем он нужен. Как вы помните из первой статьи, я говорил, что он устанавливает соединение. Так вот теперь каждый блок данных, который будет отправлен от сервера компьютеру, будет промаркирован. Это нужно для того, чтобы клиент понимал, все ли данные он получил или какие-то потерялись. И, если какие-то данные потерялись, он сможет запросить их повторно. Потеря блока данных сайта может привести к тому, что сайт перекосит, и он отобразится криво. Но сейчас главное понимать, что TCP располагается на транспортном уровне и работает с портами. Я специально открыл окно, где это написано, чтобы вы постепенно привыкали к этим полям. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосмотрим, чем ответит компьютеру веб-сервер. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fbea\u002F1cc\u002F90b\u002Fbea1cc90b6df4353887913c41fc33fd8.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВеб-сервер отправляет компьютеру ответное сообщение, и устанавливается сессия. И, когда все готово, компьютер формирует HTTP и отсылает его веб-серверу. Давайте посмотрим, что изменилось. А изменилась у нас самая последняя строчка. Если раньше там был записан IP адрес веб-сервера, то теперь там красуется доменное имя «cisadmin.ru». Но не забывайте, что доменное имя тут записано только в данных прикладного уровня. IP-адрес никуда не делся. Он располагается на сетевом уровне. Поэтому давайте сразу покажу IP пакет, где представлены эти адреса.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F3fd\u002Fb04\u002Ff4b\u002F3fdb04f4bbe7488abd6bd3dac9428f7e.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ как видите, IP адреса на месте.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее процесс аналогичен лабораторной по HTTP. Поэтому приведу финальный этап, где по имени «cisadmin.ru» откроется страница, находящаяся на сервере с IP адресом 192.168.1.2.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F85e\u002F98f\u002Fc13\u002F85e98fc139a3419fac29ead3b59d356c.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСоответственно видим, что все прекрасно работает, и сайт открывается по доменному имени. \u003Cbr\u002F\u003E\r\nИ напоследок упомяну об одной очень важной утилите под названием \u003Cb\u003Enslookup\u003C\u002Fb\u003E. Она позволяет обратиться к DNS-серверу и узнать у него информацию о имени или IP-адресе. В CPT эта команда присутствует, и я предлагаю взглянуть на нее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКликаем по компьютеру на схеме и на вкладке «Desktop» выбираем «Command Prompt». Это имитация командной строки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fc9d\u002F57c\u002Fa97\u002Fc9d57ca9708a49c793a05a511a3541c3.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nОткрывается у нас окошко, подобное cmd в ОС Windows. Можно ввести знак \"?\" и нажать ENTER. Она покажет список всех доступных команд. Нам нужна команда nslookup. Введем ее и нажмем ENTER.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F7c5\u002F380\u002Fad6\u002F7c5380ad65ce41a8861960e65111b884.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nОткрывается сама утилита, о чем свидетельствует знак птички слева. Показывается нам адрес DNS-сервера и его имя. Так как имени нету, то он дублирует туда строку с IP-адресом.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНу и самое время вписать туда доменное имя и узнать, что он выдаст в ответ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F158\u002Ffc6\u002F917\u002F158fc6917a85474c9f46ae92ed6a33a0.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВыдает он имя и адрес, как и предполагалось. В принципе, когда вы обращаетесь на веб-сайт, он сам выполняет эту процедуру. Вы видели этот запрос выше. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсть еще один файл в каждой ОС, который тесно связан с DNS. Название у него «hosts». Стандартное расположение его в Windows системах «windows\\system32\\drivers\\etc\\hosts». А в *nix подобных системах: \"\u002Fetc\u002Fhosts\". Делает он то же самое, что и DNS-сервера. И контролируется этот файл администратором компьютера. И самое важное: он имеет приоритет перед DNS-сервером. И, если у вас в файле написано, что сайту habrahabr.ru соответствует IP адрес, который на самом деле соответствует google.ru, то, соответственно, открывать он будет google, а не habrahabr. Этим часто пользуются злоумышленники, когда вносят исправления в этот файл. Приведу скрин этого файла со своего компьютера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F1ba\u002F123\u002F0c6\u002F1ba1230c60e048cb8f84a6e377944620.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВот так он выглядит. Можете открыть его у себя и поймете, что он точно такой же.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот такая интересная служба и протокол. Также как и с HTTP, приведу \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zWmg4bVd2NEpaYXM\u002Fview?usp=sharing&amp;resourcekey=0-2fnQV-Tmt3dXKGICAgRDRQ\" rel=\"nofollow noopener noreferrer\"\u003Eссылку\u003C\u002Fa\u003E на скачивание данной лабы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА мы двигаемся дальше и разбираем протокол DHCP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EIII) DHCP (Dynamic Host Configuration Protocol).\u003C\u002Fb\u003E Протокол динамической настройки узла. Он позволяет узлам динамически получать IP адреса и другие параметры для корректной работы в сети (основной шлюз, маску подсети, адреса DNS-серверов). От себя скажу, что этот протокол спасает жизнь многим сисадминам по всему миру. Согласитесь, что ходить и вручную прописывать IP параметры каждому узлу, не самое приятное занятие. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри помощи DHCP можно обеспечить полный контроль над IP адресами: создавать отдельные пулы для каждой подсети, выдавать адреса в аренду, резервировать адреса и многое другое.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРабота его очень тяжела для нынешнего понимания. Слишком много пакетов, данных и кадров должно передаться, прежде чем запрошенный адрес будет присвоен компьютеру. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте посмотрим, как он работает на практике.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F45e\u002F837\u002Ff4e\u002F45e837f4e42c44349208cc5ecda19f61.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ видим, что добавился новый сервер. Конечно можно было все роли отдать одному серверу, но, чтобы вы понимали, как ходят данные, пусть для каждой роли будет отдельный сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНастроим сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fac7\u002F4e7\u002F309\u002Fac74e7309df74f8ba7f6afc6fe9b7d1b.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПрисваиваем свободный адрес и маску. Перейдем к роли DHCP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F4b3\u002Fdbc\u002Fb24\u002F4b3dbcb246bc4c39a86ee91b6c600eeb.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Выбираем службу DHCP, и тут уже создан стандартный пул. Его удалить нельзя. Только изменить. Можете сами создать несколько пулов и вытворять с ними, что угодно, вплоть до удаления. Но стандартный всегда останется. Нам дополнительные пулы не нужны, поэтому переделаем под себя стандартный.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Здесь можно добавить адрес шлюза, адрес DNS-сервера. Мы пока не касались вопроса шлюза, поэтому пока не будем его трогать. DNS-сервер у нас есть, и его можно указать. Ну и старт адресов оставим, как есть.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E3)\u003C\u002Fstrong\u003E Не забываем включить сервер!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПереключаем среду в режим симуляции и посмотрим, как компьютер получит адрес. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F092\u002F333\u002Fb13\u002F092333b137d94609b273e3323a4da95a.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСоответственно переходим в настройки конфигурации и переключаем на DHCP. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5a6\u002Fe96\u002F843\u002F5a6e96843b8846e9a84188e4f3128b03.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВидим, что создался DHCP-запрос. Давайте пройдемся по каждому его уровню и поверхностно посмотрим, что внутри. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Протокол канального уровня (Ethernet). В «Source MAC» записывается адрес компьютера. А в «Destination MAC» записан широковещательный адрес (то есть всем).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Протокол сетевого уровня (IP). В «Source IP» записывается адрес «0.0.0.0». Этот адрес вставляется, когда у запрашиваемого нет адреса. А в «Destination IP» вставляется широковещательный адрес «255.255.255.255».\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\nСмотрим дальше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F29e\u002F17f\u002F136\u002F29e17f1365ad40dfaf0706c9a89bfe3e.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПосмотрим на поле UDP. Здесь используются порты 67 и 68. Это UDP порты, зарезервированные для DHCP.\u003Cbr\u002F\u003E\r\nТеперь смотрим на поле DHCP. Здесь все по нулям, и только в поле «CLIENT HARDWARE ADDRESS» записан MAC-адрес компьютера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМы знаем, как работает широковещательная рассылка, и посмотрим, как будут реагировать на нее участники сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fc27\u002F744\u002F70b\u002Fc2774470b70d463699073bb0cc49cefb.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ видим, что все кроме DHCP-сервера отбросили данные. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДальше работу протокола расскажу на словах, потому что очень много пакетов и кадров будет сформировано, перед тем как DHCP-сервер выдаст адрес. Как только он получит запрос, он начинает искать свободный адрес в базе. Как только адрес найден, начинается следующий этап — это проверка адреса. Ведь, как мы помним, адрес можно назначить и вручную, в обход DHCP-сервера. Такое часто происходит, и даже в корпоративной среде находятся умники, которые вручную вписывают адрес. Для этого DHCP-сервер перед выдачей этого адреса, отправляет ICMP сообщение или ping.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМы пока не говорили и об этом. Поэтому заранее скажу, что утилита ping позволяет проверить доступность узла по IP-адресу. И, если на ping DHCP-серверу кто-то ответит, то значит адрес занят и всю процедуру он будет повторять, но с другим IP-адресом. Но это тоже не самое толковое решение. Сами понимаете, что если компьютер со статически назначенным адресом будет выключен, то он не ответит на ping DHCP-сервера, и, соответственно, DHCP решит, что адрес не занят и присвоит его какому-то узлу. Но, как только компьютер включится, появится 2 компьютера с одинаковыми IP-адресами. И тут могут начаться дикие чудеса. Современные системы уже научились правильно реагировать на это, но все же не стоит этого допускать и важно следить за этим. Я пропущу в CPT все эти данные, иначе получится диафильм из однообразных картинок. Я прикреплю эту лабу ниже, и вы сможете сами в этом убедиться. Приведу только конечный итог, который сформирует DHCP-сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5de\u002F716\u002F645\u002F5de716645fc242d2b9781156768390ed.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ видим, что в поле \"«YOUR» CLIENT ADDRESS\" добавился адрес 192.168.1.1. Это адрес, который DHCP-сервер предлагает компьютеру. В поле «SERVER ADDRESS» DHCP-сервер добавляет свой адрес, чтобы компьютер знал, кто предлагает ему адрес. В поле «CLIENT HARDWARE ADDRESS» добавляется MAC-адрес компьютера (то есть того, кто запросил). И в самом низу представлена опция «DHCP Domain Name Server Option». Сюда записывается адрес DNS-сервера, который мы указали в настройках сервиса DHCP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосмотрим, как компьютер получит адрес.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb06\u002F021\u002Fb41\u002Fb06021b415ee4c6eb373d6fd7606e27c.PNG\"\u002F\u003E\u003Cbr\u002F\u003E\r\nИ наблюдаем сообщение «DHCP Request Successful». Что означает, что данные успешно получены, о чем свидетельствуют заполненные поля ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот так работает протокол DHCP. Как обещал, \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zdTZRc3pZb0VQWlE\u002Fview?usp=sharing&amp;resourcekey=0-L3Q1F08utcGyqmL8LQzAbQ\" rel=\"nofollow noopener noreferrer\"\u003Eссылка\u003C\u002Fa\u003E для скачивания.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПереходим дальше, и дошла очередь до протоколов POP3 и SMTP. Я специально упомянул эти протоколы вместе и сейчас объясню, почему. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EIV) POP3 (англ. Post Office Protocol Version 3).\u003C\u002Fb\u003E Протокол почтового отделения версии 3. Протокол, который используют клиенты для получения почтовых писем с сервера. Версии 1-ая и 2-ая устарели и в нынешнее время не используются. Работает он по принципу «загрузи и удали». Что это значит? Это значит, что клиент заходит на сервер и смотрит, есть ли для него письмо. И если оно присутствует, он загружает его к себе и ставит отметку об удалении на сервере. Хорошо это или плохо, вопрос спорный. Кто-то утверждает, что это хорошо, так как сервер не бывает перегружен ненужными письмами. Я считаю иначе. Во-первых современная инфраструктура позволяет хранить большой объем писем, а во-вторых часто случается, что пользователь удаляет или теряет важное письмо, и найти его потом становится трудно. Хотя, стоит упомянуть, что некоторые клиенты можно настроить так, чтобы они не удаляли письма с сервера. Однако при стандартных настройках они удаляют письма с сервера. Поэтому будьте внимательнее. Порт, который он прослушивает — 110. Довольно известный номер порта, поэтому возьмите себе на заметку. Так же как и у протокола HTTP, у него есть расширенная версия — POP3S. При помощи дополнительного криптографического протокола, как SSL, шифруется содержимое, и письма передаются в защищенном виде. POP3S использует 995 порт. Мы обязательно рассмотрим протокол POP3 на практике, после того, как узнаем про протокол SMTP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтоит упомянуть про аналог POP3. Это протокол \u003Cb\u003EIMAP (англ. Internet Message Access Protocol).\u003C\u002Fb\u003E Протокол доступа к электронной почте. Он более умный и посложнее, чем POP3. Но главное их различие в том, что клиент, заходя на сервер, не удаляет почту, а копирует ее. Таким образом, у клиента отображается копия почтового ящика, который хранится на почтовом сервере. И если клиент у себя удаляет какое-либо письмо, то оно удаляется только у него. На сервере оригинал остается целым. Слушает он 143 порт. Рассмотреть IMAP подробно в CPT не получится, так как полноценно он там не реализован. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EV) SMTP (англ. Simple Mail Transfer Protocol).\u003C\u002Fb\u003E Простой протокол передачи почты. Используется он, как вы поняли, для передачи почты на почтовый сервер. Вот почему мы изучаем POP3 и SMTP параллельно. Использует он 25 порт. Это тоже важно помнить.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже важно помнить, что все почтовые протоколы работают по TCP-соединению. То есть с установлением соединения. Здесь важно получить каждый пакет в целости и сохранности. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДумаю, с теоретической точки зрения все понятно. Давайте перейдем к практике и посмотрим, как это работает.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрою я прошлую лабораторную работу по DHCP и слегка ее модернизирую.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Ffe7\u002Fe4a\u002F56e\u002Ffe7e4a56ebf645b482bc9a7348cb10ff.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nУбрал я HTTP-сервер и вместо него добавил компьютер рабочего, и назвал WORKER-PC. Присвою ему IP-адрес, который был у HTTP-сервера. То есть 192.168.1.2. Старый компьютер переименовал в DIRECTOR-PC. DNS-сервер я оставил. Он нам в этой лабе еще понадобится. Сервер DHCP переименовал в Mail-Server. И давайте его настроим.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fc76\u002F40a\u002F5bd\u002Fc7640a5bd10c450e9ec2d5eebfa11f82.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nАдрес я не менял, и он остался от прошлой лабы. Пускай таким и остается. Переходим в службы и находим «EMAIL».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb8c\u002F013\u002F7df\u002Fb8c0137dff0a4f8ab3916150355d8ee6.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E В поле «Domain Name» надо записать имя домена. Это то, что будет писаться после знака \"@\". Обязательное требование. Любая почта записывается в таком формате — логин@домен. И нажимаем кнопку «Set». Я ее уже нажал, поэтому она не активна, но если внести изменения в поле ввода доменного имени, то она снова станет активной.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E И создадим пользователей. В поле «User» запишем первого пользователя. Это будет «Director». И зададим пароль «123». И нажимаем на знак \"+\", чтобы добавить его в базу. Аналогично создадим второго пользователя. Это будет «Worker» с таким же паролем «123».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСоздание пользователей закончено, и наблюдаем следующую картину.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fa96\u002F014\u002F4d7\u002Fa960144d78ae4a6e9c26fe0aa25c12d8.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Видим в базе список созданных пользователей. Их можно удалять, добавлять и менять пароли при помощи кнопок справа.\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Не забываем включить службы POP3 и SMTP. Они по умолчанию включены, но проверка лишней не будет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа этом настройка на стороне сервера заканчивается, и теперь перейдем к настройке на стороне клиентов. Начнем с компьютера директора. Открываем вкладку «Desktop» и выбираем Email.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F116\u002Fcd2\u002F6b8\u002F116cd26b865049f994c2fb3436452823.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПосле этого сразу откроется окно настройки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F89a\u002F636\u002Fbea\u002F89a636bea5944e92a13c9bf60cce0a94.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E В поле «Your Name» пишем любое имя. Я напишу Director.\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E В поле «Email Address» пишем почтовый ящик. Для директора — это director@cisadmin.ru.\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E3)\u003C\u002Fstrong\u003E В поля «Incoming Mail Server» и «Outgoing Mail Server» записываем адрес почтового сервера (192.168.1.4)\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E4)\u003C\u002Fstrong\u003E В поле «User Name» пишем сам логин. То есть Director и соответственно пароль 123.\u003Cbr\u002F\u003E\r\nНажимаем кнопку «Save», и перед нами открывается почтовый клиент. CPT назвал его почтовым обозревателем.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5fd\u002Fea1\u002F4e5\u002F5fdea14e58d7480da5f8133c8e11895f.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАналогичная настройка будет на компьютере рабочего. Привожу скрин.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F6a7\u002F12a\u002F9e7\u002F6a712a9e79534eee8ec72d568a45826a.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь самое время посмотреть, как работает почта. Давайте сначала посмотрим, как она работает в режиме реального времени, а после разберем подробнее в режиме симуляции.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрываем почтовый клиент на компьютере директора и создадим письмо.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F3f3\u002F45c\u002F27d\u002F3f345c27d6a14f4f9af753ff8f1ee8ca.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЖмем на кнопу «Compose», и перед нами открывается привычное окно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb3a\u002Fac2\u002Fcad\u002Fb3aac2cad6654f4bbfdbc04b3a3a0701.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗдесь все как обычно. Пишем кому отправляем, тему письма, сам текст письма и нажимаем кнопку «Send».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F596\u002F81d\u002Faca\u002F59681dacacfd4999ad888f42c31b4b06.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВидим следующее сообщение о том, что отправка завершена успешно. Замечательно! Теперь посмотрим, как письмо будет доставлено рабочему.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрываем почтовый клиент на компьютере рабочего.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F4c8\u002F3bc\u002F8b3\u002F4c83bc8b33be4ccdb4a992f05db423cf.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ видим, что письма нету. А все потому, что клиент в CPT не поддерживает автоматическое обновление и приходится это делать вручную. Нажимаем кнопку «Receive».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fcc2\u002Fff0\u002F8d0\u002Fcc2ff08d0af245579c1e687ceddd474e.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВидим появившееся письмо и сообщение об успешном получении. Откроем письмо и посмотрим, не побилось ли.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fdc4\u002F468\u002F02d\u002Fdc446802defb410f8733e892eb5ffb89.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ да, письмо, действительно, дошло целым и невредимым. Ответим на это письмо и заодно проверим, что письма ходят в обе стороны. Нажимаю я кнопку «Reply» и пишу ответ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F4e6\u002F53e\u002Fc88\u002F4e653ec889774ead8a38e3c6dbbca179.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nОтправляю письмо и перехожу к компьютеру директора. И, соответственно, жму кнопку «Receive», чтобы обновить почту.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fbf3\u002Fe5e\u002F1a1\u002Fbf3e5e1a1588479b9a5a95f3551338e6.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПоявилось письмо, а ниже и сообщение об успешном получении.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрываем письмо, чтобы до конца удостовериться.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5b1\u002F898\u002F938\u002F5b18989384e245c7a7e9709f06aa2ef1.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПисьмо дошло, а значит все работает.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте разберем поподробнее. Переключим среду в режим симуляции и отправим письмо. Не буду я создавать что-то новое, а просто отвечу на выше полученное письмо.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5b2\u002F6c8\u002F8cb\u002F5b26c88cbac74c039a2598f868c7d81d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКак я говорил ранее, все почтовые протоколы работают с TCP. А это значит, что перед тем, как начнет работать почтовый протокол, а в данном случае протокол SMTP, должно установиться предварительное соединение между компьютером и сервером. Это мы сейчас и наблюдаем.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСейчас процесс установления соединения нас мало интересует. Мы сейчас говорим про почтовые протоколы, и поэтому я пропущу этот процесс и буду ждать появления SMTP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F8e5\u002Fc89\u002Fdd8\u002F8e5c89dd89214ee08a22b6d4a90e521a.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Появился долгожданный SMTP, о чем свидетельствует запись в панели симуляции, и откроем их. Обратим внимания на TCP-порты, чтобы удостовериться, что это он. И видим, что в «Destination Port» стоит 25 номер. А в «Source Port» записан динамически придуманный порт, чтобы сервер мог идентифицировать клиента. Все правильно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Смотрим ниже на данные SMTP, и здесь нет ничего интересного. CPT показывает нам его, как обычный блок данных.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДальше он передает эти данные серверу. Посмотрим, что будет происходить дальше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F312\u002F6fa\u002F49f\u002F3126fa49fced441c910ca4fa10d0407a.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСервер, получив данные от компьютера, формирует ответное сообщение. Обратите внимание на изменения. Номера, которые присутствовали ранее, поменялись местами, а именно «Source Port» и «Destination Port». Теперь источником является сервер, а назначением — компьютер. Это сообщение о доставке письма серверу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле этого работа протокола SMTP закончена, и компьютер может начать закрывать TCP-сессию. Чем он и займется.\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F309\u002Ff8c\u002F49e\u002F309f8c49ea2844daa202ec0681e57d09.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь когда письмо отправлено, и мы знаем, что оно лежит на сервере, попробуем получить это письмо. Открываем компьютер рабочего и жмем кнопку «Receive». \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F70b\u002Fea2\u002F45c\u002F70bea245c55b498da70ff04577d9912e.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКак и с SMTP, в POP3 тоже создается TCP-сессия. Посмотрим на номера портов. В «Destination Port» стоит 110 номер порта. Это и есть стандартный номер порта для протокола POP3. В «Source Port» стоит порт 1028. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСмотрим дальше и ждем выхода POP3.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fbe7\u002Fa9f\u002Fd4f\u002Fbe7a9fd4ff934b93bff3ad4e23412d2c.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВот он появился и наблюдаем, что в поле POP3 такая же картина, что и в SMTP, т.е. все то, что и так было понятно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДальше он отправляет этот запрос на сервер, и сервер должен ответить письмом, если оно там есть. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fa8b\u002F7d5\u002Fc6c\u002Fa8b7d5c6c7654cf6ae22329feb8025af.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nМы знаем, что оно там есть и наблюдаем, как сервер формирует ответное сообщение. И также как с SMTP, он меняет местами порты отправления и назначения. На прикладном уровне запакованы какие-то POP3 данные. Это и есть само письмо.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак только данные попадут на компьютер, они сразу должны высветиться в почтовом клиенте. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Ff8e\u002F3e8\u002F859\u002Ff8e3e88592d04c84be65689c9a32a1be.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ как только данные получены, о чем здесь свидетельствует галочка на фиолетовом пакете, письмо сразу же высвечивается в клиенте. Дальше, как и в SMTP, будет закрытие TCP-сессии. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПривожу \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zYzRUZ1Z5MFJDZVk\u002Fview?usp=sharing&amp;resourcekey=0-PxaQEfUe7jyCpT6Xdk4Lwg\" rel=\"nofollow noopener noreferrer\"\u003Eссылку\u003C\u002Fa\u003E на скачивание этой лабы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ еще, что я хотел бы показать в дополнение к почтовым протоколам — это роль DNS-сервера. Вы видели, что при совершении какого-либо действия в почтовом клиенте, он внизу нам писал IP-адрес сервера. Но есть возможность указывать не IP-адрес, а доменное имя. Давайте посмотрим, как это сделать. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНу и самое логичное, что приходит в голову — это то, что у нас есть почтовый сервер с адресом 192.168.1.4. И с этим адресом у нас будет работать доменное имя. Соответственно заходим на DNS-сервер и сопоставим этому адресу имя.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F0f6\u002F34f\u002F753\u002F0f634f753aca48f28937de8f8e330440.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F249\u002F692\u002Fdb9\u002F249692db9e3049618c15fc44b3905fcb.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНастройка на стороне DNS-сервера закончена, и осталось изменить 2 строчки в почтовых клиентах компьютеров. Открываем клиент на компьютере директора.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5d0\u002F905\u002F979\u002F5d0905979fa64d37ae74c0501aa57dac.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ нажимаем на кнопку «Configure Mail».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрывается окно, которое мы видели на этапе начальной конфигурации клиента.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F306\u002Ff3a\u002F7e7\u002F306f3a7e74ae40e2941af306d322e071.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗдесь надо поменять строки «Incoming Mail Server» и «Outgoing Mail Server». Вместо IP-адреса записываем доменное имя и нажимаем кнопку «Save».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТо же самое проделываем и на компьютере рабочего. Не буду давать лишних подробностей, просто приведу скрин.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fa4d\u002F564\u002F75f\u002Fa4d56475f4cc430a9c256498fd6609e8.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСразу попробуем написать письмо директору и отправить.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F2af\u002F1df\u002Fc11\u002F2af1dfc1123246ffb5370d2ad81c6691.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ после нажатия кнопки «Send», наблюдаем следующее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F598\u002F152\u002F3ea\u002F5981523ea9c447c0b93dd09acef8e7cb.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВнизу появляется сообщение о том, что он спросил у DNS-сервера адрес, и тот ему выдал IP-адрес почтового сервера. Отправка прошла успешно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь зайдем на компьютер директора и нажмем на кнопку «Receive».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fbb4\u002Fb48\u002Ff4a\u002Fbb4b48f4afd340f9bbcc49e21838adc3.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПолучаем письмо, а надпись ниже свидетельствует об успешной доставке. Вот еще один пример использования DNS-сервера в сети. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРазобрали мы почтовые протоколы. И переходим к разбору следующего протокола.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EVI) Telnet (от англ. terminal network).\u003C\u002Fb\u003E Если переводить дословно, то это сетевой терминал. Основы этого протокола были заложены давным давно, и до сих пор он не теряет своей актуальности. Применяется он для отображения текстового интерфейса, а также для управления ОС. Очень полезный протокол, и каждый сетевой инженер обязан уметь работать с ним. Объясню почему. Каждое сетевое устройство, интерфейс которого представляет собой командную строку, настраивается либо при помощи специального консольного кабеля, либо через виртуальные терминалы, в который и входит протокол Telnet. И, если консольный кабель требует нахождения специалиста рядом с настраиваемым оборудованием, то настройка при помощи виртуальных терминалов, а в данном случае Telnet, не ограничивает специалиста в расстоянии. Можно находиться в другой комнате, здании, городе и все равно иметь возможность доступа к оборудованию. Я считаю это огромным плюсом. Из минусов данного протокола отмечу, что он фактически не защищенный и все передается в открытом виде. Использует он 23 порт. А самые популярные дистрибутивы, которые работают с этим протоколом — это Putty, Kitty, XShell и т.д. Я думаю закрепим его работу на практике. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИспользовать Telnet мы будем для доступа к коммутатору Cisco 2960. Он, как и все Cisco устройства, использует разработанную компанией Cisco операционную систему IOS. А интерфейс командной строки называется CLI (Command Line Interface). Давайте для начала настроим коммутатор. Повесим на него IP-адрес, так как без него мы не сможем попасть на коммутатор и разрешим доступ по Telnet. Я не буду приводить скриншоты, так как там нет графики. Просто дам список вводимых команд и поясню для чего они.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch\u003Eenable — \u003Ci\u003Eпереход в привилегированный режим. Отсюда доступно большинство команд.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch#configure terminal — \u003Ci\u003Eпереход в режим глобальной конфигурации. В этом режиме возможен ввод\u003Cbr\u002F\u003E\r\nкоманд, позволяющих конфигурировать общие характеристики системы. Из режима глобальной конфигурации можно перейти во множество режимов конфигурации, специфических для\u003Cbr\u002F\u003E\r\nконкретного протокола или функции.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config)#username admin secret cisco — \u003Ci\u003Eсоздаем пользователя с именем admin и паролем cisco.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config)#interface vlan 1 — \u003Ci\u003Eпереходим в виртуальный интерфейс и повесим на него IP-адрес. Здесь прелесть заключается в том, что не важно, на каком именно из 24-х портов он будет висеть. Нам главное, чтобы просто с какого-либо порта был доступ до него.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config-if)#ip address 192.168.1.254 255.255.255.0 — \u003Ci\u003Eприсваиваем последний адрес 192.168.1.254 с маской 255.255.255.0\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config-if)#no shutdown — \u003Ci\u003Eпо умолчанию интерфейс выключен, поэтому включаем его. В IOS 90% команд отменяются или выключаются путем приписывания перед командой «no».\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config)#line vty 0 15 — \u003Ci\u003Eпереходим в настройки виртуальных линий, где как раз живет Telnet. От 0 до 15 означает, что применяем это для всех линий. Всего можно установить на нем до 16 одновременных соединений.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config-line)#transport input all — \u003Ci\u003Eи разрешаем соединение для всех протоколов. Я специально настроил для всех протоколов, так как чуть позже будет рассматриваться другой протокол и лезть сюда ради одной команды не считаю разумным.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config-line)#login local — \u003Ci\u003Eуказываем, что учетная запись локальная, и он будет проверять ее с той, что мы создали.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch#copy running-config startup-config — \u003Ci\u003Eобязательно сохраняем конфигурацию. Иначе после перезагрузки коммутатора все сбросится.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак коммутатор настроен. Давайте подключимся к нему c рабочего компьютера. Открываем командную строку. Мы ее открывали, когда рассматривали nslookup. И пишем следующее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F1eb\u002F872\u002F734\u002F1eb8727341704bb89d6c2c0bd2a3035f.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nТо есть команда telnet и адрес, куда подсоединиться.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли все верно, то открывается следующее окно с запросом логина и пароля.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb0b\u002F7b2\u002Fc0f\u002Fb0b7b2c0fb4e44f7b22661bb99eb6d69.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСоответственно пишем логин:admin и пароль:cisco (мы создавали его на коммутаторе).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ он сразу пускает нас на коммутатор. Для проверки проверим доступность компьютера директора, при помощи команды ping.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F4ad\u002F467\u002F0e1\u002F4ad4670e14924ce4a154bdfb2dcd096d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nPing успешен. Надеюсь, понятно, что проверка доступности осуществляется не с компьютера рабочего, а с коммутатора. Компьютер здесь является управляющим устройством и все. Рассматривать его в режиме симуляции я не буду. Он работает точно так же, как и почтовые протоколы, то есть создается TCP-сессия, и, после установления соединения, начинает работать Telnet. Как только он отрабатывает, он начинает разрывать соединение. Тут все просто. Привожу \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zajZzYkhTVjc3c00\u002Fview?usp=sharing&amp;resourcekey=0-yhn-YN2eEALrf4xSQjq7mw\" rel=\"nofollow noopener noreferrer\"\u003Eссылку\u003C\u002Fa\u003E на скачивание.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте теперь разберем протокол SSH.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EVII) SSH (англ. Secure Shell).\u003C\u002Fb\u003E В переводе с английского — безопасная оболочка. Как и Telnet позволяет управлять ОС. Отличие его в том, что он шифрует весь трафик и передаваемые пароли. Шифруется при помощи алгоритма \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%94%D0%B8%D1%84%D1%84%D0%B8_%E2%80%94_%D0%A5%D0%B5%D0%BB%D0%BB%D0%BC%D0%B0%D0%BD%D0%B0\" rel=\"nofollow noopener noreferrer\"\u003EДиффи-Хеллмана\u003C\u002Fa\u003E. Кому интересно почитайте. Практически все современные ОС системы умеют работать с этим протоколом. Если у вас стоит выбор, какой протокол применять, то используйте SSH. Сначала немного помучаетесь в настройке, и многое будет непонятно, но со временем в голове уляжется. Главное запомните сейчас, что самое главное отличие SSH от Telnet — это то, что SSH шифрует трафик, а Telnet нет. Я думаю пора перейти к практике и посмотреть, как это работает. Подключаться и управлять мы будем тем же коммутатором. Давайте попробуем подключиться по SSH с компьютера директора к коммутатору.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F7fe\u002F41c\u002Ffbb\u002F7fe41cfbb115427c8bee15f2681f7929.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗдесь синтаксис команды немного другой, нежели при подключении по Telnet. Пишем ssh с ключом l, после набираем логин (у нас это admin) и адрес, куда подключаемся (192.168.1.254). Завершаем это дело клавишей ENTER. Выдается сообщение, что соединение было закрыто внешним хостом. То есть коммутатор закрыл соединение. Все потому, что не были созданы ключи, которые работают с шифрованием. Зайду на коммутатор и настрою его для корректной работы по SSH.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSwitch(config)#hostname SW1 — \u003Ci\u003Eменяем имя коммутатора. С этим стандартным именем нельзя прописать домен, который нужен для генерации ключей.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSW1(config)#ip domain-name cisadmin.ru — \u003Ci\u003Eпрописываем домен.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSW1(config)#crypto key generate rsa — \u003Ci\u003Eгенерируем RSA ключи.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nThe name for the keys will be: SW1.cisadmin.ru\u003Cbr\u002F\u003E\r\nChoose the size of the key modulus in the range of 360 to 2048 for your\u003Cbr\u002F\u003E\r\n General Purpose Keys. Choosing a key modulus greater than 512 may take\u003Cbr\u002F\u003E\r\n a few minutes.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nHow many bits in the modulus [512]: 1024 — \u003Ci\u003EУказываем размер ключа. По умолчанию предлагается 512, но я введу 1024.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n% Generating 1024 bit RSA keys, keys will be non-exportable...[OK]\u003Cbr\u002F\u003E\r\nВыходит сообщение о удачной генерации ключей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНастройка завершена, и попробуем еще раз подключиться к коммутатору.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fdb5\u002Feea\u002F157\u002Fdb5eea157c274d17b3fc5df6a21f7b68.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ уже выдается другое сообщение, с запросом на ввод пароля. Вводим пароль «cisco» и оказываемся на коммутаторе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОсталось проверить работу. Я воспользуюсь командой ping и проверю доступность рабочего компьютера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F385\u002F82b\u002F20e\u002F38582b20eb4541e093957dcb348309ba.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ убедился, что все прекрасно работает. Привожу \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zaW8yQjhubFpLLUU\u002Fview?usp=sharing&amp;resourcekey=0-wEKr8HoTJjXRf9t8ebnlVQ\" rel=\"nofollow noopener noreferrer\"\u003Eссылку\u003C\u002Fa\u003E, чтобы убедились и вы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА я перехожу к следующему протоколу. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EVIII) FTP (англ. File Transfer Protocol).\u003C\u002Fb\u003E Протокол передачи файлов. Думаю из названия протокола ясно, что он передает файлы. Очень древний протокол, вышедший в начале 70-х годов. Появился он еще до HTTP и стека TCP\u002FIP. Как работал раньше, так и сейчас работает по «клиент-сервер» модели. То есть, присутствует инициатор соединения и тот, кто его слушает. Есть несколько модификаций, которые поддерживают шифрование, туннелирование и так далее. Раньше с этим протоколом работали разные консольные утилиты, у которых не было графики и работали они, при помощи ввода определенных команд. В нынешнее время присутствуют и графические программы. Самой популярной и простой является Filezilla. В CPT реализован только консольный метод. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПереходим к практике. За основу я возьму предыдущую лабораторку и почтовый сервер заменю FTP-сервером.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fb38\u002F921\u002Fbff\u002Fb38921bffe2b4ec8a0c9de56f6d3f3b7.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВ принципе схема аналогична предыдущей. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткроем FTP-сервер и перейдем в сервис FTP. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F386\u002F8ec\u002Fc22\u002F3868ecc22eaa4bfb9633aaa114df642a.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПо умолчанию служба включена, но лучше проверить. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E1)\u003C\u002Fstrong\u003E Цифрой 1 я отметил учетку, которая по умолчанию была здесь создана. Это стандартная учетная запись с логином «cisco» и таким же паролем. В правой колонке видим «Permission» — это права доступа. И видим, что данная учетка имеет все права. В тестовой среде нам как раз это и надо, но, работая в компании, всегда следите за правами каждой учетки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003E2)\u003C\u002Fstrong\u003E Цифрой 2 отмечено хранилище FTP. Здесь в основном прошивки для цисковских устройств. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСервис настроен и раз все так прекрасно, попробуем с ним поработать. Но для начала создам текстовый файл на компьютере директора, который потом выкачаю на FTP-сервер. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОткрываю компьютер директора и выбираю «Text Editor». Это аналог блокнота в ОС Windows.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F5b4\u002F0d7\u002F274\u002F5b40d7274cda467cbe9b8b7ef532eedb.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНапишу туда текст и сохраню его.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F83c\u002F2d0\u002Fb44\u002F83c2d0b448dd410c9ab071531a38c44c.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь попробуем залить этот файл на FTP-сервер. Открываем командную строку и пишем\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Ff9b\u002Fce4\u002F929\u002Ff9bce49295a74ed0b6eebe7c2a9b5af7.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nТо есть, как помним ранее, в начале пишется используемый протокол, а потом следует адрес. Далее, после соединения, спрашивается логин (вводим cisco) и пароль (тоже cisco). И после аутентификации попадаем на сам FTP-сервер. Список доступных команд можно проверить командой \"?\". \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы что-то залить, используется команда «put», а скачать команда «get». Заливаем наш файл.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F7c3\u002F118\u002F5d4\u002F7c31185d428d499f99c4d8d507047033.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВвел я команду «put» и название файла, которое хочу скопировать. И показывает он нам сообщение, что все скопировано. Файл весит 20 байтов, а скорость передачи 487 байтов в секунду. Далее ввел команду «dir», чтобы проверить содержимое сервера. И засветился на нем файл message.txt под 17 номером. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОсталось дело за малым. Это скачать файл на компьютер рабочего. Открываю я WORKER-PC и захожу в командную строку.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fd96\u002F059\u002F80d\u002Fd9605980d33b4acd84f4b62be988897d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВыполняю я практически те же действия, что и ранее. За исключением команды «get», а не «put». Видим, что файл скачен. Еще я ввел команду «dir», чтобы показать, что при скачивании файла, оригинал не удаляется. Скачивается его копия.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ раз он скачал файл, то он должен появиться на компьютере. Открываю «Text Editor» и нажимаю File-\u003EOpen.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fbce\u002Fb8b\u002Fd08\u002Fbceb8bd08f9d447cb3aa9ea603c581c3.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F81c\u002F1d7\u002F69f\u002F81c1d769f2284d8e96ec63a2a8e1b0c3.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВижу, что файл действительно присутствует и пробую его открыть.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F88d\u002Fcf9\u002F8be\u002F88dcf98be8af42ad98e95a83b9fb112d.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nФайл пришел целым. Весь текст присутствует. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНе буду повторно засорять вам голову, как это работает. Потому что работает оно точно так же, как и почтовые протоколы, Telnet, SSH и так далее. То есть создается TCP-сессия, и начинается передача\u002Fскачивание файла. Приведу только структуру его.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fe84\u002F2db\u002F319\u002Fe842db31941e4c669ae38b6782091a2e.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВ TCP обращаем внимание на номер порта. Это 21 порт (стандартный порт FTP). И в поле данных FTP обозначено, что это какие-то двоичные данные.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот так в принципе работает всемирно известный протокол. Более расширенные версии здесь не поддерживаются, но работают они практически так же. Вот \u003Ca href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F0BzKZChrEeV7zTjNjR1NCNll3UkU\u002Fview?usp=sharing&amp;resourcekey=0-x3MQLQTc2c_wDPjnAt75gA\" rel=\"nofollow noopener noreferrer\"\u003Eссылка\u003C\u002Fa\u003E на лабораторку.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ последний протокол, который остался — это TFTP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EIX) TFTP (англ. Trivial File Transfer Protocol).\u003C\u002Fb\u003E Простой протокол передачи файлов. Придумали его в 80-х годах. Хоть FTP был достаточно популярным, не все его функции были нужны для решения простых задач. И был придуман его простой аналог. Он работает по UDP, то есть не требует установления соединения. Также он не требует аутентификации и авторизации. Достаточно знать его IP-адрес и самому его иметь. Это конечно не безопасно, так как адрес можно подделать. Но когда нужен простой протокол и не требуется авторизация, выбор падает на него. Очень плотно с ним работает цисковское оборудование, для копирования образа или скачивания на flash-память.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНичто не учит лучше, чем практика. Поэтому переходим к ней. Чудесным образом я обнаружил, что компьютеры в CPT не умеют работать с TFTP. Хорошо, что с цисковского оборудования не выпилили эту функцию. Поэтому будем учиться на нашем любимом коммутаторе. Схема остается такой же. Просто на FTP-сервере я включу сервис TFTP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F7d5\u002F3ed\u002F61f\u002F7d53ed61fb184fb3a98601c3ad0682a6.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВот так он выглядит. В базе куча разных прошивок для многих устройств.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПерейдем к коммутатору.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSW1#dir — \u003Ci\u003E команда вывода содержимого файловой системы\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\nDirectory of flash:\u002F\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n1 -rw- 4414921  c2960-lanbase-mz.122-25.FX.bin\u003Cbr\u002F\u003E\r\n 9 -rw- 1168  config.text\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n64016384 bytes total (59600295 bytes free)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУ нас есть файл config.text. Попробуем его залить на TFTP — сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSW1#copy flash: tftp: — \u003Ci\u003Eто есть указываем откуда, а потом куда. Здесь это с flash-памяти на tftp-сервер\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSource filename []? config.text — \u003Ci\u003Eздесь он спрашивает имя файла, которое надо скопировать.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAddress or name of remote host []? 192.168.1.4 — \u003Ci\u003Eуказываем куда скопировать.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nDestination filename [config.text]? — \u003Ci\u003Eи тут надо указать, под каким именем сохранить его на сервере. По умолчанию он предлагает сохранить его с тем же названием.И, если нажать клавишу ENTER, он выберет имя по умолчанию. Меня это устраивает, и я оставлю его таким же.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nWriting config.text....!!!\u003Cbr\u002F\u003E\r\n[OK — 1168 bytes]\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n1168 bytes copied in 3.048 secs (383 bytes\u002Fsec)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ в заключительном сообщении он показывает, что все успешно скопировалось. Перейдем на TFTP-сервер и проверим.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002Fd11\u002Fa62\u002Ff1f\u002Fd11a62f1fecf49cf8590cfc4b3aa0b38.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ вижу, что действительно он там присутствует. Значит коммутатор меня не обманул.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь попробуем что-нибудь скачать с сервера на коммутатор.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSW1#copy tftp: flash: — \u003Ci\u003Eздесь пишем наоборот. Сначала tftp, а потом flash\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAddress or name of remote host []? 192.168.1.4 — \u003Ci\u003E адрес TFTP-сервера\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее он спросит, что скопировать. Я не помню точное название прошивки и открою TFTP, чтобы посмотреть.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F560\u002Ffab\u002F660\u002F560fab66079645f7a1183f5e55bbf817.PNG\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗаписываю название\u003Cbr\u002F\u003E\r\nSource filename []? c2960-lanbasek9-mz.150-2.SE4.bin\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nDestination filename [c2960-lanbasek9-mz.150-2.SE4.bin]? — \u003Ci\u003Eздесь он спрашивает, как назвать его на самом коммутаторе. Я нажму ENTER и оставлю имя по умолчанию.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAccessing tftp:\u002F\u002F192.168.1.4\u002Fc2960-lanbasek9-mz.150-2.SE4.bin…\u003Cbr\u002F\u003E\r\nLoading c2960-lanbasek9-mz.150-2.SE4.bin from 192.168.1.4:!!!\u003Cbr\u002F\u003E\r\n[OK — 4670455 bytes]\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n4670455 bytes copied in 0.057 secs (6587503 bytes\u002Fsec)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВыдал он мне сообщение, что загрузка прошла успешно. Проверю я наличие прошивки командой «dir».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSW1#dir\u003Cbr\u002F\u003E\r\nDirectory of flash:\u002F\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n1 -rw- 4414921  c2960-lanbase-mz.122-25.FX.bin\u003Cbr\u002F\u003E\r\n 10 -rw- 4670455  c2960-lanbasek9-mz.150-2.SE4.bin\u003Cbr\u002F\u003E\r\n 9 -rw- 1168  config.text\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n64016384 bytes total (54929840 bytes free)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВижу, что действительно все на месте. И вдобавок он мне сообщает об объеме памяти и наличии свободного места.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗакончили мы рассматривать протоколы верхнего уровня. Не думал я, что получится настолько длинная статья. Наверное виноваты картинки. Но постарался максимально кратко и по делу. Протоколов мы рассмотрели много, и все они не заменимы. Часто выручают жизнь сисадминам и любимым нами пользователям. Спасибо, что дочитали. Если что-то непонятно, оставляйте комментарии или сразу пишите в личку. А я пошел ставить чайник и пить вкусный чай с пирожными!\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"cisco"},{"titleHtml":"network"},{"titleHtml":"ccna"},{"titleHtml":"education"},{"titleHtml":"application layer"},{"titleHtml":"http"},{"titleHtml":"dns"},{"titleHtml":"dhcp"},{"titleHtml":"telnet"},{"titleHtml":"ssh"},{"titleHtml":"pop3"},{"titleHtml":"smtp"},{"titleHtml":"ftp"},{"titleHtml":"tftp"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F307714\u002F606d9cfec30e4088f9567cdc6c0fe6f7\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F307714\u002F606d9cfec30e4088f9567cdc6c0fe6f7\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F307714\\\u002F\"},\"headline\":\"Основы компьютерных сетей. Тема №2. Протоколы верхнего уровня\",\"datePublished\":\"2016-08-24T14:12:23+03:00\",\"dateModified\":\"2021-09-29T10:20:50+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Денис\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике.\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F307714\\\u002F#post-content-body\",\"about\":[\"h_sys_admin\",\"h_it-infrastructure\",\"h_cisconetworks\",\"h_network_technologies\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F307714\\\u002F606d9cfec30e4088f9567cdc6c0fe6f7\\\u002F\"]}","metaDescription":"И снова всем привет! Сегодня речь пойдет о протоколах верхнего уровня. Разберем, как они работают, из чего состоят и где применяются теоретически и на практике. \r\n\r\n\r\n\r\n\n                       ...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[{"title":"DevOps инженер","vacanciesCount":87,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fdevops","itemHubs":["devops","build_automation","sys_admin","virtualization","kubernetes"]},{"title":"Системный администратор","vacanciesCount":130,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fsistemnij_administrator","itemHubs":["it-infrastructure","s_admin","server_side_optimization","sys_admin"]}],"hubs":"sys_admin,it-infrastructure,cisconetworks,network_technologies"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"technotext":{"nominationsList":[]},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.92df6f6d.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="https://habr.com/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
