<!DOCTYPE html>

	









<html lang="ru">
<head>
    <title>Postgres Pro Standard : Документация: 9.5: 7.2. Табличные выражения : Компания Postgres Professional</title>
	
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="msapplication-TileImage" content="/img/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
	<meta name="p:domain_verify" content="26bcf8b79467031bea9a8631dd6f0b11"/>
	<meta name="google-site-verification" content="Vy_P_vr-Jp6rfy_wQpPSplaU1p3wfEPSwtHOQBFZU7Q" />
    <meta name="csrf-token" content="">

	<meta property="og:url"             content="https://postgrespro.ru/docs/postgrespro/9.5/queries-table-expressions" >
	<meta property="fb:app_id"          content="546521955527856" >
	<meta property="og:type"            content="website" >
	<meta property="og:title"       content="Postgres Pro Standard : Документация: 9.5: 7.2. Табличные выражения" >
	<meta property="og:image"       content="https://postgrespro.ru/img/v3/logo2.png" >
	
	
	<link rel="alternate" type="application/rss+xml" title="RSS" href="https://postgrespro.ru/rss">
	<link rel="apple-touch-icon" sizes="57x57" href="https://postgrespro.ru/img/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://postgrespro.ru/img/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://postgrespro.ru/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://postgrespro.ru/img/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://postgrespro.ru/img/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://postgrespro.ru/img/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://postgrespro.ru/img/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://postgrespro.ru/img/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://postgrespro.ru/img/apple-touch-icon-180x180.png">
    <link rel="apple-touch-icon" href="https://postgrespro.ru/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://postgrespro.ru/img/favicon-16x16.png" sizes="16x16">
    <link rel="manifest"  href="https://postgrespro.ru/img/manifest.json">
    <link rel="mask-icon" href="https://postgrespro.ru/img/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="https://postgrespro.ru/img/favicon.ico">


	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/bootstrap.min.css">
	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/style_v3.css">
	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/hljs.css">
	<link rel="stylesheet" href="https://postgrespro.ru/j/v3.css/docs.css">

	<script src="https://postgrespro.ru/j/all.js?1"></script>
	



	
<style>
.main > section {
	padding-top: 0;
}

.doc-list h3 {
	margin-bottom: 25px;
}

.doc-nav-versions li > a.disabled { 
	pointer-events: none;
	color: #525f62;
	text-decoration: none;
}
.doc-list { list-style: none; color: #343a3d; }
.doc-list ul { margin: 2px 0 2px -26px }
.doc-list li { display: inline; padding-right: 4px; }
.doc-list li.separator { padding-right: 10px; }
.doc-list a.disabled {
	color: #343a3d;
	pointer-events: none;
}
.doc-list a::before {
	position:relative; 
	left: -2px; 
	top: 2px; 
} 

.menu-docs { 
	font-weight: 500; 
    margin: 0 auto 0 auto ;
    
    padding-top: 3em;
    padding-bottom: 0;
    width: 100%;
}
.menu-docs a.disabled {
	pointer-events: none;
}
.menu-product-wrapper {
	margin-bottom: 1em;
	display: inline-block; text-align: left; padding-left:2em;vertical-align: top;
}
.menu-product-wrapper a.active{
	font-weight: 700;
}
.menu-product-wrapper a.active.disabled{
	color: black !important;
}
.menu-versions-wrapper {
	margin-top: 0.5em;
}

#toggle-lang input[type="radio"] {
	position: absolute;clip: 
	rect(0, 0, 0, 0);
	pointer-events: none;
}


.menu-doc-files-group {
	position: absolute;
	right: 0;
	margin-right: 1em; 
}

.toggle-lang-group {
	top: 96px; 
	position:sticky;
	display: block; 
	float:right; 
	margin-top: 42px;
}

nav.menu-docs .btn-group {
	vertical-align: inherit;
	
}

.autolink:before {
	content: '\e80f'; 
	font-family: "fontello";
	font-size: 2em;
	float: left;
	margin-top: -0.4em;
	margin-left: -1.5em;
	color: black;
	opacity: 0;
	transition: opacity 1s ;
}

dt:hover > .autolink:before,
div:hover > .autolink:before {
	opacity: 0.4;
	transition: opacity 0.5s ;
}

</style>

	
	
	<script type="text/javascript">
		var LANG = 'ru';
	</script>
	

</head>
<body>
	
<div class="modal fade" id="loginForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog"><div class="modal-content"><div class="modal-header">
		<h5 class="modal-title">Вход в личный кабинет</h5>
	</div><div class="modal-body">
			<input type="text"     required name="email"    class="primary" placeholder="введите e-mail"  >
			<input type="password" required name="password" class="primary" placeholder="введите пароль">
	</div>
	<div class="modal-footer" >
		<button type="submit" class="btn btn-primary ">Войти</button>
		<div class="text-center" style="display: block;width: 100%; margin-left:0; margin-top:0.5em;">
			<button type="button" class="btn btn-psevdo btn-restore float-left">Забыли пароль?</button>
			<button type="button" class="btn btn-outline-primary btn-reg float-right">Регистрация</button><hr style="clear: both;margin-top:4em;">
			<button type="button" class="btn btn-outline-success " onClick="document.location.href = '/';">Спасибо, потом</button>
		</div>
	</div>
	</div></div>
	</form>
</div>

<div class="modal fade" id="regForm" role="dialog" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h5 class="modal-title">Регистрация пользователя</h5>
	</div>
	<div class="modal-body">		
		<input type="text"     required name="email"          placeholder="E-mail" >
		<input type="password" required name="password"       placeholder="Пароль" >
		<input type="password" required name="passw2"         placeholder="Пароль повторно"  >
		<input type="text"     required name="last_name_ru"   placeholder="Фамилия">
		<input type="text"     required name="first_name_ru"  placeholder="Имя"    >
		<!-- input type="text"              name="middle_name_ru" placeholder="Отчество">
		<input type="text"              name="phone"          placeholder="Телефон" -->
		<label><input id="agree" name="agree" type="checkbox"/> Подтверждаю</label>
	 		<span class="toggler" style="display:inline"  onClick="loadAgreement();">согласие с обработкой персональных данных</span>
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary ">Зарегистрироваться</button>
		<button class="btn btn-psevdo btn-back">назад</button>
	</div></div></div>
	</form>
</div>

<style>
	.cabinet-modal .modal-dialog{
		margin: 5em 2em auto auto;
	}
	.cabinet-modal .icon-cabinet {
		display:block;
		margin:auto;
		font-size: 2em;
	}
</style>


<div class="modal fade cabinet-modal" id="cabinet-modal-info" tabindex="-1" role="dialog" aria-labelledby="cabinet-modal-infoLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
         <span class="fa fa-sign-in fa-lg icon-cabinet cabinet-button btn btn-primary xs-none text-center invisible"></span>
      </div>
      <div class="modal-body">
	      <p id="name" class="text-center text-muted"></p>
	      <p id="e-mail" class="text-center font-weight-light"></p>
	      <p class="text-center"><a href="https://postgrespro.ru/user">Личный кабинет</a></p>
      </div>
      <div class="modal-footer" style="width: 85%;margin: auto;">
	      <button class="text-center btn btn-warning" id="cabinet-action-button" style="width: 100%;" onClick="logout();">Выйти</button>
      </div>
    </div>
  </div>
</div>



<div id="warp-agreement" style="z-index: 10000;">
<div class="pop-up-agreement" style="display: none;z-index: 10000;"  onClick="$(this).slideToggle(150);" >
<div class="agreement" >
<div class="pop-up-close">&#10006;</div>
<div id="agreement">
</div>
</div>
</div>
</div>



<div class="modal fade" id="restoreForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h5 class="modal-title">Восстановление пароля</h5>
	</div>
	<div class="modal-body">
		<p>Укажите e-mail, на который будет выслан код восстановления пароля.</p>
		<input type="text" name="email" required placeholder="введите e-mail">
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary ">Продолжить</button>
		<button type="button" class="btn btn-psevdo btn-back">назад</button>
	</div></div></div>
	</form>
</div>

<div class="modal fade" id="confirmForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h4 class="modal-title">Подтверждение аккаунта</h4>
	</div>
	<div class="modal-body">
		<p>На указанный вами адрес e-mail был выслан код подтверждения аккаунта. Введите полученный код для продолжения:</p>
		<input type="text" name="key" required placeholder="введите код">
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary ">Продолжить</button>
		<button type="button" class="btn btn-psevdo btn-back">назад</button>
	</div></div></div>
	</form>
</div>

<div class="modal fade" id="newPasswordForm" style="display: none;">
	<form onSubmit="return false;">
	<div class="modal-dialog" ><div class="modal-content"><div class="modal-header">
		<h4 class="modal-title">Изменение пароля</h4>
	</div><div class="modal-body">
		<p>Введите новый пароль два раза:</p>
		<input required type="password" name="password"><br>
		<input required type="password" name="pass2">
	</div><div class="modal-footer">
		<div class="row">
			<div class="col-sm-12"><button type="submit" class="btn btn-success ">Продолжить</button></div>
		</div>
	</div></div></div>
	</form>
</div>

	
	
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.7";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
		
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v2.5&appId=860619283960577";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
		</script>
		<script src="https://apis.google.com/js/platform.js" async defer>
		  {lang: 'ru'}
		</script>
		

	
	

	
    <header>
	<nav class="navbar navbar-expand-xl navbar-light bg-light justify-content-between">
		<!-- div class="mr-2">
			<span class=" d-none d-xl-inline">{XL}</span>
			<span class=" d-none d-lg-inline d-xl-none">{LG}</span>
			<span class=" d-none d-md-inline d-lg-none">{MD}</span>
			<span class=" d-none d-sm-inline d-md-none">{SM}</span>
			<span class=" d-block d-sm-none">{XS}</span>
		</div -->
		
		<a class="navbar-brand" href="https://postgrespro.ru/">
			<img src="https://postgrespro.ru/img/v3/PostgresPro_logo.svg" alt="Postgres Pro" title="Postgres Pro">			
		</a>
		
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		  
		
		<div class="collapse navbar-collapse" id="navbarNavDropdown">			
			
	<ul class="nav navbar-nav float-left">
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="queries-table-expressions.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" > Компания</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="queries-table-expressions.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/about" class="dropdown-item
						">О компании</a>
				
					<a href="https://postgrespro.ru/about/team" class="dropdown-item
						">Руководство</a>
				
					<a href="https://postgrespro.ru/about/license" class="dropdown-item
						">Документы</a>
				
					<a href="https://postgrespro.ru/partners" class="dropdown-item
						">Партнёры</a>
				
					<a href="https://postgrespro.ru/vacancies" class="dropdown-item
						">Вакансии</a>
				
					<a href="https://postgrespro.ru/contacts" class="dropdown-item
						">Контакты</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="queries-table-expressions.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Продукты</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="queries-table-expressions.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/products/postgrespro/enterprise" class="dropdown-item
						">СУБД POSTGRES PRO ENTERPRISE</a>
				
					<a href="https://postgrespro.ru/products/postgrespro/enterprisecertified" class="dropdown-item
						">СУБД POSTGRES PRO ENTERPRISE CERTIFIED</a>
				
					<a href="https://postgrespro.ru/products/postgrespro/certified" class="dropdown-item
						">СУБД POSTGRES PRO CERTIFIED</a>
				
					<a href="https://postgrespro.ru/products/postgrespro/standard" class="dropdown-item
						">СУБД POSTGRES PRO STANDARD</a>
				
					<a href="https://postgrespro.ru/windows" class="dropdown-item
						">СУБД PostgreSQL для Windows</a>
				
					<a href="https://postgrespro.ru/roadmap" class="dropdown-item
						">План разработок</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="queries-table-expressions.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Услуги</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="queries-table-expressions.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/services/support" class="dropdown-item
						">Техподдержка СУБД</a>
				
					<a href="https://postgrespro.ru/services/audit" class="dropdown-item
						">Аудит СУБД</a>
				
					<a href="https://postgrespro.ru/services/migration" class="dropdown-item
						">Миграция СУБД</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="queries-table-expressions.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" > Клиенты</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="queries-table-expressions.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/trusted" class="dropdown-item
						">Нам доверяют</a>
				
					<a href="https://postgrespro.ru/reviews" class="dropdown-item
						">Отзывы</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="https://postgrespro.ru/education" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Образование</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="queries-table-expressions.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/docs" class="dropdown-item
						">Документация</a>
				
					<a href="https://postgrespro.ru/education/books" class="dropdown-item
						">Книги</a>
				
					<a href="https://postgrespro.ru/education/courses" class="dropdown-item
						">Учебные курсы</a>
				
					<a href="https://postgrespro.ru/education/cert" class="dropdown-item
						">Сертификация</a>
				
					<a href="https://postgrespro.ru/education/university" class="dropdown-item
						">Курсы для ВУЗов</a>
				
					<a href="https://postgrespro.ru/education/glossary" class="dropdown-item
						">Глоссарий</a>
				
					<a href="https://postgrespro.ru/education/demodb" class="dropdown-item
						">Демо-база</a>
				
					<a href="https://postgrespro.ru/list" class="dropdown-item
						">Списки рассылки</a>
				
				</div>
			</li>
		
			<li class="nav-item dropdown">
				<a 
					class="nav-link " 
					href="queries-table-expressions.html#" id="" data-toggle="" aria-haspopup="false" aria-expanded="true" >Новости</a>				
				<a class="nav-link dropdown-toggle dropdown-toggle-split" href="queries-table-expressions.html#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true" ></a>
				<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
				
					<a href="https://postgrespro.ru/blog" class="dropdown-item
						">Блог</a>
				
					<a href="https://postgrespro.ru/blog/media" class="dropdown-item
						">СМИ  о нас</a>
				
					<a href="https://postgrespro.ru/blog/postgresso" class="dropdown-item
						">Дайджест Postgresso</a>
				
					<a href="https://postgrespro.ru/events" class="dropdown-item
						">Мероприятия</a>
				
					<a href="https://postgrespro.ru/about/press" class="dropdown-item
						">Контакты для СМИ</a>
				
				</div>
			</li>
		
	</ul>
	
<script type="text/template" id="menu-tmpl">
</script>
		<ul class="navbar-nav d-xl-none" style="display: inline-block; float: right;">
			<li class="nav-item " style="display: inline-block !important; padding-right: 1em;"><a href="https://postgrespro.ru/search" class="nav-item nav-link icon-search text-primary"></a></li>
			
			<li class="nav-item "       style="display: inline-block !important;"><a class="nav-item nav-link " href="queries-table-expressions.html#">RU</a></li>
			<li class="nav-item active" style="display: inline-block !important;"><a class="nav-item nav-link active" href="https://postgrespro.com/docs/postgrespro/9.5/queries-table-expressions">EN</a></li>
			
			<div style="display: inline-block;">
				
<style>
	.account-menu { 
		display: inline-block; 
		white-space: nowrap;
	}
	.cabinet-button  {
		margin: 0 0 0 1em;
		padding: 0.5em 0.5em;
		border-radius: 50%;		
	}
	.cabinet-info {
		font-weight: 700;
		cursor: pointer;		
	}
	.cabinet-info:hover {
		color: green;		
	}
</style>
	<li class="nav-item ">
		<div class="account-menu" data-action="info" id="cabinet-buttons" >
			<a class="fa fa-sign-in  fa-lg btn btn-primary cabinet-button invisible" onClick="showLoginLogout(this); return false;" href="https://postgrespro.ru/user" title="Личный кабинет"></a>
			<span class="nav-item cabinet-info invisible" onClick="return showAccountInfo();"  title="Дополнительно…">⋮</span>
		</div>
	</li>

			</div>
		</ul>
	


		</div>

		
<script type="text/template" id="menu-tmpl">
</script>
	<div class=" d-none d-xl-flex">
		<ul class="navbar-nav float-right">
			<li id="li-search"><a class="nav-item nav-link icon-search text-primary" id="search-button" data-action="null" style="font-size: 1.6em;top: -6px;position: relative;" onClick="showSearch(this);"></a></li>
			
			<li class="nav-item "><a class="nav-item nav-link " href="queries-table-expressions.html#">RU</a></li>
			<li class="nav-item active"><a class="nav-item nav-link active" href="https://postgrespro.com/docs/postgrespro/9.5/queries-table-expressions">EN</a></li>
			
			
<style>
	.account-menu { 
		display: inline-block; 
		white-space: nowrap;
	}
	.cabinet-button  {
		margin: 0 0 0 1em;
		padding: 0.5em 0.5em;
		border-radius: 50%;		
	}
	.cabinet-info {
		font-weight: 700;
		cursor: pointer;		
	}
	.cabinet-info:hover {
		color: green;		
	}
</style>
	<li class="nav-item ">
		<div class="account-menu" data-action="info" id="cabinet-buttons" >
			<a class="fa fa-sign-in  fa-lg btn btn-primary cabinet-button invisible" onClick="showLoginLogout(this); return false;" href="https://postgrespro.ru/user" title="Личный кабинет"></a>
			<span class="nav-item cabinet-info invisible" onClick="return showAccountInfo();"  title="Дополнительно…">⋮</span>
		</div>
	</li>

		</ul>
	</div>
	

		
	</nav>
    </header>
    
    <main name="main">
    <div class="main" name="main">
		

<script>
$(function() {
	if ("" != "")
		toggleLang('', 'postgrespro', '9.5', 'queries-table-expressions');
		
$('div.sect2').each(function(i,r){
	var _id = $(r).attr('id');
	if (_id !== undefined) {
		if ($(r).find('h3:first').length > 0) {
			$(r).html('<a href="queries-table-expressions.html#'+_id+'" class="autolink"></a>'+$(r).html());
		}
	} 
});		

$('dt').each(function(i,r){
	var _id = $(r).attr('id');
	if (_id !== undefined) {
		$(r).html('<a href="queries-table-expressions.html#'+_id+'" class="autolink"></a>'+$(r).html());
	}
});		
	

	
})
</script>


<nav class="menu-docs text-center">
	<div  class="--d-none --d-sm-inline" style="float: right;">
		
			<div id="menu-doc-files" class="menu-doc-files-group d-none d-xl-inline" >
				
					<a href="https://postgrespro.ru/media/docs/postgrespro/9.5/ru/postgres.epub" class="epub btn btn-outline-primary" title="epub"></a><br>
				
					<a href="https://postgrespro.ru/media/docs/postgrespro/9.5/ru/postgres-A4-fop.pdf" class="pdf btn btn-outline-primary" title="pdf"></a><br>
				
			</div>
		
	
	</div>
	
	
		
	<div class="doc-menu-wrapper doc-menu-wrapper-ru  ">
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgrespro" class="active" style="font-weight: 700;">Postgres Pro Standard</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/14/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/13/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/12/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/11/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/10/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.6/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"queries-table-expressions.html" 
							 
							class="disabled active btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/enterprise" >Postgres Pro Enterprise</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/13/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/12/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/11/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/10/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/9.6/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgresql" >PostgreSQL</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/14/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/13/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/12/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/11/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/10/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.6/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.5/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.4/queries-table-expressions" 
							 
							class=" btn btn-outline-primary">
							9.4										
						</a>	
					    	
		    	
				</div>
			</div>
		
		
	</div>

		
	<div class="doc-menu-wrapper doc-menu-wrapper-en  d-none">
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgrespro" class="active" style="font-weight: 700;">Postgres Pro Standard</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/14/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/13/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/12/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/11/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/10/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.6/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.5/queries-table-expressions?lang=en"
							 
							class="disabled active btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/enterprise" >Postgres Pro Enterprise</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/13/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/12/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/11/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/10/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/9.6/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgresql" >PostgreSQL</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/14/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/13/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/12/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/11/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/10/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.6/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.5/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.4/queries-table-expressions?lang=en"
							 
							class=" btn btn-outline-primary">
							9.4										
						</a>	
					    	
		    	
				</div>
			</div>
		
		
	</div>

		
	<div class="doc-menu-wrapper doc-menu-wrapper-ru-en  d-none">
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgrespro" class="active" style="font-weight: 700;">Postgres Pro Standard</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/14/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/13/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/12/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/11/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/10/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.6/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgrespro/9.5/queries-table-expressions?lang=ru-en"
							 
							class="disabled active btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/enterprise" >Postgres Pro Enterprise</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/13/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/12/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/11/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/10/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/enterprise/9.6/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
				</div>
			</div>
		
	
		
			<div class="menu-product-wrapper">
				<a  href="https://postgrespro.ru/docs/postgresql" >PostgreSQL</a><br>
		
				<div class="menu-versions-wrapper btn-group" >
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/14/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							14										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/13/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							13										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/12/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							12										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/11/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							11										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/10/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							10										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.6/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.6										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.5/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.5										
						</a>	
					    	
		    	
					
						<a href=
							
								"https://postgrespro.ru/docs/postgresql/9.4/queries-table-expressions?lang=ru-en"
							 
							class=" btn btn-outline-primary">
							9.4										
						</a>	
					    	
		    	
				</div>
			</div>
		
		
	</div>


	

</nav>

				
<section class="container-fluid">
		<div id="toggle-lang" class="btn-group toggle-lang-group  " style="
		">
			<label class="btn btn-outline-success active" name="ru" style="cursor: pointer; margin: 0; width: 100%;">
				<input type="radio" autocomplete="off" name="ru" value="ru" checked onChange="toggleLang(this.value, 'postgrespro', '9.5', 'queries-table-expressions'); return false;"> RU
			</label><br>
			<label class="btn btn-outline-success" name="en" style="cursor: pointer; margin: 0; width: 100%;">
				<input type="radio" autocomplete="off" name="en" value="en"  onChange="toggleLang(this.value, 'postgrespro', '9.5', 'queries-table-expressions'); return false;"> EN
			</label><br>
			<label class="btn btn-outline-success" name="ru-en" style="cursor: pointer; margin: 0; width: 100%;">
				<input type="radio" autocomplete="off" name="ru-en" value="ru-en" onChange="toggleLang(this.value, 'postgrespro', '9.5', 'queries-table-expressions'); return false;" > RU EN
			</label>
		</div>
<div class="container">
<div class="row docs content" id="docContent-wrapper-ppg">
    <div class="col-md-12" id="divDocRu">
    	
			<div><div class="navheader" xmlns="http://www.w3.org/TR/xhtml1/transitional"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="5">7.2. Табличные выражения</th></tr><tr><td align="left" width="10%"><a accesskey="p" href="https://postgrespro.ru/docs/postgrespro/9.5/queries-overview" title="7.1. Обзор">Пред.</a> </td><td align="left" width="10%"><a accesskey="u" href="https://postgrespro.ru/docs/postgrespro/9.5/queries" title="Глава 7. Запросы">Наверх</a></td><th align="center" width="60%">Глава 7. Запросы</th><td align="right" width="10%"><a accesskey="h" href="https://postgrespro.ru/docs/postgrespro/9.5/index" title="Документация к Postgres Pro 9.5.20.1">Начало</a></td><td align="right" width="10%"> <a accesskey="n" href="https://postgrespro.ru/docs/postgrespro/9.5/queries-select-lists" title="7.3. Списки выборки">След.</a></td></tr></table><hr /></div><div class="sect1" id="queries-table-expressions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.2. Табличные выражения</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="queries-table-expressions.html#queries-from">7.2.1. Предложение <code class="literal">FROM</code></a></span><dt><span class="sect2"><a href="queries-table-expressions.html#queries-where">7.2.2. Предложение <code class="literal">WHERE</code></a></span><dt><span class="sect2"><a href="queries-table-expressions.html#queries-group">7.2.3. Предложения <code class="literal">GROUP BY</code> и <code class="literal">HAVING</code></a></span><dt><span class="sect2"><a href="queries-table-expressions.html#queries-grouping-sets">7.2.4. <code class="literal">GROUPING SETS</code>, <code class="literal">CUBE</code> и <code class="literal">ROLLUP</code></a></span><dt><span class="sect2"><a href="queries-table-expressions.html#queries-window">7.2.5. Обработка оконных функций</a></span></dl></div><a class="indexterm" id="idp4116"></a><p><em class="firstterm">Табличное выражение</em> вычисляет таблицу. Это выражение содержит предложение <code class="literal">FROM</code>, за которым могут следовать предложения <code class="literal">WHERE</code>, <code class="literal">GROUP BY</code> и <code class="literal">HAVING</code>. Тривиальные табличные выражения просто ссылаются на физическую таблицу, её называют также базовой, но в более сложных выражениях такие таблицы можно преобразовывать и комбинировать самыми разными способами.<p>Необязательные предложения <code class="literal">WHERE</code>, <code class="literal">GROUP BY</code> и <code class="literal">HAVING</code> в табличном выражении определяют последовательность преобразований, осуществляемых с данными таблицы, полученной в предложении <code class="literal">FROM</code>. В результате этих преобразований образуется виртуальная таблица, строки которой передаются списку выборки, вычисляющему выходные строки запроса.<div class="sect2" id="queries-from"><div class="titlepage"><div><div><h3 class="title">7.2.1. Предложение <code class="literal">FROM</code></h3></div></div></div><p><a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/sql-select#sql-from" title="Предложение FROM">Предложение <code class="literal">FROM</code></a> образует таблицу из одной или нескольких ссылок на таблицы, разделённых запятыми. <pre class="synopsis">
FROM <em class="replaceable"><code>табличная_ссылка</code></em> [<span class="optional">, <em class="replaceable"><code>табличная_ссылка</code></em> [<span class="optional">, ...</span>]</span>]
</pre><p> Здесь табличной ссылкой может быть имя таблицы (возможно, с именем схемы), производная таблица, например подзапрос, соединение таблиц или сложная комбинация этих вариантов. Если в предложении <code class="literal">FROM</code> перечисляются несколько ссылок, для них применяется перекрёстное соединение (то есть декартово произведение их строк; см. ниже). Список <code class="literal">FROM</code> преобразуется в промежуточную виртуальную таблицу, которая может пройти через преобразования <code class="literal">WHERE</code>, <code class="literal">GROUP BY</code> и <code class="literal">HAVING</code>, и в итоге определит результат табличного выражения.<a class="indexterm" id="idp4144"></a><p>Когда в табличной ссылке указывается таблица, являющаяся родительской в иерархии наследования, в результате будут получены строки не только этой таблицы, но и всех её дочерних таблиц. Чтобы выбрать строки только одной родительской таблицы, перед её именем нужно добавить ключевое слово <code class="literal">ONLY</code>. Учтите, что при этом будут получены только столбцы указанной таблицы — дополнительные столбцы дочерних таблиц не попадут в результат.<p>Если же вы не добавляете <code class="literal">ONLY</code> перед именем таблицы, вы можете дописать после него <code class="literal">*</code>, тем самым указав, что должны обрабатываться и все дочерние таблицы. Добавлять <code class="literal">*</code> не обязательно, так как теперь это поведение подразумевается по умолчанию (если только вы не измените параметр конфигурации <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/runtime-config-compatible#guc-sql-inheritance">sql_inheritance</a>). Однако такая запись может быть полезна тем, что подчеркнёт использование дополнительных таблиц.<div class="sect3" id="queries-join"><div class="titlepage"><div><div><h4 class="title">7.2.1.1. Соединённые таблицы</h4></div></div></div><a class="indexterm" id="idp4155"></a><p>Соединённая таблица ­­­­­­— это таблица, полученная из двух других (реальных или производных от них) таблиц в соответствии с правилами соединения конкретного типа. Общий синтаксис описания соединённой таблицы: <pre class="synopsis">
<em class="replaceable"><code>T1</code></em> <em class="replaceable"><code>тип_соединения</code></em> <em class="replaceable"><code>T2</code></em> [<span class="optional"> <em class="replaceable"><code>условие_соединения</code></em> </span>]
</pre><p>Соединения любых типов могут вкладываются друг в друга или объединяться: и <em class="replaceable"><code>T1</code></em>, и <em class="replaceable"><code>T2</code></em> могут быть результатами соединения. Для однозначного определения порядка соединений предложения <code class="literal">JOIN</code> можно заключать в скобки. Если скобки отсутствуют, предложения <code class="literal">JOIN</code> обрабатываются слева направо.<div class="variablelist"><p class="title"><strong>Типы соединений</strong><dl class="variablelist"><dt><span class="term">Перекрёстное соединение <a class="indexterm" id="idp4172"></a> <a class="indexterm" id="idp4175"></a></span><dd><pre class="synopsis"><em class="replaceable"><code>T1</code></em> CROSS JOIN <em class="replaceable"><code>T2</code></em></pre><p>Соединённую таблицу образуют все возможные сочетания строк из <em class="replaceable"><code>T1</code></em> и <em class="replaceable"><code>T2</code></em> (т. е. их декартово произведение), а набор её столбцов объединяет в себе столбцы <em class="replaceable"><code>T1</code></em> со следующими за ними столбцами <em class="replaceable"><code>T2</code></em>. Если таблицы содержат N и M строк, соединённая таблица будет содержать N * M строк.<p><code class="literal">FROM <em class="replaceable"><code>T1</code></em> CROSS JOIN <em class="replaceable"><code>T2</code></em></code> эквивалентно <code class="literal">FROM <em class="replaceable"><code>T1</code></em> INNER JOIN <em class="replaceable"><code>T2</code></em> ON TRUE</code> (см. ниже). Эта запись также эквивалентна <code class="literal">FROM <em class="replaceable"><code>T1</code></em>, <em class="replaceable"><code>T2</code></em></code>. <div class="note"><h3 class="title">Примечание</h3><p>Последняя запись не полностью эквивалентна первым при указании более чем двух таблиц, так как <code class="literal">JOIN</code> связывает таблицы сильнее, чем запятая. Например, <code class="literal">FROM <em class="replaceable"><code>T1</code></em> CROSS JOIN <em class="replaceable"><code>T2</code></em> INNER JOIN <em class="replaceable"><code>T3</code></em> ON <em class="replaceable"><code>условие</code></em></code> не равнозначно <code class="literal">FROM <em class="replaceable"><code>T1</code></em>, <em class="replaceable"><code>T2</code></em> INNER JOIN <em class="replaceable"><code>T3</code></em> ON <em class="replaceable"><code>условие</code></em></code>, так как <em class="replaceable"><code>условие</code></em> может ссылаться на <em class="replaceable"><code>T1</code></em> в первом случае, но не во втором.</div><dt><span class="term">Соединения с сопоставлениями строк <a class="indexterm" id="idp4213"></a> <a class="indexterm" id="idp4216"></a></span><dd><pre class="synopsis"><em class="replaceable"><code>T1</code></em> { [<span class="optional">INNER</span>] | { LEFT | RIGHT | FULL } [<span class="optional">OUTER</span>] } JOIN <em class="replaceable"><code>T2</code></em>
  ON <em class="replaceable"><code>логическое_выражение</code></em>
<em class="replaceable"><code>T1</code></em> { [<span class="optional">INNER</span>] | { LEFT | RIGHT | FULL } [<span class="optional">OUTER</span>] } JOIN <em class="replaceable"><code>T2</code></em>
  USING ( <em class="replaceable"><code>список столбцов соединения</code></em> )
<em class="replaceable"><code>T1</code></em> NATURAL { [<span class="optional">INNER</span>] | { LEFT | RIGHT | FULL } [<span class="optional">OUTER</span>] } JOIN <em class="replaceable"><code>T2</code></em></pre><p>Слова <code class="literal">INNER</code> и <code class="literal">OUTER</code> необязательны во всех формах. По умолчанию подразумевается <code class="literal">INNER</code> (внутреннее соединение), а при указании <code class="literal">LEFT</code>, <code class="literal">RIGHT</code> и <code class="literal">FULL</code> — внешнее соединение.<p><em class="firstterm">Условие соединения</em> указывается в предложении <code class="literal">ON</code> или <code class="literal">USING</code>, либо неявно задаётся ключевым словом <code class="literal">NATURAL</code>. Это условие определяет, какие строки двух исходных таблиц считаются <span class="quote">«<span class="quote">соответствующими</span>»</span> друг другу (это подробно рассматривается ниже).<p>Возможные типы соединений с сопоставлениями строк: <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">INNER JOIN</code></span><dd><p>Для каждой строки R1 из T1 в результирующей таблице содержится строка для каждой строки в T2, удовлетворяющей условию соединения с R1.<dt><span class="term"><code class="literal">LEFT OUTER JOIN</code> <a class="indexterm" id="idp4257"></a> <a class="indexterm" id="idp4260"></a> </span><dd><p>Сначала выполняется внутреннее соединение (INNER JOIN). Затем в результат добавляются все строки из T1, которым не соответствуют никакие строки в T2, а вместо значений столбцов T2 вставляются NULL. Таким образом, в результирующей таблице всегда будет минимум одна строка для каждой строки из T1.<dt><span class="term"><code class="literal">RIGHT OUTER JOIN</code> <a class="indexterm" id="idp4267"></a> <a class="indexterm" id="idp4270"></a> </span><dd><p>Сначала выполняется внутреннее соединение (INNER JOIN). Затем в результат добавляются все строки из T2, которым не соответствуют никакие строки в T1, а вместо значений столбцов T1 вставляются NULL. Это соединение является обратным к левому (LEFT JOIN): в результирующей таблице всегда будет минимум одна строка для каждой строки из T2.<dt><span class="term"><code class="literal">FULL OUTER JOIN</code></span><dd><p>Сначала выполняется внутреннее соединение. Затем в результат добавляются все строки из T1, которым не соответствуют никакие строки в T2, а вместо значений столбцов T2 вставляются NULL. И наконец, в результат включаются все строки из T2, которым не соответствуют никакие строки в T1, а вместо значений столбцов T1 вставляются NULL.</dl></div><p>Предложение <code class="literal">ON</code> определяет наиболее общую форму условия соединения: в нём указываются выражения логического типа, подобные тем, что используются в предложении <code class="literal">WHERE</code>. Пара строк из <em class="replaceable"><code>T1</code></em> и <em class="replaceable"><code>T2</code></em> соответствуют друг другу, если выражение <code class="literal">ON</code> возвращает для них true.<p><code class="literal">USING</code> — это сокращённая запись условия, полезная в ситуации, когда с обеих сторон соединения столбцы имеют одинаковые имена. Она принимает список общих имён столбцов через запятую и формирует условие соединения с равенством этих столбцов. Например, запись соединения <em class="replaceable"><code>T1</code></em> и <em class="replaceable"><code>T2</code></em> с <code class="literal">USING (a, b)</code> формирует условие <code class="literal">ON <em class="replaceable"><code>T1</code></em>.a = <em class="replaceable"><code>T2</code></em>.a AND <em class="replaceable"><code>T1</code></em>.b = <em class="replaceable"><code>T2</code></em>.b</code>.<p>Более того, при выводе <code class="literal">JOIN USING</code> исключаются избыточные столбцы: оба сопоставленных столбца выводить не нужно, так как они содержат одинаковые значения. Тогда как <code class="literal">JOIN ON</code> выдаёт все столбцы из <em class="replaceable"><code>T1</code></em>, а за ними все столбцы из <em class="replaceable"><code>T2</code></em>, <code class="literal">JOIN USING</code> выводит один столбец для каждой пары (в указанном порядке), за ними все оставшиеся столбцы из <em class="replaceable"><code>T1</code></em> и, наконец, все оставшиеся столбцы <em class="replaceable"><code>T2</code></em>.<p><a class="indexterm" id="idp4304"></a> <a class="indexterm" id="idp4307"></a> Наконец, <code class="literal">NATURAL</code> — сокращённая форма <code class="literal">USING</code>: она образует список <code class="literal">USING</code> из всех имён столбцов, существующих в обеих входных таблицах. Как и с <code class="literal">USING</code>, эти столбцы оказываются в выходной таблице в единственном экземпляре. Если столбцов с одинаковыми именами не находится, <code class="literal">NATURAL JOIN</code> действует как <code class="literal">JOIN ... ON TRUE</code> и выдаёт декартово произведение строк.<div class="note"><h3 class="title">Примечание</h3><p>Предложение <code class="literal">USING</code> разумно защищено от изменений в соединяемых отношениях, так как оно связывает только явно перечисленные столбцы. <code class="literal">NATURAL</code> считается более рискованным, так как при любом изменении схемы в одном или другом отношении, когда появляются столбцы с совпадающими именами, при соединении будут связываться и эти новые столбцы.</div></dl></div><p>Для наглядности предположим, что у нас есть таблицы <code class="literal">t1</code>: <pre class="programlisting"> num | name
-----+------
   1 | a
   2 | b
   3 | c</pre><p> и <code class="literal">t2</code>: <pre class="programlisting"> num | value
-----+-------
   1 | xxx
   3 | yyy
   5 | zzz</pre><p> С ними для разных типов соединений мы получим следующие результаты: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 CROSS JOIN t2;</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
   1 | a    |   3 | yyy
   1 | a    |   5 | zzz
   2 | b    |   1 | xxx
   2 | b    |   3 | yyy
   2 | b    |   5 | zzz
   3 | c    |   1 | xxx
   3 | c    |   3 | yyy
   3 | c    |   5 | zzz
(9 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 INNER JOIN t2 ON t1.num = t2.num;</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
   3 | c    |   3 | yyy
(2 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 INNER JOIN t2 USING (num);</code></strong>
 num | name | value
-----+------+-------
   1 | a    | xxx
   3 | c    | yyy
(2 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 NATURAL INNER JOIN t2;</code></strong>
 num | name | value
-----+------+-------
   1 | a    | xxx
   3 | c    | yyy
(2 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 LEFT JOIN t2 ON t1.num = t2.num;</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
   2 | b    |     |
   3 | c    |   3 | yyy
(3 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 LEFT JOIN t2 USING (num);</code></strong>
 num | name | value
-----+------+-------
   1 | a    | xxx
   2 | b    |
   3 | c    | yyy
(3 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 RIGHT JOIN t2 ON t1.num = t2.num;</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
   3 | c    |   3 | yyy
     |      |   5 | zzz
(3 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 FULL JOIN t2 ON t1.num = t2.num;</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
   2 | b    |     |
   3 | c    |   3 | yyy
     |      |   5 | zzz
(4 rows)
</pre><p>Условие соединения в предложении <code class="literal">ON</code> может также содержать выражения, не связанные непосредственно с соединением. Это может быть полезно в некоторых запросах, но не следует использовать это необдуманно. Рассмотрите следующий запрос: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 LEFT JOIN t2 ON t1.num = t2.num AND t2.value = 'xxx';</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
   2 | b    |     |
   3 | c    |     |
(3 rows)
</pre><p> Заметьте, что если поместить ограничение в предложение <code class="literal">WHERE</code>, вы получите другой результат: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM t1 LEFT JOIN t2 ON t1.num = t2.num WHERE t2.value = 'xxx';</code></strong>
 num | name | num | value
-----+------+-----+-------
   1 | a    |   1 | xxx
(1 row)
</pre><p> Это связано с тем, что ограничение, помещённое в предложение <code class="literal">ON</code>, обрабатывается <span class="emphasis"><em>до</em></span> операции соединения, тогда как ограничение в <code class="literal">WHERE</code> — <span class="emphasis"><em>после</em></span>. Это не имеет значения при внутренних соединениях, но важно при внешних.</div><div class="sect3" id="queries-table-aliases"><div class="titlepage"><div><div><h4 class="title">7.2.1.2. Псевдонимы таблиц и столбцов</h4></div></div></div><a class="indexterm" id="idp4356"></a><a class="indexterm" id="idp4359"></a><p>Таблицам и ссылкам на сложные таблицы в запросе можно дать временное имя, по которому к ним можно будет обращаться в рамках запроса. Такое имя называется <em class="firstterm">псевдонимом таблицы</em>.<p>Определить псевдоним таблицы можно, написав <pre class="synopsis">
FROM <em class="replaceable"><code>табличная_ссылка</code></em> AS <em class="replaceable"><code>псевдоним</code></em>
</pre><p> или <pre class="synopsis">
FROM <em class="replaceable"><code>табличная_ссылка</code></em> <em class="replaceable"><code>псевдоним</code></em>
</pre><p> Ключевое слово <code class="literal">AS</code> является необязательным. Вместо <em class="replaceable"><code>псевдоним</code></em> здесь может быть любой идентификатор.<p>Псевдонимы часто применяются для назначения коротких идентификаторов длинным именам таблиц с целью улучшения читаемости запросов. Например: <pre class="programlisting">SELECT * FROM "очень_длинное_имя_таблицы" s JOIN "другое_длинное_имя" a
  ON s.id = a.num;</pre><p>Псевдоним становится новым именем таблицы в рамках текущего запроса, т. е. после назначения псевдонима использовать исходное имя таблицы в другом месте запроса нельзя. Таким образом, следующий запрос недопустим: <pre class="programlisting">SELECT * FROM my_table AS m WHERE my_table.a &gt; 5;    -- неправильно</pre><p>Хотя в основном псевдонимы используются для удобства, они бывают необходимы, когда таблица соединяется сама с собой, например: <pre class="programlisting">SELECT * FROM people AS mother JOIN people AS child
  ON mother.id = child.mother_id;</pre><p> Кроме того, псевдонимы обязательно нужно назначать подзапросам (см. <a class="xref" href="queries-table-expressions.html#queries-subqueries" title="7.2.1.3. Подзапросы">Подраздел 7.2.1.3</a>).<p>В случае неоднозначности определения псевдонимов можно использовать скобки. В следующем примере первый оператор назначает псевдоним <code class="literal">b</code> второму экземпляру <code class="literal">my_table</code>, а второй оператор назначает псевдоним результату соединения: <pre class="programlisting">SELECT * FROM my_table AS a CROSS JOIN my_table AS b ...
SELECT * FROM (my_table AS a CROSS JOIN my_table) AS b ...</pre><p>В другой форме назначения псевдонима временные имена даются не только таблицам, но и её столбцам: <pre class="synopsis">
FROM <em class="replaceable"><code>табличная_ссылка</code></em> [<span class="optional">AS</span>] <em class="replaceable"><code>псевдоним</code></em> ( <em class="replaceable"><code>столбец1</code></em> [<span class="optional">, <em class="replaceable"><code>столбец2</code></em> [<span class="optional">, ...</span>]</span>] )
</pre><p> Если псевдонимов столбцов оказывается меньше, чем фактически столбцов в таблице, остальные столбцы сохраняют свои исходные имена. Эта запись особенно полезна для замкнутых соединений или подзапросов.<p>Когда псевдоним применяется к результату <code class="literal">JOIN</code>, он скрывает оригинальные имена таблиц внутри <code class="literal">JOIN</code>. Например, это допустимый SQL-запрос: <pre class="programlisting">SELECT a.* FROM my_table AS a JOIN your_table AS b ON ...</pre><p>а запрос: <pre class="programlisting">SELECT a.* FROM (my_table AS a JOIN your_table AS b ON ...) AS c</pre><p> ошибочный, так как псевдоним таблицы <code class="literal">a</code> не виден снаружи определения псевдонима <code class="literal">c</code>.</div><div class="sect3" id="queries-subqueries"><div class="titlepage"><div><div><h4 class="title">7.2.1.3. Подзапросы</h4></div></div></div><a class="indexterm" id="idp4402"></a><p>Подзапросы, образующие таблицы, должны заключаться в скобки и им <span class="emphasis"><em>обязательно</em></span> должны назначаться псевдонимы (как описано в <a class="xref" href="queries-table-expressions.html#queries-table-aliases" title="7.2.1.2. Псевдонимы таблиц и столбцов">Подразделе 7.2.1.2</a>). Например: <pre class="programlisting">FROM (SELECT * FROM table1) AS псевдоним</pre><p>Этот пример равносилен записи <code class="literal">FROM table1 AS псевдоним</code>. Более интересные ситуации, которые нельзя свести к простому соединению, возникают, когда в подзапросе используются агрегирующие функции или группировка.<p>Подзапросом может также быть список <code class="command">VALUES</code>: <pre class="programlisting">FROM (VALUES ('anne', 'smith'), ('bob', 'jones'), ('joe', 'blow'))
     AS names(first, last)</pre><p> Такому подзапросу тоже требуется псевдоним. Назначать псевдонимы столбцам списка <code class="command">VALUES</code> не требуется, но вообще это хороший приём. Подробнее это описано в <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/queries-values" title="7.7. Списки VALUES">Разделе 7.7</a>.</div><div class="sect3" id="queries-tablefunctions"><div class="titlepage"><div><div><h4 class="title">7.2.1.4. Табличные функции</h4></div></div></div><a class="indexterm" id="idp4417"></a><a class="indexterm" id="idp4419"></a><p>Табличные функции — это функции, выдающие набор строк, содержащих либо базовые типы данных (скалярных типов), либо составные типы (табличные строки). Они применяются в запросах как таблицы, представления или подзапросы в предложении <code class="literal">FROM</code>. Столбцы, возвращённые табличными функциями, можно включить в выражения <code class="literal">SELECT</code>, <code class="literal">JOIN</code> или <code class="literal">WHERE</code> так же, как столбцы таблиц, представлений или подзапросов.<p>Табличные функции можно также скомбинировать, используя запись <code class="literal">ROWS FROM</code>. Результаты функций будут возвращены в параллельных столбцах; число строк в этом случае будет наибольшим из результатов всех функций, а результаты функций с меньшим количеством строк будут дополнены значениями NULL.<pre class="synopsis"><em class="replaceable"><code>вызов_функции</code></em> [<span class="optional">WITH ORDINALITY</span>] [<span class="optional">[<span class="optional">AS</span>] <em class="replaceable"><code>псевдоним_таблицы</code></em> [<span class="optional">(<em class="replaceable"><code>псевдоним_столбца</code></em> [<span class="optional">, ...</span>])</span>]</span>]
ROWS FROM( <em class="replaceable"><code>вызов_функции</code></em> [<span class="optional">, ...</span>] ) [<span class="optional">WITH ORDINALITY</span>] [<span class="optional">[<span class="optional">AS</span>] <em class="replaceable"><code>псевдоним_таблицы</code></em> [<span class="optional">(<em class="replaceable"><code>псевдоним_столбца</code></em> [<span class="optional">, ...</span>])</span>]</span>]</pre><p>Если указано предложение <code class="literal">WITH ORDINALITY</code>, к столбцам результатов функций будет добавлен ещё один, с типом <code class="type">bigint</code>. В этом столбце нумеруются строки результирующего набора, начиная с 1. (Это обобщение стандартного SQL-синтаксиса <code class="literal">UNNEST ... WITH ORDINALITY</code>.) По умолчанию, этот столбец называется <code class="literal">ordinality</code>, но ему можно присвоить и другое имя с помощью указания <code class="literal">AS</code>.<p>Специальную табличную функцию <code class="literal">UNNEST</code> можно вызвать с любым числом параметров-массивов, а возвращает она соответствующее число столбцов, как если бы <code class="literal">UNNEST</code> (<a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/functions-array" title="9.18. Функции и операторы для работы с массивами">Раздел 9.18</a>) вызывалась для каждого параметра в отдельности, а результаты объединялись с помощью конструкции <code class="literal">ROWS FROM</code>.<pre class="synopsis">UNNEST( <em class="replaceable"><code>выражение_массива</code></em> [<span class="optional">, ...</span>] ) [<span class="optional">WITH ORDINALITY</span>] [<span class="optional">[<span class="optional">AS</span>] <em class="replaceable"><code>псевдоним_таблицы</code></em> [<span class="optional">(<em class="replaceable"><code>псевдоним_столбца</code></em> [<span class="optional">, ...</span>])</span>]</span>]</pre><p>Если <em class="replaceable"><code>псевдоним_таблицы</code></em> не указан, в качестве имени таблицы используется имя функции; в случае с конструкцией <code class="literal">ROWS FROM()</code> — имя первой функции.<p>Если псевдонимы столбцов не указаны, то для функции, возвращающей базовый тип данных, именем столбца будет имя функции. Для функций, возвращающих составной тип, имена результирующих столбцов определяются индивидуальными атрибутами типа.<p>Несколько примеров: <pre class="programlisting">CREATE TABLE foo (fooid int, foosubid int, fooname text);

CREATE FUNCTION getfoo(int) RETURNS SETOF foo AS $$
    SELECT * FROM foo WHERE fooid = $1;
$$ LANGUAGE SQL;

SELECT * FROM getfoo(1) AS t1;

SELECT * FROM foo
    WHERE foosubid IN (
                        SELECT foosubid
                        FROM getfoo(foo.fooid) z
                        WHERE z.fooid = foo.fooid
                      );

CREATE VIEW vw_getfoo AS SELECT * FROM getfoo(1);

SELECT * FROM vw_getfoo;</pre><p>В некоторых случаях бывает удобно определить табличную функцию, возвращающую различные наборы столбцов при разных вариантах вызова. Для этого нужно указать, что она возвращает псевдотип <code class="type">record</code>. Используя такую функцию, ожидаемую структуру строк нужно описать в самом запросе, чтобы система знала, как разобрать запрос и составить его план. Записывается это так:<pre class="synopsis"><em class="replaceable"><code>вызов_функции</code></em> [<span class="optional">AS</span>] <em class="replaceable"><code>псевдоним</code></em> (<em class="replaceable"><code>определение_столбца</code></em> [<span class="optional">, ...</span>])
<em class="replaceable"><code>вызов_функции</code></em> AS [<span class="optional"><em class="replaceable"><code>псевдоним</code></em></span>] (<em class="replaceable"><code>определение_столбца</code></em> [<span class="optional">, ...</span>])
ROWS FROM( ... <em class="replaceable"><code>вызов_функции</code></em> AS (<em class="replaceable"><code>определение_столбца</code></em> [<span class="optional">, ...</span>]) [<span class="optional">, ...</span>] )</pre><p>Без <code class="literal">ROWS FROM()</code> список <em class="replaceable"><code>определения_столбцов</code></em> заменяет список псевдонимов, который можно также добавить в предложении <code class="literal">FROM</code>; имена в определениях столбцов служат псевдонимами. С <code class="literal">ROWS FROM()</code> список <em class="replaceable"><code>определения_столбцов</code></em> можно добавить к каждой функции отдельно, либо в случае с одной функцией и без предложения <code class="literal">WITH ORDINALITY</code>, список <em class="replaceable"><code>определения_столбцов</code></em> можно записать вместо списка с псевдонимами столбцов после <code class="literal">ROWS FROM()</code>.<p>Взгляните на этот пример: <pre class="programlisting">SELECT *
    FROM dblink('dbname=mydb', 'SELECT proname, prosrc FROM pg_proc')
      AS t1(proname name, prosrc text)
    WHERE proname LIKE 'bytea%';</pre><p> Здесь функция <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/contrib-dblink-function" title="dblink"><span class="refentrytitle">dblink</span></a> (из модуля <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/dblink" title="F.9. dblink">dblink</a>) выполняет удалённый запрос. Она объявлена как функция, возвращающая тип <code class="type">record</code>, так как он подойдёт для запроса любого типа. В этом случае фактический набор столбцов функции необходимо описать в вызывающем её запросе, чтобы анализатор запроса знал, например, как преобразовать <code class="literal">*</code>.</div><div class="sect3" id="queries-lateral"><div class="titlepage"><div><div><h4 class="title">7.2.1.5. Подзапросы <code class="literal">LATERAL</code></h4></div></div></div><a class="indexterm" id="idp4509"></a><p>Перед подзапросами в предложении <code class="literal">FROM</code> можно добавить ключевое слово <code class="literal">LATERAL</code>. Это позволит ссылаться в них на столбцы предшествующих элементов списка <code class="literal">FROM</code>. (Без <code class="literal">LATERAL</code> каждый подзапрос выполняется независимо и поэтому не может обращаться к другим элементам <code class="literal">FROM</code>.)<p>Перед табличными функциями в предложении <code class="literal">FROM</code> также можно указать <code class="literal">LATERAL</code>, но для них это ключевое слово необязательно; в аргументах функций в любом случае можно обращаться к столбцам в предыдущих элементах <code class="literal">FROM</code>.<p>Элемент <code class="literal">LATERAL</code> может находиться на верхнем уровне списка <code class="literal">FROM</code> или в дереве <code class="literal">JOIN</code>. В последнем случае он может также ссылаться на любые элементы в левой части <code class="literal">JOIN</code>, справа от которого он находится.<p>Когда элемент <code class="literal">FROM</code> содержит ссылки <code class="literal">LATERAL</code>, запрос выполняется следующим образом: сначала для строки элемента <code class="literal">FROM</code> с целевыми столбцами, или набора строк из нескольких элементов <code class="literal">FROM</code>, содержащих целевые столбцы, вычисляется элемент <code class="literal">LATERAL</code> со значениями этих столбцов. Затем результирующие строки обычным образом соединяются со строками, из которых они были вычислены. Эта процедура повторяется для всех строк исходных таблиц.<p><code class="literal">LATERAL</code> можно использовать так: <pre class="programlisting">SELECT * FROM foo, LATERAL (SELECT * FROM bar WHERE bar.id = foo.bar_id) ss;</pre><p> Здесь это не очень полезно, так как тот же результат можно получить более простым и привычным способом: <pre class="programlisting">SELECT * FROM foo, bar WHERE bar.id = foo.bar_id;</pre><p> Применять <code class="literal">LATERAL</code> имеет смысл в основном, когда для вычисления соединяемых строк необходимо обратиться к столбцам других таблиц. В частности, это полезно, когда нужно передать значение функции, возвращающей набор данных. Например, если предположить, что <code class="function">vertices(polygon)</code> возвращает набор вершин многоугольника, близкие вершины многоугольников из таблицы polygons можно получить так: <pre class="programlisting">SELECT p1.id, p2.id, v1, v2
FROM polygons p1, polygons p2,
     LATERAL vertices(p1.poly) v1,
     LATERAL vertices(p2.poly) v2
WHERE (v1 &lt;-&gt; v2) &lt; 10 AND p1.id != p2.id;</pre><p> Этот запрос можно записать и так: <pre class="programlisting">SELECT p1.id, p2.id, v1, v2
FROM polygons p1 CROSS JOIN LATERAL vertices(p1.poly) v1,
     polygons p2 CROSS JOIN LATERAL vertices(p2.poly) v2
WHERE (v1 &lt;-&gt; v2) &lt; 10 AND p1.id != p2.id;</pre><p> или переформулировать другими способами. (Как уже упоминалось, в данном примере ключевое слово <code class="literal">LATERAL</code> не требуется, но мы добавили его для ясности.)<p>Особенно полезно бывает использовать <code class="literal">LEFT JOIN</code> с подзапросом <code class="literal">LATERAL</code>, чтобы исходные строки оказывались в результате, даже если подзапрос <code class="literal">LATERAL</code> не возвращает строк. Например, если функция <code class="function">get_product_names()</code> выдаёт названия продуктов, выпущенных определённым производителем, но о продукции некоторых производителей информации нет, мы можем найти, каких именно, примерно так: <pre class="programlisting">SELECT m.name
FROM manufacturers m LEFT JOIN LATERAL get_product_names(m.id) pname ON true
WHERE pname IS NULL;</pre></div></div><div class="sect2" id="queries-where"><div class="titlepage"><div><div><h3 class="title">7.2.2. Предложение <code class="literal">WHERE</code></h3></div></div></div><a class="indexterm" id="idp4551"></a><p><a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/sql-select#sql-where" title="Предложение WHERE">Предложение <code class="literal">WHERE</code></a> записывается так: <pre class="synopsis">
WHERE <em class="replaceable"><code>условие_ограничения</code></em>
</pre><p> где <em class="replaceable"><code>условие_ограничения</code></em> — любое выражение значения (см. <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/sql-expressions" title="4.2. Выражения значения">Раздел 4.2</a>), выдающее результат типа <code class="type">boolean</code>.<p>После обработки предложения <code class="literal">FROM</code> каждая строка полученной виртуальной таблицы проходит проверку по условию ограничения. Если результат условия равен true, эта строка остаётся в выходной таблице, а иначе (если результат равен false или NULL) отбрасывается. В условии ограничения, как правило, задействуется минимум один столбец из таблицы, полученной на выходе <code class="literal">FROM</code>. Хотя строго говоря, это не требуется, но в противном случае предложение <code class="literal">WHERE</code> будет бессмысленным.<div class="note"><h3 class="title">Примечание</h3><p>Условие для внутреннего соединения можно записать как в предложении <code class="literal">WHERE</code>, так и в предложении <code class="literal">JOIN</code>. Например, это выражение: <pre class="programlisting">FROM a, b WHERE a.id = b.id AND b.val &gt; 5</pre><p> равнозначно этому: <pre class="programlisting">FROM a INNER JOIN b ON (a.id = b.id) WHERE b.val &gt; 5</pre><p> и возможно, даже этому: <pre class="programlisting">FROM a NATURAL JOIN b WHERE b.val &gt; 5</pre><p> Какой вариант выбрать, в основном дело вкуса и стиля. Вариант с <code class="literal">JOIN</code> внутри предложения <code class="literal">FROM</code>, возможно, не лучший с точки зрения совместимости с другими СУБД, хотя он и описан в стандарте SQL. Но для внешних соединений других вариантов нет: их можно записывать только во <code class="literal">FROM</code>. Предложения <code class="literal">ON</code> и <code class="literal">USING</code> во внешних соединениях <span class="emphasis"><em>не</em></span> равнозначны условию <code class="literal">WHERE</code>, так как они могут добавлять строки (для входных строк без соответствия), а также удалять их из конечного результата.</div><p>Несколько примеров запросов с <code class="literal">WHERE</code>: <pre class="programlisting">SELECT ... FROM fdt WHERE c1 &gt; 5

SELECT ... FROM fdt WHERE c1 IN (1, 2, 3)

SELECT ... FROM fdt WHERE c1 IN (SELECT c1 FROM t2)

SELECT ... FROM fdt WHERE c1 IN (SELECT c3 FROM t2 WHERE c2 = fdt.c1 + 10)

SELECT ... FROM fdt WHERE c1 BETWEEN
  (SELECT c3 FROM t2 WHERE c2 = fdt.c1 + 10) AND 100

SELECT ... FROM fdt WHERE EXISTS (SELECT c1 FROM t2 WHERE c2 &gt; fdt.c1)</pre><p><code class="literal">fdt</code> — название таблицы, порождённой в предложении <code class="literal">FROM</code>. Строки, которые не соответствуют условию <code class="literal">WHERE</code>, исключаются из <code class="literal">fdt</code>. Обратите внимание, как в качестве выражений значения используются скалярные подзапросы. Как и любые другие запросы, подзапросы могут содержать сложные табличные выражения. Заметьте также, что <code class="literal">fdt</code> используется в подзапросах. Дополнение имени <code class="literal">c1</code> в виде <code class="literal">fdt.c1</code> необходимо только, если в порождённой таблице в подзапросе также оказывается столбец <code class="literal">c1</code>. Полное имя придаёт ясность даже там, где без него можно обойтись. Этот пример показывает, как область именования столбцов внешнего запроса распространяется на все вложенные в него внутренние запросы.</div><div class="sect2" id="queries-group"><div class="titlepage"><div><div><h3 class="title">7.2.3. Предложения <code class="literal">GROUP BY</code> и <code class="literal">HAVING</code></h3></div></div></div><a class="indexterm" id="idp4593"></a><a class="indexterm" id="idp4595"></a><p>Строки порождённой входной таблицы, прошедшие фильтр <code class="literal">WHERE</code>, можно сгруппировать с помощью предложения <code class="literal">GROUP BY</code>, а затем оставить в результате только нужные группы строк, используя предложение <code class="literal">HAVING</code>.<pre class="synopsis">SELECT <em class="replaceable"><code>список_выборки</code></em>
    FROM ...
    [<span class="optional">WHERE ...</span>]
    GROUP BY <em class="replaceable"><code>группирующий_столбец</code></em> [<span class="optional">, <em class="replaceable"><code>группирующий_столбец</code></em></span>]...</pre><p><a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/sql-select#sql-groupby" title="Предложение GROUP BY">Предложение <code class="literal">GROUP BY</code></a> группирует строки таблицы, объединяя их в одну группу при совпадении значений во всех перечисленных столбцах. Порядок, в котором указаны столбцы, не имеет значения. В результате наборы строк с одинаковыми значениями преобразуются в отдельные строки, представляющие все строки группы. Это может быть полезно для устранения избыточности выходных данных и/или для вычисления агрегатных функций, применённых к этим группам. Например: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM test1;</code></strong>
 x | y
---+---
 a | 3
 c | 2
 b | 5
 a | 1
(4 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT x FROM test1 GROUP BY x;</code></strong>
 x
---
 a
 b
 c
(3 rows)
</pre><p>Во втором запросе мы не могли написать <code class="literal">SELECT * FROM test1 GROUP BY x</code>, так как для столбца <code class="literal">y</code> нет единого значения, связанного с каждой группой. Однако столбцы, по которым выполняется группировка, можно использовать в списке выборки, так как они имеют единственное значение в каждой группе.<p>Вообще говоря, в группированной таблице столбцы, не включённые в список <code class="literal">GROUP BY</code>, можно использовать только в агрегатных выражениях. Пример такого агрегатного выражения: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT x, sum(y) FROM test1 GROUP BY x;</code></strong>
 x | sum
---+-----
 a |   4
 b |   5
 c |   2
(3 rows)
</pre><p> Здесь <code class="literal">sum</code> — агрегатная функция, вычисляющая единственное значение для всей группы. Подробную информацию о существующих агрегатных функциях можно найти в <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/functions-aggregate" title="9.20. Агрегатные функции">Разделе 9.20</a>.<div class="tip"><h3 class="title">Подсказка</h3><p>Группировка без агрегатных выражений по сути выдаёт набор различающихся значений столбцов. Этот же результат можно получить с помощью предложения <code class="literal">DISTINCT</code> (см. <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/queries-select-lists#queries-distinct" title="7.3.3. DISTINCT">Подраздел 7.3.3</a>).</div><p>Взгляните на следующий пример: в нём вычисляется общая сумма продаж по каждому продукту (а не общая сумма по всем продуктам): <pre class="programlisting">SELECT product_id, p.name, (sum(s.units) * p.price) AS sales
    FROM products p LEFT JOIN sales s USING (product_id)
    GROUP BY product_id, p.name, p.price;</pre><p> В этом примере столбцы <code class="literal">product_id</code>, <code class="literal">p.name</code> и <code class="literal">p.price</code> должны присутствовать в списке <code class="literal">GROUP BY</code>, так как они используются в списке выборки. Столбец <code class="literal">s.units</code> может отсутствовать в списке <code class="literal">GROUP BY</code>, так как он используется только в агрегатном выражении (<code class="literal">sum(...)</code>), вычисляющем сумму продаж. Для каждого продукта этот запрос возвращает строку с итоговой суммой по всем продажам данного продукта.<a class="indexterm" id="idp4637"></a><p>Если бы в таблице products по столбцу <code class="literal">product_id</code> был создан первичный ключ, тогда в данном примере было бы достаточно сгруппировать строки по <code class="literal">product_id</code>, так как название и цена продукта <em class="firstterm">функционально зависят</em> от кода продукта и можно однозначно определить, какое название и цену возвращать для каждой группы по ID.<p>В стандарте SQL <code class="literal">GROUP BY</code> может группировать только по столбцам исходной таблицы, но расширение <span class="productname">Postgres Pro</span> позволяет использовать в <code class="literal">GROUP BY</code> столбцы из списка выборки. Также возможна группировка по выражениям, а не просто именам столбцов.<a class="indexterm" id="idp4647"></a><p>Если таблица была сгруппирована с помощью <code class="literal">GROUP BY</code>, но интерес представляют только некоторые группы, отфильтровать их можно с помощью предложения <code class="literal">HAVING</code>, действующего подобно <code class="literal">WHERE</code>. Записывается это так: <pre class="synopsis">
SELECT <em class="replaceable"><code>список_выборки</code></em> FROM ... [<span class="optional">WHERE ...</span>] GROUP BY ...
  HAVING <em class="replaceable"><code>логическое_выражение</code></em>
</pre><p> В предложении <code class="literal">HAVING</code> могут использоваться и группирующие выражения, и выражения, не участвующие в группировке (в этом случае это должны быть агрегирующие функции).<p>Пример: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT x, sum(y) FROM test1 GROUP BY x HAVING sum(y) &gt; 3;</code></strong>
 x | sum
---+-----
 a |   4
 b |   5
(2 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT x, sum(y) FROM test1 GROUP BY x HAVING x &lt; 'c';</code></strong>
 x | sum
---+-----
 a |   4
 b |   5
(2 rows)
</pre><p>И ещё один более реалистичный пример: <pre class="programlisting">SELECT product_id, p.name, (sum(s.units) * (p.price - p.cost)) AS profit
    FROM products p LEFT JOIN sales s USING (product_id)
    WHERE s.date &gt; CURRENT_DATE - INTERVAL '4 weeks'
    GROUP BY product_id, p.name, p.price, p.cost
    HAVING sum(p.price * s.units) &gt; 5000;</pre><p> В данном примере предложение <code class="literal">WHERE</code> выбирает строки по столбцу, не включённому в группировку (выражение истинно только для продаж за последние четыре недели), тогда как предложение <code class="literal">HAVING</code> отфильтровывает группы с общей суммой продаж больше 5000. Заметьте, что агрегатные выражения не обязательно должны быть одинаковыми во всех частях запроса.<p>Если в запросе есть вызовы агрегатных функций, но нет предложения <code class="literal">GROUP BY</code>, строки всё равно будут группироваться: в результате окажется одна строка группы (или возможно, ни одной строки, если эта строка будет отброшена предложением <code class="literal">HAVING</code>). Это справедливо и для запросов, которые содержат только предложение <code class="literal">HAVING</code>, но не содержат вызовы агрегатных функций и предложение <code class="literal">GROUP BY</code>.</div><div class="sect2" id="queries-grouping-sets"><div class="titlepage"><div><div><h3 class="title">7.2.4. <code class="literal">GROUPING SETS</code>, <code class="literal">CUBE</code> и <code class="literal">ROLLUP</code></h3></div></div></div><a class="indexterm" id="idp4678"></a><a class="indexterm" id="idp4680"></a><a class="indexterm" id="idp4682"></a><p>Более сложные, чем описанные выше, операции группировки возможны с концепцией <em class="firstterm">наборов группирования</em>. Данные, выбранные предложениями <code class="literal">FROM</code> и <code class="literal">WHERE</code>, группируются отдельно для каждого заданного набора группирования, затем для каждой группы вычисляются агрегатные функции как для простых предложений <code class="literal">GROUP BY</code>, и в конце возвращаются результаты. Например: <pre class="screen">
<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT * FROM items_sold;</code></strong>
 brand | size | sales
-------+------+-------
 Foo   | L    |  10
 Foo   | M    |  20
 Bar   | M    |  15
 Bar   | L    |  5
(4 rows)

<code class="prompt">=&gt;</code> <strong class="userinput"><code>SELECT brand, size, sum(sales) FROM items_sold GROUP BY GROUPING SETS ((brand), (size), ());</code></strong>
 brand | size | sum
-------+------+-----
 Foo   |      |  30
 Bar   |      |  20
       | L    |  15
       | M    |  35
       |      |  50
(5 rows)
</pre><p>В каждом внутреннем списке <code class="literal">GROUPING SETS</code> могут задаваться ноль или более столбцов или выражений, которые воспринимаются так же, как если бы они были непосредственно записаны в предложении <code class="literal">GROUP BY</code>. Пустой набор группировки означает, что все строки сводятся к одной группе (которая выводится, даже если входных строк нет), как описано выше для агрегатных функций без предложения <code class="literal">GROUP BY</code>.<p>Ссылки на группирующие столбцы или выражения заменяются в результирующих строках значениями NULL для тех группирующих наборов, в которых эти столбцы отсутствуют. Чтобы можно было понять, результатом какого группирования стала конкретная выходная строка, предназначена функция, описанная в <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/functions-aggregate#functions-grouping-table" title="Таблица 9.53. Операции группировки">Таблице 9.53</a>.<p>Для указания двух распространённых видов наборов группирования предусмотрена краткая запись. Предложение формы <pre class="programlisting">ROLLUP ( <em class="replaceable"><code>e1</code></em>, <em class="replaceable"><code>e2</code></em>, <em class="replaceable"><code>e3</code></em>, ... )</pre><p> представляет заданный список выражений и всех префиксов списка, включая пустой список; то есть оно равнозначно записи <pre class="programlisting">GROUPING SETS (
    ( <em class="replaceable"><code>e1</code></em>, <em class="replaceable"><code>e2</code></em>, <em class="replaceable"><code>e3</code></em>, ... ),
    ...
    ( <em class="replaceable"><code>e1</code></em>, <em class="replaceable"><code>e2</code></em> ),
    ( <em class="replaceable"><code>e1</code></em> ),
    ( )
)</pre><p> Оно часто применяется для анализа иерархических данных, например, для суммирования зарплаты по отделам, подразделениям и компании в целом.<p>Предложение формы <pre class="programlisting">CUBE ( <em class="replaceable"><code>e1</code></em>, <em class="replaceable"><code>e2</code></em>, ... )</pre><p> представляет заданный список и все его возможные подмножества (степень множества). Таким образом, запись <pre class="programlisting">CUBE ( a, b, c )</pre><p> равнозначна <pre class="programlisting">GROUPING SETS (
    ( a, b, c ),
    ( a, b    ),
    ( a,    c ),
    ( a       ),
    (    b, c ),
    (    b    ),
    (       c ),
    (         )
)</pre><p>Элементами предложений <code class="literal">CUBE</code> и <code class="literal">ROLLUP</code> могут быть либо отдельные выражения, либо вложенные списки элементов в скобках. Вложенные списки обрабатываются как атомарные единицы, с которыми формируются отдельные наборы группирования. Например: <pre class="programlisting">CUBE ( (a, b), (c, d) )</pre><p> равнозначно <pre class="programlisting">GROUPING SETS (
    ( a, b, c, d ),
    ( a, b       ),
    (       c, d ),
    (            )
)</pre><p> и <pre class="programlisting">ROLLUP ( a, (b, c), d )</pre><p> равнозначно <pre class="programlisting">GROUPING SETS (
    ( a, b, c, d ),
    ( a, b, c    ),
    ( a          ),
    (            )
)</pre><p>Конструкции <code class="literal">CUBE</code> и <code class="literal">ROLLUP</code> могут применяться либо непосредственно в предложении <code class="literal">GROUP BY</code>, либо вкладываться внутрь предложения <code class="literal">GROUPING SETS</code>. Если одно предложение <code class="literal">GROUPING SETS</code> вкладывается внутрь другого, результат будет таким же, как если бы все элементы внутреннего предложения были записаны непосредственно во внешнем.<p>Если в одном предложении <code class="literal">GROUP BY</code> задаётся несколько элементов группирования, окончательный список наборов группирования образуется как прямое произведение этих элементов. Например: <pre class="programlisting">GROUP BY a, CUBE (b, c), GROUPING SETS ((d), (e))</pre><p> равнозначно <pre class="programlisting">GROUP BY GROUPING SETS (
    (a, b, c, d), (a, b, c, e),
    (a, b, d),    (a, b, e),
    (a, c, d),    (a, c, e),
    (a, d),       (a, e)
)</pre><div class="note"><h3 class="title">Примечание</h3><p>Конструкция <code class="literal">(a, b)</code> обычно воспринимается в выражениях как <a class="link" href="https://postgrespro.ru/docs/postgrespro/9.5/sql-expressions#sql-syntax-row-constructors" title="4.2.13. Конструкторы табличных строк">конструктор строки</a>. Однако в предложении <code class="literal">GROUP BY</code> на верхнем уровне выражений запись <code class="literal">(a, b)</code> воспринимается как список выражений, как описано выше. Если вам по какой-либо причине <span class="emphasis"><em>нужен</em></span> именно конструктор строки в выражении группирования, используйте запись <code class="literal">ROW(a, b)</code>.</div></div><div class="sect2" id="queries-window"><div class="titlepage"><div><div><h3 class="title">7.2.5. Обработка оконных функций</h3></div></div></div><a class="indexterm" id="idp4745"></a><p>Если запрос содержит оконные функции (см. <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/tutorial-window" title="3.5. Оконные функции">Раздел 3.5</a>, <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/functions-window" title="9.21. Оконные функции">Раздел 9.21</a> и <a class="xref" href="https://postgrespro.ru/docs/postgrespro/9.5/sql-expressions#syntax-window-functions" title="4.2.8. Вызовы оконных функций">Подраздел 4.2.8</a>), эти функции вычисляются после каждой группировки, агрегатных выражений и фильтрации <code class="literal">HAVING</code>. Другими словами, если в запросе есть агрегатные функции, предложения <code class="literal">GROUP BY</code> или <code class="literal">HAVING</code>, оконные функции видят не исходные строки, полученные из <code class="literal">FROM</code>/<code class="literal">WHERE</code>, а сгруппированные.<p>Когда используются несколько оконных функций, все оконные функции, имеющие в своих определениях синтаксически равнозначные предложения <code class="literal">PARTITION BY</code> и <code class="literal">ORDER BY</code>, гарантированно обрабатывают данные за один проход. Таким образом, они увидят один порядок сортировки, даже если <code class="literal">ORDER BY</code> не определяет порядок однозначно. Однако относительно функций с разными формулировками <code class="literal">PARTITION BY</code> и <code class="literal">ORDER BY</code> никаких гарантий не даётся. (В таких случаях между проходами вычислений оконных функций обычно требуется дополнительный этап сортировки и эта сортировка может не сохранять порядок строк, равнозначный с точки зрения <code class="literal">ORDER BY</code>.)<p>В настоящее время оконные функции всегда требуют предварительно отсортированных данных, так что результат запроса будет отсортирован согласно тому или иному предложению <code class="literal">PARTITION BY</code>/<code class="literal">ORDER BY</code> оконных функций. Однако полагаться на это не следует. Если вы хотите, чтобы результаты сортировались определённым образом, явно добавьте предложение <code class="literal">ORDER BY</code> на верхнем уровне запроса.</div></div><div class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="https://postgrespro.ru/docs/postgrespro/9.5/queries-overview">Пред.</a> </td><td align="center" width="20%"><a accesskey="u" href="https://postgrespro.ru/docs/postgrespro/9.5/queries">Наверх</a></td><td align="right" width="40%"> <a accesskey="n" href="https://postgrespro.ru/docs/postgrespro/9.5/queries-select-lists">След.</a></td></tr><tr><td align="left" valign="top" width="40%">7.1. Обзор </td><td align="center" width="20%"><a accesskey="h" href="https://postgrespro.ru/docs/postgrespro/9.5/index">Начало</a></td><td align="right" valign="top" width="40%"> 7.3. Списки выборки</td></tr></table></div></div>
		
    </div>
    <div class="col-md-12 d-none" id="divDocEn"></div>
</div>
</div>
</section>


	</div>
    </main>

	
<div class="modal fade" id="feedback" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >Есть&nbsp;вопросы? Напишите&nbsp;нам!</h5>
      </div>
      <div class="modal-body">
			<input type="text" id="feedback-email" name="email" placeholder='E-mail'
				required        msg-empty="Введите e-mail"
				min-length="3"  msg-short="Слишком короткий e-mail"
				max-length="60" msg-long="Слишком длинный e-mail"
				regexp="\w+([\-+.']\w+)*@\w+([\-.]\w+)*\.\w+([\-.]\w+)*" 
				                msg-regexp="Некорректный адрес e-mail"
			><div class="input-error"></div>
			
			<input type="text" id="feedback-name" name="name" placeholder="Имя" 
				required        msg-empty="Введите имя"
				min-length="3"  msg-short="Слишком короткое имя"
				max-length="60" msg-long ="Слишком длинное имя"
			><div class="input-error"></div>
			 
			<textarea id="feedback-message" name="message"  placeholder="Ваше сообщение" 
                required          msg-empty="Введите сообщение"
				max-length="6000" msg-long="Слишком длинное сообщение"
				min-length="10"   msg-short="Слишком короткое сообщение"
			></textarea>
			<div id="feedback-message-length" class="input-error"></div> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" style="width: 100%;" onClick="sendFeedback('feedback', 'message', '', '', 'production')">Отправить</button>
      </div>
        <p class="text-center" style="font-size: 14px;font-weight: 300;"><span class="dotted" onClick="loadAgreement();">Соглашаюсь с условиями обработки персональных данных</span></p>
    </div>
  </div>
</div>

<div class="modal fade" id="popup-message" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"></h5>
      </div>
      <div class="modal-body lead  text-center" ></div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="popup-flash" tabindex="-1" role="dialog" aria-hidden="true"  style="cursor:wait;">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"></h5>
      </div>
      <div class="modal-body text-center"></div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="popup-window" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
		<div class="pop-up-close" onClick="closePopupWindow();">&#10006;</div>
      <div class="modal-header">
        <h5 class="modal-title"></h5>
      </div>
      <div class="modal-body "></div>
      <div class="modal-footer"></div>
    </div>
  </div>
</div>

	
	<form action="https://postgrespro.ru/search/" method="get" role="form" name="search-window" id="search-window" onSubmit="document.body.style.cursor='progress';return true;">
		<input id="qid" name="q">
		
			
				<input type="hidden" id="area-version" name="area" value="version" checked >
				<input type="hidden" id="area-product" name="product" value="postgrespro" >
				<input type="hidden" id="area-version" name="version" value="9.5" >
			
		
	</form>


<!-- FOOTER -->
    <footer class="container-fluid">
 		<div class="container">
 		<div class="row">
			<div  class="about col-lg-3 row" style="margin-bottom:2em;">
				<div class="col-sm-6 col-lg-12"> 
					<a href="https://postgrespro.ru/" ><img src="https://postgrespro.ru/img/PostgresPro_logo_white.svg" class="logo" alt="Postgres Pro"></a> 
	
					<div class="sociallinks" style="margin-bottom:0.6em;margin-top:2em;"> 
						<div class="sociallinks-item"> 
							<a href="https://www.facebook.com/PostgresProfessional" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Facebook</desc><path style="fill:#ffffff;" d="M47.761,24c0,13.121-10.638,23.76-23.758,23.76C10.877,47.76,0.239,37.121,0.239,24c0-13.124,10.638-23.76,23.764-23.76C37.123,0.24,47.761,10.876,47.761,24 M20.033,38.85H26.2V24.01h4.163l0.539-5.242H26.2v-3.083c0-1.156,0.769-1.427,1.308-1.427h3.318V9.168L26.258,9.15c-5.072,0-6.225,3.796-6.225,6.224v3.394H17.1v5.242h2.933V38.85z"></path></svg> </a> </div> 
						<div class="sociallinks-item"> 
							<a href="https://twitter.com/PostgresPro" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Twitter</desc><path style="fill:#ffffff;" d="M47.762,24c0,13.121-10.639,23.76-23.761,23.76S0.24,37.121,0.24,24c0-13.124,10.639-23.76,23.761-23.76 S47.762,10.876,47.762,24 M38.031,12.375c-1.177,0.7-2.481,1.208-3.87,1.481c-1.11-1.186-2.694-1.926-4.455-1.926 c-3.364,0-6.093,2.729-6.093,6.095c0,0.478,0.054,0.941,0.156,1.388c-5.063-0.255-9.554-2.68-12.559-6.367 c-0.524,0.898-0.825,1.947-0.825,3.064c0,2.113,1.076,3.978,2.711,5.07c-0.998-0.031-1.939-0.306-2.761-0.762v0.077 c0,2.951,2.1,5.414,4.889,5.975c-0.512,0.14-1.05,0.215-1.606,0.215c-0.393,0-0.775-0.039-1.146-0.109 c0.777,2.42,3.026,4.182,5.692,4.232c-2.086,1.634-4.712,2.607-7.567,2.607c-0.492,0-0.977-0.027-1.453-0.084 c2.696,1.729,5.899,2.736,9.34,2.736c11.209,0,17.337-9.283,17.337-17.337c0-0.263-0.004-0.527-0.017-0.789 c1.19-0.858,2.224-1.932,3.039-3.152c-1.091,0.485-2.266,0.811-3.498,0.958C36.609,14.994,37.576,13.8,38.031,12.375"></path></svg> </a> </div> 
						<div class="sociallinks-item"> 
							<a href="https://vk.com/public101507899" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>VK</desc><path style="fill:#ffffff;" d="M47.761,24c0,13.121-10.639,23.76-23.76,23.76C10.878,47.76,0.239,37.121,0.239,24c0-13.123,10.639-23.76,23.762-23.76C37.122,0.24,47.761,10.877,47.761,24 M35.259,28.999c-2.621-2.433-2.271-2.041,0.89-6.25c1.923-2.562,2.696-4.126,2.45-4.796c-0.227-0.639-1.64-0.469-1.64-0.469l-4.71,0.029c0,0-0.351-0.048-0.609,0.106c-0.249,0.151-0.414,0.505-0.414,0.505s-0.742,1.982-1.734,3.669c-2.094,3.559-2.935,3.747-3.277,3.524c-0.796-0.516-0.597-2.068-0.597-3.171c0-3.449,0.522-4.887-1.02-5.259c-0.511-0.124-0.887-0.205-2.195-0.219c-1.678-0.016-3.101,0.007-3.904,0.398c-0.536,0.263-0.949,0.847-0.697,0.88c0.31,0.041,1.016,0.192,1.388,0.699c0.484,0.656,0.464,2.131,0.464,2.131s0.282,4.056-0.646,4.561c-0.632,0.347-1.503-0.36-3.37-3.588c-0.958-1.652-1.68-3.481-1.68-3.481s-0.14-0.344-0.392-0.527c-0.299-0.222-0.722-0.298-0.722-0.298l-4.469,0.018c0,0-0.674-0.003-0.919,0.289c-0.219,0.259-0.018,0.752-0.018,0.752s3.499,8.104,7.573,12.23c3.638,3.784,7.764,3.36,7.764,3.36h1.867c0,0,0.566,0.113,0.854-0.189c0.265-0.288,0.256-0.646,0.256-0.646s-0.034-2.512,1.129-2.883c1.15-0.36,2.624,2.429,4.188,3.497c1.182,0.812,2.079,0.633,2.079,0.633l4.181-0.056c0,0,2.186-0.136,1.149-1.858C38.281,32.451,37.763,31.321,35.259,28.999"></path></svg> </a> </div> 
						<div class="sociallinks-item"> 
							<a href="https://www.youtube.com/channel/UCawnwMqZ6JeoSiEhrS6X69A/videos" target="_blank"> 
							<svg class="t-sociallinks__svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"><desc>Youtube</desc><path style="fill:#ffffff;" d="M24 0.0130005C37.248 0.0130005 47.987 10.753 47.987 24C47.987 37.247 37.247 47.987 24 47.987C10.753 47.987 0.0130005 37.247 0.0130005 24C0.0130005 10.753 10.752 0.0130005 24 0.0130005ZM35.815 18.093C35.565 16.756 34.452 15.758 33.173 15.635C30.119 15.439 27.054 15.28 23.995 15.278C20.936 15.276 17.882 15.432 14.828 15.625C13.544 15.749 12.431 16.742 12.182 18.084C11.898 20.017 11.756 21.969 11.756 23.92C11.756 25.871 11.898 27.823 12.182 29.756C12.431 31.098 13.544 32.21 14.828 32.333C17.883 32.526 20.935 32.723 23.995 32.723C27.053 32.723 30.121 32.551 33.173 32.353C34.452 32.229 35.565 31.084 35.815 29.747C36.101 27.817 36.244 25.868 36.244 23.919C36.244 21.971 36.101 20.023 35.815 18.093ZM21.224 27.435V20.32L27.851 23.878L21.224 27.435Z"></path></svg> </a> </div> 
					</div>
					<span class="copyright">©  Postgres Pro</span>
				</div>
				
				<div  class="col-sm-6 col-lg-12" style="margin-top:2em;">
					<a href="https://postgrespro.ru/privacy">Политика кофиденциальности</a><br>
					<a href="https://postgrespro.ru/useragreement">Пользовательское соглашение</a><br>
					<a href="https://postgrespro.ru/products/postgrespro/eula">Лицензионное соглашение</a><br>
					<a href="https://postgrespro.ru/media/RUS_EULA_for_cloud_Postgres_Pro_Standard_Postgres_Pro_Enterprise.pdf" target="_blank">Лицензионное соглашение (при использовании в составе облачных сервисов)</a><br>
					<a href="https://postgrespro.ru/CoC">Кодекс поведения сообщества PostgreSQL</a>
				</div>
			</div>

			<nav class="col-lg-9 bottom-menu"> 
				
<nav>
<ul class="row">
<li class="col-sm-4">
	<h6>
	
		Продукты
	
	</h6>

	
		<ul><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/standard" >Postgres Pro Standard</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/certified" >Postgres Pro Certified</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/enterprise" >Postgres Pro Enterprise</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/postgrespro/enterprisecertified" >Postgres Pro Enterprise Certified</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/products/1c" >Postgres Pro для 1С</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/windows" >PostgreSQL для Windows</a>
					
				</li></ul>
	
</li><li class="col-sm-4">
	<h6>
	
		Образование
	
	</h6>

	
		<ul><li>
					
						<a href="https://postgrespro.ru/docs" >Документация</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/courses" >Учебные курсы</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/books" >Книги</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/cert" >Сертификация специалистов</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/university" >Курсы для вузов</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education" >Обучение PostgreSQL</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/education/glossary" >Глоссарий</a>
					
				</li></ul>
	
</li><li class="col-sm-4">
	<h6>
	
		Услуги
	
	</h6>

	
		<ul><li>
					
						<a href="https://postgrespro.ru/services/support" >Техподдержка СУБД</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/services/migration" >Миграция СУБД</a>
					
				</li><li>
					
						<a href="https://postgrespro.ru/services/audit" >Аудит СУБД</a>
					
				</li></ul>
	
</li></ul>
</nav>


			</nav>
		</div> 
    	</div>

		<div id="bottom-bar">
			<div id="to-top-button" class="float-left" onClick="$('html, body').animate({scrollTop: 0});return false;">
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="50px" height="50px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve"> <path style="fill:#0aa7f5;" d="M43.006,47.529H4.964c-2.635,0-4.791-2.156-4.791-4.791V4.697c0-2.635,2.156-4.791,4.791-4.791h38.042 c2.635,0,4.791,2.156,4.791,4.791v38.042C47.797,45.373,45.641,47.529,43.006,47.529z M25.503,16.881l6.994,7.049 c0.583,0.588,1.532,0.592,2.121,0.008c0.588-0.583,0.592-1.533,0.008-2.122l-9.562-9.637c-0.281-0.283-0.664-0.443-1.063-0.443 c0,0,0,0-0.001,0c-0.399,0-0.782,0.159-1.063,0.442l-9.591,9.637c-0.584,0.587-0.583,1.537,0.005,2.121 c0.292,0.292,0.675,0.437,1.058,0.437c0.385,0,0.77-0.147,1.063-0.442L22.5,16.87v19.163c0,0.828,0.671,1.5,1.5,1.5 s1.5-0.672,1.5-1.5L25.503,16.881z"></path> </svg>
			</div>
	
			<div class="pulsate float-right" id="bell">
				<div class="pulsate-circle"  id="bell-run"  onClick="$('#feedback').modal('toggle'); return false;"></div>
				<svg class="icon" width="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.6 17.5" id="tip"    onClick="$('#feedback').modal('toggle'); return false;"><desc>Write</desc><path d="M3.7 17.5v-4.8H2c-1.1 0-2-.9-2-2V2C0 .9.9 0 2 0h14.6c1.1 0 2 .9 2 2v8.8c0 1.1-.9 2-2 2H9l-5.3 4.7zM2 1c-.6 0-1 .4-1 1v8.8c0 .5.4 1 1 1h2.8v3.5l3.8-3.5h8c.5 0 1-.4 1-1V2c0-.5-.4-1-1-1H2z"></path></svg> 
				<svg class="icon" width="16px" height="16px" viewBox="0 0 23 23" version="1.1"            id="close"  onClick="$('#feedback').modal('toggle'); return false;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <desc>Close</desc> <g stroke="none" stroke-width="1" fill="#000" fill-rule="evenodd"> <rect transform="translate(11.313708, 11.313708) rotate(-45.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect> <rect transform="translate(11.313708, 11.313708) rotate(-315.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect> </g> </svg> 
			</div>

		</div>
    </footer>
	
<script>
checkJQuery();

$(document).ready( function(){
	window.lang = 'ru';
	
	$(".toggler").click(function(){
	    $(this).next().slideToggle(150);
	});

	$("#feedback").on('hide.bs.modal', function (e) {triggerBell(e);});
	$("#feedback").on('show.bs.modal', function (e) {triggerBell(e);});

	

	whoIam();

	$('ul.nav li.dropdown').hover(function() {
	  $(this).find('.dropdown-menu').stop(true, true).delay(100).fadeIn(300);
	}, function() {
	  $(this).find('.dropdown-menu').stop(true, true).delay(100).fadeOut(300);
	});

	var input = $('#search-window input')
	input.focusout(function(e){
		if (!$.trim($(this).val()).length) {
			$('#search-window').fadeOut();
		}
	});
	input.keydown(function(eventObject){
		if( eventObject.which == 27 ){
			if ($.trim($(this).val()).length) {
				$(this).val('');
			} else {
				$('#search-window').fadeOut();
			}
		};
	});
	$(document).scroll(function () {
		if (!$.trim(input.val()).length) {
			$('#search-window').fadeOut();
		}
	});
	
	setTimeout(function(){
		$("#to-top-button").addClass("animation-opacity");
		$("#bell").addClass("animation-opacity");
	} , 2000);
});

function triggerBell(e) {
	var bell = $('#bell');
	var bell2 = $('#bell-run');

	bell.toggleClass('active pulsate');
	bell2.toggleClass('active pulsate-circle');
	bell.find('#close').toggle();
}

var formatDate_month=["января","февраля","марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"];
var formatDate_weekday=["воскресенье","понедельник","вторник","среда","четверг", "пятница","суббота"];

function formatTime(i) {
	if (i<10) {	i="0" + i; }
	return i;
}

function formatDate(s, format) {
	var d = qwx.iso2time(s);
	
	return d.getDate() + " " + formatDate_month[d.getMonth()] + " " + d.getFullYear() + 
		(format == 'date' ? "" : ", " + formatDate_weekday[d.getDay()] + ", " + 
		formatTime(d.getHours()) + ":" + formatTime(d.getMinutes()));
}
	


</script>	

	

	<script type="text/javascript">
		var m500 = 'Произошла ошибка на сервере';
		var incorrectFormMessage = 'Форма заполнена неправильно';
	</script>
	
	

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55152600-2', 'auto');


  ga('send', 'pageview');
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter32485545 = new Ya.Metrika({
                    id:32485545,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/32485545" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
	

	
</html>

















