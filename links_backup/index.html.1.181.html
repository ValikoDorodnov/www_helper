<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <meta name="referrer" content="unsafe-url">
  <title>Все об SVG анимации / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.92df6f6d.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.2822d469ec31a56409ac330bbcf7fcbf.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/450924\/"},"headline":"Все об SVG анимации","datePublished":"2019-05-07T22:22:26+03:00","dateModified":"2019-12-20T18:41:31+03:00","author":{"@type":"Person","name":"Артем"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные...","url":"https:\/\/habr.com\/ru\/post\/450924\/#post-content-body","about":["h_vector_graphics","h_animation","f_design"],"image":["https:\/\/habrastorage.org\/webt\/mf\/lw\/hk\/mflwhklk-vn1e_k1d-qw7am4toy.jpeg","https:\/\/habrastorage.org\/webt\/z1\/ai\/jt\/z1aijt1cwfmvoca1_saqybvspts.png","https:\/\/habrastorage.org\/webt\/h_\/qk\/az\/h_qkaz2ecvnd05teg-mejqmqeza.png","https:\/\/habrastorage.org\/webt\/ra\/ww\/yo\/rawwyon0df65mityb6jgadmkkss.jpeg","https:\/\/habrastorage.org\/webt\/wc\/rd\/ne\/wcrdneum5oobpjobqb_04k9d4co.png","https:\/\/habrastorage.org\/webt\/4e\/r4\/lw\/4er4lwtbbmhiiqujreog2ibhe84.gif","https:\/\/habrastorage.org\/webt\/no\/uu\/rm\/nouurmqxgsflfyhgs2ctpoweavi.png","https:\/\/habrastorage.org\/webt\/57\/4e\/po\/574epocgz3wx30rkg23lsio-njs.png","https:\/\/habrastorage.org\/webt\/za\/c8\/pf\/zac8pfuwceeupcjc_siznyrikig.png","https:\/\/habrastorage.org\/webt\/1t\/bf\/du\/1tbfduraytzbzk1sdyy1im7fuya.png","https:\/\/habrastorage.org\/webt\/bd\/rv\/fg\/bdrvfg6rpliplqi9lm38j4spxuk.png","https:\/\/habrastorage.org\/webt\/xi\/yj\/_j\/xiyj_jiwt5efedcpx2dq5m6lmy8.gif","https:\/\/habrastorage.org\/webt\/lu\/5f\/8c\/lu5f8cfqpytvl_t237aelpymcs4.png","https:\/\/habrastorage.org\/webt\/cn\/ho\/yy\/cnhoyy-clqyjniu5tzdv8rq2q40.png","https:\/\/habrastorage.org\/webt\/6q\/z4\/mg\/6qz4mgrsrt9mzwwdr_43jinpiow.gif","https:\/\/habrastorage.org\/webt\/37\/tf\/o3\/37tfo3-eh9bkuqb8sfkg6fjfbjo.gif","https:\/\/habrastorage.org\/webt\/ak\/yq\/ft\/akyqftetegvuxzmjmgu-44cl8ik.gif","https:\/\/habrastorage.org\/webt\/xo\/5p\/tc\/xo5ptc85zmlzdmp0o6sa30e23vc.gif","https:\/\/habrastorage.org\/webt\/kw\/it\/p5\/kwitp5mc31z-4okv11j2eajegjq.png","https:\/\/habrastorage.org\/webt\/zd\/gn\/f6\/zdgnf6gceepyjgmr00_tibvogqe.png","https:\/\/habrastorage.org\/webt\/1h\/xs\/mb\/1hxsmb0wb5owhwv2tsceledtwho.png","https:\/\/habrastorage.org\/webt\/9o\/p-\/gx\/9op-gxlp5gy9krrdczge78qnv8k.png","https:\/\/habrastorage.org\/webt\/8b\/q1\/ua\/8bq1uasta8qkatvp8h9nirs9qmm.png","https:\/\/habrastorage.org\/webt\/nx\/uv\/ig\/nxuvigflycaiwg7zblsmd2cmqiq.gif","https:\/\/habrastorage.org\/webt\/tt\/kh\/tv\/ttkhtvmfbm-qymlq4r_a40ovg9o.png","https:\/\/habrastorage.org\/webt\/cs\/be\/99\/csbe99ve3bjyfbdtd9mnogzw4i0.png"]}</script>
  <script src="https://www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.64.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Все об SVG анимации" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Все об SVG анимации" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Все об SVG анимации" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество...." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество...." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество...." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество...." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество...." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/450924/82c30c7aa5beb65f3fa0dc6ef6b83eea/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/450924/82c30c7aa5beb65f3fa0dc6ef6b83eea/" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/450924/82c30c7aa5beb65f3fa0dc6ef6b83eea/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/450924/82c30c7aa5beb65f3fa0dc6ef6b83eea/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/450924/82c30c7aa5beb65f3fa0dc6ef6b83eea/?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="450924" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-07T19:22:26.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/post/450924/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="Animation, SVG, CSS, SMIL, Анимация, Векторная графика, Морфинг, Adobe Illustrator">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/450924/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="index.html.1.181.html" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/450924/82c30c7aa5beb65f3fa0dc6ef6b83eea/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="https://habr.com/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="https://habr.com/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="https://habr.com/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="https://habr.com/ru/flows/all" class="tm-main-menu__item">
        Все потоки
      </a> <a href="https://habr.com/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="https://habr.com/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="https://habr.com/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="https://habr.com/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="https://habr.com/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="https://habr.com/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="https://habr.com/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="https://habr.com/ru/users/ERRORNAME/" title="ERRORNAME" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" src="https://habrastorage.org/r/w32/getpro/habr/avatars/94d/ae6/51f/94dae651f0c553475c76fc12a067a65b.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/ERRORNAME/" class="tm-user-info__username">
      ERRORNAME
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-07T19:22:26.000Z" title="2019-05-07, 22:22">7  мая  2019 в 22:22</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Все об SVG анимации</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/vector_graphics/" class="tm-article-snippet__hubs-item-link"><span>Работа с векторной графикой</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/animation/" class="tm-article-snippet__hubs-item-link"><span>Компьютерная анимация</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label tm-article-snippet__label_variant-sandbox"><span>
        Из песочницы
      </span></div><div class="tm-article-snippet__label tm-article-snippet__label_variant-tutorial"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество. Эту статью я позиционирую как подробное руководство.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/webt/mf/lw/hk/mflwhklk-vn1e_k1d-qw7am4toy.jpeg" data-src="https://habrastorage.org/webt/mf/lw/hk/mflwhklk-vn1e_k1d-qw7am4toy.jpeg" data-blurred="true"/><br/>
<br/>
Здесь не будет никаких плагинов, библиотек и прочего, речь пойдет только о чистом SVG. <br/>
Единственный инструмент, который я буду использовать, это Adobe Illustrator.<br/>
<a name="habracut"></a><br/>
<h2>Предисловие</h2><br/>
Все началось со скучной лекции и в надежде занять себя хоть чем-то, я решил изучить SVG графику, а именно анимацию. К моему удивлению, в интернете было совсем мало информации. Везде дублировалась информация, объясняющая основы, а про анимацию вообще от силы 2-3 ссылки с абсолютно идентичной информацией, являющейся переводом статьи A Guide to SVG Animations (SMIL) за авторством Сары Суэйдан.<br/>
<br/>
<font color="#808080"><i>Ее статья рассказывает о всём, но поверхностно. Тем не менее настоятельно рекомендую с ней ознакомиться. <a href="https://css-live.ru/articles/rukovodstvo-po-svg-animaciyam-smil.html">*Ссылка на перевод*</a></i></font><br/>
<br/>
Следующие несколько недель я провел, собирая информацию по кусочкам из разных источников. Результатом этих поисков является эта статья<br/>
<br/>
<h2>Правильный экспорт SVG из Illustrator</h2><br/>
Этот раздел посвящен особенностям и проблемам Adobe Illustrator, так что, если ты используешь не Illustrator, то можешь пропустить эту часть.<br/>
<br/>
Подготовить документ для анимации очень важный этап, пренебрежительное отношение к которому может обернуться очень неприятными последствиями. Учить тебя, как лучше рисовать в Illustrator, я не стану. Единственное, что я скажу – при отрисовке фигур следует следить за значениями, желательно, чтобы они имели лишь одно число после запятой, а лучше вообще были целыми. Следовать этому правилу не обязательно, но оно уменьшит размер файла, упростит дальнейшую анимацию и визуально сократит объем информации. Взгляни<br/>
<br/>
<pre><code class="xml">&lt;path d="M 17.7 29 C 28.2 12.9 47 5.6 62.8 10.4 c 28.2 8.5 30 50.5 24.8 53.1 c -2.6 1.3 -10.4 -6.1 -29.2 -34.6"/>
&lt;path d="M 17.651 28.956 c 10.56 -16.04 29.351 -23.359 45.12 -18.589 c 28.151 8.516 29.957 50.5 24.841 53.063 c -2.631 1.318 -10.381 -6.148 -29.235 -34.643"/>
</code></pre><br/>
В примере одна и та же кривая, но в первом случае одна цифра после запятой, а во втором три. Эта кривая имеет всего 4 точки, а второй пример на треть длиннее первого. Представь, как много места займет кривая из 20 точек.<br/>
<br/>
После того как каркас нарисован, нужно сохранить изображение как SVG файл. Для этого есть два пути – «Сохранить как» или «Экспортировать как». Но какой способ выбрать? Если доверяешь мне – лучше используй «сохранить как». Если хочешь знать «почему», то разворачивай спойлер.<br/>
<br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">Так почему же?</b>
                        <div class="spoiler_text">На первый взгляд разницы никакой, ведь в итоге мы получим файл.svg с нашим изображением. Однако отличия начинаются еще на этапе параметров экспорта<br/>
<br/>
<a href="https://habrastorage.org/webt/z1/ai/jt/z1aijt1cwfmvoca1_saqybvspts.png"><img src="https://habrastorage.org/r/w1560/webt/z1/ai/jt/z1aijt1cwfmvoca1_saqybvspts.png" data-src="https://habrastorage.org/webt/z1/ai/jt/z1aijt1cwfmvoca1_saqybvspts.png"/></a><br/>
<font color="#808080"><i>Детально объяснять все параметры я не вижу смысла, с этим прекрасно справляется сам Illustrator в секции «Описание».</i></font><br/>
<br/>
Как видно, «сохранить» имеет больше настроек, нежели «экспортировать», и для кого-то это уже будет весомой причиной отказаться от экспортирования, но мы продолжим. <br/>
<br/>
Если открыть файлы, сохраненные обоими способами, в браузере, разницы мы не заметим. Однако в данный момент нас больше интересует не внешний вид, а начинка, поэтому сделаем то же самое, но уже через текстовый редактор. Тут отличия станут более очевидны. Предлагаю тебе самому посмотреть и сделать выводы, я ничего в файлах не изменял, просто скопировал целиком как есть.<br/>
<br/>
<b>Экспортировать</b><br/>
<br/>
<pre><code class="xml">&lt;svg id="Слой_1" data-name="Слой 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 51 51">
  &lt;defs>
    &lt;style>
      .cls-1 {
        fill: none;
        stroke: #4ec931;
        stroke-miterlimit: 10;
      }

      .cls-2 {
        fill: #4ec931;
      }

      .cls-3 {
        fill: #fff;
      }
    &lt;/style>
  &lt;/defs>
  &lt;title>my_icon_E&lt;/title>
  &lt;circle class="cls-1" cx="25.5" cy="25.5" r="20"/>
  &lt;circle class="cls-1" cx="25.5" cy="25.5" r="25"/>
  &lt;g id="Слой_2" data-name="Слой 2">
    &lt;circle class="cls-2" cx="25.5" cy="25.5" r="15"/>
    &lt;polygon class="cls-3" points="25.5 34.8 34 20.3 17 20.3 25.5 34.8"/>
  &lt;/g>
&lt;/svg>
</code></pre><br/>
<b>Сохранить</b><br/>
<br/>
<pre><code class="xml">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;!-- Generator: Adobe Illustrator 23.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
&lt;svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
&lt;style type="text/css">
    .st0{fill:none;stroke:#4EC931;stroke-miterlimit:10;}
    .st1{fill:#4EC931;}
    .st2{fill:#FFFFFF;}
&lt;/style>
&lt;circle class="st0" cx="50" cy="50" r="20"/>
&lt;circle class="st0" cx="50" cy="50" r="25"/>
&lt;g id="Слой_2">
    &lt;circle class="st1" cx="50" cy="50" r="15"/>
    &lt;polygon class="st2" points="50,59.3 58.5,44.8 41.5,44.8    "/>
&lt;/g>
&lt;/svg>
</code></pre><br/>
Помимо отличий в именовании CSS классов и оформления в целом, которые кто-то может посчитать вкусовщиной, есть и другие проблемы. При «экспортировании» все изображение уменьшилось в 2 раза. Судить об этом можно по размерам фигур и атрибуту <b>viewBox</b>. Так как это векторная графика, хуже от этого не стало, но все равно неприятно. «Сохранение» же оставило размеры, которые я указал в Illustrator.<br/>
<br/>
Но все это цветочки по сравнению с тем, какую свинью может подложить «экспортирование». Конкретно в данных примерах этой проблемы нет, вероятно, потому что изображение очень простое. Однако я столкнулся с ней, когда экспортировал другую мою работу. Вот ее скриншот<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/h_/qk/az/h_qkaz2ecvnd05teg-mejqmqeza.png" data-src="https://habrastorage.org/webt/h_/qk/az/h_qkaz2ecvnd05teg-mejqmqeza.png"/><br/>
<br/>
Объем файла достаточно большой, так что я приведу только проблемную часть<br/>
<br/>
<pre><code class="xml">&lt;g id="кнопка-21" data-name="кнопка">
    &lt;path class="cls-9" d="M477.94,456.75a1.83,1.83,0,0,1-.9,1.36l-4.91,3.1a7.29,7.29,0,0,1-7.5,0l-16.29-9.72a1.85,1.85,0,0,1-.92-1.56v-3.68a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l4.53-2.86.38-.23a1.87,1.87,0,0,0,.9-1.36Z" transform="translate(-5.5 -5.5)"/>
    &lt;path class="cls-10" d="M477,451.19l-16.38-9.5a7.28,7.28,0,0,0-7.32,0l-5,2.9a1.88,1.88,0,0,0-.94,1.51v.17a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l4.53-2.86.38-.23a1.87,1.87,0,0,0,.9-1.36v-.51A1.88,1.88,0,0,0,477,451.19Z" transform="translate(-5.5 -5.5)"/>
&lt;/g>
&lt;g id="кнопка-22" data-name="кнопка">
    &lt;path class="cls-9" d="M525.37,557.86a1.85,1.85,0,0,1-.9,1.36l-33.22,19.64a7.29,7.29,0,0,1-7.5,0l-16.29-9.72a1.85,1.85,0,0,1-.92-1.56v-3.68a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l32.84-19.41.38-.23a1.83,1.83,0,0,0,.9-1.36Z" transform="translate(-5.5 -5.5)"/>
    &lt;path class="cls-10" d="M524.45,552.3l-16.38-9.51a7.31,7.31,0,0,0-7.32,0l-33.27,19.44a1.89,1.89,0,0,0-.94,1.51v.17a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l32.84-19.41.38-.23a1.83,1.83,0,0,0,.9-1.36v-.5A1.86,1.86,0,0,0,524.45,552.3Z" transform="translate(-5.5 -5.5)"/>
&lt;/g>
</code></pre><br/>
Заметил что-нибудь необычное? Если ты косо смотришь на атрибут <b>transform</b>, то ты прав. Именно он портит всю малину. При «экспортировании» изображения Illustrator приписывает его ко ВСЕМ элементам <b>&lt;path></b>. При этом такой проблемы не наблюдается при «сохранении». <br/>
<br/>
Если ты до сих пор не понимаешь моего негодования, то я объясню: если захочешь анимировать перемещение такого элемента, то он будет смещаться в сторону. В данном случае на 5.5 по обеим осям. Связанно это с тем, что анимация перемещения изменяет атрибут <b>transform</b>, сбрасывая все прошлые значения. Конечно, это можно обойти, но разве не лучше избежать проблемы, чем потом исправлять ее последствия…<br/>
<br/>
На данный момент мне довелось заметить только эту проблему, но это не значит, что она единственная. Если здраво оценить ситуацию, окажется, что «сохранить как» выигрывает во всем. Именно поэтому я советую использовать именно его.<br/>
</div>
                    </div><br/>
<h2>Способы импорта SVG документа в HTML </h2><br/>
Перед тем, как я приступлю непосредственно к анимации, я хочу рассказать про то, как встроить SVG на страничку. Каждый способ имеет свои «особенности», которые оказывают прямое влияние на анимацию. И если про них не рассказать, то статья будет неполной.<br/>
Предположим, что у тебя уже есть готовый SVG с интерактивной анимацией и осталось встроить этот документ на сайт. Как же это сделать?<br/>
<br/>
<b>Вариант номер раз</b> – вспомнить, что SVG это тоже изображение и его можно импортировать стандартными средствами HTML. Можно создать тег <b>&lt;img></b> со ссылкой на документ <br/>
<br/>
<pre><code class="xml">&lt;img src="Hello_SVG.svg" /></code></pre><br/>
Или задать SVG в качестве фонового изображения<br/>
<br/>
<pre><code class="css">#box { background-image: url("Hello_again.svg"); }</code></pre><br/>
Главный минус этого способа – изолированность изображения. SVG как экспонат в музее – смотреть можно, трогать руками нет. Анимация внутри будет работать, но ни о никакой интерактивности речи быть не может. Если же, например, анимация запускается по клику пользователя или есть необходимость динамически менять содержимое SVG документа, то этот способ не для тебя.<br/>
<br/>
<b>Вариант номер два</b> – создать объект из SVG, использовав теги <b>&lt;object></b> или <b>&lt;embed></b>. Также есть возможность использовать <b>&lt;iframe></b>, чтобы создать фрейм, но этот способ я использовать не рекомендуют, т.к. требуется <a href="https://codepen.io/SaraSoueidan/pen/a5dfa6923207f950a6b4da2f6b2c5bf4?editors=0100">костыль</a> для всех браузеров, чтобы этот вариант отображался корректно<br/>
<br/>
<pre><code class="xml">&lt;object data="My_SVG.svg" type="image/svg+xml">&lt;/object>
&lt;embed src="My_SVG.svg" type="image/svg+xml" />
&lt;iframe src="My_SVG.svg">&lt;/iframe>
</code></pre><br/>
Тут уже дела обстоят получше. Анимации получают возможность быть интерактивными, но только если объявлены внутри SVG документа, а содержимое доступно для внешнего JavaScript. Еще <b>&lt;object></b> и <b>&lt;iframe></b> могут показать заглушку, если вдруг изображение не загрузится.<br/>
<br/>
<b>Вариант номер три</b> – просто вставить содержимое SVG документа прямо внутрь HTML. Да так можно. Поддержка SVG появилась в <a href="http://w3c.github.io/html/semantics-embedded-content.html#svg">стандарте HTML5</a>. Так как SVG по сути является частью самой странички, то доступ к нему есть везде. Анимации и стили элементов могут быть объявлены как внутри SVG, так и во внешних файлах. Минус заключается в том, что такие изображения просто так не кэшируются отдельно от страницы<br/>
<br/>
<pre><code class="xml">&lt;body>
...
&lt;svg> &lt;!-- Содержимое --> &lt;/svg>
&lt;/body>
</code></pre><br/>
<h2>SVG анимация</h2><br/>
Есть два основных способа анимации SVG элемента:<br/>
<br/>
<ul>
<li>CSS анимация</li>
<li>SMIL анимация, встроенная в SVG (на самом деле это SVG анимация, которая базируется на SMIL и расширяет его функционал)</li>
</ul><br/>
Лично я разделяю их как анимацию «внешнюю» и «внутреннюю». Данное деление условно, но все же они имеют функциональные различия. Если говорить об отличиях в общем: CSS – имеет лучшую поддержку браузерами; SMIL – обладает большим функционалом. Трудно сказать, что использовать лучше, т.к. они во многом похожи. Выбор зависит от поставленной задачи, поэтому я просто скажу основные причины использовать SMIL вместо CSS<br/>
<br/>
SMIL — когда нужно:<br/>
<br/>
<ol>
<li>Сделать то, что не смог CSS (анимировать неподдерживаемый атрибут и т.д.)</li>
<li>Иметь более точный контроль над анимацией</li>
<li>Сделать морфинг контура (анимация атрибута <b>d</b> у тега <b>path</b>)</li>
<li>Синхронизировать анимации</li>
<li>Сделать интерактивные анимации</li>
</ol><br/>
Если я написал, что SMIL нужно использовать для интерактивных анимаций, то это не значит, что того же нельзя сделать с помощью CSS. Просто SMIL является более функциональным и сложным инструментом. И именно поэтому его следует использовать только при необходимости. Если анимация простая и можно обойтись CSS, то так и следует сделать.<br/>
<br/>
<h3>Анимация средствами CSS</h3><br/>
Тут ничего нового. Любой SVG элемент мы можем анимировать так же, как мы это делаем с HTML. Все анимации создаются с помощью <b>@keyframes</b>. Так как CSS-анимация это уже другая тема, я подробно останавливаться на этом пункте не буду, в сети полно документации и руководств на эту тему. Все, что там описывается применимо и к SVG, а я лишь приведу несколько примеров.<br/>
<br/>
SVG документ имеет внутренние таблицы стилей, вот в них мы и будем писать анимацию<br/>
<br/>
<pre><code class="xml">&lt;svg>
    &lt;style>
        &lt;!-- Тут анимация -->
    &lt;/style>
    &lt;!-- А здесь SVG элементы -->
&lt;/svg>
</code></pre><br/>
Анимировать SVG атрибут так же просто, как и CSS атрибуты<br/>
<br/>
<pre><code class="css">
@keyframes reduce_radius {
    from { r: 10; }
    to { r: 3; }
}
@keyframes change_fill {
    0% { fill: #49549E; }
    75% { fill: #1bceb1; }
    100% { fill: #1bce4f; }
}
</code></pre><br/>
<font color="#808080"><i>Можно задавать значения как в процентах, так и конструкцией <b>from-to</b></i></font><br/>
<br/>
Затем остается просто применить созданные анимации к нужному элементу<br/>
<br/>
<pre><code class="css">.circle { animation: change_fill 1s, popup 2s; }</code></pre><br/>
Все, что я описывал выше – это статичные анимации, интерактивностью там и не пахнет. А что делать, если уже очень хочется? Ну кое-что все-таки можно сделать интерактивным и на CSS. Например, если использовать <b>transition </b>в сочетании с псевдоклассом <b>hover</b><br/>
<br/>
<pre><code class="css">.circle { fill: #49549E; transition: .3s; }
.circle:hover { fill: #1bceb1; }</code></pre><font color="#808080"><i>При наведении на элемент он изменит свой цвет с синего на голубой за 300ms</i></font><br/>
<br/>
Анимация атрибутов и небольшой кусочек интерактивности – на этом особенности CSS-анимации заканчиваются. Но этого функционала предостаточно, ведь большинство задач сводятся к анимации какого-либо атрибута. Практически любой SVG атрибут можно анимировать. И когда я пишу «практически любой» я имею в виду, что если ты выберешь случайный атрибут и он окажется неанимируемым, то тебе ОЧЕНЬ повезло.<br/>
<br/>
<h3>SMIL анимация</h3><br/>
Сразу стоит сказать, что SMIL анимация стара как мир и она потихоньку вымирает, поддержка браузеров пусть и приличная, но все же меньше, чем у CSS Animation, однако есть причина, почему SMIL все еще привлекателен – он может то, что не может CSS.<br/>
<br/>
Про SMIL я буду рассказывать подробнее, потому что тут есть множество подводных камней, про которые редко где пишут. Да и тема эта менее популярная, чем CSS. Основные теги для анимации это <b>&lt;animate></b>, <b>&lt;set></b>, <b>&lt;animateTransform></b>, <b>&lt;animateMotion></b>.<br/>
<br/>
<h4>&lt;animate></h4><br/>
Начнем с тяжёлой артиллерии. <b>&lt;animate></b> – используется для анимации любого атрибута и является основным инструментом. Остальные же теги узкоспециализированные, но о всем по порядку.<br/>
<br/>
<b>Как применить анимацию к элементу?</b><br/>
<br/>
Указать элемент, к которому будет применена анимация, можно двумя способами<br/>
<br/>
<ol>
<li>Положить тег внутрь элемента. Этот способ позволяет инкапсулировать анимацию внутри объекта, что облегчает чтение кода<br/>
<br/>
<pre><code class="xml">&lt;circle ...>
    &lt;animate .../>
&lt;/circle>
</code></pre><font color="#808080"><i>В данном случае анимация будет применена к элементу <b>circle</b></i></font></li>
<li>Передать ссылку на элемент. Пригодится если хочется, чтобы все анимации были собраны в одно месте<br/>
<br/>
<pre><code class="xml">&lt;svg xmlns:xlink="http://www.w3.org/1999/xlink">
    &lt;circle id="blue" .../>
    ...
    &lt;animate xlink:href="#blue" .../>
&lt;/svg>
</code></pre><font color="#808080"><i>Здесь используется атрибут <b>xlink:href</b>, в котором мы указываем <b>id</b> элемента, к которому должна примениться анимация. Для того чтобы этот способ работал, необходимо определить пространство имен <b>xlink</b>. Это делается в теге <b>&lt;svg></b></i></font><br/>
</li>
</ol><br/>
С SVG 2 атрибут <b>xlink:href</b> устарел, вместо него спецификация рекомендует использовать <b>href</b>, который не требует определять пространство имен <b>xlink</b>. <br/>
<br/>
<pre><code class="xml">&lt;circle id="blue" .../>
...
&lt;animate href="#blue" .../>
</code></pre><br/>
Но и тут не все так гладко — <b>href</b> не поддерживается Safari. Получается патовая ситуация, один атрибут устарел, другой частично не поддерживается. Так что какой способ использовать решает каждый для себя сам.<br/>
<br/>
Для тех, кто заметил сходство с CSS селекторами: спешу огорчить, обратиться к элементам по классу не получится<br/>
<br/>
<pre><code class="xml">&lt;circle class="blue_circle" .../>
&lt;animate href=".blue_circle" .../>
</code></pre><font color="#808080"><i><b>Это не работает!</b></i></font><br/>
<br/>
<b>Как указать атрибут для анимации?</b><br/>
<br/>
Для этого существует <b>attributeName</b>. В качестве значения выступает имя атрибута, которое мы будем анимировать.<br/>
<br/>
<pre><code class="xml">&lt;circle r="25" ...>
    &lt;animate attributeName="r" ... />
&lt;/circle>
</code></pre><font color="#808080"><i>Указав в <b>attributeName </b>значение <b>r</b>, мы сообщаем, что собираемся анимировать радиус окружности</i></font><br/>
<br/>
<b>Что такое attributeType и почему он тебе не нужен?</b><br/>
<br/>
<font color="#f7f7f7"><i>Потому что он бесполезный </i></font><br/>
В теории может возникнуть такой момент, когда имена атрибутов в CSS и XML будут совпадать, что может привести к проблемам. И чтобы разрешить этот конфликт, нужно явно указать пространство имен. Есть два <s>стула</s> способа: указать префикс или использовать <b>attributeType</b>. Начнем с префикса.<br/>
<br/>
Везде пишут примерно следующее:<br/>
<blockquote>Можно указать XMLNS префикс для атрибута, чтобы явно указать его пространство имен</blockquote>Этот способ упоминается вскользь и без примеров. Вот и я не буду изменять традициям. (советую тебе тут остановиться, забыть про префиксы как про страшный сон и переходить к <b>attributeType</b>, я тебя предупредил)<br/>
<br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">«Я мазохист»</b>
                        <div class="spoiler_text"><font color="#808080"><i>Содержание этого спойлера несет скорее развлекательно-ознакомительный характер. Никакой полезной информации, кроме того факта, что префиксы не работают, тут ты не узнаешь</i></font><br/>
<br/>
Для начала нужно найти более точное определение, а, как известно, самые точные определения в спецификациях и в стандартах.<br/>
<br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">Краткий гайд как разочароваться в жизни</b>
                        <div class="spoiler_text"><ol>
<li>Открываем <a href="https://svgwg.org/specs/animations/#TargetAttributes">спецификацию по SVG анимации</a> за 14 марта 2019</li>
<li>В разделе про <b>attributeName </b>видим, что он наследует <a href="https://www.w3.org/TR/2001/REC-smil-animation-20010904/#SpecifyingAnimationTarget">стандарт SMIL Animation</a> за (о ужас) 2001 год</li>
<li>Читаем определение <b>attributeName</b></li>
<li>Profit!</li>
</ol><br/>
</div>
                    </div>Перевод определения гласит примерно следующее:<br/>
<blockquote><i>«Определяет имя целевого атрибута. Префикс XMLNS может использоваться для указания пространства имен XML для атрибута. Префикс будет интерпретироваться в области действия элемента анимации.»</i></blockquote>Хмм, легче не стало. Что придет в голову человеку, который не знает XML, после прочтения такого определения? Правильно. То же самое что и мне.<br/>
<br/>
Я понял его буквально и подумал, что это должно выглядеть так<br/>
<br/>
<pre><code class="xml">&lt;animate attributeName="xmlns:*имя атрибута*"/></code></pre><br/>
Подумал и благополучно забыл про этот способ до написания этой статьи. Проблемы начались, когда я решил проверить его на практике. Думаю, я никого не удивлю, если скажу, что это не работает. Спустя несколько часов безуспешных поисков я загуглил «xmlns prefix» и к моему удивлению увидел, что xmlns это не сам префикс, а <font color="#808080"><i>(сконцентрируйся, сейчас будет сложно)</i></font> <u>конструкция определения пространства имен с префиксами</u>.<br/>
<br/>
Выглядит она следующем образом:<br/>
<br/>
<pre><code class="xml">&lt;*тег* xmlns:*префикс*="*полный url адрес*" ...></code></pre><font color="#808080"><i>Тут я понял, что ничего не понял…в самом начале…и сейчас в принципе тоже</i></font><br/>
<br/>
Спустя еще пару часов я наконец нашел, что искал, в <a href="https://www.w3.org/TR/REC-xml-names/#uniqAttrs">Namespaces in XML</a>. Вот оригинальный пример:<br/>
<br/>
<pre><code class="xml">&lt;x xmlns:n1="http://www.w3.org" xmlns="http://www.w3.org" >
    &lt;good a="1" n1:a="2" />
&lt;/x>
</code></pre><br/>
Но знаешь, что самое смешное? Это все равно не работает. Хотя сделано все по книжке<br/>
<br/>
<pre><code class="xml">&lt;svg version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:n1="http://www.w3.org/2000/svg">
    &lt;circle id="www" n1:r="10" .../>
    &lt;animate href="#www" attributeName="n1:r" .../>
&lt;/svg>
</code></pre><br/>
Ошибок нет и не должно быть, потому что все сделано по правилам, но проблема в том, что мы получим круг без радиуса. Такой же результат будет, если просто не писать атрибут <b>r</b>.<br/>
<br/>
<u><b>Эпилог</b></u>: SVG игнорирует атрибуты с префиксом. В итоге даже если SMIL действительно анимирует атрибут с префиксом, результата этой анимации ты не увидишь.<br/>
<font color="#808080"><i>В свое оправдание скажу, что разбирался только с SVG, а именно с его анимацией, поэтому гуру XML порошу отложить факелы и вилы в сторону. Если знаете, как заставить этот способ работать, милости прошу в комментарии</i></font><br/>
</div>
                    </div><br/>
Чтобы явно указать, к чему принадлежит анимируемый атрибут, используется <b>attributeType</b>. Он принимает 3 значения: <b>CSS</b>, <b>XML</b>, <b>auto</b>. Если явно не указывать <b>attributeType</b>, то будет использоваться <b>auto</b>. В этом случае сначала проверяются CSS свойства и если нет совпадений, то проверяются атрибуты целевого элемента. В примере укажем, что собираемся анимировать именно CSS свойство<br/>
<br/>
<pre><code class="xml">&lt;animate attributeType="CSS" attributeName="opacity" .../></code></pre><br/>
Отлично, <b>attributeType </b>позволяет легко и без костылей указать, к чему относится анимируемый атрибут, тем самым решая «проблему», которой даже не существует.<br/>
<br/>
Неожиданно, правда? Как я сказал в начале главы – SMIL вымирает и связано это с тем, что анимацию переводят на рельсы CSS. Большинство дублирующихся атрибутов абсолютно идентичны друг другу, т.е. неважно, принадлежит атрибут CSS или SMIL — результат будет один и тот же. А в сочетании со значением <b>auto </b>по умолчанию необходимость в явном определении <b>attributeType </b>отпадает.<br/>
<br/>
<font color="#808080"><i><u>Минутка интересных фактов:</u> атрибут <b>attributeType </b>не поддерживается SVG. Откуда тогда он взялся? Он пришел к нам из SMIL Animation, на котором базируется SVG анимация. А еще <b>attributeType </b>удален после SVG 1.1 Second Edition. Все пруфы <a href="https://svgwg.org/specs/animations/">тут</a></i></font><br/>
<br/>
<b>Как определить значения анимации?</b><br/>
<br/>
Указать атрибут для анимации недостаточно, необходимо определить его значения. Тут на сцену выходят <b>from</b>, <b>to</b>, <b>by</b>, <b>values</b>.<br/>
<br/>
Начнем с парочки, которая всегда вместе: <b>from</b> и <b>to</b>. Смысл их существования очевиден, <b>from </b>указывает на начало, <b>to </b>на конец<br/>
<br/>
<pre><code class="xml">&lt;circle r="25" ...>
    &lt;animate
        attributeName="r"
        from="10"
        to="45"
        .../>
&lt;/circle>
</code></pre><font color="#808080"><i>Результатом выполнения анимации будет плавное изменение радиуса окружности с 10 до 45</i></font><br/>
<br/>
Пусть я и сказал, что они всегда вместе, <b>to </b>так же может использоваться и без явного объявления <b>from</b>. В таком случае <b>from </b>примет значение, определенное в целевом элементе. Для примера выше анимация будет начинаться с 25.<br/>
<br/>
Если есть необходимость указать набор из нескольких значений, используется <b>values</b>. Значения перечисляются через точку с запятой<br/>
<br/>
<pre><code class="xml">&lt;circle r="25" ...>
    &lt;animate
        attributeName="r"
        values="15;50;25"
        .../>
&lt;/circle>
</code></pre><font color="#808080"><i>Значение радиуса уменьшится до 15, после увеличится до 50 и затем вернется в начальное положение</i></font><br/>
<br/>
Последний на очереди <b>by</b>. Ему не важно «откуда» и «куда», все, что его интересует, это «на сколько». Иначе говоря, вместо абсолютных значений он работает с относительными<br/>
<br/>
<pre><code class="xml">&lt;circle r="25" ...>
    &lt;animate
        attributeName="r"
        by="15"
        .../>
&lt;/circle>
</code></pre><font color="#808080"><i>Как итог анимации – радиус увеличится на 15, то есть получится 25+15=40</i></font><br/>
<br/>
По просторам руководств ходит легенда, что <i>«<b>by </b>может использоваться для указания величины, на которую анимация должна продвинутся»</i>. Я понимаю это так: если <b>from=20</b>, <b>to=50</b>, и задан <b>by=10</b>, то этот путь должен преодолеваться «прыжками» по 10, т.е. 20, 30, 40, 50. Но как бы я не пытался, что с <b>by</b>, что без него, анимация ни капли не изменялась. Также я не нашел подтверждения в спецификации. Похоже, это просто ошибка.<br/>
<br/>
Наибольшим приоритетом обладает <b>values</b>, затем идет <b>from</b>-<b>to</b>, последний <b>by</b>. Наименьший приоритет <b>by </b>объясняет, почему «легенда» не может работать в принципе. Однако <b>by </b>работает в связке с <b>from</b>, в этом варианте <b>from </b>просто переопределяет текущее положение элемента<br/>
<br/>
<pre><code class="xml">&lt;circle cy="50" ...>
    &lt;animate
        attributeName="cy"
        from="70"
        by="30"
        .../>
&lt;/circle>
</code></pre><font color="#808080"><i>Тут анимация вместо 50 начнется с 70 и закончится на 100</i></font><br/>
<br/>
<b>Еще про относительные анимации</b><br/>
<br/>
Можно заставить остальные атрибуты работать так же, как и <b>by</b>. Делается это с помощью атрибута <b>additive</b>, который имеет два положения – <b>replace </b>и <b>sum</b>. Первый стоит по умолчанию, поэтому нас интересует второй. При значении <b>sum </b>все атрибуты будут прибавляться к текущему значению целевого элемента, т.е. при анимации радиуса, равного 20, со значениями <b>form=5</b> и <b>to=15</b>, анимация будет с 20+5 до 20+15<br/>
<br/>
<pre><code class="xml">&lt;circle r="20" ...>
    &lt;animate attributeName="r" from="5" to="15" additive="sum" .../>
&lt;/circle>
</code></pre><br/>
При выполнении анимации произойдет резкий скачок в положение 25, что не есть хорошо (если, конечно, так не задумано). Этого можно избежать при <b>form=0</b>, но тогда теряется смысл использования <b>sum</b>, потому что тот же эффект можно получить и без <b>additive </b>используя <b>by</b><br/>
<br/>
<pre><code class="xml">&lt;animate attributeName="r" from="0" to="15" additive="sum" .../>
&lt;animate attributeName="r" by="15" .../></code></pre><font color="#808080"><i>Как по мне, второй способ гораздо понятнее и удобнее</i></font><br/>
<br/>
<b>Где указывать длительность анимации?</b><br/>
<br/>
Остался последний обязательный атрибут, чтобы сделать рабочую анимацию – и это <b>dur</b>. Значение атрибута определяет длительность анимации, которое можно указывать как в секундах, так и в миллисекундах<br/>
<br/>
<pre><code class="xml">&lt;animate dur="0.5s" .../>
&lt;animate dur="500ms" .../>
&lt;animate dur="00:00:00.5" .../>
</code></pre><font color="#808080"><i>По последней строчке можно догадаться, что есть еще кое-что…</i></font><br/>
<br/>
Также можно указывать значения в минутах и даже часах<br/>
<br/>
<pre><code class="xml">&lt;animate dur="1.2min" .../>
&lt;animate dur="0.02h" .../>
</code></pre><font color="#808080"><i>Хрен его знает, на кой ляд тебе сдалось указывать значения в часах, но я в чужие дела не лезу, хочешь, значит есть зачем...</i></font><br/>
Для других атрибутов временные значения задаются в таких же формах<br/>
<br/>
<b>Что сделать, чтобы анимация не возвращалась в начало?</b><br/>
<br/>
Атрибут <b>fill </b><font color="#808080"><i>(не путайте этот атрибут с его тезкой)</i></font> отвечает за поведение элемента после окончания анимации. Предусмотрено две опции:<br/>
<br/>
<ul>
<li><b>remove </b>(значение по умолчанию) – как только анимация достигает своего конца, все преобразования сбрасываются и элемент принимает состояние как до анимации</li>
<li><b>freeze </b>– элемент застывает в конечном положении анимации</li>
</ul><br/>
<b>Можно ли зациклить анимацию?</b><br/>
<br/>
Ответ – да. Для этого в атрибуте <b>repeatCount </b>указывается значение <b>indefinite</b>. Атрибут определяет число повторений анимации и по умолчанию имеет 1, но можно указать любое число<br/>
<br/>
<pre><code class="xml">&lt;animate repeatCount="indefinite" .../>
&lt;animate repeatCount="3" .../>
</code></pre><font color="#808080"><i>Первая будет повторяться бесконечно, вторая отработает 3 раза</i></font><br/>
<br/>
<b>Теперь меня бесят бесконечные анимации, можно их выключить через время?</b><br/>
<br/>
Для таких раздражительных людей сделали <b>repeatDur</b>. Этот атрибут останавливает воспроизведение анимации через определенное время <u>с начала воспроизведения анимации!</u> Проще говоря, <b>repeatDur </b>ограничивает время длительности анимации. Главное отличие от <b>repeatCount </b>в том, что анимация может быть остановлена в середине<br/>
<br/>
<pre><code class="xml">&lt;animate dur="2s" repeatCount="indefinite" repeatDur="3s" .../></code></pre><font color="#808080"><i>Анимация прервется в середине второй итерации</i></font><br/>
<br/>
<b>А что если я хочу, чтобы анимация начиналась не сразу?</b><br/>
<br/>
Тогда для тебя, мой друг, предусмотрен атрибут <b>begin</b>. Отвечает он за то, когда начнется анимация. Этот атрибут очень полезен, потому что также используется для синхронизации нескольких анимаций, но об этом чуть позже.<br/>
<br/>
Если нужно указать обычную задержку запуска, то пишем, через какой промежуток времени должна начаться анимация после открытия документа<br/>
<br/>
<pre><code class="xml">&lt;animate begin="1.5s" .../></code></pre><font color="#808080"><i>Воспроизведение начнётся через 1,5 секунды</i></font><br/>
<br/>
Также можно указать отрицательное значение. Тогда анимация начнется не с начала, а в том месте, где она была бы через указанный промежуток времени<br/>
<br/>
<pre><code class="xml">&lt;animate begin="-2s" dur="4s" .../></code></pre><font color="#808080"><i>Анимация начнется с открытием документа, но будет воспроизводиться с середины</i></font><br/>
<br/>
<b>Делаем анимации интерактивными</b><br/>
<br/>
В качестве значения <b>begin </b>можно указать событие, при котором начнется анимация, но без приставки «on». Например, если хочется сделать анимацию по клику, то вместо «onclick» пишем <b>click</b><br/>
<br/>
<pre><code class="xml">&lt;circle ...>
    &lt;animate begin="click" .../>
&lt;/circle>
</code></pre><br/>
В примере выше анимация начнется при клике на элемент, к которому применена анимация. Если необходимо запустить анимацию по событию с другого элемента, то нужно указать его <b>id</b><br/>
<br/>
<pre><code class="xml">&lt;circle id="button" .../>
...
&lt;animate begin="button.click" .../>
</code></pre><br/>
Еще можно указать несколько условий начала анимации. Для этого нужно перечислять их через точку с запятой<br/>
<br/>
<pre><code class="xml">&lt;animate begin="click; 0s" .../></code></pre><font color="#808080"><i>Анимация начнется при загрузке документа и по клику </i></font><br/>
<br/>
Поддерживаются далеко не все события, но работают большинство событий, связанных с мышью. Я не стану перечислять их все, доступные события можно найти <s>где-то</s> <a href="https://svgwg.org/svg2-draft/interact.html#SVGEvents">тут</a>. Также никто не отменял метод научного тыка.<br/>
<br/>
<b>Анимация перезапускается, не достигнув конца, как это починить? </b><br/>
<br/>
Я приведу простой пример. Здесь анимация начинается по клику. Если пользователь так и не нажмет, то предусмотрен автоматический запуск через 3 секунды<br/>
<br/>
<pre><code class="xml">&lt;animate begin="click; 3s" dur="7s" .../></code></pre><br/>
Но появляется проблема: если пользователь нажмет до автоматического таймера, то, когда пройдет 3 секунды, анимация перезапустится, так и не дойдя до конца. На помощь придет атрибут <b>restart </b>в значении <b>whenNotActive</b>. Всего у него их три<br/>
<br/>
<ul>
<li><b>always </b>стоит по умолчанию – разрешает перезапускать анимацию в любой момент времени</li>
<li><b>whenNotActive </b>– анимация может быть запущена, если она уже не воспроизводится </li>
<li><b>never </b>– запрещает перезапуск анимации</li>
</ul><br/>
<pre><code class="xml">&lt;animate begin="click; 3s" dur="7s" restart="whenNotActive" .../></code></pre><font color="#808080"><i>Проблема решена, хотя в большинстве случаев можно обойтись без этого атрибута, просто грамотно строя зависимости</i></font><br/>
<br/>
<b>Синхронизация анимаций</b><br/>
<br/>
Помимо стандартных событий, по типу клика, есть события начала, конца, повторения анимации. Для того, чтобы привязать событие, необходимо указать <b>id </b>анимации и через точку <b>begin</b>, <b>end</b>, <b>repeat </b>соответственно<br/>
<br/>
<pre><code class="xml">&lt;animate id="pop" begin="click" .../>
&lt;animate begin="pop.begin" .../>
&lt;animate begin="pop.end" .../>
</code></pre><br/>
Если с первыми двумя все понятно, то с <b>repeat </b>все не так очевидно. В скобках пишется номер повторения, <u>после</u> которого нужно запустить анимацию (это число не может быть последим повторением)<br/>
<br/>
<pre><code class="xml">&lt;animate id="flip" repeatCount="5"  .../>
&lt;animate begin="flip.repeat(2)"  .../>
</code></pre><font color="#808080"><i>Анимация запустится <u>после</u> двух повторений, а <u>не каждые</u> 2 повторения</i></font><br/>
<br/>
Еще можно указывать задержку относительно события. Например, если я хочу проиграть анимацию через 2 секунды <i>после начала</i> другой<br/>
<br/>
<pre><code class="xml">&lt;animate id="another" .../>
&lt;animate begin="another.begin + 2s"  .../>
</code></pre><br/>
Или запустить анимацию за секунду <i>до окончания</i> другой<br/>
<br/>
<pre><code class="xml">&lt;animate begin="another.end - 1s"  .../></code></pre><br/>
<b>На что еще способен begin...</b><br/>
хотел я назвать этот раздел, но правильнее его назвать «Что он должен уметь, но не умеет?». По уже моей любимой <a href="https://svgwg.org/specs/animations/#BeginValueSyntax">спецификации </a>у <b>begin </b>должно быть еще два значения, которые он должен принимать. Первый это <b>accessKey</b>, который запускает анимацию по нажатию клавиши, указанной в формате Unicode. Второй — <b>wallclock</b>, определяющий начало анимации по реальному времени. И там можно указать не только часы, но даже месяц и год, в общем полный набор.<br/>
<br/>
К сожалению, ни один из них не захотел работать. Хотя не велика потеря, ведь необходимость в них все равно сомнительная<br/>
<br/>
<pre><code class="xml">&lt;animate begin="accessKey(\u0077)" .../>
&lt;animate begin="wallclock(2019-04-09T19:56:00.0Z);" .../>
</code></pre><font color="#808080"><i>Не знаю, в чем проблема, может, их не поддерживает мой браузер, а может что-то еще…</i></font><br/>
<br/>
<b>Могу ли я прервать анимацию? </b><br/>
<br/>
Это можно сделать атрибутом <b>end</b>. По своему использованию он идентичен <b>begin</b>, также можно указывать время, события, и т.д. Как можно заметить, это уже не первый (и не последний) способ прерывать анимацию, ведь есть <b>repeatDur</b>, где тоже можно фиксировать длительность анимации. И пусть в <b>end </b>тоже можно указывать время напрямую, его отличительными особенностями являются привязка к событиям и возможность указать список значений.<br/>
<br/>
Предположим, что у нас есть элемент, у которого есть состояние покоя и активности. Второе активируется при клике. И мы хотим прервать анимацию покоя с началом активности. Реализовать подобную задумку можно так<br/>
<br/>
<pre><code class="xml">&lt;animate id="idle" end="action.begin" begin="0s" repeatCount="indefinite" .../>
&lt;animate id="action" begin="click" .../>
</code></pre><font color="#808080"><i>Анимация покоя запущена по умолчанию. При клике на элемент запустится анимация активности и прервет анимацию покоя</i></font><br/>
<br/>
<b>Комбинирование атрибутов end и begin</b><br/>
<br/>
Как уже известно, и <b>begin</b>, и <b>end </b>могут принимать список значений, но все еще не понятно, как будет вести себя анимация, если указать список в обоих атрибутах. А получатся, своего рода, повторения с настраиваемой длительностью и интервалами между ними… не понятно? Сейчас все объясню.<br/>
<br/>
Первое, что нужно знать – количество значений в списках должно совпадать. Каждая пара значений <b>begin</b>-<b>end </b>определяет одно «повторение». А время между концом одного «повторения» и началом следующего определяет задержку. Я неспроста называю их «повторениями», анимация не приостанавливается и продолжается, а прерывается и начинается с начала. Выходит, мы можем отдельно регулировать длительность каждого повторения и устанавливать разные задержки после каждого повторения<br/>
<br/>
<pre><code class="xml">&lt;animate
    dur="3s"
    begin="1s; 5s; 9s"
    end = "2s; 8s; 11s"
    .../>
</code></pre><font color="#808080"><i>В примере анимация имеет 3 «повторения». Первый начнется через секунду после загрузки документа и продлится лишь одну секунду из трех. Затем задержка в 3 секунды, и после нее полная анимация в 3 секунды. Опять задержка, но уже в 1 секунду. Последнее повторение прервется после двух секунд анимации</i></font><br/>
<br/>
<b>А можно еще как-нибудь прервать анимацию?</b><br/>
<font color="#f7f7f7"><i>Еще парочка бесполезных атрибутов в копилку</i></font><br/>
Конееееечно, есть еще целых два атрибута – <b>min </b>и <b>max</b>. Как понятно из названия, <b>min </b>определяет минимальную, а <b>max </b>максимальную длительность. Сначала длительность анимации рассчитывается по значениям <b>dur</b>, <b>repeatCount</b>, <b>repeatDur</b>, <b>end</b>. А после полученная длительность подгоняется под рамки, задаваемые <b>min </b>и <b>max</b>. На бумаге все красиво, посмотрим, как это работает на практике. <br/>
<br/>
С <b>max </b>все просто, это еще один атрибут, задающий верхнюю границу. Если <abbr title="Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end">вычисленная длительность</abbr> меньше <b>max</b>, то он игнорируется, а если больше, то длительность анимации становится равна <b>max</b><br/>
<br/>
<pre><code class="xml">&lt;animate dur="10s" repeatDur="7s" end="5s" max="4s" .../></code></pre><font color="#808080"><i>Прервется на 4 секунде</i></font><br/>
<br/>
А вот <b>min</b> повезло меньше. Если <abbr title="Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end">вычисленная длительность</abbr> анимации больше чем <b>min</b>, то он игнорируется, что логично. Однако если <abbr title="Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end">вычисленная длительность</abbr> меньше чем <b>min</b>, то он… иногда игнорируется, а иногда нет. <br/>
Чего, почему?! Вот в этом моменте очень легко запутаться, так что читай внимательно.<br/>
<br/>
У нас есть два варианта, когда <abbr title="Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end">вычисленная длительность</abbr> меньше <b>min</b>:<br/>
<br/>
<ol>
<li>Потому что сама анимация закончилась, т.е. <b>dur </b>* <b>repeatCount </b>&lt; <b>min</b><br/>
<br/>
<pre><code class="xml">&lt;animate dur="2s" repeatCount="2" min="5s" .../></code></pre><font color="#808080"><i>В этом варианте атрибут <b>min </b>просто игнорируется, анимация остановится на четвертой секунде</i></font></li>
<li>Потому что <b>repeatDur </b>или <b>end </b>ограничил длительность. Тут происходит еще одно ветвление<br/>
<br/>
<ul>
<li>У <b>repeatDur </b><i>наивысший </i>приоритет, поэтому если он задан, и он меньше чем <b>min</b>, то <b>min </b>игнорируется<br/>
<br/>
<pre><code class="xml">&lt;animate dur="1s" repeatCount ="indefinite" repeatDur="3s" end="5s" min="4s" .../></code></pre><font color="#808080"><i>Хотя значение <b>repeatDur </b>меньше, чем <b>min</b>, анимация все равно прервется через 3 секунды</i></font></li>
<li>Если <b>repeatDur </b>не задан, а значение <b>end </b>меньше <b>min</b>, то атрибут <b>end </b>будет игнорироваться, а анимация прервется на значении <b>min</b><br/>
<br/>
<pre><code class="xml">&lt;animate dur="1s" repeatCount ="indefinite" end="2s" min="4s" .../></code></pre><font color="#808080"><i>В результате анимация прервется на 4 секунде, т.е. <b>min </b>выступает в роли нового <b>end</b></i></font></li>
</ul></li>
</ol><br/>
Из-за обилия атрибутов, прерывающих анимацию, возникает сильная путаница. По итогу большого смысла в <b>max </b>и <b>min</b> нет, ведь грамотно написанная анимация исключает необходимость в них.<br/>
<br/>
<b>Как управлять ключевыми кадрам и где указывать функцию времени? </b><br/>
<br/>
Для этого нужно знать атрибуты <b>keyTimes</b>, <b>keySplines</b>, <b>calcMode</b>. Указав в <b>values </b>список, мы объявляем ключевые кадры, но они распределены равномерно. Благодаря атрибуту <b>keyTimes </b>мы можем ускорять или замедлять переход из одного состояния в другое. В нем, так же в виде списка, указываются значения для каждого кадра. Значения представляют положение ключевого кадра на временной оси в процентном соотношении, относительно длительности всей анимации (0 – 0%; 0,5 – 50%; 1 – 100%).<br/>
<br/>
Есть несколько правил: каждое значение представляет число с плавающей точкой от 0 до 1, кол-во значений в списках должно совпадать, первое значение обязательно 0, а последнее 1, каждое следующее значение должно быть больше предыдущего. Думаю, ты понимаешь, что нет смысла использовать <b>keyTimes </b>без <b>values</b>. А теперь пример<br/>
<br/>
<pre><code class="xml">&lt;animate values="15; 10; 45; 55; 50" keyTimes="0; 0.1; 0.6; 0.9; 1" .../></code></pre><br/>
По умолчанию все преобразования происходят линейно, чтобы это изменить, нужно указать другой режим в <b>calcMode</b>. И вариантов тут не много:<br/>
<br/>
<ul>
<li><b>linear </b>– стандартное значение, в объяснении не нуждается</li>
<li><b>paced </b>– временные промежутки рассчитываются так, чтобы скорость между ключевыми кадрами была постоянной</li>
<li><b>discrete </b>– анимация переключается между ключевыми кадрами скачками, без интерполяции</li>
<li><b>spline </b>– можно сказать, что это ручной режим управления (о нем попозже) </li>
</ul><br/>
К сожалению, это все встроенные функции, тут ты не найдешь ease in\out как в CSS. Так что эти нужды придется удовлетворять режиму, который я обозвал «ручным».<br/>
<br/>
Самый трудный для понимания — это <b>paced</b>, так что его объясню поподробней. Для начала посмотри, как работает анимация в стандартном режиме. Длительность анимации составляет 2 секунды и у нас есть 3 ключевых кадра – начальный, промежуточный, конечный<br/>
<br/>
<pre><code class="xml">&lt;animate dur="2s" values="100; 200; 150" .../></code></pre><br/>
Если понаблюдать за анимацией, то станет очевидно, что перемещение между ключевыми кадрами происходит за равные промежутки времени. Расстояние между первым и вторым составляет 100, а между вторым и третьим – 50, т.е. половину от первого пути. Путем не хитрых вычислений становится ясно, что элемент будет проходить второй отрезок в два раза медленнее, чем первый.Теперь добавим <b>calcMode="paced"</b> и посмотрим, что изменилось. <br/>
<br/>
<pre><code class="xml">&lt;animate dur="2s" values="100; 200; 150" calcMode="paced" .../></code></pre><br/>
А изменилась скорость движения элемента. Теперь она рассчитана таким образом, чтобы пройти всю дистанцию с одинаковой скоростью, другими словами – оба отрезка элемент будет двигаться равномерно. <br/>
<br/>
Теперь посмотрим на режим <b>spline </b>и атрибут <b>keySplines</b>. Они имеют некоторое сходство …хмм… <br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w780q1/webt/ra/ww/yo/rawwyon0df65mityb6jgadmkkss.jpeg" data-src="https://habrastorage.org/webt/ra/ww/yo/rawwyon0df65mityb6jgadmkkss.jpeg" data-blurred="true"/></div><br/>
Если <b>spline</b> определяет ручной режим, то атрибут <b>keySplines </b>определяет значения для этого режима. Очевидно, что одно без другого не работает. Значения в <b>keySplines </b>задаются списком, где указываются координаты двух точек для кубической Безье.<br/>
<br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">Подробнее о кубической функции Безье</b>
                        <div class="spoiler_text">Это функция, которая определяет интенсивность движения. Она состоит из 4 чисел с плавающей точкой от 0 до 1 и в общем виде выглядит так: cubic-bezier(x1, y1, x2, y2). Пары чисел являются координатами и образуют две точки, которые определяют кривую.<br/>
<img src="https://habrastorage.org/r/w1560/webt/wc/rd/ne/wcrdneum5oobpjobqb_04k9d4co.png" data-src="https://habrastorage.org/webt/wc/rd/ne/wcrdneum5oobpjobqb_04k9d4co.png"/><br/>
Еще подробнее о cubic-bezier можешь прочитать в сети. Для построения кубической Безье я советую пользоваться <a href="http://cubic-bezier.com/">онлайн сервисами</a>, также там можно взглянуть на примеры и поиграть со значениями.<br/>
</div>
                    </div><br/>
Количество значений в <b>keySplines </b>должно быть на 1 меньше чем <b>values</b>. Связано это с тем, что мы указываем значения не для ключевых кадров, а для промежутков меду ними.<br/>
<br/>
<pre><code class="xml">&lt;animate
    values="100; 200; 150"
    keySplines=".25 .1 .25 1;
                0   0  .58 1"
    calcMode="spline"
    .../>
</code></pre><font color="#808080"><i>Координаты точек функции Безье разделяются пробелами или запятыми, а значения списка через точку с запятой</i></font><br/>
<br/>
Первый и самый неприятный минус – нельзя задать общую функцию времени для всех ключевых кадров, придется дублировать функцию для каждого кадра.<br/>
Второй – если хочется задать функцию времени для атрибутов <b>from</b>-<b>to</b> или <b>by</b>, то нужен костыль: придется задать <b>keyTimes </b>со значениями <b>"0; 1"</b><br/>
<br/>
<pre><code class="xml">&lt;animate
    from="10"
    to="50"
    keyTimes="0; 1"
    keySplines=".25 .1 .25 1;"
    calcMode="spline"
    .../>
</code></pre><font color="#808080"><i>Если вместо <b>from</b>-<b>to</b> использовать <b>values </b>с двумя значениями, то такой проблемы не будет</i></font><br/>
<br/>
<b>Как реализовать накопительные анимации?</b><br/>
<br/>
Сначала немного теории – следующее повторение у накопительной анимации продолжится там, где закончилось предыдущее. Как бы круто, но не очень… Огорчает тот факт, что накопительные анимации работают только в пределах повторений.<br/>
<br/>
Теперь о том, как сделать анимацию накопительной: нужно установить атрибут <b>accumulate </b>(который по умолчанию <b>none</b>) в значение <b>sum</b><br/>
<br/>
<pre><code class="xml">&lt;animate by="100" repeatCount="3" accumulate="sum".../></code></pre><br/>
Стоит иметь в виду, что если использовать <b>values </b>или <b>from</b>-<b>to</b>, то все повторения, кроме первого, будут вести они себя как при <b>additive="sum"</b>. А еще <b>accumulate </b>игнорируется если задан только один <b>to</b>.<br/>
<br/>
<b>Постигаем морфинг контура</b><br/>
<br/>
Теперь, когда я объяснил основы, пора переходить к по настоящему крутым и сложным вещам. Уверен, что кто-то открыл эту статью исключительно ради этого раздела.<br/>
<br/>
Морфинг контуров – это анимация атрибута <b>d</b> у тега <b>path</b>, что позволяет создать эффект плавного изменения формы фигуры. На данный момент встроенными средствами такое можно сделать только с помощью SMIL. В <b>values </b>указывается список значений для атрибута <b>d</b>, через которые пройдет элемент. Также можно использовать <b>from</b>-<b>to</b>. В общем виде морфинг контура выглядит так<br/>
<br/>
<pre><code class="xml">&lt;animate attributeName="d" values="состояние 1; состояние 2; ..." .../></code></pre><br/>
А теперь перейдем к тонкостям сего процесса: <br/>
<br/>
Для тех кто в танке – атрибут <b>d</b> содержит в себе набор точек, которые впоследствии поочередно соединяются и получается фигура. При более детальном рассмотрении можно заметить, что список значений похож на набор команд для ЧПУ станка (или «робота» на уроках информатики). Команд достаточно много, одни отвечают за «перемещение курсора», другие за «рисование», какие-то за то, насколько кривая будет линия и т.д. (<a href="https://www.w3.org/TR/SVG/paths.html">все команды тут</a>).<br/>
<br/>
Чтобы морфинг сработал, <i><u>количество команд должно совпадать</u></i>, и они должны быть <i><u>одного типа</u></i>. Если проигнорировать это условие, то интерполяция будет отсутствовать – анимация будет скакать от одного состояния к другому, как при <b>calcMode="discrete"</b>. На первый взгляд ничего сложного и это так, если ты будешь анимировать фигуры без кривых. Если же нет, то тут начинаются сложности.<br/>
<br/>
При создании сложной графики все используют векторные редакторы, а у них есть привычка максимально оптимизировать «код». Обычно это плюс, но не в нашем случае. На выходе у нас <s>возможно</s> будет список одной длинны, но с командами разного типа, а это нарушение одного из правил. Я использовал Adobe Illustrator и не нашел опции, которая могла поправить положение дел. Иногда, по воле богов дизигна, эта проблема отсутствует. А если серьезно, то вероятность возникновения проблемы прямо пропорциональна сложности фигуры и морфинга.<br/>
<br/>
На данный момент единственным решением проблемы я вижу преобразование «кривого кода» в веб-приложении <a href="https://shapeshifter.design/">Shape Shifter</a>. Это тот вариант, которым пользуюсь я. Помимо починки битого кода Shape Shifter позволяет посмотреть результат, при желании добавить анимации другого типа и экспортировать результат в удобном формате. <br/>
<br/>
Далее будет пошаговый туториал, где я расскажу, как сделать такую красивую анимацию<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/4e/r4/lw/4er4lwtbbmhiiqujreog2ibhe84.gif" data-src="https://habrastorage.org/webt/4e/r4/lw/4er4lwtbbmhiiqujreog2ibhe84.gif"/></div><br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">Teach me!</b>
                        <div class="spoiler_text">Плант такой: я создам SVG каркас в Adobe Illustrator, напишу анимацию и не одну, починю косяки в Shape Shifter и сделаю морфинг. Я буду использовать как CSS, так и SMIL анимацию.<br/>
<br/>
Будем делать анимированную иконку вопроса. Для начала нужно создать новый проект в Illustrator. Так как в итоге мы получим векторное изображение, большое разрешение тут не нужно. Я считаю комфортным для работы размер монтажной области 200x200 пикселей.<br/>
<br/>
Далее нужен, собственно, сам знак вопроса. Вместо того, чтобы рисовать его вручную, я воспользуюсь инструментом «Текст». Поиграв с параметрами и шрифтами, получаем такой симпатичный вопросик<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/no/uu/rm/nouurmqxgsflfyhgs2ctpoweavi.png" data-src="https://habrastorage.org/webt/no/uu/rm/nouurmqxgsflfyhgs2ctpoweavi.png"/></div><br/>
Но в таком виде анимировать его не получится. Поэтому нужно преобразовать текст в кривые. Щелкаем правой кнопкой мыши по тексту и выбираем «Преобразовать в кривые»<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/57/4e/po/574epocgz3wx30rkg23lsio-njs.png" data-src="https://habrastorage.org/webt/57/4e/po/574epocgz3wx30rkg23lsio-njs.png"/></div><br/>
После этого можно приступать к покраске, подгонке по размерам и деталям. Мне показалась неплохой идеей сделать иллюзию объема, поэтому я скопировал знак, сделал его темнее, а также убрал лишние точки<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/za/c8/pf/zac8pfuwceeupcjc_siznyrikig.png" data-src="https://habrastorage.org/webt/za/c8/pf/zac8pfuwceeupcjc_siznyrikig.png"/></div><br/>
После этого приступаем к второстепенным элементам. Я добавлю круг и несколько линий, для которых поставлю пунктир так, чтобы была лишь одна черта в самом начале линии. Зачем это все нужно, я покажу позже. Огромный плюс SVG в том, что цвета можно без проблем изменить в любой момент. Потому что я с ними еще не определился…<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/1t/bf/du/1tbfduraytzbzk1sdyy1im7fuya.png" data-src="https://habrastorage.org/webt/1t/bf/du/1tbfduraytzbzk1sdyy1im7fuya.png"/></div><br/>
На этом каркас готов и пора переходить к анимации. Но перед этим нужно сохранить сам проект, потому что он нам еще пригодится. Только после этого сохраняем проект как SVG файл. (как правильно экспортировать документ из Illustrator я писал в самом начале статьи)<br/>
<br/>
Когда я заглянул внутрь полученного документа, я очень удивился, потому что Illustrator сохранил мой круг как элемент <b>&lt;path></b>, а не <b>&lt;circle></b>. Так я плавно подвожу к тому, что настало время прибраться. Нужно убрать все лишнее, оптимизировать некоторые моменты и просто сделать так, чтобы было приятно работать. Кто-то делает это с помощью сторонних программ (например <a href="https://jakearchibald.github.io/svgomg/">SVGO</a>), но я предпочитаю делать все ручками. В процессе создания анимации еще придется не раз перелопатить структуру файла.<br/>
<br/>
<font color="#808080"><i> В примерах стер содержимое атрибута <b>d</b>, которое занимает много места)</i></font><br/>
<br/>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">Вот как было</b>
                        <div class="spoiler_text"><pre><code class="xml">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;!-- Generator: Adobe Illustrator 23.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
&lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     viewBox="0 0 200 200" style="enable-background:new 0 0 200 200;" xml:space="preserve">
&lt;style type="text/css">
    .st0{fill:#D38911;}
    .st1{fill:#87872B;}
    .st2{fill:#CEB629;}
    .st3{fill:none;stroke:#DD913E;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:12,200;}
&lt;/style>
&lt;g id="Pulse">
    &lt;g>
        &lt;path class="st0" d="M100,87c44.1,0,80,35.9,80,80s-35.9,80-80,80s-80-35.9-80-80S55.9,87,100,87 M100,82c-46.9,0-85,38.1-85,85
            s38.1,85,85,85s85-38.1,85-85S146.9,82,100,82L100,82z"/>
    &lt;/g>
&lt;/g>
&lt;g id="_x3F__1_">
    &lt;path id="side" class="st1" d=" Много букв "/>
    &lt;path id="front" class="st2" d=" Много букв "/>
&lt;/g>
&lt;g id="Particles">
    &lt;line class="st3" x1="80" y1="162.9" x2="42" y2="59.1"/>
    &lt;line class="st3" x1="90.1" y1="148.8" x2="59.8" y2="28.8"/>
    &lt;line class="st3" x1="107.9" y1="155.6" x2="124.9" y2="15.9"/>
    &lt;line class="st3" x1="94.4" y1="160.4" x2="154.3" y2="7.2"/>
    &lt;line class="st3" x1="119.3" y1="157" x2="159.2" y2="75.5"/>
    &lt;line class="st3" x1="98" y1="169" x2="87.7" y2="10.7"/>
    &lt;line class="st3" x1="80.4" y1="147.6" x2="63.2" y2="14.1"/>
&lt;/g>
&lt;/svg>
</code></pre><br/>
</div>
                    </div><div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">И как стало</b>
                        <div class="spoiler_text"><pre><code class="xml">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
&lt;style type="text/css">
    #Pulse{fill: none; stroke: #D38911; stroke-width: 5;}
    #side{fill:#87872B;}
    #front{fill:#CEB629;}
    .particles{fill:none;stroke:#DD913E;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:12,200;}
&lt;/style>
&lt;circle id="Pulse" cx="100" cy="167" r="85"/>
&lt;g id="Sign">
    &lt;path id="side" d=" Много букв "/>
    &lt;path id="front" d=" Много букв "/>
&lt;/g>
&lt;g id="Particles">
    &lt;line class="particles" x1="80" y1="162.9" x2="42" y2="59.1"/>
    &lt;line class="particles" x1="90.1" y1="148.8" x2="59.8" y2="28.8"/>
    &lt;line class="particles" x1="107.9" y1="155.6" x2="124.9" y2="15.9"/>
    &lt;line class="particles" x1="94.4" y1="160.4" x2="154.3" y2="7.2"/>
    &lt;line class="particles" x1="119.3" y1="157" x2="159.2" y2="75.5"/>
    &lt;line class="particles" x1="98" y1="169" x2="87.7" y2="10.7"/>
    &lt;line class="particles" x1="80.4" y1="147.6" x2="63.2" y2="14.1"/>
&lt;/g>
&lt;/svg>
</code></pre><font color="#808080"><i>Моей целью была не максимальная оптимизация файла для экономии места, а удобство работы. Тут еще есть что удалить, но это мне не мешает, так что и так сойдет</i></font><br/>
</div>
                    </div><br/>
Я заменил имена CSS классов на человеческие, починил тот бракованный круг и убрал всякий мусор. Теперь можно творить чудеса и начну я с того самого круга. Он будет расходиться, как круги на воде. Для этого его нужно для начала повернуть. И тут мы воспользуемся CSS свойствами. А напишу я следующее:<br/>
<br/>
<pre><code class="css">#Pulse{fill: none; stroke: #D38911; stroke-width: 5; transform: rotateX(80deg);}
._transformer{transform-box: fill-box; transform-origin: center;}
</code></pre><br/>
Чтобы круг поворачивался корректно и никуда не ехал, нужен класс <b>_transformer</b>, который я присвою кругу и другим элементам, которые будут трансформироваться. Об этом «лайфхаке» я расскажу подробнее в части про <b>&lt;animateTransform></b>.<br/>
<br/>
Кто-то спросит: <i>почему ты сразу не сплюснул круг, когда рисовал его в Illustrator? Тогда бы не пришлось возиться с ним сейчас…</i><br/>
<br/>
Все просто – это делалось для того, чтобы была разница в толщине линии. Если просто сплюснуть круг, такого эффекта не добиться. Конечно, это можно было бы сделать с помощью <b>&lt;path></b>, но тогда и размер файла был бы больше и анимировать такой элемент ГОРАЗДО сложнее.<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/bd/rv/fg/bdrvfg6rpliplqi9lm38j4spxuk.png" data-src="https://habrastorage.org/webt/bd/rv/fg/bdrvfg6rpliplqi9lm38j4spxuk.png"/></div><br/>
Собстна, анимация! Происходить будет следующее – при нажатии на вопрос радиус и обводка круга будут увеличиваться, а его прозрачность уменьшаться. Первые две анимации будут происходить линейно, а исчезновение – под самый конец. Сделаем значение радиуса у <b>circle</b> равным нулю, чтобы его не было видно. Так как <b>animate </b>может анимировать только один атрибут за раз, придется сделать 3 синхронные анимации<br/>
<br/>
<pre><code class="xml">&lt;circle id="Pulse" class="_transformer" cx="100" cy="167" r="0">
    &lt;animate id="doPulse" attributeName="r" values="0;85;" dur=".8s" begin="Sign.click" calcMode="spline" keySplines="0,0,.58,1"/>
    &lt;animate attributeName="stroke-width" values="5;12;" dur=".8s" begin="doPulse.begin"/>
    &lt;animate attributeName="opacity" values="0.5;1;1;0" keyTimes="0;0.2;0.5;1" dur=".8s" begin="doPulse.begin"/>
&lt;/circle>
</code></pre><font color="#808080"><i>Если бы не было необходимости привязывать анимацию к клику, разумнее было бы реализовать ее на CSS</i></font><br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/xi/yj/_j/xiyj_jiwt5efedcpx2dq5m6lmy8.gif" data-src="https://habrastorage.org/webt/xi/yj/_j/xiyj_jiwt5efedcpx2dq5m6lmy8.gif"/></div><br/>
После этого мне резко захотелось добавить деталей, и я решил сделать анимацию блика на знаке вопроса. План такой: снова продублировать знак вопроса, изменить заливку на более светлую, и обрезать лишнее с помощью маски. Чтобы вышло как-то так:<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/lu/5f/8c/lu5f8cfqpytvl_t237aelpymcs4.png" data-src="https://habrastorage.org/webt/lu/5f/8c/lu5f8cfqpytvl_t237aelpymcs4.png"/></div><br/>
<br/>
Маской будет простой прямоугольник. В какой-то момент мне показалось, что круто было бы добавить небольшого размытия на границах блика. Поэтому вместо однотонной заливки будем использовать градиент, прозрачный в начале и в конце<br/>
<br/>
<pre><code class="xml">&lt;linearGradient id="light-gradient">
    &lt;stop offset="0%" stop-color="#ffffff00"/>
    &lt;stop offset="10%" stop-color="#FFF"/>
    &lt;stop offset="90%" stop-color="#FFF"/>
    &lt;stop offset="100%" stop-color="#ffffff00"/>
&lt;/linearGradient>
&lt;mask id="light-mask"> &lt;rect y="0" x="90" class="_transformer" width="20" height="220" fill="url(#light-gradient)" /> &lt;/mask>
</code></pre><br/>
Отлично, маска готова. Но для того, чтобы реализовать задуманное, нужно изменить структуру файла. Так как у нас будут два совершенно одинаковых знака вопроса, я заменю их на конструкцию <b>&lt;use></b>, а элемент<b> &lt;path></b> перемещу в <b>&lt;defs></b><br/>
<br/>
<pre><code class="xml">&lt;defs>
    &lt;path id="question" d=" Тут рисуется знак вопроса "/>
&lt;/defs>
...
&lt;use id="front" href="#question"/>
&lt;use id="light" href="#question" mask="url(#light-mask)"/>
</code></pre><br/>
Вот что получается<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/cn/ho/yy/cnhoyy-clqyjniu5tzdv8rq2q40.png" data-src="https://habrastorage.org/webt/cn/ho/yy/cnhoyy-clqyjniu5tzdv8rq2q40.png"/></div><br/>
Теперь, когда основа заложена, пора переходить к анимации. А анимировать мы будем маску. Вернее, прямоугольник внутри маски<br/>
<br/>
<pre><code class="css">#light-mask rect{ animation: highlight 4s infinite; }
@keyframes highlight {
    0% { transform: translate(-100px,0) rotate(-50deg); }
    30%  { transform: translate(100px,0) rotate(-50deg); }
    100%  { transform: translate(100px,0) rotate(-50deg); }
}
</code></pre><br/>
В данном примере очень важен порядок применения трансформаций. Попробуй поменять их местами и все пойдет наперекосяк. Именно поэтому тут CSS лучше, чем SMIL.<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/6q/z4/mg/6qz4mgrsrt9mzwwdr_43jinpiow.gif" data-src="https://habrastorage.org/webt/6q/z4/mg/6qz4mgrsrt9mzwwdr_43jinpiow.gif"/></div><br/>
Так как иконка у нас интерактивная, по клику знак будет подпрыгивать. А просто висящий в воздухе знак — это скучно, поэтому добавим еще небольшого движения в состоянии покоя. Пишем обе анимации и синхронизируем их так, чтобы одновременно работала только одна из них<br/>
<br/>
<pre><code class="xml">&lt;g id="Sign" class="_transformer">
    &lt;path id="side" d=" Очередной длинный набор команд "/>
    &lt;use id="front" href="#question"/>
    &lt;use id="light" href="#question" mask="url(#light-mask)"/>
    &lt;animateTransform 
        id="idle"
        attributeName="transform"
        type="translate"
        values="0,0;0,-5;0,0"
        dur="6s"
        begin="0s; jump.end"
        end="click"
        repeatCount="indefinite"
    />
    &lt;animateTransform
        id="jump"
        attributeName="transform"
        type="translate"
        calMode="spline"
        values="0,0;0,10;0,-35;0,5;0,0"
        keyTimes="0;0.1;0.35;0.6;1"
        keySpline="0,0,.58,1;0,0,.58,1;.42,0,1,1;0,0,.58,1"
        dur="1s"
        begin="idle.end"
    />
&lt;/g>
</code></pre><font color="#808080"><i>Все анимации применяются к группе, чтобы элементы внутри двигались вместе</i></font><br/>
<br/>
А для того, чтобы анимация прыжка была более выразительной, добавим небольшую деформацию. Так как обе анимации должны происходить одновременно, нужен атрибут <b>additive="sum"</b><br/>
<br/>
<pre><code class="xml">&lt;animateTransform
    attributeName="transform"
    type="scale"
    additive="sum"
    values="1,1;1.1,0.8;0.9,1.2;1.1,0.8;1,1"
    keyTimes="0;0.1;0.35;0.7;1"
    dur="1s"
    begin="idle.end"
/>
</code></pre><br/>
Еще я изменил время для анимации круга, чтобы она запускалась, когда знак приземляется. Результат:<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/37/tf/o3/37tfo3-eh9bkuqb8sfkg6fjfbjo.gif" data-src="https://habrastorage.org/webt/37/tf/o3/37tfo3-eh9bkuqb8sfkg6fjfbjo.gif"/></div><br/>
Следующая анимация является квинтэссенцией хитрожопости.<br/>
Помнишь те непонятные линии с одной чертой в начале? Кто-то уже догадался, для чего они, а для других я объясню. Есть такой атрибут <b>stroke-dashoffset</b>, который определяет отступ пунктира относительно начала. Если его анимировать, то создаётся иллюзия движения пунктира вдоль прямой<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/ak/yq/ft/akyqftetegvuxzmjmgu-44cl8ik.gif" data-src="https://habrastorage.org/webt/ak/yq/ft/akyqftetegvuxzmjmgu-44cl8ik.gif"/></div><br/>
В итоге у нас получится что-то вроде разлетающихся в разные стороны частиц. Для этого опять изменим структуру, чтобы частицы оказались за знаком<br/>
<br/>
<pre><code class="xml">&lt;g id="Particles"> ... &lt;/g>
&lt;g id="Sign" class="_transformer"> ... &lt;/g>
</code></pre><br/>
А также добавим им немного прозрачности, чтобы они меньше бросались в глаза и уберем обводку, чтобы их не было видно до анимации<br/>
<br/>
<pre><code class="css">.particles{ opacity:.7; stroke-width:0; ... }</code></pre><br/>
Дальше анимация, которая сама по себе не несет ничего особенного. Просто уменьшаем длину и толщину штриха, попутно перемещая его по прямой<br/>
<br/>
<pre><code class="css">@keyframes sparks {
    0% { stroke-dasharray: 20,200; stroke-width: 5px; }
    100% { stroke-dasharray: 4,200; stroke-width: 0px; stroke-dashoffset: -180; }
}
</code></pre><br/>
Интерес вызывает то, как мы будем применять эту анимацию. Я хочу, чтобы частицы разлетались, когда знак «приземляется». Но тут же появляются сложности: анимация написана на CSS и, если просто применить ее к нашим частицам, она будет воспроизводиться сразу при открытии документа. А если делать ту же анимацию на SMIL, то их будет 3 на каждый атрибут, и они будут дублироваться для каждой линии, а их целых 7. Вариант, мягко говоря, не очень…<br/>
<br/>
Решение проблемы элегантно – вместо того, чтобы выбирать что-то одно, будем использовать их одновременно. Анимация будет написана на CSS, а интерактивную часть будет обрабатывать SMIL.<br/>
<br/>
Создадим вспомогательный класс <b>Particles_active</b>, через который будем применять анимацию к нашим частицам<br/>
<br/>
<pre><code class="css">.Particles_active .particles{ animation: sparks .7s; }</code></pre><br/>
И добавим элемент <b>&lt;set></b>, который будет присваивать этот класс группе, когда настанет нужный момент (подробнее про <b>set </b>расскажу в следующем разделе)<br/>
<br/>
<pre><code class="xml">&lt;g id="Particles">
    &lt;line class="particles" x1="80" y1="162.9" x2="42" y2="59.1"/>
    ...
    &lt;line class="particles" x1="80.4" y1="147.6" x2="63.2" y2="14.1"/>
    &lt;set attributeName="class" to="Particles_active" dur=".7s" begin="jump.begin + .5s"/>   
&lt;/g>
</code></pre><br/>
<b>Что мы получили в результате такого манёвра: </b><br/>
<br/>
<ul>
<li>анимация написана один раз и анимирует все атрибуты сразу;</li>
<li>привязали анимацию к конкретному событию;</li>
<li>благодаря тому, что класс присваивается не частицам, а их родителю, элемент, включающий анимацию, тоже один; </li>
<li>после окончания анимации вспомогательный класс автоматически удалится;</li>
</ul><br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/xo/5p/tc/xo5ptc85zmlzdmp0o6sa30e23vc.gif" data-src="https://habrastorage.org/webt/xo/5p/tc/xo5ptc85zmlzdmp0o6sa30e23vc.gif"/></div><br/>
Морфинг контуров я оставил на сладкое. У нас уже есть иллюзия объема, но мы ее усилим, сделав небольшое вращение. Так как знак не 3D объект, просто крутить его не получится. Поэтому будем изменять контуры так, чтобы казалось, что знак вращается. <br/>
<br/>
Снова обратимся к Adobe Illustrator, в котором откроем ранее сохраненный проект. Нужно всего два ключевых кадра, один из которых у нас уже готов. Чуть-чуть изменим фигуры, чтобы добиться нужного эффекта. Получим два знака вопроса, разница между которыми видна только при непосредственном сравнении<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/kw/it/p5/kwitp5mc31z-4okv11j2eajegjq.png" data-src="https://habrastorage.org/webt/kw/it/p5/kwitp5mc31z-4okv11j2eajegjq.png"/></div><br/>
Для создания анимации нужны только значения атрибута <b>d</b>. Так что вместо сохранения документа откроем его в браузере либо текстовом редакторе<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/zd/gn/f6/zdgnf6gceepyjgmr00_tibvogqe.png" data-src="https://habrastorage.org/webt/zd/gn/f6/zdgnf6gceepyjgmr00_tibvogqe.png"/></div><br/>
Я предпочитаю открывать в браузере, потому что там удобнее искать. Копируем сгенерированные значения и идем с ними на сайт Shape Shifter.<br/>
<br/>
<font color="#808080"><i>Всегда есть вероятность, что анимация заработает сразу со сгенерированными значениями, но я даже не стал проверять. Потому что в любом случае собирался показать, как работать в Shape Shifter</i></font><br/>
<br/>
Чтобы начать работать, нужно загрузить SVG на сайт. Так как модифицированный вариант с анимациями Shape Shifter не поймет, я заранее подготовил «чистый» SVG. Это просто копия самого первого экспорта из Illustrator. После того как файл загружен, нужно добавить анимацию. Выбираем нужную фигуру, кликаем на часы и в развернувшемся меню выбираем pathData<br/>
<br/>
<a href="https://habrastorage.org/webt/1h/xs/mb/1hxsmb0wb5owhwv2tsceledtwho.png"><div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/1h/xs/mb/1hxsmb0wb5owhwv2tsceledtwho.png" data-src="https://habrastorage.org/webt/1h/xs/mb/1hxsmb0wb5owhwv2tsceledtwho.png"/></div></a><br/>
Все, что остается, это просто вставить скопированное значение в toValue. Вставленное значение сразу же изменяется и его можно оттуда копировать. На этом «починку» можно считать оконченной<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/9o/p-/gx/9op-gxlp5gy9krrdczge78qnv8k.png" data-src="https://habrastorage.org/webt/9o/p-/gx/9op-gxlp5gy9krrdczge78qnv8k.png"/></div><br/>
Иногда при несовпадении точек может появиться предупреждение. В большинстве случаев достаточно нажать на волшебную палочку, чтобы исправить это<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/8b/q1/ua/8bq1uasta8qkatvp8h9nirs9qmm.png" data-src="https://habrastorage.org/webt/8b/q1/ua/8bq1uasta8qkatvp8h9nirs9qmm.png"/></div><br/>
Перед тем, как приступать к написанию анимации, можно прямо в Shape Shifter поиграть с параметрами, чтобы сразу определиться с длительностью анимации, временными функциями или вообще понять, что это не то, чего ты хочешь. Когда тебя все устраивает, просто копируй значения из поля toValue и fromValue и отправляйся делать анимацию.<br/>
<br/>
В итоге у меня получилась вот такая анимация. Она идентична для лицевой и боковой сторон вопроса, отличаются только значения<br/>
<br/>
<pre><code class="xml">&lt;animate
    attributeName="d"
    calMode="spline"
    values=" Состояние 1; Состояние 2; Состояние 1"
    dur="5s"
    keySpline=".42,0,.58,1;.42,0,.58,1"
    repeatCount="indefinite"
/>
</code></pre><br/>
<font color="#808080"><i>Состояние 1 – это нормальный вид вопроса, а состояние 2 – повернутое </i></font><br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/nx/uv/ig/nxuvigflycaiwg7zblsmd2cmqiq.gif" data-src="https://habrastorage.org/webt/nx/uv/ig/nxuvigflycaiwg7zblsmd2cmqiq.gif"/></div><br/>
На этом создание анимированной иконки вопроса заканчивается. Напоследок предлагаю взглянуть на финальный результат на Codepen.<br/>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 37.4995%;"><div class="tm-iframe_temp" data-src="https://codepen.io/TosterHolokoster/embed/preview/wZOrqr?height=300&amp;slug-hash=wZOrqr&amp;default-tabs=html,result&amp;host=https://codepen.io" data-style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" id="" width=""></div></div></div></div><br/>
И напоминаю, что так как это SVG – цвета можно менять, а некоторые элементы убирать. Например, если мне не нужны частицы, я могу их спокойно удалить без вреда для всей анимации<br/>
</div>
                    </div><br/>
<h4>&lt;set></h4><br/>
Тег <b>set </b>является укороченной версией <b>animate</b>, за исключением того, что он не может в интерполяцию. Он используется для мгновенного изменения атрибута на определенный отрезок времени, т.е. работает по принципу переключателя. Вследствие этого игнорирует атрибуты, связанные с интерполяцией и не поддерживает накопительные или относительные анимации. Значение задается исключительно с помощью атрибута <b>to</b>, атрибуты <b>values</b>, <b>from</b>, <b>by </b>игнорируются<br/>
<br/>
<pre><code class="xml">&lt;set attributeName="cx" to="200" begin="click" dur="5s" .../></code></pre><font color="#808080"><i>Элемент изменяет положение по клику, по истечении 5 секунд возвращается на исходное место</i></font><br/>
<br/>
Если не указывать атрибут <b>dur</b>, то элемент останется в этом состоянии до перезагрузки документа. В остальном он аналогичен <b>animate</b>.<br/>
<br/>
<h4>&lt;animateTransform></h4><br/>
Как понятно из названия, используется для применения к элементу разного рода трансформаций. Все типы трансформация идентичны CSS трансформациям. При одновременном использовании CSS и SMIL трансформаций они будут друг друга переопределять, поэтому лучше использовать что-то одно, либо смотреть, чтобы они не пересекались.<br/>
<br/>
<b>Как трансформировать?</b><br/>
<br/>
В качестве анимируемого атрибута выступает <b>transform</b>. Режим трансформации указывается в атрибуте <b>type </b>и принимает 4 типа значений – перемещение, поворот, масштабирование, сдвиг по осям. <br/>
<br/>
<b>translate </b>– перемещение элемента относительно его текущего положения. В качестве значений принимает смещение в формате <b>[x, y]</b>, где <b>y</b> является необязательным параметром<br/>
<br/>
<pre><code class="xml">&lt;animateTransform attributeName="transform" type="translate" from="0, -10" to="0, 10" .../></code></pre><font color="#808080"><i>Перемещает элемент по оси Y</i></font><br/>
<br/>
<b>rotate </b>– поворачивает элемент относительно центра вращения. В качестве значений принимает угол поворота и координаты центра вращения <b>[deg, x, y]</b>, координаты центра указывать не обязательно. По умолчанию центр вращения находится в верхнем левом углу SVG документа<br/>
<br/>
<pre><code class="xml">&lt;animateTransform attributeName="transform" type="rotate" from="0, 150, 150" to="45, 150, 150" .../></code></pre><font color="#808080"><i>Поворот на 45 градусов вокруг точки с координатами 150, 150</i></font><br/>
<br/>
Также центр вращения можно изменить с помощью CSS свойства<b> transform-origin</b>, где помимо координат можно указать проценты. По умолчанию процентные значения рассчитываются по размерам всего документа, чтобы проценты считались относительно элемента, нужно задать CSS свойство <b>transform-box</b> со значением <b>fill-box</b>.<br/>
<br/>
<b>scale </b>– масштабирует элемент. В качестве значений принимает числа с плавающей точкой в формате <b>[scale]</b> для обеих осей, или отдельно для каждой оси <b>[scaleX, scaleY]</b> (1 соответствует нормальному размеру элемента). Если не менять <b>transform-box</b>, о котором я говорил выше, то элемент масштабируется относительно всего документа. Пустое пространство вокруг элемента тоже изменяется вместе с ним, поэтому визуально кажется, что элемент смещается в сторону<br/>
<br/>
<pre><code class="xml">&lt;animateTransform attributeName="transform" type="scale" from="1, 1" to="2, 1" .../></code></pre><font color="#808080"><i>Растягивает элемент по оси Х</i></font><br/>
<br/>
<b>skewX </b>или <b>skewY</b> – сдвигает элемент относительно оси. В качестве значения принимает угол наклона<b> [deg]</b>. По дефолту центр сдвига – верхний левый угол, так что тут работает тот же прикол с <b>transform-box</b> и <b>transform-origin</b>, что и в других трансформациях<br/>
<br/>
<pre><code class="xml">&lt;animateTransform attributeName="transform" type="skewX" from="0" to="45" .../>
&lt;animateTransform attributeName="transform" type="skewY" from="90" to="0" .../>
</code></pre><font color="#808080"><i>Один сдвигает по X, другой по Y</i></font><br/>
<br/>
<b>Суммирование и переопределение трансформаций</b><br/>
<br/>
В <b>animateTransform </b>все еще можно делать накопительные и относительные анимации, однако здесь атрибут <b>additive </b>ведет себя иначе. В значении <b>replace</b> трансформация переопределяет все предыдущие. В значении <b>sum </b>трансформация суммируется с предыдущей<br/>
<br/>
<pre><code class="xml">&lt;rect transform="skewY(115)" ...>
    &lt;animateTransform type="translate" from="-10" to="10" additive="replace" .../>
    &lt;animateTransform type="rotate" from="0" to="90" additive="sum" .../>
&lt;/rect>
</code></pre><font color="#808080"><i>В данном примере сдвиг прямоугольника будет переопределен на перемещение и поворот</i></font><br/>
<br/>
<h4>&lt;animateMotion></h4><br/>
Нужен, чтобы анимировать движение элемента вдоль траектории. <b>animateMotion </b>поддерживает атрибуты <b>animate </b>и имеет 3 собственных – <b>path</b>, <b>rotate</b>, <b>keyPoints</b>. <br/>
<br/>
<b>Варианты определения траектории</b><br/>
<br/>
Определить траекторию движения можно несколькими способами – использовать знакомые нам атрибуты <b>from</b>, <b>to</b>, <b>by </b>или <b>values</b>, новый атрибут <b>path </b>или дочерний тег <b>&lt;mpath></b>. Я перечислил способы по возрастанию приоритета и объяснять я их буду в том же порядке.<br/>
<br/>
В атрибуты <b>from</b>, <b>to</b>, <b>by </b> указываются координаты точек, <b>values </b>то же, но уже в виде списка<br/>
<br/>
<pre><code class="xml">&lt;animateMotion from="0,0" to="50,100" .../>
&lt;animateMotion values="0,0; 0,100; 100,100; 0,0" .../>
</code></pre><br/>
Эффект от такого способа сравним с обычной трансформацией перемещения. Элемент перемещается прямолинейно из одной точки в другую. И тут так же, как и в <b>animateTransform</b>, <u>координаты являются относительными</u>. Точка 0,0 указывает не на верхний левый угол документа, а на текущее положение целевого элемента. Данная особенность присутствует и в остальных способах определения траектории.<br/>
<br/>
В атрибуте <b>path </b>указывается набор команд, как для атрибута <b>d</b>. Если в атрибуте <b>d</b> команды интерпретируются как контур фигуры, то в атрибуте <b>path </b>они является линией, по которой будет двигаться элемент. Координаты точек тоже относительны, поэтому путь начинается с точки 0,0<br/>
<br/>
<pre><code class="xml">&lt;animateMotion path="M 0 0 c 3.4 -6.8 27.8 -54.2 56 -37.7 C 73.3 -27.5 89.6 -5.1 81.9 5.9 c -5.8 8.3 -24.7 8.7 -45.4 -0.4" .../></code></pre><br/>
Данный путь описывает вот такую кривую <br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/tt/kh/tv/ttkhtvmfbm-qymlq4r_a40ovg9o.png" data-src="https://habrastorage.org/webt/tt/kh/tv/ttkhtvmfbm-qymlq4r_a40ovg9o.png"/></div><br/>
<br/>
Последний способ – использовать в качестве траектории сторонний элемент <b>&lt;path></b>. Для этого в теге <b>&lt;mpath></b> нужно указать ссылку на этот элемент, а сам тег нужно поместить внутрь <b>&lt;animateMotion></b>. Этот вариант имеет ту же особенность с относительными координатами. По своей сути этот способ как бы «копирует» из элемента значение атрибута <b>d</b> в атрибут <b>&lt;path></b><br/>
<br/>
<pre><code class="xml">&lt;path id="movement" .../>
...
&lt;animateMotion ...>
    &lt;mpath href="#movement"/>
&lt;/animateMotion>
</code></pre><font color="#808080"><i>Элемент, который определяет траекторию, может даже не отображаться в документе. Его можно просто определить в <b>&lt;defs></b></i></font><br/>
<br/>
<b>Поворот элемента относительно траектории</b><br/>
<br/>
Есть возможность заставить элемент поворачиваться по направлению движения, используя атрибут <b>rotate</b>. Он принимает 3 типа значений: <b>auto</b>, <b>auto-reverse</b> и число, обозначающее поворот в градусах<br/>
<br/>
<pre><code class="xml">&lt;animateMotion rotate="auto" .../></code></pre><br/>
По умолчанию <b>rotate </b>имеет значение 0. Любое численное значение фиксирует угол на протяжении всей анимации. Автоматические режимы <b>auto </b>и <b>auto-reverse</b> изменяют угол поворота элемента соответственно касательной к траектории. И отличаются направлением этой касательной. У <b>auto </b>она направлена вперед, а у <b>auto-reverse</b> назад<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/cs/be/99/csbe99ve3bjyfbdtd9mnogzw4i0.png" data-src="https://habrastorage.org/webt/cs/be/99/csbe99ve3bjyfbdtd9mnogzw4i0.png"/></div><br/>
<br/>
<b>Как управлять перемещением по траектории?</b><br/>
<br/>
Траектория представляет собой кривую, у которой есть начало и есть конец, эти точки обозначаются числами 0 и 1 соответственно. Любое положение на кривой можно определить числом в этом диапазоне. Перечисляя точки в атрибуте <b>keyPoints</b>, можно определить любой вид движения по траектории. Но этого недостаточно, чтобы управлять перемещением, для этого нужна целая система из атрибутов. <br/>
<br/>
Для начала нужно установить <b>calcMode </b>в положение <b>linear </b>или <b>spline</b>. В отличие от других тегов, <b>animateMotion </b>по умолчанию имеет значение <b>paced </b>(почему-то анимация не хочет работать в этом режиме). Также необходимо указать атрибут <b>keyTimes</b>. Только выполнив эти действия, анимация заработает как надо<br/>
<br/>
<pre><code class="xml">&lt;animateMotion keyPoints="0.5; 1; 0; 0.5" keyTimes="0; 0.25; 0.75; 1" calcMode="linear" .../></code></pre><font color="#808080"><i>В примере анимация стартует в середине траектории, движется до конца, затем в начало, и заканчивает движение опять в середине</i></font><br/>
<br/>
<b>P.S.</b><br/>
<br/>
Разбираясь с <b>animateMotion</b>, я наткнулся на информацию, что то же самое можно, вроде как, сделать на CSS. Но под конец написания статьи у меня не было ни сил, ни желания с этим разбираться. Для энтузиастов я просто оставлю <a href="https://drafts.fxtf.org/motion-1/#motion-paths-overview">ссылку </a>на документацию.<br/>
<br/>
<br/>
<font color="#808080"><h2>Особая благодарность</h2></font><br/>
<a href="https://habr.com/ru/users/bhudh/" class="user_link">Bhudh</a> за огромную работу по коррекции статьи</div></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BAnimation%5D" class="tm-tags-list__link">Animation</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BSVG%5D" class="tm-tags-list__link">SVG</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BCSS%5D" class="tm-tags-list__link">CSS</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BSMIL%5D" class="tm-tags-list__link">SMIL</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%90%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D1%8F%5D" class="tm-tags-list__link">Анимация</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%92%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">Векторная графика</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%9C%D0%BE%D1%80%D1%84%D0%B8%D0%BD%D0%B3%5D" class="tm-tags-list__link">Морфинг</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BAdobe%20Illustrator%5D" class="tm-tags-list__link">Adobe Illustrator</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/vector_graphics/" class="tm-hubs-list__link">
    Работа с векторной графикой
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/animation/" class="tm-hubs-list__link">
    Компьютерная анимация
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 39: ↑39 и ↓0</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-rating"></use></svg> <span title="Всего голосов 39: ↑39 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+39</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">110K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    293
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <DIV class="v-portal" style="display:none;"></DIV> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="https://habr.com/ru/users/ERRORNAME/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="https://habrastorage.org/getpro/habr/avatars/94d/ae6/51f/94dae651f0c553475c76fc12a067a65b.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 21 голос " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    21
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Артем</span> <a href="https://habr.com/ru/users/ERRORNAME/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @ERRORNAME
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Прогер, Фронтендер, чуть-чуть Дизайнер</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="https://habr.com/ru/post/450924/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 21 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner4223" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner4224" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/post/450924/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr-register/?back=/ru/post/450924/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="https://habr.com/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="https://habr.com/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="https://habr.com/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2022 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"450924":{"id":"450924","timePublished":"2019-05-07T19:22:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Все об SVG анимации","leadData":{"textHtml":"В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество. Эту статью я позиционирую как подробное руководство.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fmf\u002Flw\u002Fhk\u002Fmflwhklk-vn1e_k1d-qw7am4toy.jpeg\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗдесь не будет никаких плагинов, библиотек и прочего, речь пойдет только о чистом SVG. \u003Cbr\u002F\u003E\r\nЕдинственный инструмент, который я буду использовать, это Adobe Illustrator.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Получить сакральные знания","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":21,"votesCount":21},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1884047","alias":"ERRORNAME","fullname":"Артем","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F94d\u002Fae6\u002F51f\u002F94dae651f0c553475c76fc12a067a65b.png","speciality":"Прогер, Фронтендер, чуть-чуть Дизайнер"},"statistics":{"commentsCount":21,"favoritesCount":293,"readingCount":109769,"score":39,"votesCount":39},"hubs":[{"relatedData":null,"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true},{"relatedData":null,"id":"19798","alias":"animation","type":"collective","title":"Компьютерная анимация","titleHtml":"Компьютерная анимация","isProfiled":true}],"flows":[{"id":"2","alias":"design","title":"Дизайн"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EВ данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество. Эту статью я позиционирую как подробное руководство.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002Fmf\u002Flw\u002Fhk\u002Fmflwhklk-vn1e_k1d-qw7am4toy.jpeg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fmf\u002Flw\u002Fhk\u002Fmflwhklk-vn1e_k1d-qw7am4toy.jpeg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗдесь не будет никаких плагинов, библиотек и прочего, речь пойдет только о чистом SVG. \u003Cbr\u002F\u003E\r\nЕдинственный инструмент, который я буду использовать, это Adobe Illustrator.\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EПредисловие\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВсе началось со скучной лекции и в надежде занять себя хоть чем-то, я решил изучить SVG графику, а именно анимацию. К моему удивлению, в интернете было совсем мало информации. Везде дублировалась информация, объясняющая основы, а про анимацию вообще от силы 2-3 ссылки с абсолютно идентичной информацией, являющейся переводом статьи A Guide to SVG Animations (SMIL) за авторством Сары Суэйдан.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЕе статья рассказывает о всём, но поверхностно. Тем не менее настоятельно рекомендую с ней ознакомиться. \u003Ca href=\"https:\u002F\u002Fcss-live.ru\u002Farticles\u002Frukovodstvo-po-svg-animaciyam-smil.html\"\u003E*Ссылка на перевод*\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСледующие несколько недель я провел, собирая информацию по кусочкам из разных источников. Результатом этих поисков является эта статья\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EПравильный экспорт SVG из Illustrator\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nЭтот раздел посвящен особенностям и проблемам Adobe Illustrator, так что, если ты используешь не Illustrator, то можешь пропустить эту часть.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПодготовить документ для анимации очень важный этап, пренебрежительное отношение к которому может обернуться очень неприятными последствиями. Учить тебя, как лучше рисовать в Illustrator, я не стану. Единственное, что я скажу – при отрисовке фигур следует следить за значениями, желательно, чтобы они имели лишь одно число после запятой, а лучше вообще были целыми. Следовать этому правилу не обязательно, но оно уменьшит размер файла, упростит дальнейшую анимацию и визуально сократит объем информации. Взгляни\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;path d=\"M 17.7 29 C 28.2 12.9 47 5.6 62.8 10.4 c 28.2 8.5 30 50.5 24.8 53.1 c -2.6 1.3 -10.4 -6.1 -29.2 -34.6\"\u002F\u003E\n&lt;path d=\"M 17.651 28.956 c 10.56 -16.04 29.351 -23.359 45.12 -18.589 c 28.151 8.516 29.957 50.5 24.841 53.063 c -2.631 1.318 -10.381 -6.148 -29.235 -34.643\"\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ примере одна и та же кривая, но в первом случае одна цифра после запятой, а во втором три. Эта кривая имеет всего 4 точки, а второй пример на треть длиннее первого. Представь, как много места займет кривая из 20 точек.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле того как каркас нарисован, нужно сохранить изображение как SVG файл. Для этого есть два пути – «Сохранить как» или «Экспортировать как». Но какой способ выбрать? Если доверяешь мне – лучше используй «сохранить как». Если хочешь знать «почему», то разворачивай спойлер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003EТак почему же?\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003EНа первый взгляд разницы никакой, ведь в итоге мы получим файл.svg с нашим изображением. Однако отличия начинаются еще на этапе параметров экспорта\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fz1\u002Fai\u002Fjt\u002Fz1aijt1cwfmvoca1_saqybvspts.png\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fz1\u002Fai\u002Fjt\u002Fz1aijt1cwfmvoca1_saqybvspts.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fz1\u002Fai\u002Fjt\u002Fz1aijt1cwfmvoca1_saqybvspts.png\"\u002F\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EДетально объяснять все параметры я не вижу смысла, с этим прекрасно справляется сам Illustrator в секции «Описание».\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак видно, «сохранить» имеет больше настроек, нежели «экспортировать», и для кого-то это уже будет весомой причиной отказаться от экспортирования, но мы продолжим. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли открыть файлы, сохраненные обоими способами, в браузере, разницы мы не заметим. Однако в данный момент нас больше интересует не внешний вид, а начинка, поэтому сделаем то же самое, но уже через текстовый редактор. Тут отличия станут более очевидны. Предлагаю тебе самому посмотреть и сделать выводы, я ничего в файлах не изменял, просто скопировал целиком как есть.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EЭкспортировать\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;svg id=\"Слой_1\" data-name=\"Слой 1\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewBox=\"0 0 51 51\"\u003E\n  &lt;defs\u003E\n    &lt;style\u003E\n      .cls-1 {\n        fill: none;\n        stroke: #4ec931;\n        stroke-miterlimit: 10;\n      }\n\n      .cls-2 {\n        fill: #4ec931;\n      }\n\n      .cls-3 {\n        fill: #fff;\n      }\n    &lt;\u002Fstyle\u003E\n  &lt;\u002Fdefs\u003E\n  &lt;title\u003Emy_icon_E&lt;\u002Ftitle\u003E\n  &lt;circle class=\"cls-1\" cx=\"25.5\" cy=\"25.5\" r=\"20\"\u002F\u003E\n  &lt;circle class=\"cls-1\" cx=\"25.5\" cy=\"25.5\" r=\"25\"\u002F\u003E\n  &lt;g id=\"Слой_2\" data-name=\"Слой 2\"\u003E\n    &lt;circle class=\"cls-2\" cx=\"25.5\" cy=\"25.5\" r=\"15\"\u002F\u003E\n    &lt;polygon class=\"cls-3\" points=\"25.5 34.8 34 20.3 17 20.3 25.5 34.8\"\u002F\u003E\n  &lt;\u002Fg\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003EСохранить\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u003E\n&lt;!-- Generator: Adobe Illustrator 23.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\u003E\n&lt;svg version=\"1.1\" id=\"Слой_1\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" xmlns:xlink=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink\" x=\"0px\" y=\"0px\"\n     viewBox=\"0 0 100 100\" style=\"enable-background:new 0 0 100 100;\" xml:space=\"preserve\"\u003E\n&lt;style type=\"text\u002Fcss\"\u003E\n    .st0{fill:none;stroke:#4EC931;stroke-miterlimit:10;}\n    .st1{fill:#4EC931;}\n    .st2{fill:#FFFFFF;}\n&lt;\u002Fstyle\u003E\n&lt;circle class=\"st0\" cx=\"50\" cy=\"50\" r=\"20\"\u002F\u003E\n&lt;circle class=\"st0\" cx=\"50\" cy=\"50\" r=\"25\"\u002F\u003E\n&lt;g id=\"Слой_2\"\u003E\n    &lt;circle class=\"st1\" cx=\"50\" cy=\"50\" r=\"15\"\u002F\u003E\n    &lt;polygon class=\"st2\" points=\"50,59.3 58.5,44.8 41.5,44.8    \"\u002F\u003E\n&lt;\u002Fg\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПомимо отличий в именовании CSS классов и оформления в целом, которые кто-то может посчитать вкусовщиной, есть и другие проблемы. При «экспортировании» все изображение уменьшилось в 2 раза. Судить об этом можно по размерам фигур и атрибуту \u003Cb\u003EviewBox\u003C\u002Fb\u003E. Так как это векторная графика, хуже от этого не стало, но все равно неприятно. «Сохранение» же оставило размеры, которые я указал в Illustrator.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНо все это цветочки по сравнению с тем, какую свинью может подложить «экспортирование». Конкретно в данных примерах этой проблемы нет, вероятно, потому что изображение очень простое. Однако я столкнулся с ней, когда экспортировал другую мою работу. Вот ее скриншот\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fh_\u002Fqk\u002Faz\u002Fh_qkaz2ecvnd05teg-mejqmqeza.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fh_\u002Fqk\u002Faz\u002Fh_qkaz2ecvnd05teg-mejqmqeza.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбъем файла достаточно большой, так что я приведу только проблемную часть\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;g id=\"кнопка-21\" data-name=\"кнопка\"\u003E\n    &lt;path class=\"cls-9\" d=\"M477.94,456.75a1.83,1.83,0,0,1-.9,1.36l-4.91,3.1a7.29,7.29,0,0,1-7.5,0l-16.29-9.72a1.85,1.85,0,0,1-.92-1.56v-3.68a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l4.53-2.86.38-.23a1.87,1.87,0,0,0,.9-1.36Z\" transform=\"translate(-5.5 -5.5)\"\u002F\u003E\n    &lt;path class=\"cls-10\" d=\"M477,451.19l-16.38-9.5a7.28,7.28,0,0,0-7.32,0l-5,2.9a1.88,1.88,0,0,0-.94,1.51v.17a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l4.53-2.86.38-.23a1.87,1.87,0,0,0,.9-1.36v-.51A1.88,1.88,0,0,0,477,451.19Z\" transform=\"translate(-5.5 -5.5)\"\u002F\u003E\n&lt;\u002Fg\u003E\n&lt;g id=\"кнопка-22\" data-name=\"кнопка\"\u003E\n    &lt;path class=\"cls-9\" d=\"M525.37,557.86a1.85,1.85,0,0,1-.9,1.36l-33.22,19.64a7.29,7.29,0,0,1-7.5,0l-16.29-9.72a1.85,1.85,0,0,1-.92-1.56v-3.68a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l32.84-19.41.38-.23a1.83,1.83,0,0,0,.9-1.36Z\" transform=\"translate(-5.5 -5.5)\"\u002F\u003E\n    &lt;path class=\"cls-10\" d=\"M524.45,552.3l-16.38-9.51a7.31,7.31,0,0,0-7.32,0l-33.27,19.44a1.89,1.89,0,0,0-.94,1.51v.17a1.85,1.85,0,0,0,.92,1.56l.38.23,15.91,9.49a7.29,7.29,0,0,0,7.5,0l32.84-19.41.38-.23a1.83,1.83,0,0,0,.9-1.36v-.5A1.86,1.86,0,0,0,524.45,552.3Z\" transform=\"translate(-5.5 -5.5)\"\u002F\u003E\n&lt;\u002Fg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЗаметил что-нибудь необычное? Если ты косо смотришь на атрибут \u003Cb\u003Etransform\u003C\u002Fb\u003E, то ты прав. Именно он портит всю малину. При «экспортировании» изображения Illustrator приписывает его ко ВСЕМ элементам \u003Cb\u003E&lt;path\u003E\u003C\u002Fb\u003E. При этом такой проблемы не наблюдается при «сохранении». \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли ты до сих пор не понимаешь моего негодования, то я объясню: если захочешь анимировать перемещение такого элемента, то он будет смещаться в сторону. В данном случае на 5.5 по обеим осям. Связанно это с тем, что анимация перемещения изменяет атрибут \u003Cb\u003Etransform\u003C\u002Fb\u003E, сбрасывая все прошлые значения. Конечно, это можно обойти, но разве не лучше избежать проблемы, чем потом исправлять ее последствия…\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа данный момент мне довелось заметить только эту проблему, но это не значит, что она единственная. Если здраво оценить ситуацию, окажется, что «сохранить как» выигрывает во всем. Именно поэтому я советую использовать именно его.\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EСпособы импорта SVG документа в HTML \u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПеред тем, как я приступлю непосредственно к анимации, я хочу рассказать про то, как встроить SVG на страничку. Каждый способ имеет свои «особенности», которые оказывают прямое влияние на анимацию. И если про них не рассказать, то статья будет неполной.\u003Cbr\u002F\u003E\r\nПредположим, что у тебя уже есть готовый SVG с интерактивной анимацией и осталось встроить этот документ на сайт. Как же это сделать?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EВариант номер раз\u003C\u002Fb\u003E – вспомнить, что SVG это тоже изображение и его можно импортировать стандартными средствами HTML. Можно создать тег \u003Cb\u003E&lt;img\u003E\u003C\u002Fb\u003E со ссылкой на документ \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;img src=\"Hello_SVG.svg\" \u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИли задать SVG в качестве фонового изображения\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E#box { background-image: url(\"Hello_again.svg\"); }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nГлавный минус этого способа – изолированность изображения. SVG как экспонат в музее – смотреть можно, трогать руками нет. Анимация внутри будет работать, но ни о никакой интерактивности речи быть не может. Если же, например, анимация запускается по клику пользователя или есть необходимость динамически менять содержимое SVG документа, то этот способ не для тебя.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EВариант номер два\u003C\u002Fb\u003E – создать объект из SVG, использовав теги \u003Cb\u003E&lt;object\u003E\u003C\u002Fb\u003E или \u003Cb\u003E&lt;embed\u003E\u003C\u002Fb\u003E. Также есть возможность использовать \u003Cb\u003E&lt;iframe\u003E\u003C\u002Fb\u003E, чтобы создать фрейм, но этот способ я использовать не рекомендуют, т.к. требуется \u003Ca href=\"https:\u002F\u002Fcodepen.io\u002FSaraSoueidan\u002Fpen\u002Fa5dfa6923207f950a6b4da2f6b2c5bf4?editors=0100\"\u003Eкостыль\u003C\u002Fa\u003E для всех браузеров, чтобы этот вариант отображался корректно\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;object data=\"My_SVG.svg\" type=\"image\u002Fsvg+xml\"\u003E&lt;\u002Fobject\u003E\n&lt;embed src=\"My_SVG.svg\" type=\"image\u002Fsvg+xml\" \u002F\u003E\n&lt;iframe src=\"My_SVG.svg\"\u003E&lt;\u002Fiframe\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТут уже дела обстоят получше. Анимации получают возможность быть интерактивными, но только если объявлены внутри SVG документа, а содержимое доступно для внешнего JavaScript. Еще \u003Cb\u003E&lt;object\u003E\u003C\u002Fb\u003E и \u003Cb\u003E&lt;iframe\u003E\u003C\u002Fb\u003E могут показать заглушку, если вдруг изображение не загрузится.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EВариант номер три\u003C\u002Fb\u003E – просто вставить содержимое SVG документа прямо внутрь HTML. Да так можно. Поддержка SVG появилась в \u003Ca href=\"http:\u002F\u002Fw3c.github.io\u002Fhtml\u002Fsemantics-embedded-content.html#svg\"\u003Eстандарте HTML5\u003C\u002Fa\u003E. Так как SVG по сути является частью самой странички, то доступ к нему есть везде. Анимации и стили элементов могут быть объявлены как внутри SVG, так и во внешних файлах. Минус заключается в том, что такие изображения просто так не кэшируются отдельно от страницы\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;body\u003E\n...\n&lt;svg\u003E &lt;!-- Содержимое --\u003E &lt;\u002Fsvg\u003E\n&lt;\u002Fbody\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003ESVG анимация\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nЕсть два основных способа анимации SVG элемента:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003ECSS анимация\u003C\u002Fli\u003E\r\n\u003Cli\u003ESMIL анимация, встроенная в SVG (на самом деле это SVG анимация, которая базируется на SMIL и расширяет его функционал)\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nЛично я разделяю их как анимацию «внешнюю» и «внутреннюю». Данное деление условно, но все же они имеют функциональные различия. Если говорить об отличиях в общем: CSS – имеет лучшую поддержку браузерами; SMIL – обладает большим функционалом. Трудно сказать, что использовать лучше, т.к. они во многом похожи. Выбор зависит от поставленной задачи, поэтому я просто скажу основные причины использовать SMIL вместо CSS\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSMIL — когда нужно:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EСделать то, что не смог CSS (анимировать неподдерживаемый атрибут и т.д.)\u003C\u002Fli\u003E\r\n\u003Cli\u003EИметь более точный контроль над анимацией\u003C\u002Fli\u003E\r\n\u003Cli\u003EСделать морфинг контура (анимация атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E у тега \u003Cb\u003Epath\u003C\u002Fb\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003EСинхронизировать анимации\u003C\u002Fli\u003E\r\n\u003Cli\u003EСделать интерактивные анимации\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nЕсли я написал, что SMIL нужно использовать для интерактивных анимаций, то это не значит, что того же нельзя сделать с помощью CSS. Просто SMIL является более функциональным и сложным инструментом. И именно поэтому его следует использовать только при необходимости. Если анимация простая и можно обойтись CSS, то так и следует сделать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EАнимация средствами CSS\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nТут ничего нового. Любой SVG элемент мы можем анимировать так же, как мы это делаем с HTML. Все анимации создаются с помощью \u003Cb\u003E@keyframes\u003C\u002Fb\u003E. Так как CSS-анимация это уже другая тема, я подробно останавливаться на этом пункте не буду, в сети полно документации и руководств на эту тему. Все, что там описывается применимо и к SVG, а я лишь приведу несколько примеров.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSVG документ имеет внутренние таблицы стилей, вот в них мы и будем писать анимацию\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;svg\u003E\n    &lt;style\u003E\n        &lt;!-- Тут анимация --\u003E\n    &lt;\u002Fstyle\u003E\n    &lt;!-- А здесь SVG элементы --\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nАнимировать SVG атрибут так же просто, как и CSS атрибуты\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E\n@keyframes reduce_radius {\n    from { r: 10; }\n    to { r: 3; }\n}\n@keyframes change_fill {\n    0% { fill: #49549E; }\n    75% { fill: #1bceb1; }\n    100% { fill: #1bce4f; }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EМожно задавать значения как в процентах, так и конструкцией \u003Cb\u003Efrom-to\u003C\u002Fb\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗатем остается просто применить созданные анимации к нужному элементу\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E.circle { animation: change_fill 1s, popup 2s; }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВсе, что я описывал выше – это статичные анимации, интерактивностью там и не пахнет. А что делать, если уже очень хочется? Ну кое-что все-таки можно сделать интерактивным и на CSS. Например, если использовать \u003Cb\u003Etransition \u003C\u002Fb\u003Eв сочетании с псевдоклассом \u003Cb\u003Ehover\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E.circle { fill: #49549E; transition: .3s; }\n.circle:hover { fill: #1bceb1; }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПри наведении на элемент он изменит свой цвет с синего на голубой за 300ms\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАнимация атрибутов и небольшой кусочек интерактивности – на этом особенности CSS-анимации заканчиваются. Но этого функционала предостаточно, ведь большинство задач сводятся к анимации какого-либо атрибута. Практически любой SVG атрибут можно анимировать. И когда я пишу «практически любой» я имею в виду, что если ты выберешь случайный атрибут и он окажется неанимируемым, то тебе ОЧЕНЬ повезло.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003ESMIL анимация\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nСразу стоит сказать, что SMIL анимация стара как мир и она потихоньку вымирает, поддержка браузеров пусть и приличная, но все же меньше, чем у CSS Animation, однако есть причина, почему SMIL все еще привлекателен – он может то, что не может CSS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПро SMIL я буду рассказывать подробнее, потому что тут есть множество подводных камней, про которые редко где пишут. Да и тема эта менее популярная, чем CSS. Основные теги для анимации это \u003Cb\u003E&lt;animate\u003E\u003C\u002Fb\u003E, \u003Cb\u003E&lt;set\u003E\u003C\u002Fb\u003E, \u003Cb\u003E&lt;animateTransform\u003E\u003C\u002Fb\u003E, \u003Cb\u003E&lt;animateMotion\u003E\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E&lt;animate\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nНачнем с тяжёлой артиллерии. \u003Cb\u003E&lt;animate\u003E\u003C\u002Fb\u003E – используется для анимации любого атрибута и является основным инструментом. Остальные же теги узкоспециализированные, но о всем по порядку.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак применить анимацию к элементу?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУказать элемент, к которому будет применена анимация, можно двумя способами\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EПоложить тег внутрь элемента. Этот способ позволяет инкапсулировать анимацию внутри объекта, что облегчает чтение кода\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle ...\u003E\n    &lt;animate ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ данном случае анимация будет применена к элементу \u003Cb\u003Ecircle\u003C\u002Fb\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003EПередать ссылку на элемент. Пригодится если хочется, чтобы все анимации были собраны в одно месте\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;svg xmlns:xlink=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink\"\u003E\n    &lt;circle id=\"blue\" ...\u002F\u003E\n    ...\n    &lt;animate xlink:href=\"#blue\" ...\u002F\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЗдесь используется атрибут \u003Cb\u003Exlink:href\u003C\u002Fb\u003E, в котором мы указываем \u003Cb\u003Eid\u003C\u002Fb\u003E элемента, к которому должна примениться анимация. Для того чтобы этот способ работал, необходимо определить пространство имен \u003Cb\u003Exlink\u003C\u002Fb\u003E. Это делается в теге \u003Cb\u003E&lt;svg\u003E\u003C\u002Fb\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nС SVG 2 атрибут \u003Cb\u003Exlink:href\u003C\u002Fb\u003E устарел, вместо него спецификация рекомендует использовать \u003Cb\u003Ehref\u003C\u002Fb\u003E, который не требует определять пространство имен \u003Cb\u003Exlink\u003C\u002Fb\u003E. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle id=\"blue\" ...\u002F\u003E\n...\n&lt;animate href=\"#blue\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНо и тут не все так гладко — \u003Cb\u003Ehref\u003C\u002Fb\u003E не поддерживается Safari. Получается патовая ситуация, один атрибут устарел, другой частично не поддерживается. Так что какой способ использовать решает каждый для себя сам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля тех, кто заметил сходство с CSS селекторами: спешу огорчить, обратиться к элементам по классу не получится\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle class=\"blue_circle\" ...\u002F\u003E\n&lt;animate href=\".blue_circle\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003E\u003Cb\u003EЭто не работает!\u003C\u002Fb\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак указать атрибут для анимации?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля этого существует \u003Cb\u003EattributeName\u003C\u002Fb\u003E. В качестве значения выступает имя атрибута, которое мы будем анимировать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle r=\"25\" ...\u003E\n    &lt;animate attributeName=\"r\" ... \u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EУказав в \u003Cb\u003EattributeName \u003C\u002Fb\u003Eзначение \u003Cb\u003Er\u003C\u002Fb\u003E, мы сообщаем, что собираемся анимировать радиус окружности\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EЧто такое attributeType и почему он тебе не нужен?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#f7f7f7\"\u003E\u003Ci\u003EПотому что он бесполезный \u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nВ теории может возникнуть такой момент, когда имена атрибутов в CSS и XML будут совпадать, что может привести к проблемам. И чтобы разрешить этот конфликт, нужно явно указать пространство имен. Есть два \u003Cs\u003Eстула\u003C\u002Fs\u003E способа: указать префикс или использовать \u003Cb\u003EattributeType\u003C\u002Fb\u003E. Начнем с префикса.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВезде пишут примерно следующее:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EМожно указать XMLNS префикс для атрибута, чтобы явно указать его пространство имен\u003C\u002Fblockquote\u003EЭтот способ упоминается вскользь и без примеров. Вот и я не буду изменять традициям. (советую тебе тут остановиться, забыть про префиксы как про страшный сон и переходить к \u003Cb\u003EattributeType\u003C\u002Fb\u003E, я тебя предупредил)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003E«Я мазохист»\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EСодержание этого спойлера несет скорее развлекательно-ознакомительный характер. Никакой полезной информации, кроме того факта, что префиксы не работают, тут ты не узнаешь\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля начала нужно найти более точное определение, а, как известно, самые точные определения в спецификациях и в стандартах.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003EКраткий гайд как разочароваться в жизни\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003E\u003Col\u003E\r\n\u003Cli\u003EОткрываем \u003Ca href=\"https:\u002F\u002Fsvgwg.org\u002Fspecs\u002Fanimations\u002F#TargetAttributes\"\u003Eспецификацию по SVG анимации\u003C\u002Fa\u003E за 14 марта 2019\u003C\u002Fli\u003E\r\n\u003Cli\u003EВ разделе про \u003Cb\u003EattributeName \u003C\u002Fb\u003Eвидим, что он наследует \u003Ca href=\"https:\u002F\u002Fwww.w3.org\u002FTR\u002F2001\u002FREC-smil-animation-20010904\u002F#SpecifyingAnimationTarget\"\u003Eстандарт SMIL Animation\u003C\u002Fa\u003E за (о ужас) 2001 год\u003C\u002Fli\u003E\r\n\u003Cli\u003EЧитаем определение \u003Cb\u003EattributeName\u003C\u002Fb\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003EProfit!\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003EПеревод определения гласит примерно следующее:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ci\u003E«Определяет имя целевого атрибута. Префикс XMLNS может использоваться для указания пространства имен XML для атрибута. Префикс будет интерпретироваться в области действия элемента анимации.»\u003C\u002Fi\u003E\u003C\u002Fblockquote\u003EХмм, легче не стало. Что придет в голову человеку, который не знает XML, после прочтения такого определения? Правильно. То же самое что и мне.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ понял его буквально и подумал, что это должно выглядеть так\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate attributeName=\"xmlns:*имя атрибута*\"\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПодумал и благополучно забыл про этот способ до написания этой статьи. Проблемы начались, когда я решил проверить его на практике. Думаю, я никого не удивлю, если скажу, что это не работает. Спустя несколько часов безуспешных поисков я загуглил «xmlns prefix» и к моему удивлению увидел, что xmlns это не сам префикс, а \u003Cfont color=\"#808080\"\u003E\u003Ci\u003E(сконцентрируйся, сейчас будет сложно)\u003C\u002Fi\u003E\u003C\u002Ffont\u003E \u003Cu\u003Eконструкция определения пространства имен с префиксами\u003C\u002Fu\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВыглядит она следующем образом:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;*тег* xmlns:*префикс*=\"*полный url адрес*\" ...\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EТут я понял, что ничего не понял…в самом начале…и сейчас в принципе тоже\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСпустя еще пару часов я наконец нашел, что искал, в \u003Ca href=\"https:\u002F\u002Fwww.w3.org\u002FTR\u002FREC-xml-names\u002F#uniqAttrs\"\u003ENamespaces in XML\u003C\u002Fa\u003E. Вот оригинальный пример:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;x xmlns:n1=\"http:\u002F\u002Fwww.w3.org\" xmlns=\"http:\u002F\u002Fwww.w3.org\" \u003E\n    &lt;good a=\"1\" n1:a=\"2\" \u002F\u003E\n&lt;\u002Fx\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНо знаешь, что самое смешное? Это все равно не работает. Хотя сделано все по книжке\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;svg version=\"1.1\"\n    xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\n    xmlns:n1=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\u003E\n    &lt;circle id=\"www\" n1:r=\"10\" ...\u002F\u003E\n    &lt;animate href=\"#www\" attributeName=\"n1:r\" ...\u002F\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nОшибок нет и не должно быть, потому что все сделано по правилам, но проблема в том, что мы получим круг без радиуса. Такой же результат будет, если просто не писать атрибут \u003Cb\u003Er\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cu\u003E\u003Cb\u003EЭпилог\u003C\u002Fb\u003E\u003C\u002Fu\u003E: SVG игнорирует атрибуты с префиксом. В итоге даже если SMIL действительно анимирует атрибут с префиксом, результата этой анимации ты не увидишь.\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ свое оправдание скажу, что разбирался только с SVG, а именно с его анимацией, поэтому гуру XML порошу отложить факелы и вилы в сторону. Если знаете, как заставить этот способ работать, милости прошу в комментарии\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЧтобы явно указать, к чему принадлежит анимируемый атрибут, используется \u003Cb\u003EattributeType\u003C\u002Fb\u003E. Он принимает 3 значения: \u003Cb\u003ECSS\u003C\u002Fb\u003E, \u003Cb\u003EXML\u003C\u002Fb\u003E, \u003Cb\u003Eauto\u003C\u002Fb\u003E. Если явно не указывать \u003Cb\u003EattributeType\u003C\u002Fb\u003E, то будет использоваться \u003Cb\u003Eauto\u003C\u002Fb\u003E. В этом случае сначала проверяются CSS свойства и если нет совпадений, то проверяются атрибуты целевого элемента. В примере укажем, что собираемся анимировать именно CSS свойство\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate attributeType=\"CSS\" attributeName=\"opacity\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nОтлично, \u003Cb\u003EattributeType \u003C\u002Fb\u003Eпозволяет легко и без костылей указать, к чему относится анимируемый атрибут, тем самым решая «проблему», которой даже не существует.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНеожиданно, правда? Как я сказал в начале главы – SMIL вымирает и связано это с тем, что анимацию переводят на рельсы CSS. Большинство дублирующихся атрибутов абсолютно идентичны друг другу, т.е. неважно, принадлежит атрибут CSS или SMIL — результат будет один и тот же. А в сочетании со значением \u003Cb\u003Eauto \u003C\u002Fb\u003Eпо умолчанию необходимость в явном определении \u003Cb\u003EattributeType \u003C\u002Fb\u003Eотпадает.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003E\u003Cu\u003EМинутка интересных фактов:\u003C\u002Fu\u003E атрибут \u003Cb\u003EattributeType \u003C\u002Fb\u003Eне поддерживается SVG. Откуда тогда он взялся? Он пришел к нам из SMIL Animation, на котором базируется SVG анимация. А еще \u003Cb\u003EattributeType \u003C\u002Fb\u003Eудален после SVG 1.1 Second Edition. Все пруфы \u003Ca href=\"https:\u002F\u002Fsvgwg.org\u002Fspecs\u002Fanimations\u002F\"\u003Eтут\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак определить значения анимации?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУказать атрибут для анимации недостаточно, необходимо определить его значения. Тут на сцену выходят \u003Cb\u003Efrom\u003C\u002Fb\u003E, \u003Cb\u003Eto\u003C\u002Fb\u003E, \u003Cb\u003Eby\u003C\u002Fb\u003E, \u003Cb\u003Evalues\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНачнем с парочки, которая всегда вместе: \u003Cb\u003Efrom\u003C\u002Fb\u003E и \u003Cb\u003Eto\u003C\u002Fb\u003E. Смысл их существования очевиден, \u003Cb\u003Efrom \u003C\u002Fb\u003Eуказывает на начало, \u003Cb\u003Eto \u003C\u002Fb\u003Eна конец\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle r=\"25\" ...\u003E\n    &lt;animate\n        attributeName=\"r\"\n        from=\"10\"\n        to=\"45\"\n        ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EРезультатом выполнения анимации будет плавное изменение радиуса окружности с 10 до 45\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПусть я и сказал, что они всегда вместе, \u003Cb\u003Eto \u003C\u002Fb\u003Eтак же может использоваться и без явного объявления \u003Cb\u003Efrom\u003C\u002Fb\u003E. В таком случае \u003Cb\u003Efrom \u003C\u002Fb\u003Eпримет значение, определенное в целевом элементе. Для примера выше анимация будет начинаться с 25.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли есть необходимость указать набор из нескольких значений, используется \u003Cb\u003Evalues\u003C\u002Fb\u003E. Значения перечисляются через точку с запятой\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle r=\"25\" ...\u003E\n    &lt;animate\n        attributeName=\"r\"\n        values=\"15;50;25\"\n        ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЗначение радиуса уменьшится до 15, после увеличится до 50 и затем вернется в начальное положение\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоследний на очереди \u003Cb\u003Eby\u003C\u002Fb\u003E. Ему не важно «откуда» и «куда», все, что его интересует, это «на сколько». Иначе говоря, вместо абсолютных значений он работает с относительными\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle r=\"25\" ...\u003E\n    &lt;animate\n        attributeName=\"r\"\n        by=\"15\"\n        ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EКак итог анимации – радиус увеличится на 15, то есть получится 25+15=40\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПо просторам руководств ходит легенда, что \u003Ci\u003E«\u003Cb\u003Eby \u003C\u002Fb\u003Eможет использоваться для указания величины, на которую анимация должна продвинутся»\u003C\u002Fi\u003E. Я понимаю это так: если \u003Cb\u003Efrom=20\u003C\u002Fb\u003E, \u003Cb\u003Eto=50\u003C\u002Fb\u003E, и задан \u003Cb\u003Eby=10\u003C\u002Fb\u003E, то этот путь должен преодолеваться «прыжками» по 10, т.е. 20, 30, 40, 50. Но как бы я не пытался, что с \u003Cb\u003Eby\u003C\u002Fb\u003E, что без него, анимация ни капли не изменялась. Также я не нашел подтверждения в спецификации. Похоже, это просто ошибка.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаибольшим приоритетом обладает \u003Cb\u003Evalues\u003C\u002Fb\u003E, затем идет \u003Cb\u003Efrom\u003C\u002Fb\u003E-\u003Cb\u003Eto\u003C\u002Fb\u003E, последний \u003Cb\u003Eby\u003C\u002Fb\u003E. Наименьший приоритет \u003Cb\u003Eby \u003C\u002Fb\u003Eобъясняет, почему «легенда» не может работать в принципе. Однако \u003Cb\u003Eby \u003C\u002Fb\u003Eработает в связке с \u003Cb\u003Efrom\u003C\u002Fb\u003E, в этом варианте \u003Cb\u003Efrom \u003C\u002Fb\u003Eпросто переопределяет текущее положение элемента\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle cy=\"50\" ...\u003E\n    &lt;animate\n        attributeName=\"cy\"\n        from=\"70\"\n        by=\"30\"\n        ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EТут анимация вместо 50 начнется с 70 и закончится на 100\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EЕще про относительные анимации\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМожно заставить остальные атрибуты работать так же, как и \u003Cb\u003Eby\u003C\u002Fb\u003E. Делается это с помощью атрибута \u003Cb\u003Eadditive\u003C\u002Fb\u003E, который имеет два положения – \u003Cb\u003Ereplace \u003C\u002Fb\u003Eи \u003Cb\u003Esum\u003C\u002Fb\u003E. Первый стоит по умолчанию, поэтому нас интересует второй. При значении \u003Cb\u003Esum \u003C\u002Fb\u003Eвсе атрибуты будут прибавляться к текущему значению целевого элемента, т.е. при анимации радиуса, равного 20, со значениями \u003Cb\u003Eform=5\u003C\u002Fb\u003E и \u003Cb\u003Eto=15\u003C\u002Fb\u003E, анимация будет с 20+5 до 20+15\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle r=\"20\" ...\u003E\n    &lt;animate attributeName=\"r\" from=\"5\" to=\"15\" additive=\"sum\" ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПри выполнении анимации произойдет резкий скачок в положение 25, что не есть хорошо (если, конечно, так не задумано). Этого можно избежать при \u003Cb\u003Eform=0\u003C\u002Fb\u003E, но тогда теряется смысл использования \u003Cb\u003Esum\u003C\u002Fb\u003E, потому что тот же эффект можно получить и без \u003Cb\u003Eadditive \u003C\u002Fb\u003Eиспользуя \u003Cb\u003Eby\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate attributeName=\"r\" from=\"0\" to=\"15\" additive=\"sum\" ...\u002F\u003E\n&lt;animate attributeName=\"r\" by=\"15\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EКак по мне, второй способ гораздо понятнее и удобнее\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EГде указывать длительность анимации?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОстался последний обязательный атрибут, чтобы сделать рабочую анимацию – и это \u003Cb\u003Edur\u003C\u002Fb\u003E. Значение атрибута определяет длительность анимации, которое можно указывать как в секундах, так и в миллисекундах\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"0.5s\" ...\u002F\u003E\n&lt;animate dur=\"500ms\" ...\u002F\u003E\n&lt;animate dur=\"00:00:00.5\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПо последней строчке можно догадаться, что есть еще кое-что…\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже можно указывать значения в минутах и даже часах\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"1.2min\" ...\u002F\u003E\n&lt;animate dur=\"0.02h\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EХрен его знает, на кой ляд тебе сдалось указывать значения в часах, но я в чужие дела не лезу, хочешь, значит есть зачем...\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nДля других атрибутов временные значения задаются в таких же формах\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EЧто сделать, чтобы анимация не возвращалась в начало?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАтрибут \u003Cb\u003Efill \u003C\u002Fb\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003E(не путайте этот атрибут с его тезкой)\u003C\u002Fi\u003E\u003C\u002Ffont\u003E отвечает за поведение элемента после окончания анимации. Предусмотрено две опции:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cb\u003Eremove \u003C\u002Fb\u003E(значение по умолчанию) – как только анимация достигает своего конца, все преобразования сбрасываются и элемент принимает состояние как до анимации\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003Efreeze \u003C\u002Fb\u003E– элемент застывает в конечном положении анимации\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003EМожно ли зациклить анимацию?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОтвет – да. Для этого в атрибуте \u003Cb\u003ErepeatCount \u003C\u002Fb\u003Eуказывается значение \u003Cb\u003Eindefinite\u003C\u002Fb\u003E. Атрибут определяет число повторений анимации и по умолчанию имеет 1, но можно указать любое число\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate repeatCount=\"indefinite\" ...\u002F\u003E\n&lt;animate repeatCount=\"3\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПервая будет повторяться бесконечно, вторая отработает 3 раза\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EТеперь меня бесят бесконечные анимации, можно их выключить через время?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля таких раздражительных людей сделали \u003Cb\u003ErepeatDur\u003C\u002Fb\u003E. Этот атрибут останавливает воспроизведение анимации через определенное время \u003Cu\u003Eс начала воспроизведения анимации!\u003C\u002Fu\u003E Проще говоря, \u003Cb\u003ErepeatDur \u003C\u002Fb\u003Eограничивает время длительности анимации. Главное отличие от \u003Cb\u003ErepeatCount \u003C\u002Fb\u003Eв том, что анимация может быть остановлена в середине\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"2s\" repeatCount=\"indefinite\" repeatDur=\"3s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EАнимация прервется в середине второй итерации\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EА что если я хочу, чтобы анимация начиналась не сразу?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТогда для тебя, мой друг, предусмотрен атрибут \u003Cb\u003Ebegin\u003C\u002Fb\u003E. Отвечает он за то, когда начнется анимация. Этот атрибут очень полезен, потому что также используется для синхронизации нескольких анимаций, но об этом чуть позже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли нужно указать обычную задержку запуска, то пишем, через какой промежуток времени должна начаться анимация после открытия документа\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"1.5s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВоспроизведение начнётся через 1,5 секунды\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже можно указать отрицательное значение. Тогда анимация начнется не с начала, а в том месте, где она была бы через указанный промежуток времени\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"-2s\" dur=\"4s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EАнимация начнется с открытием документа, но будет воспроизводиться с середины\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EДелаем анимации интерактивными\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ качестве значения \u003Cb\u003Ebegin \u003C\u002Fb\u003Eможно указать событие, при котором начнется анимация, но без приставки «on». Например, если хочется сделать анимацию по клику, то вместо «onclick» пишем \u003Cb\u003Eclick\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle ...\u003E\n    &lt;animate begin=\"click\" ...\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ примере выше анимация начнется при клике на элемент, к которому применена анимация. Если необходимо запустить анимацию по событию с другого элемента, то нужно указать его \u003Cb\u003Eid\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle id=\"button\" ...\u002F\u003E\n...\n&lt;animate begin=\"button.click\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЕще можно указать несколько условий начала анимации. Для этого нужно перечислять их через точку с запятой\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"click; 0s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EАнимация начнется при загрузке документа и по клику \u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоддерживаются далеко не все события, но работают большинство событий, связанных с мышью. Я не стану перечислять их все, доступные события можно найти \u003Cs\u003Eгде-то\u003C\u002Fs\u003E \u003Ca href=\"https:\u002F\u002Fsvgwg.org\u002Fsvg2-draft\u002Finteract.html#SVGEvents\"\u003Eтут\u003C\u002Fa\u003E. Также никто не отменял метод научного тыка.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EАнимация перезапускается, не достигнув конца, как это починить? \u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ приведу простой пример. Здесь анимация начинается по клику. Если пользователь так и не нажмет, то предусмотрен автоматический запуск через 3 секунды\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"click; 3s\" dur=\"7s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНо появляется проблема: если пользователь нажмет до автоматического таймера, то, когда пройдет 3 секунды, анимация перезапустится, так и не дойдя до конца. На помощь придет атрибут \u003Cb\u003Erestart \u003C\u002Fb\u003Eв значении \u003Cb\u003EwhenNotActive\u003C\u002Fb\u003E. Всего у него их три\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cb\u003Ealways \u003C\u002Fb\u003Eстоит по умолчанию – разрешает перезапускать анимацию в любой момент времени\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003EwhenNotActive \u003C\u002Fb\u003E– анимация может быть запущена, если она уже не воспроизводится \u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003Enever \u003C\u002Fb\u003E– запрещает перезапуск анимации\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"click; 3s\" dur=\"7s\" restart=\"whenNotActive\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПроблема решена, хотя в большинстве случаев можно обойтись без этого атрибута, просто грамотно строя зависимости\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EСинхронизация анимаций\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПомимо стандартных событий, по типу клика, есть события начала, конца, повторения анимации. Для того, чтобы привязать событие, необходимо указать \u003Cb\u003Eid \u003C\u002Fb\u003Eанимации и через точку \u003Cb\u003Ebegin\u003C\u002Fb\u003E, \u003Cb\u003Eend\u003C\u002Fb\u003E, \u003Cb\u003Erepeat \u003C\u002Fb\u003Eсоответственно\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate id=\"pop\" begin=\"click\" ...\u002F\u003E\n&lt;animate begin=\"pop.begin\" ...\u002F\u003E\n&lt;animate begin=\"pop.end\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЕсли с первыми двумя все понятно, то с \u003Cb\u003Erepeat \u003C\u002Fb\u003Eвсе не так очевидно. В скобках пишется номер повторения, \u003Cu\u003Eпосле\u003C\u002Fu\u003E которого нужно запустить анимацию (это число не может быть последим повторением)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate id=\"flip\" repeatCount=\"5\"  ...\u002F\u003E\n&lt;animate begin=\"flip.repeat(2)\"  ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EАнимация запустится \u003Cu\u003Eпосле\u003C\u002Fu\u003E двух повторений, а \u003Cu\u003Eне каждые\u003C\u002Fu\u003E 2 повторения\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕще можно указывать задержку относительно события. Например, если я хочу проиграть анимацию через 2 секунды \u003Ci\u003Eпосле начала\u003C\u002Fi\u003E другой\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate id=\"another\" ...\u002F\u003E\n&lt;animate begin=\"another.begin + 2s\"  ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИли запустить анимацию за секунду \u003Ci\u003Eдо окончания\u003C\u002Fi\u003E другой\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"another.end - 1s\"  ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003EНа что еще способен begin...\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\nхотел я назвать этот раздел, но правильнее его назвать «Что он должен уметь, но не умеет?». По уже моей любимой \u003Ca href=\"https:\u002F\u002Fsvgwg.org\u002Fspecs\u002Fanimations\u002F#BeginValueSyntax\"\u003Eспецификации \u003C\u002Fa\u003Eу \u003Cb\u003Ebegin \u003C\u002Fb\u003Eдолжно быть еще два значения, которые он должен принимать. Первый это \u003Cb\u003EaccessKey\u003C\u002Fb\u003E, который запускает анимацию по нажатию клавиши, указанной в формате Unicode. Второй — \u003Cb\u003Ewallclock\u003C\u002Fb\u003E, определяющий начало анимации по реальному времени. И там можно указать не только часы, но даже месяц и год, в общем полный набор.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nК сожалению, ни один из них не захотел работать. Хотя не велика потеря, ведь необходимость в них все равно сомнительная\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate begin=\"accessKey(\\u0077)\" ...\u002F\u003E\n&lt;animate begin=\"wallclock(2019-04-09T19:56:00.0Z);\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EНе знаю, в чем проблема, может, их не поддерживает мой браузер, а может что-то еще…\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EМогу ли я прервать анимацию? \u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭто можно сделать атрибутом \u003Cb\u003Eend\u003C\u002Fb\u003E. По своему использованию он идентичен \u003Cb\u003Ebegin\u003C\u002Fb\u003E, также можно указывать время, события, и т.д. Как можно заметить, это уже не первый (и не последний) способ прерывать анимацию, ведь есть \u003Cb\u003ErepeatDur\u003C\u002Fb\u003E, где тоже можно фиксировать длительность анимации. И пусть в \u003Cb\u003Eend \u003C\u002Fb\u003Eтоже можно указывать время напрямую, его отличительными особенностями являются привязка к событиям и возможность указать список значений.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПредположим, что у нас есть элемент, у которого есть состояние покоя и активности. Второе активируется при клике. И мы хотим прервать анимацию покоя с началом активности. Реализовать подобную задумку можно так\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate id=\"idle\" end=\"action.begin\" begin=\"0s\" repeatCount=\"indefinite\" ...\u002F\u003E\n&lt;animate id=\"action\" begin=\"click\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EАнимация покоя запущена по умолчанию. При клике на элемент запустится анимация активности и прервет анимацию покоя\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКомбинирование атрибутов end и begin\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак уже известно, и \u003Cb\u003Ebegin\u003C\u002Fb\u003E, и \u003Cb\u003Eend \u003C\u002Fb\u003Eмогут принимать список значений, но все еще не понятно, как будет вести себя анимация, если указать список в обоих атрибутах. А получатся, своего рода, повторения с настраиваемой длительностью и интервалами между ними… не понятно? Сейчас все объясню.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервое, что нужно знать – количество значений в списках должно совпадать. Каждая пара значений \u003Cb\u003Ebegin\u003C\u002Fb\u003E-\u003Cb\u003Eend \u003C\u002Fb\u003Eопределяет одно «повторение». А время между концом одного «повторения» и началом следующего определяет задержку. Я неспроста называю их «повторениями», анимация не приостанавливается и продолжается, а прерывается и начинается с начала. Выходит, мы можем отдельно регулировать длительность каждого повторения и устанавливать разные задержки после каждого повторения\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate\n    dur=\"3s\"\n    begin=\"1s; 5s; 9s\"\n    end = \"2s; 8s; 11s\"\n    ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ примере анимация имеет 3 «повторения». Первый начнется через секунду после загрузки документа и продлится лишь одну секунду из трех. Затем задержка в 3 секунды, и после нее полная анимация в 3 секунды. Опять задержка, но уже в 1 секунду. Последнее повторение прервется после двух секунд анимации\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EА можно еще как-нибудь прервать анимацию?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#f7f7f7\"\u003E\u003Ci\u003EЕще парочка бесполезных атрибутов в копилку\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nКонееееечно, есть еще целых два атрибута – \u003Cb\u003Emin \u003C\u002Fb\u003Eи \u003Cb\u003Emax\u003C\u002Fb\u003E. Как понятно из названия, \u003Cb\u003Emin \u003C\u002Fb\u003Eопределяет минимальную, а \u003Cb\u003Emax \u003C\u002Fb\u003Eмаксимальную длительность. Сначала длительность анимации рассчитывается по значениям \u003Cb\u003Edur\u003C\u002Fb\u003E, \u003Cb\u003ErepeatCount\u003C\u002Fb\u003E, \u003Cb\u003ErepeatDur\u003C\u002Fb\u003E, \u003Cb\u003Eend\u003C\u002Fb\u003E. А после полученная длительность подгоняется под рамки, задаваемые \u003Cb\u003Emin \u003C\u002Fb\u003Eи \u003Cb\u003Emax\u003C\u002Fb\u003E. На бумаге все красиво, посмотрим, как это работает на практике. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nС \u003Cb\u003Emax \u003C\u002Fb\u003Eвсе просто, это еще один атрибут, задающий верхнюю границу. Если \u003Cabbr title=\"Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end\"\u003Eвычисленная длительность\u003C\u002Fabbr\u003E меньше \u003Cb\u003Emax\u003C\u002Fb\u003E, то он игнорируется, а если больше, то длительность анимации становится равна \u003Cb\u003Emax\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"10s\" repeatDur=\"7s\" end=\"5s\" max=\"4s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПрервется на 4 секунде\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА вот \u003Cb\u003Emin\u003C\u002Fb\u003E повезло меньше. Если \u003Cabbr title=\"Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end\"\u003Eвычисленная длительность\u003C\u002Fabbr\u003E анимации больше чем \u003Cb\u003Emin\u003C\u002Fb\u003E, то он игнорируется, что логично. Однако если \u003Cabbr title=\"Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end\"\u003Eвычисленная длительность\u003C\u002Fabbr\u003E меньше чем \u003Cb\u003Emin\u003C\u002Fb\u003E, то он… иногда игнорируется, а иногда нет. \u003Cbr\u002F\u003E\r\nЧего, почему?! Вот в этом моменте очень легко запутаться, так что читай внимательно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУ нас есть два варианта, когда \u003Cabbr title=\"Длительность анимации, рассчитанная по значениям dur, repeatCount, repeatDur, end\"\u003Eвычисленная длительность\u003C\u002Fabbr\u003E меньше \u003Cb\u003Emin\u003C\u002Fb\u003E:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EПотому что сама анимация закончилась, т.е. \u003Cb\u003Edur \u003C\u002Fb\u003E* \u003Cb\u003ErepeatCount \u003C\u002Fb\u003E&lt; \u003Cb\u003Emin\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"2s\" repeatCount=\"2\" min=\"5s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ этом варианте атрибут \u003Cb\u003Emin \u003C\u002Fb\u003Eпросто игнорируется, анимация остановится на четвертой секунде\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003EПотому что \u003Cb\u003ErepeatDur \u003C\u002Fb\u003Eили \u003Cb\u003Eend \u003C\u002Fb\u003Eограничил длительность. Тут происходит еще одно ветвление\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EУ \u003Cb\u003ErepeatDur \u003C\u002Fb\u003E\u003Ci\u003Eнаивысший \u003C\u002Fi\u003Eприоритет, поэтому если он задан, и он меньше чем \u003Cb\u003Emin\u003C\u002Fb\u003E, то \u003Cb\u003Emin \u003C\u002Fb\u003Eигнорируется\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"1s\" repeatCount =\"indefinite\" repeatDur=\"3s\" end=\"5s\" min=\"4s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EХотя значение \u003Cb\u003ErepeatDur \u003C\u002Fb\u003Eменьше, чем \u003Cb\u003Emin\u003C\u002Fb\u003E, анимация все равно прервется через 3 секунды\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003EЕсли \u003Cb\u003ErepeatDur \u003C\u002Fb\u003Eне задан, а значение \u003Cb\u003Eend \u003C\u002Fb\u003Eменьше \u003Cb\u003Emin\u003C\u002Fb\u003E, то атрибут \u003Cb\u003Eend \u003C\u002Fb\u003Eбудет игнорироваться, а анимация прервется на значении \u003Cb\u003Emin\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"1s\" repeatCount =\"indefinite\" end=\"2s\" min=\"4s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ результате анимация прервется на 4 секунде, т.е. \u003Cb\u003Emin \u003C\u002Fb\u003Eвыступает в роли нового \u003Cb\u003Eend\u003C\u002Fb\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nИз-за обилия атрибутов, прерывающих анимацию, возникает сильная путаница. По итогу большого смысла в \u003Cb\u003Emax \u003C\u002Fb\u003Eи \u003Cb\u003Emin\u003C\u002Fb\u003E нет, ведь грамотно написанная анимация исключает необходимость в них.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак управлять ключевыми кадрам и где указывать функцию времени? \u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля этого нужно знать атрибуты \u003Cb\u003EkeyTimes\u003C\u002Fb\u003E, \u003Cb\u003EkeySplines\u003C\u002Fb\u003E, \u003Cb\u003EcalcMode\u003C\u002Fb\u003E. Указав в \u003Cb\u003Evalues \u003C\u002Fb\u003Eсписок, мы объявляем ключевые кадры, но они распределены равномерно. Благодаря атрибуту \u003Cb\u003EkeyTimes \u003C\u002Fb\u003Eмы можем ускорять или замедлять переход из одного состояния в другое. В нем, так же в виде списка, указываются значения для каждого кадра. Значения представляют положение ключевого кадра на временной оси в процентном соотношении, относительно длительности всей анимации (0 – 0%; 0,5 – 50%; 1 – 100%).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсть несколько правил: каждое значение представляет число с плавающей точкой от 0 до 1, кол-во значений в списках должно совпадать, первое значение обязательно 0, а последнее 1, каждое следующее значение должно быть больше предыдущего. Думаю, ты понимаешь, что нет смысла использовать \u003Cb\u003EkeyTimes \u003C\u002Fb\u003Eбез \u003Cb\u003Evalues\u003C\u002Fb\u003E. А теперь пример\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate values=\"15; 10; 45; 55; 50\" keyTimes=\"0; 0.1; 0.6; 0.9; 1\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПо умолчанию все преобразования происходят линейно, чтобы это изменить, нужно указать другой режим в \u003Cb\u003EcalcMode\u003C\u002Fb\u003E. И вариантов тут не много:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cb\u003Elinear \u003C\u002Fb\u003E– стандартное значение, в объяснении не нуждается\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003Epaced \u003C\u002Fb\u003E– временные промежутки рассчитываются так, чтобы скорость между ключевыми кадрами была постоянной\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003Ediscrete \u003C\u002Fb\u003E– анимация переключается между ключевыми кадрами скачками, без интерполяции\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003Espline \u003C\u002Fb\u003E– можно сказать, что это ручной режим управления (о нем попозже) \u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nК сожалению, это все встроенные функции, тут ты не найдешь ease in\\out как в CSS. Так что эти нужды придется удовлетворять режиму, который я обозвал «ручным».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамый трудный для понимания — это \u003Cb\u003Epaced\u003C\u002Fb\u003E, так что его объясню поподробней. Для начала посмотри, как работает анимация в стандартном режиме. Длительность анимации составляет 2 секунды и у нас есть 3 ключевых кадра – начальный, промежуточный, конечный\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"2s\" values=\"100; 200; 150\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЕсли понаблюдать за анимацией, то станет очевидно, что перемещение между ключевыми кадрами происходит за равные промежутки времени. Расстояние между первым и вторым составляет 100, а между вторым и третьим – 50, т.е. половину от первого пути. Путем не хитрых вычислений становится ясно, что элемент будет проходить второй отрезок в два раза медленнее, чем первый.Теперь добавим \u003Cb\u003EcalcMode=\"paced\"\u003C\u002Fb\u003E и посмотрим, что изменилось. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate dur=\"2s\" values=\"100; 200; 150\" calcMode=\"paced\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nА изменилась скорость движения элемента. Теперь она рассчитана таким образом, чтобы пройти всю дистанцию с одинаковой скоростью, другими словами – оба отрезка элемент будет двигаться равномерно. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь посмотрим на режим \u003Cb\u003Espline \u003C\u002Fb\u003Eи атрибут \u003Cb\u003EkeySplines\u003C\u002Fb\u003E. Они имеют некоторое сходство …хмм… \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002Fra\u002Fww\u002Fyo\u002Frawwyon0df65mityb6jgadmkkss.jpeg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fra\u002Fww\u002Fyo\u002Frawwyon0df65mityb6jgadmkkss.jpeg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЕсли \u003Cb\u003Espline\u003C\u002Fb\u003E определяет ручной режим, то атрибут \u003Cb\u003EkeySplines \u003C\u002Fb\u003Eопределяет значения для этого режима. Очевидно, что одно без другого не работает. Значения в \u003Cb\u003EkeySplines \u003C\u002Fb\u003Eзадаются списком, где указываются координаты двух точек для кубической Безье.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003EПодробнее о кубической функции Безье\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003EЭто функция, которая определяет интенсивность движения. Она состоит из 4 чисел с плавающей точкой от 0 до 1 и в общем виде выглядит так: cubic-bezier(x1, y1, x2, y2). Пары чисел являются координатами и образуют две точки, которые определяют кривую.\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fwc\u002Frd\u002Fne\u002Fwcrdneum5oobpjobqb_04k9d4co.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwc\u002Frd\u002Fne\u002Fwcrdneum5oobpjobqb_04k9d4co.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\nЕще подробнее о cubic-bezier можешь прочитать в сети. Для построения кубической Безье я советую пользоваться \u003Ca href=\"http:\u002F\u002Fcubic-bezier.com\u002F\"\u003Eонлайн сервисами\u003C\u002Fa\u003E, также там можно взглянуть на примеры и поиграть со значениями.\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКоличество значений в \u003Cb\u003EkeySplines \u003C\u002Fb\u003Eдолжно быть на 1 меньше чем \u003Cb\u003Evalues\u003C\u002Fb\u003E. Связано это с тем, что мы указываем значения не для ключевых кадров, а для промежутков меду ними.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate\n    values=\"100; 200; 150\"\n    keySplines=\".25 .1 .25 1;\n                0   0  .58 1\"\n    calcMode=\"spline\"\n    ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EКоординаты точек функции Безье разделяются пробелами или запятыми, а значения списка через точку с запятой\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервый и самый неприятный минус – нельзя задать общую функцию времени для всех ключевых кадров, придется дублировать функцию для каждого кадра.\u003Cbr\u002F\u003E\r\nВторой – если хочется задать функцию времени для атрибутов \u003Cb\u003Efrom\u003C\u002Fb\u003E-\u003Cb\u003Eto\u003C\u002Fb\u003E или \u003Cb\u003Eby\u003C\u002Fb\u003E, то нужен костыль: придется задать \u003Cb\u003EkeyTimes \u003C\u002Fb\u003Eсо значениями \u003Cb\u003E\"0; 1\"\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate\n    from=\"10\"\n    to=\"50\"\n    keyTimes=\"0; 1\"\n    keySplines=\".25 .1 .25 1;\"\n    calcMode=\"spline\"\n    ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЕсли вместо \u003Cb\u003Efrom\u003C\u002Fb\u003E-\u003Cb\u003Eto\u003C\u002Fb\u003E использовать \u003Cb\u003Evalues \u003C\u002Fb\u003Eс двумя значениями, то такой проблемы не будет\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак реализовать накопительные анимации?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСначала немного теории – следующее повторение у накопительной анимации продолжится там, где закончилось предыдущее. Как бы круто, но не очень… Огорчает тот факт, что накопительные анимации работают только в пределах повторений.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь о том, как сделать анимацию накопительной: нужно установить атрибут \u003Cb\u003Eaccumulate \u003C\u002Fb\u003E(который по умолчанию \u003Cb\u003Enone\u003C\u002Fb\u003E) в значение \u003Cb\u003Esum\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate by=\"100\" repeatCount=\"3\" accumulate=\"sum\"...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nСтоит иметь в виду, что если использовать \u003Cb\u003Evalues \u003C\u002Fb\u003Eили \u003Cb\u003Efrom\u003C\u002Fb\u003E-\u003Cb\u003Eto\u003C\u002Fb\u003E, то все повторения, кроме первого, будут вести они себя как при \u003Cb\u003Eadditive=\"sum\"\u003C\u002Fb\u003E. А еще \u003Cb\u003Eaccumulate \u003C\u002Fb\u003Eигнорируется если задан только один \u003Cb\u003Eto\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EПостигаем морфинг контура\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь, когда я объяснил основы, пора переходить к по настоящему крутым и сложным вещам. Уверен, что кто-то открыл эту статью исключительно ради этого раздела.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМорфинг контуров – это анимация атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E у тега \u003Cb\u003Epath\u003C\u002Fb\u003E, что позволяет создать эффект плавного изменения формы фигуры. На данный момент встроенными средствами такое можно сделать только с помощью SMIL. В \u003Cb\u003Evalues \u003C\u002Fb\u003Eуказывается список значений для атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E, через которые пройдет элемент. Также можно использовать \u003Cb\u003Efrom\u003C\u002Fb\u003E-\u003Cb\u003Eto\u003C\u002Fb\u003E. В общем виде морфинг контура выглядит так\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate attributeName=\"d\" values=\"состояние 1; состояние 2; ...\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nА теперь перейдем к тонкостям сего процесса: \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля тех кто в танке – атрибут \u003Cb\u003Ed\u003C\u002Fb\u003E содержит в себе набор точек, которые впоследствии поочередно соединяются и получается фигура. При более детальном рассмотрении можно заметить, что список значений похож на набор команд для ЧПУ станка (или «робота» на уроках информатики). Команд достаточно много, одни отвечают за «перемещение курсора», другие за «рисование», какие-то за то, насколько кривая будет линия и т.д. (\u003Ca href=\"https:\u002F\u002Fwww.w3.org\u002FTR\u002FSVG\u002Fpaths.html\"\u003Eвсе команды тут\u003C\u002Fa\u003E).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы морфинг сработал, \u003Ci\u003E\u003Cu\u003Eколичество команд должно совпадать\u003C\u002Fu\u003E\u003C\u002Fi\u003E, и они должны быть \u003Ci\u003E\u003Cu\u003Eодного типа\u003C\u002Fu\u003E\u003C\u002Fi\u003E. Если проигнорировать это условие, то интерполяция будет отсутствовать – анимация будет скакать от одного состояния к другому, как при \u003Cb\u003EcalcMode=\"discrete\"\u003C\u002Fb\u003E. На первый взгляд ничего сложного и это так, если ты будешь анимировать фигуры без кривых. Если же нет, то тут начинаются сложности.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри создании сложной графики все используют векторные редакторы, а у них есть привычка максимально оптимизировать «код». Обычно это плюс, но не в нашем случае. На выходе у нас \u003Cs\u003Eвозможно\u003C\u002Fs\u003E будет список одной длинны, но с командами разного типа, а это нарушение одного из правил. Я использовал Adobe Illustrator и не нашел опции, которая могла поправить положение дел. Иногда, по воле богов дизигна, эта проблема отсутствует. А если серьезно, то вероятность возникновения проблемы прямо пропорциональна сложности фигуры и морфинга.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа данный момент единственным решением проблемы я вижу преобразование «кривого кода» в веб-приложении \u003Ca href=\"https:\u002F\u002Fshapeshifter.design\u002F\"\u003EShape Shifter\u003C\u002Fa\u003E. Это тот вариант, которым пользуюсь я. Помимо починки битого кода Shape Shifter позволяет посмотреть результат, при желании добавить анимации другого типа и экспортировать результат в удобном формате. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее будет пошаговый туториал, где я расскажу, как сделать такую красивую анимацию\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F4e\u002Fr4\u002Flw\u002F4er4lwtbbmhiiqujreog2ibhe84.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4e\u002Fr4\u002Flw\u002F4er4lwtbbmhiiqujreog2ibhe84.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003ETeach me!\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003EПлант такой: я создам SVG каркас в Adobe Illustrator, напишу анимацию и не одну, починю косяки в Shape Shifter и сделаю морфинг. Я буду использовать как CSS, так и SMIL анимацию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nБудем делать анимированную иконку вопроса. Для начала нужно создать новый проект в Illustrator. Так как в итоге мы получим векторное изображение, большое разрешение тут не нужно. Я считаю комфортным для работы размер монтажной области 200x200 пикселей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее нужен, собственно, сам знак вопроса. Вместо того, чтобы рисовать его вручную, я воспользуюсь инструментом «Текст». Поиграв с параметрами и шрифтами, получаем такой симпатичный вопросик\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fno\u002Fuu\u002Frm\u002Fnouurmqxgsflfyhgs2ctpoweavi.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fno\u002Fuu\u002Frm\u002Fnouurmqxgsflfyhgs2ctpoweavi.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНо в таком виде анимировать его не получится. Поэтому нужно преобразовать текст в кривые. Щелкаем правой кнопкой мыши по тексту и выбираем «Преобразовать в кривые»\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F57\u002F4e\u002Fpo\u002F574epocgz3wx30rkg23lsio-njs.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F57\u002F4e\u002Fpo\u002F574epocgz3wx30rkg23lsio-njs.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПосле этого можно приступать к покраске, подгонке по размерам и деталям. Мне показалась неплохой идеей сделать иллюзию объема, поэтому я скопировал знак, сделал его темнее, а также убрал лишние точки\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fza\u002Fc8\u002Fpf\u002Fzac8pfuwceeupcjc_siznyrikig.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fza\u002Fc8\u002Fpf\u002Fzac8pfuwceeupcjc_siznyrikig.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПосле этого приступаем к второстепенным элементам. Я добавлю круг и несколько линий, для которых поставлю пунктир так, чтобы была лишь одна черта в самом начале линии. Зачем это все нужно, я покажу позже. Огромный плюс SVG в том, что цвета можно без проблем изменить в любой момент. Потому что я с ними еще не определился…\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F1t\u002Fbf\u002Fdu\u002F1tbfduraytzbzk1sdyy1im7fuya.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F1t\u002Fbf\u002Fdu\u002F1tbfduraytzbzk1sdyy1im7fuya.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНа этом каркас готов и пора переходить к анимации. Но перед этим нужно сохранить сам проект, потому что он нам еще пригодится. Только после этого сохраняем проект как SVG файл. (как правильно экспортировать документ из Illustrator я писал в самом начале статьи)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКогда я заглянул внутрь полученного документа, я очень удивился, потому что Illustrator сохранил мой круг как элемент \u003Cb\u003E&lt;path\u003E\u003C\u002Fb\u003E, а не \u003Cb\u003E&lt;circle\u003E\u003C\u002Fb\u003E. Так я плавно подвожу к тому, что настало время прибраться. Нужно убрать все лишнее, оптимизировать некоторые моменты и просто сделать так, чтобы было приятно работать. Кто-то делает это с помощью сторонних программ (например \u003Ca href=\"https:\u002F\u002Fjakearchibald.github.io\u002Fsvgomg\u002F\"\u003ESVGO\u003C\u002Fa\u003E), но я предпочитаю делать все ручками. В процессе создания анимации еще придется не раз перелопатить структуру файла.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003E В примерах стер содержимое атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E, которое занимает много места)\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003EВот как было\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003E\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u003E\n&lt;!-- Generator: Adobe Illustrator 23.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\u003E\n&lt;svg version=\"1.1\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" xmlns:xlink=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink\" x=\"0px\" y=\"0px\"\n     viewBox=\"0 0 200 200\" style=\"enable-background:new 0 0 200 200;\" xml:space=\"preserve\"\u003E\n&lt;style type=\"text\u002Fcss\"\u003E\n    .st0{fill:#D38911;}\n    .st1{fill:#87872B;}\n    .st2{fill:#CEB629;}\n    .st3{fill:none;stroke:#DD913E;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:12,200;}\n&lt;\u002Fstyle\u003E\n&lt;g id=\"Pulse\"\u003E\n    &lt;g\u003E\n        &lt;path class=\"st0\" d=\"M100,87c44.1,0,80,35.9,80,80s-35.9,80-80,80s-80-35.9-80-80S55.9,87,100,87 M100,82c-46.9,0-85,38.1-85,85\n            s38.1,85,85,85s85-38.1,85-85S146.9,82,100,82L100,82z\"\u002F\u003E\n    &lt;\u002Fg\u003E\n&lt;\u002Fg\u003E\n&lt;g id=\"_x3F__1_\"\u003E\n    &lt;path id=\"side\" class=\"st1\" d=\" Много букв \"\u002F\u003E\n    &lt;path id=\"front\" class=\"st2\" d=\" Много букв \"\u002F\u003E\n&lt;\u002Fg\u003E\n&lt;g id=\"Particles\"\u003E\n    &lt;line class=\"st3\" x1=\"80\" y1=\"162.9\" x2=\"42\" y2=\"59.1\"\u002F\u003E\n    &lt;line class=\"st3\" x1=\"90.1\" y1=\"148.8\" x2=\"59.8\" y2=\"28.8\"\u002F\u003E\n    &lt;line class=\"st3\" x1=\"107.9\" y1=\"155.6\" x2=\"124.9\" y2=\"15.9\"\u002F\u003E\n    &lt;line class=\"st3\" x1=\"94.4\" y1=\"160.4\" x2=\"154.3\" y2=\"7.2\"\u002F\u003E\n    &lt;line class=\"st3\" x1=\"119.3\" y1=\"157\" x2=\"159.2\" y2=\"75.5\"\u002F\u003E\n    &lt;line class=\"st3\" x1=\"98\" y1=\"169\" x2=\"87.7\" y2=\"10.7\"\u002F\u003E\n    &lt;line class=\"st3\" x1=\"80.4\" y1=\"147.6\" x2=\"63.2\" y2=\"14.1\"\u002F\u003E\n&lt;\u002Fg\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003EИ как стало\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003E\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u003E\n&lt;svg version=\"1.1\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" viewBox=\"0 0 200 200\"\u003E\n&lt;style type=\"text\u002Fcss\"\u003E\n    #Pulse{fill: none; stroke: #D38911; stroke-width: 5;}\n    #side{fill:#87872B;}\n    #front{fill:#CEB629;}\n    .particles{fill:none;stroke:#DD913E;stroke-width:5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:12,200;}\n&lt;\u002Fstyle\u003E\n&lt;circle id=\"Pulse\" cx=\"100\" cy=\"167\" r=\"85\"\u002F\u003E\n&lt;g id=\"Sign\"\u003E\n    &lt;path id=\"side\" d=\" Много букв \"\u002F\u003E\n    &lt;path id=\"front\" d=\" Много букв \"\u002F\u003E\n&lt;\u002Fg\u003E\n&lt;g id=\"Particles\"\u003E\n    &lt;line class=\"particles\" x1=\"80\" y1=\"162.9\" x2=\"42\" y2=\"59.1\"\u002F\u003E\n    &lt;line class=\"particles\" x1=\"90.1\" y1=\"148.8\" x2=\"59.8\" y2=\"28.8\"\u002F\u003E\n    &lt;line class=\"particles\" x1=\"107.9\" y1=\"155.6\" x2=\"124.9\" y2=\"15.9\"\u002F\u003E\n    &lt;line class=\"particles\" x1=\"94.4\" y1=\"160.4\" x2=\"154.3\" y2=\"7.2\"\u002F\u003E\n    &lt;line class=\"particles\" x1=\"119.3\" y1=\"157\" x2=\"159.2\" y2=\"75.5\"\u002F\u003E\n    &lt;line class=\"particles\" x1=\"98\" y1=\"169\" x2=\"87.7\" y2=\"10.7\"\u002F\u003E\n    &lt;line class=\"particles\" x1=\"80.4\" y1=\"147.6\" x2=\"63.2\" y2=\"14.1\"\u002F\u003E\n&lt;\u002Fg\u003E\n&lt;\u002Fsvg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EМоей целью была не максимальная оптимизация файла для экономии места, а удобство работы. Тут еще есть что удалить, но это мне не мешает, так что и так сойдет\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЯ заменил имена CSS классов на человеческие, починил тот бракованный круг и убрал всякий мусор. Теперь можно творить чудеса и начну я с того самого круга. Он будет расходиться, как круги на воде. Для этого его нужно для начала повернуть. И тут мы воспользуемся CSS свойствами. А напишу я следующее:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E#Pulse{fill: none; stroke: #D38911; stroke-width: 5; transform: rotateX(80deg);}\n._transformer{transform-box: fill-box; transform-origin: center;}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЧтобы круг поворачивался корректно и никуда не ехал, нужен класс \u003Cb\u003E_transformer\u003C\u002Fb\u003E, который я присвою кругу и другим элементам, которые будут трансформироваться. Об этом «лайфхаке» я расскажу подробнее в части про \u003Cb\u003E&lt;animateTransform\u003E\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКто-то спросит: \u003Ci\u003Eпочему ты сразу не сплюснул круг, когда рисовал его в Illustrator? Тогда бы не пришлось возиться с ним сейчас…\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВсе просто – это делалось для того, чтобы была разница в толщине линии. Если просто сплюснуть круг, такого эффекта не добиться. Конечно, это можно было бы сделать с помощью \u003Cb\u003E&lt;path\u003E\u003C\u002Fb\u003E, но тогда и размер файла был бы больше и анимировать такой элемент ГОРАЗДО сложнее.\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fbd\u002Frv\u002Ffg\u002Fbdrvfg6rpliplqi9lm38j4spxuk.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fbd\u002Frv\u002Ffg\u002Fbdrvfg6rpliplqi9lm38j4spxuk.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСобстна, анимация! Происходить будет следующее – при нажатии на вопрос радиус и обводка круга будут увеличиваться, а его прозрачность уменьшаться. Первые две анимации будут происходить линейно, а исчезновение – под самый конец. Сделаем значение радиуса у \u003Cb\u003Ecircle\u003C\u002Fb\u003E равным нулю, чтобы его не было видно. Так как \u003Cb\u003Eanimate \u003C\u002Fb\u003Eможет анимировать только один атрибут за раз, придется сделать 3 синхронные анимации\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;circle id=\"Pulse\" class=\"_transformer\" cx=\"100\" cy=\"167\" r=\"0\"\u003E\n    &lt;animate id=\"doPulse\" attributeName=\"r\" values=\"0;85;\" dur=\".8s\" begin=\"Sign.click\" calcMode=\"spline\" keySplines=\"0,0,.58,1\"\u002F\u003E\n    &lt;animate attributeName=\"stroke-width\" values=\"5;12;\" dur=\".8s\" begin=\"doPulse.begin\"\u002F\u003E\n    &lt;animate attributeName=\"opacity\" values=\"0.5;1;1;0\" keyTimes=\"0;0.2;0.5;1\" dur=\".8s\" begin=\"doPulse.begin\"\u002F\u003E\n&lt;\u002Fcircle\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЕсли бы не было необходимости привязывать анимацию к клику, разумнее было бы реализовать ее на CSS\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fxi\u002Fyj\u002F_j\u002Fxiyj_jiwt5efedcpx2dq5m6lmy8.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fxi\u002Fyj\u002F_j\u002Fxiyj_jiwt5efedcpx2dq5m6lmy8.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПосле этого мне резко захотелось добавить деталей, и я решил сделать анимацию блика на знаке вопроса. План такой: снова продублировать знак вопроса, изменить заливку на более светлую, и обрезать лишнее с помощью маски. Чтобы вышло как-то так:\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Flu\u002F5f\u002F8c\u002Flu5f8cfqpytvl_t237aelpymcs4.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Flu\u002F5f\u002F8c\u002Flu5f8cfqpytvl_t237aelpymcs4.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМаской будет простой прямоугольник. В какой-то момент мне показалось, что круто было бы добавить небольшого размытия на границах блика. Поэтому вместо однотонной заливки будем использовать градиент, прозрачный в начале и в конце\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;linearGradient id=\"light-gradient\"\u003E\n    &lt;stop offset=\"0%\" stop-color=\"#ffffff00\"\u002F\u003E\n    &lt;stop offset=\"10%\" stop-color=\"#FFF\"\u002F\u003E\n    &lt;stop offset=\"90%\" stop-color=\"#FFF\"\u002F\u003E\n    &lt;stop offset=\"100%\" stop-color=\"#ffffff00\"\u002F\u003E\n&lt;\u002FlinearGradient\u003E\n&lt;mask id=\"light-mask\"\u003E &lt;rect y=\"0\" x=\"90\" class=\"_transformer\" width=\"20\" height=\"220\" fill=\"url(#light-gradient)\" \u002F\u003E &lt;\u002Fmask\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nОтлично, маска готова. Но для того, чтобы реализовать задуманное, нужно изменить структуру файла. Так как у нас будут два совершенно одинаковых знака вопроса, я заменю их на конструкцию \u003Cb\u003E&lt;use\u003E\u003C\u002Fb\u003E, а элемент\u003Cb\u003E &lt;path\u003E\u003C\u002Fb\u003E перемещу в \u003Cb\u003E&lt;defs\u003E\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;defs\u003E\n    &lt;path id=\"question\" d=\" Тут рисуется знак вопроса \"\u002F\u003E\n&lt;\u002Fdefs\u003E\n...\n&lt;use id=\"front\" href=\"#question\"\u002F\u003E\n&lt;use id=\"light\" href=\"#question\" mask=\"url(#light-mask)\"\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВот что получается\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fcn\u002Fho\u002Fyy\u002Fcnhoyy-clqyjniu5tzdv8rq2q40.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fcn\u002Fho\u002Fyy\u002Fcnhoyy-clqyjniu5tzdv8rq2q40.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nТеперь, когда основа заложена, пора переходить к анимации. А анимировать мы будем маску. Вернее, прямоугольник внутри маски\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E#light-mask rect{ animation: highlight 4s infinite; }\n@keyframes highlight {\n    0% { transform: translate(-100px,0) rotate(-50deg); }\n    30%  { transform: translate(100px,0) rotate(-50deg); }\n    100%  { transform: translate(100px,0) rotate(-50deg); }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ данном примере очень важен порядок применения трансформаций. Попробуй поменять их местами и все пойдет наперекосяк. Именно поэтому тут CSS лучше, чем SMIL.\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F6q\u002Fz4\u002Fmg\u002F6qz4mgrsrt9mzwwdr_43jinpiow.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F6q\u002Fz4\u002Fmg\u002F6qz4mgrsrt9mzwwdr_43jinpiow.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nТак как иконка у нас интерактивная, по клику знак будет подпрыгивать. А просто висящий в воздухе знак — это скучно, поэтому добавим еще небольшого движения в состоянии покоя. Пишем обе анимации и синхронизируем их так, чтобы одновременно работала только одна из них\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;g id=\"Sign\" class=\"_transformer\"\u003E\n    &lt;path id=\"side\" d=\" Очередной длинный набор команд \"\u002F\u003E\n    &lt;use id=\"front\" href=\"#question\"\u002F\u003E\n    &lt;use id=\"light\" href=\"#question\" mask=\"url(#light-mask)\"\u002F\u003E\n    &lt;animateTransform \n        id=\"idle\"\n        attributeName=\"transform\"\n        type=\"translate\"\n        values=\"0,0;0,-5;0,0\"\n        dur=\"6s\"\n        begin=\"0s; jump.end\"\n        end=\"click\"\n        repeatCount=\"indefinite\"\n    \u002F\u003E\n    &lt;animateTransform\n        id=\"jump\"\n        attributeName=\"transform\"\n        type=\"translate\"\n        calMode=\"spline\"\n        values=\"0,0;0,10;0,-35;0,5;0,0\"\n        keyTimes=\"0;0.1;0.35;0.6;1\"\n        keySpline=\"0,0,.58,1;0,0,.58,1;.42,0,1,1;0,0,.58,1\"\n        dur=\"1s\"\n        begin=\"idle.end\"\n    \u002F\u003E\n&lt;\u002Fg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВсе анимации применяются к группе, чтобы элементы внутри двигались вместе\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА для того, чтобы анимация прыжка была более выразительной, добавим небольшую деформацию. Так как обе анимации должны происходить одновременно, нужен атрибут \u003Cb\u003Eadditive=\"sum\"\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateTransform\n    attributeName=\"transform\"\n    type=\"scale\"\n    additive=\"sum\"\n    values=\"1,1;1.1,0.8;0.9,1.2;1.1,0.8;1,1\"\n    keyTimes=\"0;0.1;0.35;0.7;1\"\n    dur=\"1s\"\n    begin=\"idle.end\"\n\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЕще я изменил время для анимации круга, чтобы она запускалась, когда знак приземляется. Результат:\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F37\u002Ftf\u002Fo3\u002F37tfo3-eh9bkuqb8sfkg6fjfbjo.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F37\u002Ftf\u002Fo3\u002F37tfo3-eh9bkuqb8sfkg6fjfbjo.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nСледующая анимация является квинтэссенцией хитрожопости.\u003Cbr\u002F\u003E\r\nПомнишь те непонятные линии с одной чертой в начале? Кто-то уже догадался, для чего они, а для других я объясню. Есть такой атрибут \u003Cb\u003Estroke-dashoffset\u003C\u002Fb\u003E, который определяет отступ пунктира относительно начала. Если его анимировать, то создаётся иллюзия движения пунктира вдоль прямой\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fak\u002Fyq\u002Fft\u002Fakyqftetegvuxzmjmgu-44cl8ik.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fak\u002Fyq\u002Fft\u002Fakyqftetegvuxzmjmgu-44cl8ik.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВ итоге у нас получится что-то вроде разлетающихся в разные стороны частиц. Для этого опять изменим структуру, чтобы частицы оказались за знаком\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;g id=\"Particles\"\u003E ... &lt;\u002Fg\u003E\n&lt;g id=\"Sign\" class=\"_transformer\"\u003E ... &lt;\u002Fg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nА также добавим им немного прозрачности, чтобы они меньше бросались в глаза и уберем обводку, чтобы их не было видно до анимации\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E.particles{ opacity:.7; stroke-width:0; ... }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nДальше анимация, которая сама по себе не несет ничего особенного. Просто уменьшаем длину и толщину штриха, попутно перемещая его по прямой\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E@keyframes sparks {\n    0% { stroke-dasharray: 20,200; stroke-width: 5px; }\n    100% { stroke-dasharray: 4,200; stroke-width: 0px; stroke-dashoffset: -180; }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИнтерес вызывает то, как мы будем применять эту анимацию. Я хочу, чтобы частицы разлетались, когда знак «приземляется». Но тут же появляются сложности: анимация написана на CSS и, если просто применить ее к нашим частицам, она будет воспроизводиться сразу при открытии документа. А если делать ту же анимацию на SMIL, то их будет 3 на каждый атрибут, и они будут дублироваться для каждой линии, а их целых 7. Вариант, мягко говоря, не очень…\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРешение проблемы элегантно – вместо того, чтобы выбирать что-то одно, будем использовать их одновременно. Анимация будет написана на CSS, а интерактивную часть будет обрабатывать SMIL.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСоздадим вспомогательный класс \u003Cb\u003EParticles_active\u003C\u002Fb\u003E, через который будем применять анимацию к нашим частицам\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"css\"\u003E.Particles_active .particles{ animation: sparks .7s; }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИ добавим элемент \u003Cb\u003E&lt;set\u003E\u003C\u002Fb\u003E, который будет присваивать этот класс группе, когда настанет нужный момент (подробнее про \u003Cb\u003Eset \u003C\u002Fb\u003Eрасскажу в следующем разделе)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;g id=\"Particles\"\u003E\n    &lt;line class=\"particles\" x1=\"80\" y1=\"162.9\" x2=\"42\" y2=\"59.1\"\u002F\u003E\n    ...\n    &lt;line class=\"particles\" x1=\"80.4\" y1=\"147.6\" x2=\"63.2\" y2=\"14.1\"\u002F\u003E\n    &lt;set attributeName=\"class\" to=\"Particles_active\" dur=\".7s\" begin=\"jump.begin + .5s\"\u002F\u003E   \n&lt;\u002Fg\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003EЧто мы получили в результате такого манёвра: \u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eанимация написана один раз и анимирует все атрибуты сразу;\u003C\u002Fli\u003E\r\n\u003Cli\u003Eпривязали анимацию к конкретному событию;\u003C\u002Fli\u003E\r\n\u003Cli\u003Eблагодаря тому, что класс присваивается не частицам, а их родителю, элемент, включающий анимацию, тоже один; \u003C\u002Fli\u003E\r\n\u003Cli\u003Eпосле окончания анимации вспомогательный класс автоматически удалится;\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fxo\u002F5p\u002Ftc\u002Fxo5ptc85zmlzdmp0o6sa30e23vc.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fxo\u002F5p\u002Ftc\u002Fxo5ptc85zmlzdmp0o6sa30e23vc.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nМорфинг контуров я оставил на сладкое. У нас уже есть иллюзия объема, но мы ее усилим, сделав небольшое вращение. Так как знак не 3D объект, просто крутить его не получится. Поэтому будем изменять контуры так, чтобы казалось, что знак вращается. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСнова обратимся к Adobe Illustrator, в котором откроем ранее сохраненный проект. Нужно всего два ключевых кадра, один из которых у нас уже готов. Чуть-чуть изменим фигуры, чтобы добиться нужного эффекта. Получим два знака вопроса, разница между которыми видна только при непосредственном сравнении\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fkw\u002Fit\u002Fp5\u002Fkwitp5mc31z-4okv11j2eajegjq.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fkw\u002Fit\u002Fp5\u002Fkwitp5mc31z-4okv11j2eajegjq.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nДля создания анимации нужны только значения атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E. Так что вместо сохранения документа откроем его в браузере либо текстовом редакторе\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fzd\u002Fgn\u002Ff6\u002Fzdgnf6gceepyjgmr00_tibvogqe.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fzd\u002Fgn\u002Ff6\u002Fzdgnf6gceepyjgmr00_tibvogqe.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЯ предпочитаю открывать в браузере, потому что там удобнее искать. Копируем сгенерированные значения и идем с ними на сайт Shape Shifter.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВсегда есть вероятность, что анимация заработает сразу со сгенерированными значениями, но я даже не стал проверять. Потому что в любом случае собирался показать, как работать в Shape Shifter\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы начать работать, нужно загрузить SVG на сайт. Так как модифицированный вариант с анимациями Shape Shifter не поймет, я заранее подготовил «чистый» SVG. Это просто копия самого первого экспорта из Illustrator. После того как файл загружен, нужно добавить анимацию. Выбираем нужную фигуру, кликаем на часы и в развернувшемся меню выбираем pathData\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F1h\u002Fxs\u002Fmb\u002F1hxsmb0wb5owhwv2tsceledtwho.png\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F1h\u002Fxs\u002Fmb\u002F1hxsmb0wb5owhwv2tsceledtwho.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F1h\u002Fxs\u002Fmb\u002F1hxsmb0wb5owhwv2tsceledtwho.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nВсе, что остается, это просто вставить скопированное значение в toValue. Вставленное значение сразу же изменяется и его можно оттуда копировать. На этом «починку» можно считать оконченной\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F9o\u002Fp-\u002Fgx\u002F9op-gxlp5gy9krrdczge78qnv8k.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F9o\u002Fp-\u002Fgx\u002F9op-gxlp5gy9krrdczge78qnv8k.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИногда при несовпадении точек может появиться предупреждение. В большинстве случаев достаточно нажать на волшебную палочку, чтобы исправить это\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F8b\u002Fq1\u002Fua\u002F8bq1uasta8qkatvp8h9nirs9qmm.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F8b\u002Fq1\u002Fua\u002F8bq1uasta8qkatvp8h9nirs9qmm.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПеред тем, как приступать к написанию анимации, можно прямо в Shape Shifter поиграть с параметрами, чтобы сразу определиться с длительностью анимации, временными функциями или вообще понять, что это не то, чего ты хочешь. Когда тебя все устраивает, просто копируй значения из поля toValue и fromValue и отправляйся делать анимацию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ итоге у меня получилась вот такая анимация. Она идентична для лицевой и боковой сторон вопроса, отличаются только значения\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animate\n    attributeName=\"d\"\n    calMode=\"spline\"\n    values=\" Состояние 1; Состояние 2; Состояние 1\"\n    dur=\"5s\"\n    keySpline=\".42,0,.58,1;.42,0,.58,1\"\n    repeatCount=\"indefinite\"\n\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EСостояние 1 – это нормальный вид вопроса, а состояние 2 – повернутое \u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fnx\u002Fuv\u002Fig\u002Fnxuvigflycaiwg7zblsmd2cmqiq.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fnx\u002Fuv\u002Fig\u002Fnxuvigflycaiwg7zblsmd2cmqiq.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНа этом создание анимированной иконки вопроса заканчивается. Напоследок предлагаю взглянуть на финальный результат на Codepen.\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv\u003E\u003Cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 37.4995%;\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fcodepen.io\u002FTosterHolokoster\u002Fembed\u002Fpreview\u002FwZOrqr?height=300&amp;slug-hash=wZOrqr&amp;default-tabs=html,result&amp;host=https:\u002F\u002Fcodepen.io\" data-style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" id=\"\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИ напоминаю, что так как это SVG – цвета можно менять, а некоторые элементы убирать. Например, если мне не нужны частицы, я могу их спокойно удалить без вреда для всей анимации\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E&lt;set\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nТег \u003Cb\u003Eset \u003C\u002Fb\u003Eявляется укороченной версией \u003Cb\u003Eanimate\u003C\u002Fb\u003E, за исключением того, что он не может в интерполяцию. Он используется для мгновенного изменения атрибута на определенный отрезок времени, т.е. работает по принципу переключателя. Вследствие этого игнорирует атрибуты, связанные с интерполяцией и не поддерживает накопительные или относительные анимации. Значение задается исключительно с помощью атрибута \u003Cb\u003Eto\u003C\u002Fb\u003E, атрибуты \u003Cb\u003Evalues\u003C\u002Fb\u003E, \u003Cb\u003Efrom\u003C\u002Fb\u003E, \u003Cb\u003Eby \u003C\u002Fb\u003Eигнорируются\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;set attributeName=\"cx\" to=\"200\" begin=\"click\" dur=\"5s\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЭлемент изменяет положение по клику, по истечении 5 секунд возвращается на исходное место\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли не указывать атрибут \u003Cb\u003Edur\u003C\u002Fb\u003E, то элемент останется в этом состоянии до перезагрузки документа. В остальном он аналогичен \u003Cb\u003Eanimate\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E&lt;animateTransform\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nКак понятно из названия, используется для применения к элементу разного рода трансформаций. Все типы трансформация идентичны CSS трансформациям. При одновременном использовании CSS и SMIL трансформаций они будут друг друга переопределять, поэтому лучше использовать что-то одно, либо смотреть, чтобы они не пересекались.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак трансформировать?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ качестве анимируемого атрибута выступает \u003Cb\u003Etransform\u003C\u002Fb\u003E. Режим трансформации указывается в атрибуте \u003Cb\u003Etype \u003C\u002Fb\u003Eи принимает 4 типа значений – перемещение, поворот, масштабирование, сдвиг по осям. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003Etranslate \u003C\u002Fb\u003E– перемещение элемента относительно его текущего положения. В качестве значений принимает смещение в формате \u003Cb\u003E[x, y]\u003C\u002Fb\u003E, где \u003Cb\u003Ey\u003C\u002Fb\u003E является необязательным параметром\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateTransform attributeName=\"transform\" type=\"translate\" from=\"0, -10\" to=\"0, 10\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПеремещает элемент по оси Y\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003Erotate \u003C\u002Fb\u003E– поворачивает элемент относительно центра вращения. В качестве значений принимает угол поворота и координаты центра вращения \u003Cb\u003E[deg, x, y]\u003C\u002Fb\u003E, координаты центра указывать не обязательно. По умолчанию центр вращения находится в верхнем левом углу SVG документа\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0, 150, 150\" to=\"45, 150, 150\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EПоворот на 45 градусов вокруг точки с координатами 150, 150\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже центр вращения можно изменить с помощью CSS свойства\u003Cb\u003E transform-origin\u003C\u002Fb\u003E, где помимо координат можно указать проценты. По умолчанию процентные значения рассчитываются по размерам всего документа, чтобы проценты считались относительно элемента, нужно задать CSS свойство \u003Cb\u003Etransform-box\u003C\u002Fb\u003E со значением \u003Cb\u003Efill-box\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003Escale \u003C\u002Fb\u003E– масштабирует элемент. В качестве значений принимает числа с плавающей точкой в формате \u003Cb\u003E[scale]\u003C\u002Fb\u003E для обеих осей, или отдельно для каждой оси \u003Cb\u003E[scaleX, scaleY]\u003C\u002Fb\u003E (1 соответствует нормальному размеру элемента). Если не менять \u003Cb\u003Etransform-box\u003C\u002Fb\u003E, о котором я говорил выше, то элемент масштабируется относительно всего документа. Пустое пространство вокруг элемента тоже изменяется вместе с ним, поэтому визуально кажется, что элемент смещается в сторону\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateTransform attributeName=\"transform\" type=\"scale\" from=\"1, 1\" to=\"2, 1\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EРастягивает элемент по оси Х\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EskewX \u003C\u002Fb\u003Eили \u003Cb\u003EskewY\u003C\u002Fb\u003E – сдвигает элемент относительно оси. В качестве значения принимает угол наклона\u003Cb\u003E [deg]\u003C\u002Fb\u003E. По дефолту центр сдвига – верхний левый угол, так что тут работает тот же прикол с \u003Cb\u003Etransform-box\u003C\u002Fb\u003E и \u003Cb\u003Etransform-origin\u003C\u002Fb\u003E, что и в других трансформациях\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateTransform attributeName=\"transform\" type=\"skewX\" from=\"0\" to=\"45\" ...\u002F\u003E\n&lt;animateTransform attributeName=\"transform\" type=\"skewY\" from=\"90\" to=\"0\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EОдин сдвигает по X, другой по Y\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EСуммирование и переопределение трансформаций\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ \u003Cb\u003EanimateTransform \u003C\u002Fb\u003Eвсе еще можно делать накопительные и относительные анимации, однако здесь атрибут \u003Cb\u003Eadditive \u003C\u002Fb\u003Eведет себя иначе. В значении \u003Cb\u003Ereplace\u003C\u002Fb\u003E трансформация переопределяет все предыдущие. В значении \u003Cb\u003Esum \u003C\u002Fb\u003Eтрансформация суммируется с предыдущей\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;rect transform=\"skewY(115)\" ...\u003E\n    &lt;animateTransform type=\"translate\" from=\"-10\" to=\"10\" additive=\"replace\" ...\u002F\u003E\n    &lt;animateTransform type=\"rotate\" from=\"0\" to=\"90\" additive=\"sum\" ...\u002F\u003E\n&lt;\u002Frect\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ данном примере сдвиг прямоугольника будет переопределен на перемещение и поворот\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E&lt;animateMotion\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nНужен, чтобы анимировать движение элемента вдоль траектории. \u003Cb\u003EanimateMotion \u003C\u002Fb\u003Eподдерживает атрибуты \u003Cb\u003Eanimate \u003C\u002Fb\u003Eи имеет 3 собственных – \u003Cb\u003Epath\u003C\u002Fb\u003E, \u003Cb\u003Erotate\u003C\u002Fb\u003E, \u003Cb\u003EkeyPoints\u003C\u002Fb\u003E. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EВарианты определения траектории\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОпределить траекторию движения можно несколькими способами – использовать знакомые нам атрибуты \u003Cb\u003Efrom\u003C\u002Fb\u003E, \u003Cb\u003Eto\u003C\u002Fb\u003E, \u003Cb\u003Eby \u003C\u002Fb\u003Eили \u003Cb\u003Evalues\u003C\u002Fb\u003E, новый атрибут \u003Cb\u003Epath \u003C\u002Fb\u003Eили дочерний тег \u003Cb\u003E&lt;mpath\u003E\u003C\u002Fb\u003E. Я перечислил способы по возрастанию приоритета и объяснять я их буду в том же порядке.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ атрибуты \u003Cb\u003Efrom\u003C\u002Fb\u003E, \u003Cb\u003Eto\u003C\u002Fb\u003E, \u003Cb\u003Eby \u003C\u002Fb\u003E указываются координаты точек, \u003Cb\u003Evalues \u003C\u002Fb\u003Eто же, но уже в виде списка\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateMotion from=\"0,0\" to=\"50,100\" ...\u002F\u003E\n&lt;animateMotion values=\"0,0; 0,100; 100,100; 0,0\" ...\u002F\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЭффект от такого способа сравним с обычной трансформацией перемещения. Элемент перемещается прямолинейно из одной точки в другую. И тут так же, как и в \u003Cb\u003EanimateTransform\u003C\u002Fb\u003E, \u003Cu\u003Eкоординаты являются относительными\u003C\u002Fu\u003E. Точка 0,0 указывает не на верхний левый угол документа, а на текущее положение целевого элемента. Данная особенность присутствует и в остальных способах определения траектории.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ атрибуте \u003Cb\u003Epath \u003C\u002Fb\u003Eуказывается набор команд, как для атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E. Если в атрибуте \u003Cb\u003Ed\u003C\u002Fb\u003E команды интерпретируются как контур фигуры, то в атрибуте \u003Cb\u003Epath \u003C\u002Fb\u003Eони является линией, по которой будет двигаться элемент. Координаты точек тоже относительны, поэтому путь начинается с точки 0,0\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateMotion path=\"M 0 0 c 3.4 -6.8 27.8 -54.2 56 -37.7 C 73.3 -27.5 89.6 -5.1 81.9 5.9 c -5.8 8.3 -24.7 8.7 -45.4 -0.4\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nДанный путь описывает вот такую кривую \u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Ftt\u002Fkh\u002Ftv\u002Fttkhtvmfbm-qymlq4r_a40ovg9o.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ftt\u002Fkh\u002Ftv\u002Fttkhtvmfbm-qymlq4r_a40ovg9o.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоследний способ – использовать в качестве траектории сторонний элемент \u003Cb\u003E&lt;path\u003E\u003C\u002Fb\u003E. Для этого в теге \u003Cb\u003E&lt;mpath\u003E\u003C\u002Fb\u003E нужно указать ссылку на этот элемент, а сам тег нужно поместить внутрь \u003Cb\u003E&lt;animateMotion\u003E\u003C\u002Fb\u003E. Этот вариант имеет ту же особенность с относительными координатами. По своей сути этот способ как бы «копирует» из элемента значение атрибута \u003Cb\u003Ed\u003C\u002Fb\u003E в атрибут \u003Cb\u003E&lt;path\u003E\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;path id=\"movement\" ...\u002F\u003E\n...\n&lt;animateMotion ...\u003E\n    &lt;mpath href=\"#movement\"\u002F\u003E\n&lt;\u002FanimateMotion\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EЭлемент, который определяет траекторию, может даже не отображаться в документе. Его можно просто определить в \u003Cb\u003E&lt;defs\u003E\u003C\u002Fb\u003E\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EПоворот элемента относительно траектории\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсть возможность заставить элемент поворачиваться по направлению движения, используя атрибут \u003Cb\u003Erotate\u003C\u002Fb\u003E. Он принимает 3 типа значений: \u003Cb\u003Eauto\u003C\u002Fb\u003E, \u003Cb\u003Eauto-reverse\u003C\u002Fb\u003E и число, обозначающее поворот в градусах\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateMotion rotate=\"auto\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПо умолчанию \u003Cb\u003Erotate \u003C\u002Fb\u003Eимеет значение 0. Любое численное значение фиксирует угол на протяжении всей анимации. Автоматические режимы \u003Cb\u003Eauto \u003C\u002Fb\u003Eи \u003Cb\u003Eauto-reverse\u003C\u002Fb\u003E изменяют угол поворота элемента соответственно касательной к траектории. И отличаются направлением этой касательной. У \u003Cb\u003Eauto \u003C\u002Fb\u003Eона направлена вперед, а у \u003Cb\u003Eauto-reverse\u003C\u002Fb\u003E назад\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fcs\u002Fbe\u002F99\u002Fcsbe99ve3bjyfbdtd9mnogzw4i0.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fcs\u002Fbe\u002F99\u002Fcsbe99ve3bjyfbdtd9mnogzw4i0.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EКак управлять перемещением по траектории?\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТраектория представляет собой кривую, у которой есть начало и есть конец, эти точки обозначаются числами 0 и 1 соответственно. Любое положение на кривой можно определить числом в этом диапазоне. Перечисляя точки в атрибуте \u003Cb\u003EkeyPoints\u003C\u002Fb\u003E, можно определить любой вид движения по траектории. Но этого недостаточно, чтобы управлять перемещением, для этого нужна целая система из атрибутов. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля начала нужно установить \u003Cb\u003EcalcMode \u003C\u002Fb\u003Eв положение \u003Cb\u003Elinear \u003C\u002Fb\u003Eили \u003Cb\u003Espline\u003C\u002Fb\u003E. В отличие от других тегов, \u003Cb\u003EanimateMotion \u003C\u002Fb\u003Eпо умолчанию имеет значение \u003Cb\u003Epaced \u003C\u002Fb\u003E(почему-то анимация не хочет работать в этом режиме). Также необходимо указать атрибут \u003Cb\u003EkeyTimes\u003C\u002Fb\u003E. Только выполнив эти действия, анимация заработает как надо\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"xml\"\u003E&lt;animateMotion keyPoints=\"0.5; 1; 0; 0.5\" keyTimes=\"0; 0.25; 0.75; 1\" calcMode=\"linear\" ...\u002F\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfont color=\"#808080\"\u003E\u003Ci\u003EВ примере анимация стартует в середине траектории, движется до конца, затем в начало, и заканчивает движение опять в середине\u003C\u002Fi\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EP.S.\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРазбираясь с \u003Cb\u003EanimateMotion\u003C\u002Fb\u003E, я наткнулся на информацию, что то же самое можно, вроде как, сделать на CSS. Но под конец написания статьи у меня не было ни сил, ни желания с этим разбираться. Для энтузиастов я просто оставлю \u003Ca href=\"https:\u002F\u002Fdrafts.fxtf.org\u002Fmotion-1\u002F#motion-paths-overview\"\u003Eссылку \u003C\u002Fa\u003Eна документацию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E\u003Ch2\u003EОсобая благодарность\u003C\u002Fh2\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Fbhudh\u002F\" class=\"user_link\"\u003EBhudh\u003C\u002Fa\u003E за огромную работу по коррекции статьи\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"Animation"},{"titleHtml":"SVG"},{"titleHtml":"CSS"},{"titleHtml":"SMIL"},{"titleHtml":"Анимация"},{"titleHtml":"Векторная графика"},{"titleHtml":"Морфинг"},{"titleHtml":"Adobe Illustrator"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F450924\u002F82c30c7aa5beb65f3fa0dc6ef6b83eea\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F450924\u002F82c30c7aa5beb65f3fa0dc6ef6b83eea\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F450924\\\u002F\"},\"headline\":\"Все об SVG анимации\",\"datePublished\":\"2019-05-07T22:22:26+03:00\",\"dateModified\":\"2019-12-20T18:41:31+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Артем\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F450924\\\u002F#post-content-body\",\"about\":[\"h_vector_graphics\",\"h_animation\",\"f_design\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fmf\\\u002Flw\\\u002Fhk\\\u002Fmflwhklk-vn1e_k1d-qw7am4toy.jpeg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fz1\\\u002Fai\\\u002Fjt\\\u002Fz1aijt1cwfmvoca1_saqybvspts.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fh_\\\u002Fqk\\\u002Faz\\\u002Fh_qkaz2ecvnd05teg-mejqmqeza.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fra\\\u002Fww\\\u002Fyo\\\u002Frawwyon0df65mityb6jgadmkkss.jpeg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fwc\\\u002Frd\\\u002Fne\\\u002Fwcrdneum5oobpjobqb_04k9d4co.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F4e\\\u002Fr4\\\u002Flw\\\u002F4er4lwtbbmhiiqujreog2ibhe84.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fno\\\u002Fuu\\\u002Frm\\\u002Fnouurmqxgsflfyhgs2ctpoweavi.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F57\\\u002F4e\\\u002Fpo\\\u002F574epocgz3wx30rkg23lsio-njs.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fza\\\u002Fc8\\\u002Fpf\\\u002Fzac8pfuwceeupcjc_siznyrikig.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F1t\\\u002Fbf\\\u002Fdu\\\u002F1tbfduraytzbzk1sdyy1im7fuya.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fbd\\\u002Frv\\\u002Ffg\\\u002Fbdrvfg6rpliplqi9lm38j4spxuk.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fxi\\\u002Fyj\\\u002F_j\\\u002Fxiyj_jiwt5efedcpx2dq5m6lmy8.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Flu\\\u002F5f\\\u002F8c\\\u002Flu5f8cfqpytvl_t237aelpymcs4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fcn\\\u002Fho\\\u002Fyy\\\u002Fcnhoyy-clqyjniu5tzdv8rq2q40.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F6q\\\u002Fz4\\\u002Fmg\\\u002F6qz4mgrsrt9mzwwdr_43jinpiow.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F37\\\u002Ftf\\\u002Fo3\\\u002F37tfo3-eh9bkuqb8sfkg6fjfbjo.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fak\\\u002Fyq\\\u002Fft\\\u002Fakyqftetegvuxzmjmgu-44cl8ik.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fxo\\\u002F5p\\\u002Ftc\\\u002Fxo5ptc85zmlzdmp0o6sa30e23vc.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fkw\\\u002Fit\\\u002Fp5\\\u002Fkwitp5mc31z-4okv11j2eajegjq.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fzd\\\u002Fgn\\\u002Ff6\\\u002Fzdgnf6gceepyjgmr00_tibvogqe.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F1h\\\u002Fxs\\\u002Fmb\\\u002F1hxsmb0wb5owhwv2tsceledtwho.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F9o\\\u002Fp-\\\u002Fgx\\\u002F9op-gxlp5gy9krrdczge78qnv8k.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F8b\\\u002Fq1\\\u002Fua\\\u002F8bq1uasta8qkatvp8h9nirs9qmm.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fnx\\\u002Fuv\\\u002Fig\\\u002Fnxuvigflycaiwg7zblsmd2cmqiq.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Ftt\\\u002Fkh\\\u002Ftv\\\u002Fttkhtvmfbm-qymlq4r_a40ovg9o.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fcs\\\u002Fbe\\\u002F99\\\u002Fcsbe99ve3bjyfbdtd9mnogzw4i0.png\"]}","metaDescription":"В данной статье я хочу осветить тонкости работы с SVG-графикой, SVG анимацию (в том числе и path), проблемы и способы их решения, а также разнообразные подводные камни, коих в SVG огромное множество....","mainImageUrl":null,"amp":false,"customTrackerLinks":[]},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"vector_graphics,animation"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"technotext":{"nominationsList":[]},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.92df6f6d.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="https://habr.com/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
