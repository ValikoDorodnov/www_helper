<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <meta name="referrer" content="unsafe-url">
  <title>Микросервисы глазами аналитика / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.92df6f6d.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.4de4e95a.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.2822d469ec31a56409ac330bbcf7fcbf.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/583136\/"},"headline":"Микросервисы глазами аналитика","datePublished":"2021-10-12T23:33:17+03:00","dateModified":"2021-10-14T14:33:23+03:00","author":{"@type":"Person","name":"Татьяна Сальникова"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лу...","url":"https:\/\/habr.com\/ru\/post\/583136\/#post-content-body","about":["h_analysis_design","h_microservices","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/583136\/db5371f5ff40ae619ce0a475d1d64612\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/9b0\/3a3\/be2\/9b03a3be23d156d699df946b85d275bc.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/361\/b10\/93b\/361b1093bc44209d8c6197a167528e7d.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/024\/926\/60b\/02492660b6b06a17e54c7346e5db6384.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/687\/86d\/600\/68786d60018dfb6ef3f6523e5c609ea7.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/abf\/9bf\/8f5\/abf9bf8f56313b5aeed3eb5ad07713eb.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/bc6\/d5f\/09b\/bc6d5f09b5f9d50af26c8bfbd25e3df2.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/0bc\/3ce\/3a7\/0bc3ce3a794b1536e709999c29c145c3.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/534\/be8\/306\/534be8306d2f6c07ea6fbf1ec92add38.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/de4\/d63\/ae0\/de4d63ae0127ea312023adae0e101b32.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/906\/0ce\/bb5\/9060cebb54441d858d077d2f5bd41b19.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/9a4\/8f2\/4d3\/9a48f24d3057d6bc6787f93511dd33ac.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/27c\/444\/2fd\/27c4442fd0210d2e17d95fc4ce19aadd.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/392\/e8e\/7c5\/392e8e7c5e2a00a2d5323928e0dda89e.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/778\/c08\/388\/778c08388ca8aa9e12f8db426d2e1f6b.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/42d\/33a\/482\/42d33a48269cc5264f8c9296e60a54e5.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/5b2\/f8d\/efa\/5b2f8defab517283ba76a4d192368f9f.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/5c7\/2db\/de2\/5c72dbde2eb96145e05d08c1d52a9f8f.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/409\/9d6\/e8d\/4099d6e8d5cda8aaa681a826aafcecc1.jpg"]}</script>
  <script src="https://www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.64.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Микросервисы глазами аналитика" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Микросервисы глазами аналитика" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Микросервисы глазами аналитика" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лучшие практики использования..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лучшие практики использования..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лучшие практики использования..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лучшие практики использования..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лучшие практики использования..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/00d/8a4/146/00d8a4146bcf2db509534ba3ac0085c0.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/00d/8a4/146/00d8a4146bcf2db509534ba3ac0085c0.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/00d/8a4/146/00d8a4146bcf2db509534ba3ac0085c0.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/00d/8a4/146/00d8a4146bcf2db509534ba3ac0085c0.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/00d/8a4/146/00d8a4146bcf2db509534ba3ac0085c0.png?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="583136" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-12T20:33:17.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/post/583136/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="микросервисы, микросервисная архитектура, требования, аналитик, системный анализ">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/583136/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="index.html.1.114.html" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/00d/8a4/146/00d8a4146bcf2db509534ba3ac0085c0.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/583136/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="https://habr.com/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="https://habr.com/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="https://habr.com/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="https://habr.com/ru/flows/all" class="tm-main-menu__item">
        Все потоки
      </a> <a href="https://habr.com/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="https://habr.com/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="https://habr.com/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="https://habr.com/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="https://habr.com/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="https://habr.com/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="https://habr.com/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="https://habr.com/ru/users/TatyanaSalnikova/" title="TatyanaSalnikova" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v25.4b679db1.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/TatyanaSalnikova/" class="tm-user-info__username">
      TatyanaSalnikova
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-12T20:33:17.000Z" title="2021-10-12, 23:33">12  октября  2021 в 23:33</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Микросервисы глазами аналитика</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/analysis_design/" class="tm-article-snippet__hubs-item-link"><span>Анализ и проектирование систем</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/microservices/" class="tm-article-snippet__hubs-item-link"><span>Микросервисы</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label tm-article-snippet__label_variant-technotext2021"><a href="https://habr.com/ru/technotext/">
        ✏️ Технотекст 2021
      </a></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.</p><p>Статья не раскрывает лучшие практики использования микросервисов и не разоблачает их излишнюю популярность. Основная цель - описать технологию и процесс работы с ней с точки зрения системного аналитика.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/9b0/3a3/be2/9b03a3be23d156d699df946b85d275bc.png" width="733" height="412" data-src="https://habrastorage.org/getpro/habr/upload_files/9b0/3a3/be2/9b03a3be23d156d699df946b85d275bc.png"/><figcaption></figcaption></figure><p>Если Ваш опыт отличается от того, что указано в статье - пишите комментарии, будет полезно. Ведь систем на микросервисах становится все больше, а в школе к такому не готовят.</p><details class="spoiler"><summary>Содержание</summary><div class="spoiler__content"><p><a href="index.html.1.114.html#1" rel="noopener noreferrer nofollow">1. Что такое система с MSA</a></p><p>   <a href="index.html.1.114.html#1.1" rel="noopener noreferrer nofollow">1.1. Выявление микросервисов</a></p><p>   <a href="index.html.1.114.html#1.2" rel="noopener noreferrer nofollow">1.2. Микросервисы и бизнес-процессы</a></p><p>   <a href="index.html.1.114.html#1.3" rel="noopener noreferrer nofollow">1.3. Интеграции</a></p><p>   <a href="index.html.1.114.html#1.4" rel="noopener noreferrer nofollow">1.4. Отчеты и мониторинг</a></p><p><a href="index.html.1.114.html#2" rel="noopener noreferrer nofollow">2. Что происходит с аналитиком</a></p><p>   <a href="index.html.1.114.html#2.1" rel="noopener noreferrer nofollow">2.1. Процесс разработки системы с MSA</a></p><p>   <a href="index.html.1.114.html#2.2" rel="noopener noreferrer nofollow">2.2. Задачи аналитика</a></p><p>   <a href="index.html.1.114.html#2.3" rel="noopener noreferrer nofollow">2.3. Возможные проблемы</a></p><p>   <a href="index.html.1.114.html#2.4" rel="noopener noreferrer nofollow">2.4. Плюсы MSA для аналитика</a></p><p><a href="index.html.1.114.html#3" rel="noopener noreferrer nofollow">Итог</a></p></div></details><a class="anchor" name="1" id="1"></a><h2>1. Что такое система с MSA</h2><blockquote><p>"Микросервисная архитектура - это стиль проектирования, который разбивает приложение на отдельные сервисы с разными функциями. &lt;...> В микросервисной архитектуре единицей модульности являются сервисы. Сервисы обладают API, которые служат непроницаемым барьером." К. Ричардсон "Микросервисы. Паттерны разработки и рефакторинга"</p></blockquote><p>Система с MSA - сильная и независимая. Согласно задумке, она может не заботиться о масштабируемости, использовать разные стеки технологий и легко исправлять свои ошибки. Ее подход позволяет быстро развиваться и быть гибкими в поддержке.</p><p>На практике это все может оказаться запутавшейся в себе и своих связях, перегруженной и довольно хрупкой конструкцией. Все зависит от способа приготовления и места приложения.</p><p>То есть, как неоднократно писали (<a href="https://habr.com/ru/post/311208/" rel="noopener noreferrer nofollow">раз</a>, <a href="https://habr.com/ru/post/560542/" rel="noopener noreferrer nofollow">два</a>, <a href="https://habr.com/ru/company/southbridge/blog/508124/" rel="noopener noreferrer nofollow">три</a>), MSA полезна не везде. Решение о ее использовании не тривиально, такие системы сложны для понимания и требуют особого внимания к своей архитектуре.</p><figure class=""><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/361/b10/93b/361b1093bc44209d8c6197a167528e7d.png" width="496" height="371" data-src="https://habrastorage.org/getpro/habr/upload_files/361/b10/93b/361b1093bc44209d8c6197a167528e7d.png"/><figcaption></figcaption></figure><a class="anchor" name="1.1" id="1.1"></a><h3>1.1. Выявление микросервисов</h3><p>Вы спросите меня, что такое микросервисы? Я отвечу, что это, как правило, небольшие сервисы.</p><p>И вы уйдете, так и не узнав, что каждый реализует свою функцию, у каждого своя база данных и может быть свой стек технологий.</p><p>Самый сложный, вероятно, вопрос: как выделять микросервисы? Правильного ответа или алгоритма для этого нет. Все зависит от домена и того, какие проблемы вы решаете.</p><p><a href="https://microservices.io/patterns/index.html" rel="noopener noreferrer nofollow">В главной шпаргалке по MSA</a> в блоке Декомпозиция есть пополняемый перечень используемых подходов.</p><p>Давайте рассмотрим на примере способ декомпозиции по поддомену.</p><p>Этот подход основан на domain-driven design (DDD). То есть необходимо выявить поддомены системы, у каждого из которых своя доменная модель. Далее поддомены конвертируются в микросервисы.</p><p>Допустим, мы делаем систему для заказа продуктов в небольшом магазине рядом с домом. У нас есть пользовательские истории:</p><ul><li><p>заказа (order);</p></li><li><p>оплаты (payment);</p></li><li><p>доставки товара (delivery).</p></li></ul><p>Для обеспечения этих процессов необходимо где-то хранить информацию о наличии и количестве продуктов (stock). А также вести финансовый и бухгалтерский учет всех операций (accounting).</p><p>Опираясь на доменную модель, мы можем выделить следующие микросервисы:</p><ul><li><p>Orders - для сбора, хранения и обработки заказов;</p></li><li><p>Payment - для проведения продаж;</p></li><li><p>Delivery - для хранения информации о передаче в доставку (этот сервис будет взаимодействовать с внешней системой службы доставки);</p></li><li><p>Stock - для хранения информации об остатках товаров в магазине и их характеристиках;</p></li><li><p>Accounting - для хранения бухгалтерских и учетных данных (возможно это просто адаптер для нашей 1С).</p></li></ul><p>Но это не единственный вариант. При декомпозиции стоит внимательно изучить бизнес-процессы и пользовательские требования, а также варианты развития системы.</p><p>Например, если конечный пользователь заказывает и оплачивает продукты во внешней системе партнера (какой-нибудь продуктовый маркетплейс). В наш магазин просто приходит информация о необходимости собрать и отправить заказ. Оплату партнер отправляет нам раз в месяц суммарно за все сделанные заказы, с учетом возвратов и пр. В этом случае отдельный микросервис Payment пока что не нужен.</p><hr/><p>Теперь, когда мы выделили основные микросервисы для нашего домена, давайте посмотрим, что с ними происходит в рамках системы и как при этом работают бизнес-процессы.</p><a class="anchor" name="1.2" id="1.2"></a><h3>1.2. Микросервисы и бизнес-процессы</h3><p>Бизнес-процессы в системе с MSA обычно проходят через несколько микросервисов.</p><p>Вернемся к нашему примеру заказа товаров через интернет. С учетом выявленных микросервисов процесс будет примерно таким:</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/024/926/60b/02492660b6b06a17e54c7346e5db6384.png" width="1806" height="669" data-src="https://habrastorage.org/getpro/habr/upload_files/024/926/60b/02492660b6b06a17e54c7346e5db6384.png"/><figcaption></figcaption></figure><p>Каждый этап бизнес-процесса обеспечивается отдельным сервисом. Выглядит симпатично и довольно удобно, согласитесь. Ошибки и доработки легко локализуются, у каждого микросевиса своя простая и понятная всем обязанность.</p><p>Но что происходит, когда в системе работает сразу несколько бизнес-процессов?</p><p>Скорее всего, эти процессы где-то используют одни и те же данные, а значит будут обращаться к одним и тем же микросервисам, или создавать для себя реплики и разбираться с согласованностью.</p><p>Ниже в разделе "<a href="index.html.1.114.html#2.1" rel="noopener noreferrer nofollow">Процесс разработки системы с MSA</a>" еще напишу про варианты развития событий в такой ситуации. Но так или иначе стоит учитывать, что разные процессы могут использовать одни и те же микросервисы, причем, бывает, на разных этапах и по-разному.</p><p>Например, мы можем в системе для заказа товаров через интернет также проводить процесс продажи товаров непосредственно в магазине. В новом процессе сервис Stock появляется только после оплаты. В отличие от заказа через интернет, где есть предварительная проверка наличия товара.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/687/86d/600/68786d60018dfb6ef3f6523e5c609ea7.png" width="1205" height="703" data-src="https://habrastorage.org/getpro/habr/upload_files/687/86d/600/68786d60018dfb6ef3f6523e5c609ea7.png"/><figcaption></figcaption></figure><p>Для ускорения и упрощения реализации бизнес-процессов в MSA иногда создают отдельные управляющие микросервисы и/или используют инструменты автоматизации.</p><h4>1.2.1. Управляющие микросервисы</h4><p>Иногда имеет смысл создать управляющий микросервис, который следит за прохождением процессов через разные сервисы и внешние системы.</p><p>В управляющем микросервисе будет происходить вызов разных MS в нужной последовательности. А также, возможно, какая-то промежуточная логика, характерная для конкретного процесса.</p><p>Так, для обработки продажи товара в магазине можно создать управляющий микросервис Processes. Он сначала вызовет MS Payment для проведения оплаты, затем MS Stock для изменения остатков товара и MS Accounting для фиксации финансовых операций в отчетности.</p><figure class=""><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/abf/9bf/8f5/abf9bf8f56313b5aeed3eb5ad07713eb.png" width="425" height="236" data-src="https://habrastorage.org/getpro/habr/upload_files/abf/9bf/8f5/abf9bf8f56313b5aeed3eb5ad07713eb.png"/><figcaption></figcaption></figure><h4>1.2.2. Платформы BPM</h4><p>В управляющих микросервисах удобно использовать движки для автоматизации процессов, например Camunda BPM. Такие инструменты позволяют в графическом виде задавать последовательность действий, проверки и условия переходов. При запуске процесса платформа самостоятельно выполняет все описанные шаги.</p><p>Вернемся к нашему примеру продажи в магазине:</p><p>При реализации этого процесса через Camunda необходимо сделать его BPMN-схему (например, в Camunda Modeler):</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/bc6/d5f/09b/bc6d5f09b5f9d50af26c8bfbd25e3df2.png" alt="Процесс OfflineSale в Camunda BPM" title="Процесс OfflineSale в Camunda BPM" width="2109" height="711" data-src="https://habrastorage.org/getpro/habr/upload_files/bc6/d5f/09b/bc6d5f09b5f9d50af26c8bfbd25e3df2.png"/><figcaption>Процесс OfflineSale в Camunda BPM</figcaption></figure><p>Каждый прямоугольник на схеме ссылается на код с логикой:</p><ol><li><p>Payment Process - проведение оплаты вызовом MS Payment.</p><ol><li><p>Error Message - если оплата не состоялась по какой-то причине, то происходит отправка сообщения об ошибке и завершение процесса.</p></li></ol></li><li><p>Change Stock - изменение количества товара в MS Stock.</p></li><li><p>Change Accounting - обновление фин. отчетности в MS Accounting.</p></li></ol><p>При инициации продажи MS Processes запустит этот процесс и Camunda выполнит каждый этап в заданной последовательности.</p><p>Более сложные схемы могут включать разветвления, таймеры, подпроцессы и пр.</p><p>Удобно, что уже описанные элементы одного процесса легко переиспользуются в другом процессе. Также небольшие изменения можно реализовывать без программирования.</p><hr/><p>Мы рассмотрели, как выделять микросервисы и как их складывать в нужном порядке для реализации процессов. Теперь давайте посмотрим на способы взаимодействия микросервисов с друг другом и внешним миром.</p><a class="anchor" name="1.3" id="1.3"></a><h3>1.3. Интеграции</h3><p>Как вы, наверное, уже догадались, система с MSA - это тот еще Вавилон, где интегрируются все со всеми любыми мыслимыми способами.</p><p>Помимо своей базы данных у каждого микросервиса еще и свой API, любого протокола и вероисповедания. Вот он, век индивидуализации, во всей своей красе.</p><h4>1.3.1. Взаимодействие между микросервисами</h4><p>Нет каких-то правил или ограничений для формата интеграций между микросервисами. В рамках одной системы используют разные протоколы и подходы, синхронное и асинхронное взаимодействие.</p><p>Обычно архитекторы отдают предпочтение REST+JSON/GraphQL/gRPC и обмену сообщениями с помощью брокера типа Kafka и MQ Rabbit. Итоговый выбор инструментов зависит от требований и возможностей команды.</p><p>Рассмотрим возможную последовательность вызовов для реализации процесса продажи товара в магазине из нашего примера:</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/0bc/3ce/3a7/0bc3ce3a794b1536e709999c29c145c3.png" width="3054" height="1670" data-src="https://habrastorage.org/getpro/habr/upload_files/0bc/3ce/3a7/0bc3ce3a794b1536e709999c29c145c3.png"/><figcaption></figcaption></figure><p>MS Processes вызывает MS Payment для инициации оплаты и ждет от него обратную связь, чтобы продолжить свою работу. После получения ответа, происходит аналогичный синхронный вызов к MS Stock для списания товаров. Далее в сообщении для брокера уходит информация для MS Accounting, реализуя асинхронное взаимодействие. И MS Processes завершает свою работу, совершенно не беспокоясь, получил MS Accounting данные о покупке или нет.</p><p>Стоит учитывать, что каждый микросервис может внезапно отказать и у нас таких ненадежных ребят много. То есть доступность в MSA на самом деле так себе. Многие брокеры гарантируют доставку, и никто не висит "на линии", ожидая ответа. Поэтому рекомендуется по возможности использовать асинхронное взаимодействие между сервисами.</p><p>Но в любом случае всегда надо продумывать сценарии-"предохранители": то есть писать отдельный код на случай отказа каждого звена в процессе.</p><h4>1.3.2. Интеграции с другими сервисами</h4><p>Внешние сервисы, если им повезет, взаимодействуют с MSA-системой через API-шлюзы.</p><p>По К. Ричардсону API-шлюзы занимаются:</p><ul><li><p>объединением API для запросов к нескольким микросервисам;</p></li><li><p>распределением запросов по нужным микросервисам;</p></li><li><p>преобразованием разных протоколов интеграций (как микросервисов, так и внешних систем);</p></li><li><p>реализацией граничных функций вроде аутентификации.</p></li></ul><p>Вполне вероятно, что для каждого фронта или внешней системы будет свой API-шлюз. Так как это соответствует духу независимости и позволяет командам не убить друг друга.</p><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/534/be8/306/534be8306d2f6c07ea6fbf1ec92add38.png" width="2272" height="1748" data-src="https://habrastorage.org/getpro/habr/upload_files/534/be8/306/534be8306d2f6c07ea6fbf1ec92add38.png"/><figcaption></figcaption></figure><p>В нашем примере в качестве API-шлюза вполне может выступать MS Processes. Однако при более сложных процессах и интеграциях бывает проще и надежнее их разделить. Например, если у нас есть свой фронт и внешний сервис, которые интегрируются по разным протоколам и поддерживаются разными командами. Но внутри приложения обе интеграции запускают один и тот же процесс.</p><p>Как правило внешним системам шлюз предоставляет REST+JSON API, так как в нему все привыкли и считают простым для интеграции. Но можно использовать и GraphQL, который позволяет клиенту указывать в запросе, какие именно данные нужно вернуть. Этот подход помогает при работе с несколькими клиентами, у каждого из которых свои цели и пристрастия.</p><p>Можно использовать и другие инструменты для разработки API-шлюзов, можно вообще взять готовый продукт, например AWS API Gateway. Главное - не забыть договориться со всеми потребителями нашего API.</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/de4/d63/ae0/de4d63ae0127ea312023adae0e101b32.jpg" width="454" height="255" data-src="https://habrastorage.org/getpro/habr/upload_files/de4/d63/ae0/de4d63ae0127ea312023adae0e101b32.jpg" data-blurred="true"/><figcaption></figcaption></figure><a class="anchor" name="1.4" id="1.4"></a><h3>1.4. Отчеты и мониторинг</h3><p>Итак, у нас есть микросервисы и их интеграции, которые реализуют бизнес-процессы. Для нормального функционирования за этим всем нужно пристально наблюдать, выявлять эффективность и слабые места. И здесь тоже есть свои особенности, связанные с архитектурным подходом.</p><p>Нельзя просто так взять и одним запросом к БД собрать сквозной отчет по процессу. Для этого нужен специальный сервис, который будет собирать копии нужных таблиц из всех микросервисов. И только на его основе специально обученные люди будут создавать красивые картинки. В общем, чтобы заказчик мониторил бизнес-показатели, без DWH и BI-системы не обойтись.</p><p>Также сложновато без специальных инструментов, типа Kibana, посмотреть, где сломался объединяющий несколько API процесс. И, конечно, для этого необходимо продумывать систему логирования: что, как и когда каждый микросервис будет писать в логи.</p><p>И еще желательно, чтобы кто-то периодически тыкал во все ваши микросервисы палочкой, проверяя их доступность. Этот механизм тоже требует отдельных сервисов и проработки их логики.</p><p>Волшебство здесь в том, что все эти прибамбасы должны быть согласованы на уровне компании и аккуратно выполняться всеми командами, учитывая интересы всех и вся. Но это уже совсем другая история.</p><hr/><p>Подводя предварительный итог можно сказать, что на каждый <s>чих</s> аспект системы нужен отдельный микросервис, интеграция и, возможно, отдельная технология. Это придает определенное своеобразие работе с MSA, в том числе задачам аналитика.</p><a class="anchor" name="2" id="2"></a><h2>2. Что происходит с аналитиком</h2><p>Если коротко, то аналитик на проектах с MSA устраняет неопределенность. Впрочем, как и везде.</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/906/0ce/bb5/9060cebb54441d858d077d2f5bd41b19.jpg" width="340" height="228" data-src="https://habrastorage.org/getpro/habr/upload_files/906/0ce/bb5/9060cebb54441d858d077d2f5bd41b19.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Есть десятки микросервисов и их интеграций, разные технологии и архитектурные паттерны. Процессы, которые действуют по-разному и имеют разные цели, но пересекаются с друг другом. В такой ситуации командам очень сложно разобраться, что, куда и зачем передается, как проходит процесс полностью, что на него может повлиять, на что он может повлиять.</p><p>То есть здесь кому-то очень важно уметь:</p><ul><li><p>приводить хаос в порядок;</p></li><li><p>выявлять требования;</p></li><li><p>проектировать интеграцию;</p></li><li><p>понимать ключевые и потенциально опасные части процессов;</p></li><li><p>контролировать знания команды о системе;</p></li><li><p>доносить до бизнеса возможности и ограничения продукта.</p></li></ul><p>В общем, для бизнеса и команды аналитик может быть более чем полезен в микросервисной ситуации. Осталось понять, как аналитику не лопнуть от такого счастья.</p><a class="anchor" name="2.1" id="2.1"></a><h3>2.1. Процесс разработки системы с MSA</h3><p>Часто команды выделяются на продукт или продуктовое направление.</p><p>В нашем примере могло бы быть такое разделение:</p><ul><li><p>Команда А - разрабатывает все, что связано с процессом оффлайн продаж в магазине.</p></li><li><p>Команда Б - делает процесс онлайн-продаж и все соответсвующие задачи.</p></li></ul><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/9a4/8f2/4d3/9a48f24d3057d6bc6787f93511dd33ac.png" width="2381" height="1218" data-src="https://habrastorage.org/getpro/habr/upload_files/9a4/8f2/4d3/9a48f24d3057d6bc6787f93511dd33ac.png"/><figcaption></figcaption></figure><p>Микросервисы Payment, Stock и Accounting используются в обоих процессах.</p><p>Каждый общий сервис может дорабатываться только конкретной командой, возможно, это будет третья Команда В. Но это может стать узким местом и замедлить разработку. Так как другим командам придется ждать, пока у команды-владельца сервиса дойдет очередь до их задачи.</p><p>Еще можно дублировать общие микросервисы, не смешивая разные процессы. То есть у обеих команд будут свои Payment, Stock и Accounting. Таким образом каждая команда сможет дорабатывать и развивать их исключительно для целей своего продукта. В этом случае придется строго следить за согласованностью данных. И смириться с тем, что вы будете дублировать большинство доработок.</p><p>Общие микросервисы также могут дорабатываться сразу обеими командами. Но тогда необходимо, чтобы кто-то решал конфликты интересов, обеспечивал обратную совместимость и отслеживал целостность и независимость каждого такого микросервиса. Хорошо, если для этого назначается конкретная команда и конкретные люди, которые будут делать вдумчивое ревью каждой доработки.</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/27c/444/2fd/27c4442fd0210d2e17d95fc4ce19aadd.jpg" width="454" height="348" data-src="https://habrastorage.org/getpro/habr/upload_files/27c/444/2fd/27c4442fd0210d2e17d95fc4ce19aadd.jpg" data-blurred="true"/><figcaption></figcaption></figure><a class="anchor" name="2.2" id="2.2"></a><h3>2.2. Задачи аналитика</h3><p>Для адекватного анализа необходимо знать все, что как-либо затрагивает или может затронуть твой продукт. То есть аналитикам на проектах с MSA необходимо понимать:</p><ul><li><p>свой продуктовый процесс;</p></li><li><p>логику работы всех задействованных в продукте микросервисов и механизмы их взаимодействий;</p></li><li><p>процессы продуктов, которые используют те же микросервисы;</p></li><li><p>внешние интеграции, их механизм и логику.</p></li></ul><p>Рассмотрим пример, когда надо добавить в метод создания заказа новое поле discount. В этом поле содержится размер скидки, которую интернет-магазин предоставил покупателю.</p><p>Для реализации этого небольшого изменения необходимо:</p><ol><li><p>Понять, есть ли в системе подобное поле для скидок, которые предоставляет наш магазин. Если есть, то проработать их взаимодействие и исключить путаницу.</p></li><li><p>Добавить поле в API-шлюзе для внешних систем.</p></li><li><p>Добавить поле в API MS Order, его логику и, возможно, БД.</p></li><li><p>Понять, необходимо ли передавать новое поле в MS Payment. Или достаточно изменить логику расчета цены товара при передаче данных о заказе.</p></li><li><p>Обновить публикуемые сообщения, связанные с созданием заказа. Определить, какие еще сервисы должны быть оповещены о предоставлении скидки через брокер сообщений (например, MS Accounting).</p></li><li><p>Добавить в MS Accounting новое поле и логику его обработки.</p></li><li><p>Продумать, что делать, если на любом из этапов случится сбой (транзакций на весь процесс нет в силу разных БД у микросервисов).</p></li><li><p>Узнать, как этот показатель должен отражаться в бизнес-отчетах и добавить его в DWH/BI (если повезет, через специально обученных людей).</p></li></ol><figure class="full-width "><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/392/e8e/7c5/392e8e7c5e2a00a2d5323928e0dda89e.png" width="2926" height="1485" data-src="https://habrastorage.org/getpro/habr/upload_files/392/e8e/7c5/392e8e7c5e2a00a2d5323928e0dda89e.png"/><figcaption></figcaption></figure><p>Бизнес-требования и функционал системы определяют, в каких микросервисах, API и БД должны появиться поле и логика его обработки. То есть разработчик с этим не подскажет. А для заказчика это будет "вам нужно всего лишь добавить одно поле".</p><p>Систему с MSA не получится рассматривать как чёрный ящик, где аналитик определяет требования к результату "на выходе". Потому что "на выходе" тут - это на границе каждого микросервиса и все эти границы надо проектировать и определять.</p><p>Таким образом, с точки зрения анализа систему с MSA можно рассматривать как десятки небольших систем и интеграций между ними. То есть задачи схожи с работой над любой интеграцией. Но есть один нюанс - интеграций много и они меняются при каждой доработке, вслед за малейшим изменением логики или данных.</p><a class="anchor" name="2.3" id="2.3"></a><h3>2.3. Возможные проблемы</h3><p>Обозначу основные проблемы, с которыми довелось столкнуться, в порядке убывания бесячести.</p><h4>2.3.1. Ничего не понятно</h4><p>Многообразие сервисов, интеграций и технологий со стороны может выглядеть как запутанный клубок разных проводов. И чтобы вытащить свою зарядку для телефона, приходится распутывать LAN, провод от лампочки, чей-то переходник и Ктулху знает что еще.</p><p>Но в отличие от проводов, с микросервисами часто еще и не понятно, как их вообще распутывать.</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/778/c08/388/778c08388ca8aa9e12f8db426d2e1f6b.jpg" width="454" height="340" data-src="https://habrastorage.org/getpro/habr/upload_files/778/c08/388/778c08388ca8aa9e12f8db426d2e1f6b.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Можно читать код. И мы, например, поймем, что нотификация отправляется при условии comission= true. А почему так происходит - не узнаем. И тем более не узнаем, что где-то в другом конце системы при comission= false отправляется другая нотификация.</p><p>Можно обращаться к гуру, которые все это делали и помнят. Только гуру, как известно, всегда заняты, потому что незаменимы. И скорее всего они что-то забыли или, что хуже, не знают о том, что они что-то забыли.</p><p>Мне видится, что единственный адекватный способ решить эту проблему - это создать культуру и паттерны ведения документации. Документации, которая описывает общую архитектуру, процессы, точки влияния и, главное, бизнес-требования, которые стоят за логикой работы сервисов. Можно воспользоваться моей <a href="https://habr.com/ru/post/549588/" rel="noopener noreferrer nofollow">памяткой</a>.</p><p>Это, конечно, сложная задача, потому что требует слаженной работы всех аналитиков, их координации и дисциплинированности. А также понимания со стороны руководства, что это необходимая работа. Если у меня когда-нибудь получится внедрить или хотя бы увидеть такую красоту в рамках всей системы - обязательно об этом напишу.</p><h4>2.3.2. "Чужие" доработки</h4><p>Это когда ничего не понятно, а потом раз - и становится еще непонятнее. Потому что другая команда что-то сделала в общем микросервисе. Другая команда молодец. А у вас что-то сломалось или не работает новый функционал, который, судя по документации, должен бы работать.</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/42d/33a/482/42d33a48269cc5264f8c9296e60a54e5.jpg" width="454" height="254" data-src="https://habrastorage.org/getpro/habr/upload_files/42d/33a/482/42d33a48269cc5264f8c9296e60a54e5.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Решение видится в совокупности факторов:</p><ul><li><p>повсеместное покрытие автотестами, что и так обязательно для MSA;</p></li><li><p>документирование всех изменений в едином пространстве ДО реализации (например, писать новые требования на общей странице и выделять их тегами со ссылкой на задачу, где эти требования будут реализованы);</p></li><li><p>обязательный этап анализа - проверка влияния доработки на другие процессы;</p></li><li><p>очень дружная и активная коммуникацией аналитиков.</p></li></ul><p>Документирование в таких объемах само по себе может стать проблемой, поэтому стоит посмотреть в сторону автоматизации. Так вы не будете тратить время хотя бы на таблички с API и БД. Но для этого придется поуговаривать разработчиков прикрутить какой-нибудь swagger2markup и выгрузку актуальных полей БД.</p><p>Ну или можно строго придерживаться правила "один микросервис - одна команда".</p><h4>2.3.3. Заказчику сложно</h4><p>Бизнес ничего не понимает сильнее, чем обычно. Откуда такие сроки, почему все сломалось, зачем вам этот GraphQL?</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/5b2/f8d/efa/5b2f8defab517283ba76a4d192368f9f.jpg" width="454" height="277" data-src="https://habrastorage.org/getpro/habr/upload_files/5b2/f8d/efa/5b2f8defab517283ba76a4d192368f9f.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Чтобы принимать решения по продукту, надо разбираться в работе системы. А значит и всех этих переплетениях процессов, о которых тут так много написано. Хорошо бы совместно с менеджерами составлять ту самую бизнес-документацию и поддерживать ее актуальность.</p><p>А еще производительность команды на микросервисах зависит от большого количества факторов. Да и задачи могу быть на самом деле не тем, чем кажутся. Тут уже аналитику надо придумать, как все эти сложности доступно объяснить. Можно попробовать пример с гномиками, как у <a href="https://www.youtube.com/watch?v=7EHlFbaME_U&amp;list=PL_XScYmjXxkcj_fsacjXWnYsKtTIWdQ2M&amp;index=6" rel="noopener noreferrer nofollow">Максима Цепкова</a>. Или показать на простом примере вроде добавления поля discount. И, опять же, если будут схемы и описания, можно просто тыкать пальцем - где и что вам нужно в итоге сделать для реализации этой "быстрой" доработки.</p><h4>2.3.4. Требуется много знаний</h4><p>На самом деле это не проблема, а возможность получить новые навыки и посмотреть на разные технологии.</p><p>Но начинать карьеру в такой обстановке - это, кажется, Спарта. Особенно если система обладает всеми проблемами из списка выше. Возможно, кураторство и планы индивидуального развития облегчат ситуацию.</p><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/5c7/2db/de2/5c72dbde2eb96145e05d08c1d52a9f8f.jpg" width="454" height="255" data-src="https://habrastorage.org/getpro/habr/upload_files/5c7/2db/de2/5c72dbde2eb96145e05d08c1d52a9f8f.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Помимо знаний о самой MSA, нужно быть готовым разобраться в принципах REST, брокеров сообщений и любом способе интеграции, который придет в голову вашему архитектору.</p><p>Возможно вас также затронут JWT, инстансы, балансировка, развертывание, анализ производительности, доступности и другие сложные слова.</p><p>Ну и совершенно не лишним будет стандартный набор аналитика из работы с требованиями, моделирования, написания понятной документации, БД и SQL и проектирования интеграций.</p><p>Очень рекомендую книгу Ричардсона "Микросервисы. Паттерны разработки и рефакторинга" - там про все понемногу и очень понятно объясняется.</p><a class="anchor" name="2.4" id="2.4"></a><h3>2.4. Плюсы MSA для аналитика</h3><p>Несмотря на все проблемы и сложности, работать с микросервисами мне понравилось. И вот почему:</p><ol><li><p>Во-первых, это интересно. Это как большой конструктор, из которого можно собирать разные процессы. Менять кубики местами и переворачивать нужными гранями для разных плоскостей. Если нравятся интеграции и копаться в технических аспектах - то вы по адресу.</p></li><li><p>Относительно легко добавлять новые продукты и функции. Для этого пишут новые микросервисы и не нужно беспокоиться о том, что новый код как-то сломает работающие процессы. И даже если вы правите уже работающие микросервисы, то отследить зависимости и влияние проще, чем в монолите.</p></li><li><p>Если вы знаете свои процессы, то скорее всего быстро сможете определить, в каком микросервисе у вас сбоит при ошибке. И так как микросервисы относительно простые - то исправить тоже будет несложно (наверное). И при обновлении можно выкатить только свой микросервис, не беспокоя соседей.</p></li><li><p>Скорее всего вы будете работать с профессионалами. Микросервисная архитектура создает вызовы для аналитиков, разработчиков, QA, DevOps и даже менеджеров. То есть все члены команды должны обладать определенным опытом и навыками для нормальной реализации этого подхода.</p></li><li><p>Как писала выше, работа с MSA - это возможность узнать много нового и поработать с разными технологиями. А значит и развиваться в любимом деле, вырасти как специалист и открыть для себя новые карьерные перспективы.</p></li><li><p>В системах с микросервисами аналитик бОльшую часть времени занимается именно анализом. На "неаналитические" задачи попросту не остается ресурса. Здесь аналитик по полной реализует свои профильные hard и soft скиллы.</p></li></ol><figure class=""><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/409/9d6/e8d/4099d6e8d5cda8aaa681a826aafcecc1.jpg" width="326" height="289" data-src="https://habrastorage.org/getpro/habr/upload_files/409/9d6/e8d/4099d6e8d5cda8aaa681a826aafcecc1.jpg" data-blurred="true"/><figcaption></figcaption></figure><a class="anchor" name="3" id="3"></a><h2>Итог</h2><p>Микросервисная архитектура - это много разных технологий, интеграций и возможностей для развития как систем, так и людей.</p><p>Работа на проекте с MSA подразумевает особый подход, определенные навыки и знания. Нужно разобраться в деталях процессов и технологий. Возможно, изучить что-то или придумать новую схему работы, взаимодействия с заказчиком и коллегами.</p><p>Все это вполне постижимо и действительно интересно, хоть поначалу и не совсем прозрачно.</p><p>Надеюсь, после этой статьи кому-то станет немного понятнее, что может скрываться за этими загадочными словами в вакансиях. И к чему готовиться, если у вашего техлида внезапно улучшилось настроение и загорелись глаза.</p></div></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D1%8B%5D" class="tm-tags-list__link">микросервисы</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BD%D0%B0%D1%8F%20%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%5D" class="tm-tags-list__link">микросервисная архитектура</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%5D" class="tm-tags-list__link">требования</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%5D" class="tm-tags-list__link">аналитик</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B9%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%5D" class="tm-tags-list__link">системный анализ</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/analysis_design/" class="tm-hubs-list__link">
    Анализ и проектирование систем
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/microservices/" class="tm-hubs-list__link">
    Микросервисы
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 14: ↑14 и ↓0</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-rating"></use></svg> <span title="Всего голосов 14: ↑14 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+14</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">19K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    124
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <DIV class="v-portal" style="display:none;"></DIV> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="https://habr.com/ru/users/TatyanaSalnikova/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v25.4b679db1.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 19 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    19
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Татьяна Сальникова</span> <a href="https://habr.com/ru/users/TatyanaSalnikova/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @TatyanaSalnikova
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Системный аналитик</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="https://habr.com/ru/post/583136/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v25.4b679db1.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 24 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner16638" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner16639" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section data-async-called="true" class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Работа</h2> <!----></header> <div class="tm-block__body"><div class="tm-vacancies-block__item"><a href="https://career.habr.com/vacancies/sistemnij_analitik" target="_blank" class="tm-vacancies-block__vacancy-title">
        Cистемный аналитик
      </a> <div class="tm-vacancies-block__vacancies-count">
        415
    вакансий
      </div></div></div> <footer class="tm-block__footer"><a href="https://career.habr.com/catalog" class="tm-block-extralink">
      Все вакансии
    </a></footer></section></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/post/583136/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr-register/?back=/ru/post/583136/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="https://habr.com/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="https://habr.com/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="https://habr.com/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2022 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"583136":{"id":"583136","timePublished":"2021-10-12T20:33:17+00:00","isCorporative":false,"lang":"ru","titleHtml":"Микросервисы глазами аналитика","leadData":{"textHtml":"\u003Cp\u003EРасскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.\u003C\u002Fp\u003E\u003Cp\u003EСтатья не раскрывает лучшие практики использования микросервисов и не разоблачает их излишнюю популярность. Основная цель - описать технологию и процесс работы с ней с точки зрения системного аналитика.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F00d\u002F8a4\u002F146\u002F00d8a4146bcf2db509534ba3ac0085c0.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F00d\u002F8a4\u002F146\u002F00d8a4146bcf2db509534ba3ac0085c0.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"technotext2021","data":{"url":"https:\u002F\u002Fcontenting.io\u002F2021.html"}}],"author":{"scoreStats":{"score":19,"votesCount":19},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1555687","alias":"TatyanaSalnikova","fullname":"Татьяна Сальникова","avatarUrl":null,"speciality":"Системный аналитик"},"statistics":{"commentsCount":24,"favoritesCount":124,"readingCount":19268,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"397","alias":"analysis_design","type":"collective","title":"Анализ и проектирование систем","titleHtml":"Анализ и проектирование систем","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EРасскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.\u003C\u002Fp\u003E\u003Cp\u003EСтатья не раскрывает лучшие практики использования микросервисов и не разоблачает их излишнюю популярность. Основная цель - описать технологию и процесс работы с ней с точки зрения системного аналитика.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9b0\u002F3a3\u002Fbe2\u002F9b03a3be23d156d699df946b85d275bc.png\" width=\"733\" height=\"412\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9b0\u002F3a3\u002Fbe2\u002F9b03a3be23d156d699df946b85d275bc.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЕсли Ваш опыт отличается от того, что указано в статье - пишите комментарии, будет полезно. Ведь систем на микросервисах становится все больше, а в школе к такому не готовят.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EСодержание\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003E\u003Ca href=\"#1\" rel=\"noopener noreferrer nofollow\"\u003E1. Что такое система с MSA\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#1.1\" rel=\"noopener noreferrer nofollow\"\u003E1.1. Выявление микросервисов\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#1.2\" rel=\"noopener noreferrer nofollow\"\u003E1.2. Микросервисы и бизнес-процессы\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#1.3\" rel=\"noopener noreferrer nofollow\"\u003E1.3. Интеграции\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#1.4\" rel=\"noopener noreferrer nofollow\"\u003E1.4. Отчеты и мониторинг\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"#2\" rel=\"noopener noreferrer nofollow\"\u003E2. Что происходит с аналитиком\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#2.1\" rel=\"noopener noreferrer nofollow\"\u003E2.1. Процесс разработки системы с MSA\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#2.2\" rel=\"noopener noreferrer nofollow\"\u003E2.2. Задачи аналитика\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#2.3\" rel=\"noopener noreferrer nofollow\"\u003E2.3. Возможные проблемы\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E   \u003Ca href=\"#2.4\" rel=\"noopener noreferrer nofollow\"\u003E2.4. Плюсы MSA для аналитика\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"#3\" rel=\"noopener noreferrer nofollow\"\u003EИтог\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Ca class=\"anchor\" name=\"1\" id=\"1\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003E1. Что такое система с MSA\u003C\u002Fh2\u003E\u003Cblockquote\u003E\u003Cp\u003E\"Микросервисная архитектура - это стиль проектирования, который разбивает приложение на отдельные сервисы с разными функциями. &lt;...\u003E В микросервисной архитектуре единицей модульности являются сервисы. Сервисы обладают API, которые служат непроницаемым барьером.\" К. Ричардсон \"Микросервисы. Паттерны разработки и рефакторинга\"\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EСистема с MSA - сильная и независимая. Согласно задумке, она может не заботиться о масштабируемости, использовать разные стеки технологий и легко исправлять свои ошибки. Ее подход позволяет быстро развиваться и быть гибкими в поддержке.\u003C\u002Fp\u003E\u003Cp\u003EНа практике это все может оказаться запутавшейся в себе и своих связях, перегруженной и довольно хрупкой конструкцией. Все зависит от способа приготовления и места приложения.\u003C\u002Fp\u003E\u003Cp\u003EТо есть, как неоднократно писали (\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F311208\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eраз\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F560542\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eдва\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fsouthbridge\u002Fblog\u002F508124\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eтри\u003C\u002Fa\u003E), MSA полезна не везде. Решение о ее использовании не тривиально, такие системы сложны для понимания и требуют особого внимания к своей архитектуре.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F361\u002Fb10\u002F93b\u002F361b1093bc44209d8c6197a167528e7d.png\" width=\"496\" height=\"371\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F361\u002Fb10\u002F93b\u002F361b1093bc44209d8c6197a167528e7d.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ca class=\"anchor\" name=\"1.1\" id=\"1.1\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E1.1. Выявление микросервисов\u003C\u002Fh3\u003E\u003Cp\u003EВы спросите меня, что такое микросервисы? Я отвечу, что это, как правило, небольшие сервисы.\u003C\u002Fp\u003E\u003Cp\u003EИ вы уйдете, так и не узнав, что каждый реализует свою функцию, у каждого своя база данных и может быть свой стек технологий.\u003C\u002Fp\u003E\u003Cp\u003EСамый сложный, вероятно, вопрос: как выделять микросервисы? Правильного ответа или алгоритма для этого нет. Все зависит от домена и того, какие проблемы вы решаете.\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fmicroservices.io\u002Fpatterns\u002Findex.html\" rel=\"noopener noreferrer nofollow\"\u003EВ главной шпаргалке по MSA\u003C\u002Fa\u003E в блоке Декомпозиция есть пополняемый перечень используемых подходов.\u003C\u002Fp\u003E\u003Cp\u003EДавайте рассмотрим на примере способ декомпозиции по поддомену.\u003C\u002Fp\u003E\u003Cp\u003EЭтот подход основан на domain-driven design (DDD). То есть необходимо выявить поддомены системы, у каждого из которых своя доменная модель. Далее поддомены конвертируются в микросервисы.\u003C\u002Fp\u003E\u003Cp\u003EДопустим, мы делаем систему для заказа продуктов в небольшом магазине рядом с домом. У нас есть пользовательские истории:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eзаказа (order);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eоплаты (payment);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдоставки товара (delivery).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДля обеспечения этих процессов необходимо где-то хранить информацию о наличии и количестве продуктов (stock). А также вести финансовый и бухгалтерский учет всех операций (accounting).\u003C\u002Fp\u003E\u003Cp\u003EОпираясь на доменную модель, мы можем выделить следующие микросервисы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EOrders - для сбора, хранения и обработки заказов;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EPayment - для проведения продаж;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EDelivery - для хранения информации о передаче в доставку (этот сервис будет взаимодействовать с внешней системой службы доставки);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EStock - для хранения информации об остатках товаров в магазине и их характеристиках;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAccounting - для хранения бухгалтерских и учетных данных (возможно это просто адаптер для нашей 1С).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНо это не единственный вариант. При декомпозиции стоит внимательно изучить бизнес-процессы и пользовательские требования, а также варианты развития системы.\u003C\u002Fp\u003E\u003Cp\u003EНапример, если конечный пользователь заказывает и оплачивает продукты во внешней системе партнера (какой-нибудь продуктовый маркетплейс). В наш магазин просто приходит информация о необходимости собрать и отправить заказ. Оплату партнер отправляет нам раз в месяц суммарно за все сделанные заказы, с учетом возвратов и пр. В этом случае отдельный микросервис Payment пока что не нужен.\u003C\u002Fp\u003E\u003Chr\u002F\u003E\u003Cp\u003EТеперь, когда мы выделили основные микросервисы для нашего домена, давайте посмотрим, что с ними происходит в рамках системы и как при этом работают бизнес-процессы.\u003C\u002Fp\u003E\u003Ca class=\"anchor\" name=\"1.2\" id=\"1.2\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E1.2. Микросервисы и бизнес-процессы\u003C\u002Fh3\u003E\u003Cp\u003EБизнес-процессы в системе с MSA обычно проходят через несколько микросервисов.\u003C\u002Fp\u003E\u003Cp\u003EВернемся к нашему примеру заказа товаров через интернет. С учетом выявленных микросервисов процесс будет примерно таким:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F024\u002F926\u002F60b\u002F02492660b6b06a17e54c7346e5db6384.png\" width=\"1806\" height=\"669\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F024\u002F926\u002F60b\u002F02492660b6b06a17e54c7346e5db6384.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКаждый этап бизнес-процесса обеспечивается отдельным сервисом. Выглядит симпатично и довольно удобно, согласитесь. Ошибки и доработки легко локализуются, у каждого микросевиса своя простая и понятная всем обязанность.\u003C\u002Fp\u003E\u003Cp\u003EНо что происходит, когда в системе работает сразу несколько бизнес-процессов?\u003C\u002Fp\u003E\u003Cp\u003EСкорее всего, эти процессы где-то используют одни и те же данные, а значит будут обращаться к одним и тем же микросервисам, или создавать для себя реплики и разбираться с согласованностью.\u003C\u002Fp\u003E\u003Cp\u003EНиже в разделе \"\u003Ca href=\"#2.1\" rel=\"noopener noreferrer nofollow\"\u003EПроцесс разработки системы с MSA\u003C\u002Fa\u003E\" еще напишу про варианты развития событий в такой ситуации. Но так или иначе стоит учитывать, что разные процессы могут использовать одни и те же микросервисы, причем, бывает, на разных этапах и по-разному.\u003C\u002Fp\u003E\u003Cp\u003EНапример, мы можем в системе для заказа товаров через интернет также проводить процесс продажи товаров непосредственно в магазине. В новом процессе сервис Stock появляется только после оплаты. В отличие от заказа через интернет, где есть предварительная проверка наличия товара.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F687\u002F86d\u002F600\u002F68786d60018dfb6ef3f6523e5c609ea7.png\" width=\"1205\" height=\"703\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F687\u002F86d\u002F600\u002F68786d60018dfb6ef3f6523e5c609ea7.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EДля ускорения и упрощения реализации бизнес-процессов в MSA иногда создают отдельные управляющие микросервисы и\u002Fили используют инструменты автоматизации.\u003C\u002Fp\u003E\u003Ch4\u003E1.2.1. Управляющие микросервисы\u003C\u002Fh4\u003E\u003Cp\u003EИногда имеет смысл создать управляющий микросервис, который следит за прохождением процессов через разные сервисы и внешние системы.\u003C\u002Fp\u003E\u003Cp\u003EВ управляющем микросервисе будет происходить вызов разных MS в нужной последовательности. А также, возможно, какая-то промежуточная логика, характерная для конкретного процесса.\u003C\u002Fp\u003E\u003Cp\u003EТак, для обработки продажи товара в магазине можно создать управляющий микросервис Processes. Он сначала вызовет MS Payment для проведения оплаты, затем MS Stock для изменения остатков товара и MS Accounting для фиксации финансовых операций в отчетности.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fabf\u002F9bf\u002F8f5\u002Fabf9bf8f56313b5aeed3eb5ad07713eb.png\" width=\"425\" height=\"236\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fabf\u002F9bf\u002F8f5\u002Fabf9bf8f56313b5aeed3eb5ad07713eb.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch4\u003E1.2.2. Платформы BPM\u003C\u002Fh4\u003E\u003Cp\u003EВ управляющих микросервисах удобно использовать движки для автоматизации процессов, например Camunda BPM. Такие инструменты позволяют в графическом виде задавать последовательность действий, проверки и условия переходов. При запуске процесса платформа самостоятельно выполняет все описанные шаги.\u003C\u002Fp\u003E\u003Cp\u003EВернемся к нашему примеру продажи в магазине:\u003C\u002Fp\u003E\u003Cp\u003EПри реализации этого процесса через Camunda необходимо сделать его BPMN-схему (например, в Camunda Modeler):\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc6\u002Fd5f\u002F09b\u002Fbc6d5f09b5f9d50af26c8bfbd25e3df2.png\" alt=\"Процесс OfflineSale в Camunda BPM\" title=\"Процесс OfflineSale в Camunda BPM\" width=\"2109\" height=\"711\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc6\u002Fd5f\u002F09b\u002Fbc6d5f09b5f9d50af26c8bfbd25e3df2.png\"\u002F\u003E\u003Cfigcaption\u003EПроцесс OfflineSale в Camunda BPM\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКаждый прямоугольник на схеме ссылается на код с логикой:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EPayment Process - проведение оплаты вызовом MS Payment.\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EError Message - если оплата не состоялась по какой-то причине, то происходит отправка сообщения об ошибке и завершение процесса.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EChange Stock - изменение количества товара в MS Stock.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EChange Accounting - обновление фин. отчетности в MS Accounting.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EПри инициации продажи MS Processes запустит этот процесс и Camunda выполнит каждый этап в заданной последовательности.\u003C\u002Fp\u003E\u003Cp\u003EБолее сложные схемы могут включать разветвления, таймеры, подпроцессы и пр.\u003C\u002Fp\u003E\u003Cp\u003EУдобно, что уже описанные элементы одного процесса легко переиспользуются в другом процессе. Также небольшие изменения можно реализовывать без программирования.\u003C\u002Fp\u003E\u003Chr\u002F\u003E\u003Cp\u003EМы рассмотрели, как выделять микросервисы и как их складывать в нужном порядке для реализации процессов. Теперь давайте посмотрим на способы взаимодействия микросервисов с друг другом и внешним миром.\u003C\u002Fp\u003E\u003Ca class=\"anchor\" name=\"1.3\" id=\"1.3\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E1.3. Интеграции\u003C\u002Fh3\u003E\u003Cp\u003EКак вы, наверное, уже догадались, система с MSA - это тот еще Вавилон, где интегрируются все со всеми любыми мыслимыми способами.\u003C\u002Fp\u003E\u003Cp\u003EПомимо своей базы данных у каждого микросервиса еще и свой API, любого протокола и вероисповедания. Вот он, век индивидуализации, во всей своей красе.\u003C\u002Fp\u003E\u003Ch4\u003E1.3.1. Взаимодействие между микросервисами\u003C\u002Fh4\u003E\u003Cp\u003EНет каких-то правил или ограничений для формата интеграций между микросервисами. В рамках одной системы используют разные протоколы и подходы, синхронное и асинхронное взаимодействие.\u003C\u002Fp\u003E\u003Cp\u003EОбычно архитекторы отдают предпочтение REST+JSON\u002FGraphQL\u002FgRPC и обмену сообщениями с помощью брокера типа Kafka и MQ Rabbit. Итоговый выбор инструментов зависит от требований и возможностей команды.\u003C\u002Fp\u003E\u003Cp\u003EРассмотрим возможную последовательность вызовов для реализации процесса продажи товара в магазине из нашего примера:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0bc\u002F3ce\u002F3a7\u002F0bc3ce3a794b1536e709999c29c145c3.png\" width=\"3054\" height=\"1670\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0bc\u002F3ce\u002F3a7\u002F0bc3ce3a794b1536e709999c29c145c3.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EMS Processes вызывает MS Payment для инициации оплаты и ждет от него обратную связь, чтобы продолжить свою работу. После получения ответа, происходит аналогичный синхронный вызов к MS Stock для списания товаров. Далее в сообщении для брокера уходит информация для MS Accounting, реализуя асинхронное взаимодействие. И MS Processes завершает свою работу, совершенно не беспокоясь, получил MS Accounting данные о покупке или нет.\u003C\u002Fp\u003E\u003Cp\u003EСтоит учитывать, что каждый микросервис может внезапно отказать и у нас таких ненадежных ребят много. То есть доступность в MSA на самом деле так себе. Многие брокеры гарантируют доставку, и никто не висит \"на линии\", ожидая ответа. Поэтому рекомендуется по возможности использовать асинхронное взаимодействие между сервисами.\u003C\u002Fp\u003E\u003Cp\u003EНо в любом случае всегда надо продумывать сценарии-\"предохранители\": то есть писать отдельный код на случай отказа каждого звена в процессе.\u003C\u002Fp\u003E\u003Ch4\u003E1.3.2. Интеграции с другими сервисами\u003C\u002Fh4\u003E\u003Cp\u003EВнешние сервисы, если им повезет, взаимодействуют с MSA-системой через API-шлюзы.\u003C\u002Fp\u003E\u003Cp\u003EПо К. Ричардсону API-шлюзы занимаются:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eобъединением API для запросов к нескольким микросервисам;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eраспределением запросов по нужным микросервисам;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпреобразованием разных протоколов интеграций (как микросервисов, так и внешних систем);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eреализацией граничных функций вроде аутентификации.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВполне вероятно, что для каждого фронта или внешней системы будет свой API-шлюз. Так как это соответствует духу независимости и позволяет командам не убить друг друга.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F534\u002Fbe8\u002F306\u002F534be8306d2f6c07ea6fbf1ec92add38.png\" width=\"2272\" height=\"1748\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F534\u002Fbe8\u002F306\u002F534be8306d2f6c07ea6fbf1ec92add38.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВ нашем примере в качестве API-шлюза вполне может выступать MS Processes. Однако при более сложных процессах и интеграциях бывает проще и надежнее их разделить. Например, если у нас есть свой фронт и внешний сервис, которые интегрируются по разным протоколам и поддерживаются разными командами. Но внутри приложения обе интеграции запускают один и тот же процесс.\u003C\u002Fp\u003E\u003Cp\u003EКак правило внешним системам шлюз предоставляет REST+JSON API, так как в нему все привыкли и считают простым для интеграции. Но можно использовать и GraphQL, который позволяет клиенту указывать в запросе, какие именно данные нужно вернуть. Этот подход помогает при работе с несколькими клиентами, у каждого из которых свои цели и пристрастия.\u003C\u002Fp\u003E\u003Cp\u003EМожно использовать и другие инструменты для разработки API-шлюзов, можно вообще взять готовый продукт, например AWS API Gateway. Главное - не забыть договориться со всеми потребителями нашего API.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fde4\u002Fd63\u002Fae0\u002Fde4d63ae0127ea312023adae0e101b32.jpg\" width=\"454\" height=\"255\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fde4\u002Fd63\u002Fae0\u002Fde4d63ae0127ea312023adae0e101b32.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ca class=\"anchor\" name=\"1.4\" id=\"1.4\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E1.4. Отчеты и мониторинг\u003C\u002Fh3\u003E\u003Cp\u003EИтак, у нас есть микросервисы и их интеграции, которые реализуют бизнес-процессы. Для нормального функционирования за этим всем нужно пристально наблюдать, выявлять эффективность и слабые места. И здесь тоже есть свои особенности, связанные с архитектурным подходом.\u003C\u002Fp\u003E\u003Cp\u003EНельзя просто так взять и одним запросом к БД собрать сквозной отчет по процессу. Для этого нужен специальный сервис, который будет собирать копии нужных таблиц из всех микросервисов. И только на его основе специально обученные люди будут создавать красивые картинки. В общем, чтобы заказчик мониторил бизнес-показатели, без DWH и BI-системы не обойтись.\u003C\u002Fp\u003E\u003Cp\u003EТакже сложновато без специальных инструментов, типа Kibana, посмотреть, где сломался объединяющий несколько API процесс. И, конечно, для этого необходимо продумывать систему логирования: что, как и когда каждый микросервис будет писать в логи.\u003C\u002Fp\u003E\u003Cp\u003EИ еще желательно, чтобы кто-то периодически тыкал во все ваши микросервисы палочкой, проверяя их доступность. Этот механизм тоже требует отдельных сервисов и проработки их логики.\u003C\u002Fp\u003E\u003Cp\u003EВолшебство здесь в том, что все эти прибамбасы должны быть согласованы на уровне компании и аккуратно выполняться всеми командами, учитывая интересы всех и вся. Но это уже совсем другая история.\u003C\u002Fp\u003E\u003Chr\u002F\u003E\u003Cp\u003EПодводя предварительный итог можно сказать, что на каждый \u003Cs\u003Eчих\u003C\u002Fs\u003E аспект системы нужен отдельный микросервис, интеграция и, возможно, отдельная технология. Это придает определенное своеобразие работе с MSA, в том числе задачам аналитика.\u003C\u002Fp\u003E\u003Ca class=\"anchor\" name=\"2\" id=\"2\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003E2. Что происходит с аналитиком\u003C\u002Fh2\u003E\u003Cp\u003EЕсли коротко, то аналитик на проектах с MSA устраняет неопределенность. Впрочем, как и везде.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F906\u002F0ce\u002Fbb5\u002F9060cebb54441d858d077d2f5bd41b19.jpg\" width=\"340\" height=\"228\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F906\u002F0ce\u002Fbb5\u002F9060cebb54441d858d077d2f5bd41b19.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЕсть десятки микросервисов и их интеграций, разные технологии и архитектурные паттерны. Процессы, которые действуют по-разному и имеют разные цели, но пересекаются с друг другом. В такой ситуации командам очень сложно разобраться, что, куда и зачем передается, как проходит процесс полностью, что на него может повлиять, на что он может повлиять.\u003C\u002Fp\u003E\u003Cp\u003EТо есть здесь кому-то очень важно уметь:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eприводить хаос в порядок;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвыявлять требования;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпроектировать интеграцию;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпонимать ключевые и потенциально опасные части процессов;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eконтролировать знания команды о системе;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдоносить до бизнеса возможности и ограничения продукта.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВ общем, для бизнеса и команды аналитик может быть более чем полезен в микросервисной ситуации. Осталось понять, как аналитику не лопнуть от такого счастья.\u003C\u002Fp\u003E\u003Ca class=\"anchor\" name=\"2.1\" id=\"2.1\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E2.1. Процесс разработки системы с MSA\u003C\u002Fh3\u003E\u003Cp\u003EЧасто команды выделяются на продукт или продуктовое направление.\u003C\u002Fp\u003E\u003Cp\u003EВ нашем примере могло бы быть такое разделение:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EКоманда А - разрабатывает все, что связано с процессом оффлайн продаж в магазине.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКоманда Б - делает процесс онлайн-продаж и все соответсвующие задачи.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002F8f2\u002F4d3\u002F9a48f24d3057d6bc6787f93511dd33ac.png\" width=\"2381\" height=\"1218\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002F8f2\u002F4d3\u002F9a48f24d3057d6bc6787f93511dd33ac.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EМикросервисы Payment, Stock и Accounting используются в обоих процессах.\u003C\u002Fp\u003E\u003Cp\u003EКаждый общий сервис может дорабатываться только конкретной командой, возможно, это будет третья Команда В. Но это может стать узким местом и замедлить разработку. Так как другим командам придется ждать, пока у команды-владельца сервиса дойдет очередь до их задачи.\u003C\u002Fp\u003E\u003Cp\u003EЕще можно дублировать общие микросервисы, не смешивая разные процессы. То есть у обеих команд будут свои Payment, Stock и Accounting. Таким образом каждая команда сможет дорабатывать и развивать их исключительно для целей своего продукта. В этом случае придется строго следить за согласованностью данных. И смириться с тем, что вы будете дублировать большинство доработок.\u003C\u002Fp\u003E\u003Cp\u003EОбщие микросервисы также могут дорабатываться сразу обеими командами. Но тогда необходимо, чтобы кто-то решал конфликты интересов, обеспечивал обратную совместимость и отслеживал целостность и независимость каждого такого микросервиса. Хорошо, если для этого назначается конкретная команда и конкретные люди, которые будут делать вдумчивое ревью каждой доработки.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F27c\u002F444\u002F2fd\u002F27c4442fd0210d2e17d95fc4ce19aadd.jpg\" width=\"454\" height=\"348\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F27c\u002F444\u002F2fd\u002F27c4442fd0210d2e17d95fc4ce19aadd.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ca class=\"anchor\" name=\"2.2\" id=\"2.2\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E2.2. Задачи аналитика\u003C\u002Fh3\u003E\u003Cp\u003EДля адекватного анализа необходимо знать все, что как-либо затрагивает или может затронуть твой продукт. То есть аналитикам на проектах с MSA необходимо понимать:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eсвой продуктовый процесс;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eлогику работы всех задействованных в продукте микросервисов и механизмы их взаимодействий;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпроцессы продуктов, которые используют те же микросервисы;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвнешние интеграции, их механизм и логику.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EРассмотрим пример, когда надо добавить в метод создания заказа новое поле discount. В этом поле содержится размер скидки, которую интернет-магазин предоставил покупателю.\u003C\u002Fp\u003E\u003Cp\u003EДля реализации этого небольшого изменения необходимо:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EПонять, есть ли в системе подобное поле для скидок, которые предоставляет наш магазин. Если есть, то проработать их взаимодействие и исключить путаницу.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДобавить поле в API-шлюзе для внешних систем.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДобавить поле в API MS Order, его логику и, возможно, БД.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПонять, необходимо ли передавать новое поле в MS Payment. Или достаточно изменить логику расчета цены товара при передаче данных о заказе.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EОбновить публикуемые сообщения, связанные с созданием заказа. Определить, какие еще сервисы должны быть оповещены о предоставлении скидки через брокер сообщений (например, MS Accounting).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДобавить в MS Accounting новое поле и логику его обработки.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПродумать, что делать, если на любом из этапов случится сбой (транзакций на весь процесс нет в силу разных БД у микросервисов).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EУзнать, как этот показатель должен отражаться в бизнес-отчетах и добавить его в DWH\u002FBI (если повезет, через специально обученных людей).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F392\u002Fe8e\u002F7c5\u002F392e8e7c5e2a00a2d5323928e0dda89e.png\" width=\"2926\" height=\"1485\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F392\u002Fe8e\u002F7c5\u002F392e8e7c5e2a00a2d5323928e0dda89e.png\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EБизнес-требования и функционал системы определяют, в каких микросервисах, API и БД должны появиться поле и логика его обработки. То есть разработчик с этим не подскажет. А для заказчика это будет \"вам нужно всего лишь добавить одно поле\".\u003C\u002Fp\u003E\u003Cp\u003EСистему с MSA не получится рассматривать как чёрный ящик, где аналитик определяет требования к результату \"на выходе\". Потому что \"на выходе\" тут - это на границе каждого микросервиса и все эти границы надо проектировать и определять.\u003C\u002Fp\u003E\u003Cp\u003EТаким образом, с точки зрения анализа систему с MSA можно рассматривать как десятки небольших систем и интеграций между ними. То есть задачи схожи с работой над любой интеграцией. Но есть один нюанс - интеграций много и они меняются при каждой доработке, вслед за малейшим изменением логики или данных.\u003C\u002Fp\u003E\u003Ca class=\"anchor\" name=\"2.3\" id=\"2.3\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E2.3. Возможные проблемы\u003C\u002Fh3\u003E\u003Cp\u003EОбозначу основные проблемы, с которыми довелось столкнуться, в порядке убывания бесячести.\u003C\u002Fp\u003E\u003Ch4\u003E2.3.1. Ничего не понятно\u003C\u002Fh4\u003E\u003Cp\u003EМногообразие сервисов, интеграций и технологий со стороны может выглядеть как запутанный клубок разных проводов. И чтобы вытащить свою зарядку для телефона, приходится распутывать LAN, провод от лампочки, чей-то переходник и Ктулху знает что еще.\u003C\u002Fp\u003E\u003Cp\u003EНо в отличие от проводов, с микросервисами часто еще и не понятно, как их вообще распутывать.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F778\u002Fc08\u002F388\u002F778c08388ca8aa9e12f8db426d2e1f6b.jpg\" width=\"454\" height=\"340\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F778\u002Fc08\u002F388\u002F778c08388ca8aa9e12f8db426d2e1f6b.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EМожно читать код. И мы, например, поймем, что нотификация отправляется при условии comission= true. А почему так происходит - не узнаем. И тем более не узнаем, что где-то в другом конце системы при comission= false отправляется другая нотификация.\u003C\u002Fp\u003E\u003Cp\u003EМожно обращаться к гуру, которые все это делали и помнят. Только гуру, как известно, всегда заняты, потому что незаменимы. И скорее всего они что-то забыли или, что хуже, не знают о том, что они что-то забыли.\u003C\u002Fp\u003E\u003Cp\u003EМне видится, что единственный адекватный способ решить эту проблему - это создать культуру и паттерны ведения документации. Документации, которая описывает общую архитектуру, процессы, точки влияния и, главное, бизнес-требования, которые стоят за логикой работы сервисов. Можно воспользоваться моей \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F549588\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпамяткой\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EЭто, конечно, сложная задача, потому что требует слаженной работы всех аналитиков, их координации и дисциплинированности. А также понимания со стороны руководства, что это необходимая работа. Если у меня когда-нибудь получится внедрить или хотя бы увидеть такую красоту в рамках всей системы - обязательно об этом напишу.\u003C\u002Fp\u003E\u003Ch4\u003E2.3.2. \"Чужие\" доработки\u003C\u002Fh4\u003E\u003Cp\u003EЭто когда ничего не понятно, а потом раз - и становится еще непонятнее. Потому что другая команда что-то сделала в общем микросервисе. Другая команда молодец. А у вас что-то сломалось или не работает новый функционал, который, судя по документации, должен бы работать.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F42d\u002F33a\u002F482\u002F42d33a48269cc5264f8c9296e60a54e5.jpg\" width=\"454\" height=\"254\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F42d\u002F33a\u002F482\u002F42d33a48269cc5264f8c9296e60a54e5.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EРешение видится в совокупности факторов:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eповсеместное покрытие автотестами, что и так обязательно для MSA;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдокументирование всех изменений в едином пространстве ДО реализации (например, писать новые требования на общей странице и выделять их тегами со ссылкой на задачу, где эти требования будут реализованы);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eобязательный этап анализа - проверка влияния доработки на другие процессы;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eочень дружная и активная коммуникацией аналитиков.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДокументирование в таких объемах само по себе может стать проблемой, поэтому стоит посмотреть в сторону автоматизации. Так вы не будете тратить время хотя бы на таблички с API и БД. Но для этого придется поуговаривать разработчиков прикрутить какой-нибудь swagger2markup и выгрузку актуальных полей БД.\u003C\u002Fp\u003E\u003Cp\u003EНу или можно строго придерживаться правила \"один микросервис - одна команда\".\u003C\u002Fp\u003E\u003Ch4\u003E2.3.3. Заказчику сложно\u003C\u002Fh4\u003E\u003Cp\u003EБизнес ничего не понимает сильнее, чем обычно. Откуда такие сроки, почему все сломалось, зачем вам этот GraphQL?\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5b2\u002Ff8d\u002Fefa\u002F5b2f8defab517283ba76a4d192368f9f.jpg\" width=\"454\" height=\"277\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5b2\u002Ff8d\u002Fefa\u002F5b2f8defab517283ba76a4d192368f9f.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЧтобы принимать решения по продукту, надо разбираться в работе системы. А значит и всех этих переплетениях процессов, о которых тут так много написано. Хорошо бы совместно с менеджерами составлять ту самую бизнес-документацию и поддерживать ее актуальность.\u003C\u002Fp\u003E\u003Cp\u003EА еще производительность команды на микросервисах зависит от большого количества факторов. Да и задачи могу быть на самом деле не тем, чем кажутся. Тут уже аналитику надо придумать, как все эти сложности доступно объяснить. Можно попробовать пример с гномиками, как у \u003Ca href=\"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=7EHlFbaME_U&amp;list=PL_XScYmjXxkcj_fsacjXWnYsKtTIWdQ2M&amp;index=6\" rel=\"noopener noreferrer nofollow\"\u003EМаксима Цепкова\u003C\u002Fa\u003E. Или показать на простом примере вроде добавления поля discount. И, опять же, если будут схемы и описания, можно просто тыкать пальцем - где и что вам нужно в итоге сделать для реализации этой \"быстрой\" доработки.\u003C\u002Fp\u003E\u003Ch4\u003E2.3.4. Требуется много знаний\u003C\u002Fh4\u003E\u003Cp\u003EНа самом деле это не проблема, а возможность получить новые навыки и посмотреть на разные технологии.\u003C\u002Fp\u003E\u003Cp\u003EНо начинать карьеру в такой обстановке - это, кажется, Спарта. Особенно если система обладает всеми проблемами из списка выше. Возможно, кураторство и планы индивидуального развития облегчат ситуацию.\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c7\u002F2db\u002Fde2\u002F5c72dbde2eb96145e05d08c1d52a9f8f.jpg\" width=\"454\" height=\"255\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c7\u002F2db\u002Fde2\u002F5c72dbde2eb96145e05d08c1d52a9f8f.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПомимо знаний о самой MSA, нужно быть готовым разобраться в принципах REST, брокеров сообщений и любом способе интеграции, который придет в голову вашему архитектору.\u003C\u002Fp\u003E\u003Cp\u003EВозможно вас также затронут JWT, инстансы, балансировка, развертывание, анализ производительности, доступности и другие сложные слова.\u003C\u002Fp\u003E\u003Cp\u003EНу и совершенно не лишним будет стандартный набор аналитика из работы с требованиями, моделирования, написания понятной документации, БД и SQL и проектирования интеграций.\u003C\u002Fp\u003E\u003Cp\u003EОчень рекомендую книгу Ричардсона \"Микросервисы. Паттерны разработки и рефакторинга\" - там про все понемногу и очень понятно объясняется.\u003C\u002Fp\u003E\u003Ca class=\"anchor\" name=\"2.4\" id=\"2.4\"\u003E\u003C\u002Fa\u003E\u003Ch3\u003E2.4. Плюсы MSA для аналитика\u003C\u002Fh3\u003E\u003Cp\u003EНесмотря на все проблемы и сложности, работать с микросервисами мне понравилось. И вот почему:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EВо-первых, это интересно. Это как большой конструктор, из которого можно собирать разные процессы. Менять кубики местами и переворачивать нужными гранями для разных плоскостей. Если нравятся интеграции и копаться в технических аспектах - то вы по адресу.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EОтносительно легко добавлять новые продукты и функции. Для этого пишут новые микросервисы и не нужно беспокоиться о том, что новый код как-то сломает работающие процессы. И даже если вы правите уже работающие микросервисы, то отследить зависимости и влияние проще, чем в монолите.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЕсли вы знаете свои процессы, то скорее всего быстро сможете определить, в каком микросервисе у вас сбоит при ошибке. И так как микросервисы относительно простые - то исправить тоже будет несложно (наверное). И при обновлении можно выкатить только свой микросервис, не беспокоя соседей.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EСкорее всего вы будете работать с профессионалами. Микросервисная архитектура создает вызовы для аналитиков, разработчиков, QA, DevOps и даже менеджеров. То есть все члены команды должны обладать определенным опытом и навыками для нормальной реализации этого подхода.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКак писала выше, работа с MSA - это возможность узнать много нового и поработать с разными технологиями. А значит и развиваться в любимом деле, вырасти как специалист и открыть для себя новые карьерные перспективы.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВ системах с микросервисами аналитик бОльшую часть времени занимается именно анализом. На \"неаналитические\" задачи попросту не остается ресурса. Здесь аналитик по полной реализует свои профильные hard и soft скиллы.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F409\u002F9d6\u002Fe8d\u002F4099d6e8d5cda8aaa681a826aafcecc1.jpg\" width=\"326\" height=\"289\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F409\u002F9d6\u002Fe8d\u002F4099d6e8d5cda8aaa681a826aafcecc1.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ca class=\"anchor\" name=\"3\" id=\"3\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EИтог\u003C\u002Fh2\u003E\u003Cp\u003EМикросервисная архитектура - это много разных технологий, интеграций и возможностей для развития как систем, так и людей.\u003C\u002Fp\u003E\u003Cp\u003EРабота на проекте с MSA подразумевает особый подход, определенные навыки и знания. Нужно разобраться в деталях процессов и технологий. Возможно, изучить что-то или придумать новую схему работы, взаимодействия с заказчиком и коллегами.\u003C\u002Fp\u003E\u003Cp\u003EВсе это вполне постижимо и действительно интересно, хоть поначалу и не совсем прозрачно.\u003C\u002Fp\u003E\u003Cp\u003EНадеюсь, после этой статьи кому-то станет немного понятнее, что может скрываться за этими загадочными словами в вакансиях. И к чему готовиться, если у вашего техлида внезапно улучшилось настроение и загорелись глаза.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"микросервисы"},{"titleHtml":"микросервисная архитектура"},{"titleHtml":"требования"},{"titleHtml":"аналитик"},{"titleHtml":"системный анализ"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F00d\u002F8a4\u002F146\u002F00d8a4146bcf2db509534ba3ac0085c0.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F00d\u002F8a4\u002F146\u002F00d8a4146bcf2db509534ba3ac0085c0.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583136\\\u002F\"},\"headline\":\"Микросервисы глазами аналитика\",\"datePublished\":\"2021-10-12T23:33:17+03:00\",\"dateModified\":\"2021-10-14T14:33:23+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Татьяна Сальникова\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лу...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583136\\\u002F#post-content-body\",\"about\":[\"h_analysis_design\",\"h_microservices\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F583136\\\u002Fdb5371f5ff40ae619ce0a475d1d64612\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F9b0\\\u002F3a3\\\u002Fbe2\\\u002F9b03a3be23d156d699df946b85d275bc.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F361\\\u002Fb10\\\u002F93b\\\u002F361b1093bc44209d8c6197a167528e7d.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F024\\\u002F926\\\u002F60b\\\u002F02492660b6b06a17e54c7346e5db6384.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F687\\\u002F86d\\\u002F600\\\u002F68786d60018dfb6ef3f6523e5c609ea7.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fabf\\\u002F9bf\\\u002F8f5\\\u002Fabf9bf8f56313b5aeed3eb5ad07713eb.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fbc6\\\u002Fd5f\\\u002F09b\\\u002Fbc6d5f09b5f9d50af26c8bfbd25e3df2.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F0bc\\\u002F3ce\\\u002F3a7\\\u002F0bc3ce3a794b1536e709999c29c145c3.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F534\\\u002Fbe8\\\u002F306\\\u002F534be8306d2f6c07ea6fbf1ec92add38.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fde4\\\u002Fd63\\\u002Fae0\\\u002Fde4d63ae0127ea312023adae0e101b32.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F906\\\u002F0ce\\\u002Fbb5\\\u002F9060cebb54441d858d077d2f5bd41b19.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F9a4\\\u002F8f2\\\u002F4d3\\\u002F9a48f24d3057d6bc6787f93511dd33ac.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F27c\\\u002F444\\\u002F2fd\\\u002F27c4442fd0210d2e17d95fc4ce19aadd.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F392\\\u002Fe8e\\\u002F7c5\\\u002F392e8e7c5e2a00a2d5323928e0dda89e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F778\\\u002Fc08\\\u002F388\\\u002F778c08388ca8aa9e12f8db426d2e1f6b.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F42d\\\u002F33a\\\u002F482\\\u002F42d33a48269cc5264f8c9296e60a54e5.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F5b2\\\u002Ff8d\\\u002Fefa\\\u002F5b2f8defab517283ba76a4d192368f9f.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F5c7\\\u002F2db\\\u002Fde2\\\u002F5c72dbde2eb96145e05d08c1d52a9f8f.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F409\\\u002F9d6\\\u002Fe8d\\\u002F4099d6e8d5cda8aaa681a826aafcecc1.jpg\"]}","metaDescription":"Расскажу про системы с микросервисной архитектурой (MSA). Как они устроены, как я их анализировала, какие увидела проблемы и преимущества.Статья не раскрывает лучшие практики использования...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[{"title":"Cистемный аналитик","vacanciesCount":415,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fsistemnij_analitik","itemHubs":["uml","prototyping","analysis_design","productpm"]}],"hubs":"analysis_design,microservices"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"technotext":{"nominationsList":[]},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.da6c6b36.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.92df6f6d.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="https://habr.com/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
