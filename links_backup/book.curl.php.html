<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: cURL - Manual </title>

 <link rel="shortcut icon" href="https://www.php.net/favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="https://www.php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="book.curl.php.html">
 <link rel="shorturl" href="https://www.php.net/curl">
 <link rel="alternate" href="https://www.php.net/curl" hreflang="x-default">

 <link rel="contents" href="https://www.php.net/manual/ru/index.php">
 <link rel="index" href="https://www.php.net/manual/ru/refs.remote.other.php">
 <link rel="prev" href="https://www.php.net/manual/ru/refs.remote.other.php">
 <link rel="next" href="https://www.php.net/manual/ru/intro.curl.php">

 <link rel="alternate" href="https://www.php.net/manual/en/book.curl.php" hreflang="en">
 <link rel="alternate" href="https://www.php.net/manual/pt_BR/book.curl.php" hreflang="pt_BR">
 <link rel="alternate" href="https://www.php.net/manual/zh/book.curl.php" hreflang="zh">
 <link rel="alternate" href="https://www.php.net/manual/fr/book.curl.php" hreflang="fr">
 <link rel="alternate" href="https://www.php.net/manual/de/book.curl.php" hreflang="de">
 <link rel="alternate" href="https://www.php.net/manual/ja/book.curl.php" hreflang="ja">
 <link rel="alternate" href="book.curl.php.html" hreflang="ru">
 <link rel="alternate" href="https://www.php.net/manual/es/book.curl.php" hreflang="es">
 <link rel="alternate" href="https://www.php.net/manual/tr/book.curl.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1639034403&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1539765004&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1606338002&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="https://www.php.net/cached.php?t=1627831203&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="https://www.php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="https://www.php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base href="">


</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="https://www.php.net/" class="brand"><img src="https://www.php.net/images/logos/php-logo.svg" width="48" height="24" alt="php"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="https://www.php.net/downloads">Downloads</a></li>
      <li class="active"><a href="https://www.php.net/docs.php">Documentation</a></li>
      <li class=""><a href="https://www.php.net/get-involved" >Get Involved</a></li>
      <li class=""><a href="https://www.php.net/support">Help</a></li>
      <li class="">
        <a href="https://www.php.net/releases/8.1/index.php">
          <img src="https://www.php.net/images/php8/logo_php8_1.svg" alt="php8.1" height="22" width="60">
        </a>
      </li>
    </ul>
    <form class="navbar-search" id="topsearch" action="https://www.php.net/search.php">
      <input type="hidden" name="show" value="quickref">
      <input type="search" name="pattern" class="search-query" placeholder="Search" accesskey="s">
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<nav id="trick"><div><dl>
<dt><a href='https://www.php.net/manual/en/getting-started.php'>Getting Started</a></dt>
	<dd><a href='https://www.php.net/manual/en/introduction.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/tutorial.php'>A simple tutorial</a></dd>
<dt><a href='https://www.php.net/manual/en/langref.php'>Language Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/language.basic-syntax.php'>Basic syntax</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.types.php'>Types</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.variables.php'>Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.constants.php'>Constants</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.expressions.php'>Expressions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.operators.php'>Operators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.control-structures.php'>Control Structures</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.functions.php'>Functions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.oop5.php'>Classes and Objects</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.namespaces.php'>Namespaces</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.enumerations.php'>Enumerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.errors.php'>Errors</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.exceptions.php'>Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.fibers.php'>Fibers</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.generators.php'>Generators</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.attributes.php'>Attributes</a></dd>
	<dd><a href='https://www.php.net/manual/en/language.references.php'>References Explained</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.variables.php'>Predefined Variables</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.exceptions.php'>Predefined Exceptions</a></dd>
	<dd><a href='https://www.php.net/manual/en/reserved.interfaces.php'>Predefined Interfaces and Classes</a></dd>
	<dd><a href='https://www.php.net/manual/en/context.php'>Context options and parameters</a></dd>
	<dd><a href='https://www.php.net/manual/en/wrappers.php'>Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/security.php'>Security</a></dt>
	<dd><a href='https://www.php.net/manual/en/security.intro.php'>Introduction</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.general.php'>General considerations</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.cgi-bin.php'>Installed as CGI binary</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.apache.php'>Installed as an Apache module</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.sessions.php'>Session Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.filesystem.php'>Filesystem Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.database.php'>Database Security</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.errors.php'>Error Reporting</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.variables.php'>User Submitted Data</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.hiding.php'>Hiding PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/security.current.php'>Keeping Current</a></dd>
<dt><a href='https://www.php.net/manual/en/features.php'>Features</a></dt>
	<dd><a href='https://www.php.net/manual/en/features.http-auth.php'>HTTP authentication with PHP</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.cookies.php'>Cookies</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.sessions.php'>Sessions</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.xforms.php'>Dealing with XForms</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.file-upload.php'>Handling file uploads</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.remote-files.php'>Using remote files</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.connection-handling.php'>Connection handling</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.persistent-connections.php'>Persistent Database Connections</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.commandline.php'>Command line usage</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.gc.php'>Garbage Collection</a></dd>
	<dd><a href='https://www.php.net/manual/en/features.dtrace.php'>DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href='https://www.php.net/manual/en/funcref.php'>Function Reference</a></dt>
	<dd><a href='https://www.php.net/manual/en/refs.basic.php.php'>Affecting PHP's Behaviour</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.audio.php'>Audio Formats Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.auth.php'>Authentication Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.cmdline.php'>Command Line Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.compression.php'>Compression and Archive Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.crypto.php'>Cryptography Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.database.php'>Database Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.calendar.php'>Date and Time Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.file.php'>File System Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.international.php'>Human Language and Character Encoding Support</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.image.php'>Image Processing and Generation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.mail.php'>Mail Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.math.php'>Mathematical Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.nontext.php'>Non-Text MIME Output</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.fileprocess.process.php'>Process Control Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.other.php'>Other Basic Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.remote.other.php'>Other Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.search.php'>Search Engine Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.server.php'>Server Specific Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.session.php'>Session Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.text.php'>Text Processing</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.basic.vartype.php'>Variable and Type Related Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.webservice.php'>Web Services</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.utilspec.windows.php'>Windows Only Extensions</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.xml.php'>XML Manipulation</a></dd>
	<dd><a href='https://www.php.net/manual/en/refs.ui.php'>GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="https://www.php.net/manual/ru/intro.curl.php">
          Введение &raquo;
        </a>
      </div>
              <div class="prev">
        <a href="https://www.php.net/manual/ru/refs.remote.other.php">
          &laquo; Другие службы        </a>
      </div>
          <ul>
            <li><a href='https://www.php.net/manual/ru/index.php'>Руководство по PHP</a></li>      <li><a href='https://www.php.net/manual/ru/funcref.php'>Справочник функций</a></li>      <li><a href='https://www.php.net/manual/ru/refs.remote.other.php'>Другие службы</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="https://www.php.net/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value='en/book.curl.php'>English</option>
            <option value='pt_BR/book.curl.php'>Brazilian Portuguese</option>
            <option value='zh/book.curl.php'>Chinese (Simplified)</option>
            <option value='fr/book.curl.php'>French</option>
            <option value='de/book.curl.php'>German</option>
            <option value='ja/book.curl.php'>Japanese</option>
            <option value='ru/book.curl.php' selected="selected">Russian</option>
            <option value='es/book.curl.php'>Spanish</option>
            <option value='tr/book.curl.php'>Turkish</option>
            <option value="help-translate.php">Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://github.com/php/doc-ru/blob/master/reference/curl/book.xml">Submit a Pull Request</a>
      <a href="https://github.com/php/doc-ru/issues/new?body=From%20manual%20page:%20https:%2F%2Fphp.net%2Fbook.curl%0A%0A---">Report a Bug</a>
    </div>
  </div><div id="book.curl" class="book">
 
 <h1 class="title">Клиентская библиотека работы с URL</h1>
 

 
 
 

 





 





 






 





 





 





 





 





 






<ul class="chunklist chunklist_book"><li><a href="https://www.php.net/manual/ru/intro.curl.php">Введение</a></li><li><a href="https://www.php.net/manual/ru/curl.setup.php">Установка и настройка</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="https://www.php.net/manual/ru/curl.requirements.php">Требования</a></li><li><a href="https://www.php.net/manual/ru/curl.installation.php">Установка</a></li><li><a href="https://www.php.net/manual/ru/curl.configuration.php">Настройка во время выполнения</a></li><li><a href="https://www.php.net/manual/ru/curl.resources.php">Типы ресурсов</a></li></ul></li><li><a href="https://www.php.net/manual/ru/curl.constants.php">Предопределённые константы</a></li><li><a href="https://www.php.net/manual/ru/curl.examples.php">Примеры</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="https://www.php.net/manual/ru/curl.examples-basic.php">Простой пример использования curl</a></li></ul></li><li><a href="https://www.php.net/manual/ru/ref.curl.php">Функции cURL</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="https://www.php.net/manual/ru/function.curl-close.php">curl_close</a> — Завершает сеанс cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-copy-handle.php">curl_copy_handle</a> — Копирует дескриптор cURL вместе со всеми его настройками</li><li><a href="https://www.php.net/manual/ru/function.curl-errno.php">curl_errno</a> — Возвращает код последней ошибки</li><li><a href="https://www.php.net/manual/ru/function.curl-error.php">curl_error</a> — Возвращает строку с описанием последней ошибки текущего сеанса</li><li><a href="https://www.php.net/manual/ru/function.curl-escape.php">curl_escape</a> — Кодирует заданную строку как URL</li><li><a href="https://www.php.net/manual/ru/function.curl-exec.php">curl_exec</a> — Выполняет запрос cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-file-create.php">curl_file_create</a> — Создаёт объект CURLFile</li><li><a href="https://www.php.net/manual/ru/function.curl-getinfo.php">curl_getinfo</a> — Возвращает информацию об определённой операции</li><li><a href="https://www.php.net/manual/ru/function.curl-init.php">curl_init</a> — Инициализирует сеанс cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-add-handle.php">curl_multi_add_handle</a> — Добавляет обычный cURL-дескриптор к набору cURL-дескрипторов</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-close.php">curl_multi_close</a> — Закрывает набор cURL-дескрипторов</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-errno.php">curl_multi_errno</a> — Возвращает код последней ошибки множественного curl</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-exec.php">curl_multi_exec</a> — Запускает подсоединения текущего дескриптора cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-getcontent.php">curl_multi_getcontent</a> — Возвращает результат операции, если была установлена опция
   CURLOPT_RETURNTRANSFER</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-info-read.php">curl_multi_info_read</a> — Возвращает информацию о текущих операциях</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-init.php">curl_multi_init</a> — Создаёт набор cURL-дескрипторов</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-remove-handle.php">curl_multi_remove_handle</a> — Удаляет cURL дескриптор из набора cURL дескрипторов</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-select.php">curl_multi_select</a> — Ждёт активности на любом curl_multi соединении</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-setopt.php">curl_multi_setopt</a> — Установить опции для множественного дескриптора cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-multi-strerror.php">curl_multi_strerror</a> — Возвращает строку, описывающую ошибку</li><li><a href="https://www.php.net/manual/ru/function.curl-pause.php">curl_pause</a> — Приостановить и возобновить соединение</li><li><a href="https://www.php.net/manual/ru/function.curl-reset.php">curl_reset</a> — Сбросить все настройки обработчика сессии libcurl</li><li><a href="https://www.php.net/manual/ru/function.curl-setopt-array.php">curl_setopt_array</a> — Устанавливает несколько параметров для сеанса cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-setopt.php">curl_setopt</a> — Устанавливает параметр для сеанса CURL</li><li><a href="https://www.php.net/manual/ru/function.curl-share-close.php">curl_share_close</a> — Закрыть разделяемый обработчик cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-share-errno.php">curl_share_errno</a> — Возвращает код последней ошибки разделяемого обработчика curl</li><li><a href="https://www.php.net/manual/ru/function.curl-share-init.php">curl_share_init</a> — Инициализация разделяемого обработчика cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-share-setopt.php">curl_share_setopt</a> — Установить опции разделяемого обработчика cURL</li><li><a href="https://www.php.net/manual/ru/function.curl-share-strerror.php">curl_share_strerror</a> — Возвращает описание для заданного кода ошибки</li><li><a href="https://www.php.net/manual/ru/function.curl-strerror.php">curl_strerror</a> — Получить текстовое описание для кода ошибки</li><li><a href="https://www.php.net/manual/ru/function.curl-unescape.php">curl_unescape</a> — Декодирует закодированную URL-строку</li><li><a href="https://www.php.net/manual/ru/function.curl-version.php">curl_version</a> — Возвращает версию cURL</li></ul></li><li><a href="https://www.php.net/manual/ru/class.curlhandle.php">CurlHandle</a> — Класс CurlHandle</li><li><a href="https://www.php.net/manual/ru/class.curlmultihandle.php">CurlMultiHandle</a> — Класс CurlMultiHandle</li><li><a href="https://www.php.net/manual/ru/class.curlsharehandle.php">CurlShareHandle</a> — Класс CurlShareHandle</li><li><a href="https://www.php.net/manual/ru/class.curlfile.php">CURLFile</a> — Класс CURLFile<ul class="chunklist chunklist_book chunklist_children"><li><a href="https://www.php.net/manual/ru/curlfile.construct.php">CURLFile::__construct</a> — Создаёт объект CURLFile</li><li><a href="https://www.php.net/manual/ru/curlfile.getfilename.php">CURLFile::getFilename</a> — Возвращает имя файла на сервере</li><li><a href="https://www.php.net/manual/ru/curlfile.getmimetype.php">CURLFile::getMimeType</a> — Возвращает MIME-тип файла</li><li><a href="https://www.php.net/manual/ru/curlfile.getpostfilename.php">CURLFile::getPostFilename</a> — Возвращает имя файла, отправляемого POST-запросом</li><li><a href="https://www.php.net/manual/ru/curlfile.setmimetype.php">CURLFile::setMimeType</a> — Устанавливает MIME-тип</li><li><a href="https://www.php.net/manual/ru/curlfile.setpostfilename.php">CURLFile::setPostFilename</a> — Устанавливает имя файла для отправки методом POST</li></ul></li><li><a href="https://www.php.net/manual/ru/class.curlstringfile.php">CURLStringFile</a> — Класс CURLStringFile<ul class="chunklist chunklist_book chunklist_children"><li><a href="https://www.php.net/manual/ru/curlstringfile.construct.php">CURLStringFile::__construct</a> — Создаёт объект CURLStringFile</li></ul></li></ul></div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="https://www.php.net/manual/add-note.php?sect=book.curl&amp;redirect=https://www.php.net/manual/ru/book.curl.php"><img src='https://www.php.net/images/notes-add@2x.png' alt='add a note' width='12' height='12'> <small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">27 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="102885">  <div class="votes">
    <div id="Vu102885">
    <a href="https://www.php.net/manual/vote-note.php?id=102885&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd102885">
    <a href="https://www.php.net/manual/vote-note.php?id=102885&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V102885" title="53% like this...">
    37
    </div>
  </div>
  <a href="book.curl.php.html#102885" class="name">
  <strong class="user"><em>frank at interactinet dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#102885"> &para;</a><div class="date" title="2011-03-11 09:29"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom102885">
<div class="phpcode"><code><span class="html">
I wrote the following to see if a submitted URL has a valid http response code and also if it responds quickly. <br /><br />Use the code like this:<br /><br /><span class="default">&lt;?php<br />$is_ok </span><span class="keyword">= </span><span class="default">http_response</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">); </span><span class="comment">// returns true only if http response code &lt; 400<br /></span><span class="default">?&gt;<br /></span><br />The second argument is optional, and it allows you to check for&nbsp; a specific response code<br /><br /><span class="default">&lt;?php<br />http_response</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">'400'</span><span class="keyword">); </span><span class="comment">// returns true if http status is 400<br /></span><span class="default">?&gt;<br /></span><br />The third allows you to specify how long you are willing to wait for a response.<br /><br /><span class="default">&lt;?php<br />http_response</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">'200'</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">); </span><span class="comment">// returns true if the response takes less than 3 seconds and the response code is 200<br /></span><span class="default">?&gt;<br /></span><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">http_response</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$status </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$wait </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">)<br />{<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$expire </span><span class="keyword">= </span><span class="default">$time </span><span class="keyword">+ </span><span class="default">$wait</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// we fork the process so we don't have to wait for a timeout<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pid </span><span class="keyword">= </span><span class="default">pcntl_fork</span><span class="keyword">();<br />&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$pid </span><span class="keyword">== -</span><span class="default">1</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die(</span><span class="string">'could not fork'</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; } else if (</span><span class="default">$pid</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// we are the parent<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_NOBODY</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">); </span><span class="comment">// remove body<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$head </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$httpCode </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$head</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$status </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$httpCode </span><span class="keyword">&lt; </span><span class="default">400</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif(</span><span class="default">$status </span><span class="keyword">== </span><span class="default">$httpCode</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">pcntl_wait</span><span class="keyword">(</span><span class="default">$status</span><span class="keyword">); </span><span class="comment">//Protect against Zombie children<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// we are the child<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) &lt; </span><span class="default">$expire</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">0.5</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br /></span><span class="default">?&gt;<br /></span><br />Hope this example helps.&nbsp; It is not 100% tested, so any feedback [sent directly to me by email] is appreciated.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119078">  <div class="votes">
    <div id="Vu119078">
    <a href="https://www.php.net/manual/vote-note.php?id=119078&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119078">
    <a href="https://www.php.net/manual/vote-note.php?id=119078&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119078" title="52% like this...">
    4
    </div>
  </div>
  <a href="book.curl.php.html#119078" class="name">
  <strong class="user"><em>gmail@asmqb7</em></strong></a><a class="genanchor" href="book.curl.php.html#119078"> &para;</a><div class="date" title="2016-03-29 10:48"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119078">
<div class="phpcode"><code><span class="html">
WARNING WARNING<br /><br />In this example: <a href="http://php.net/manual/en/book.curl.php#102885" rel="nofollow" target="_blank">http://php.net/manual/en/book.curl.php#102885</a> by "frank at interactinet dot com"<br /><br />There's a small bug in<br /><br /><span class="default">&lt;?php<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">...<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">$status </span><span class="keyword">== </span><span class="default">$httpCode</span><span class="keyword">) <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">pcntl_wait</span><span class="keyword">(</span><span class="default">$status</span><span class="keyword">); </span><span class="comment">//Protect against Zombie children <br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// we are the child <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) &lt; </span><span class="default">$expire</span><span class="keyword">) <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ...<br /><br /></span><span class="default">?&gt;<br /></span><br />The code will immediately leave the function at the `return`, and pcntl_wait() will NEVER be executed, under any circumstances.<br /><br />I can't see any other issues with this function however.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99979">  <div class="votes">
    <div id="Vu99979">
    <a href="https://www.php.net/manual/vote-note.php?id=99979&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99979">
    <a href="https://www.php.net/manual/vote-note.php?id=99979&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99979" title="52% like this...">
    4
    </div>
  </div>
  <a href="book.curl.php.html#99979" class="name">
  <strong class="user"><em>artax_N_O_S_P_A_M_erxes2 at iname dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#99979"> &para;</a><div class="date" title="2010-09-17 08:59"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom99979">
<div class="phpcode"><code><span class="html">
I needed to use cURL in a php script to download data using not only SSL for the server authentication but also for client authentication.<br />On a default install of Fedora, setting up the proper cURL parameters, I would get an error: <br /><br />$ php curl.php<br /> Peer certificate cannot be authenticated with known CA certificates<br /><br />The data on <a href="http://curl.haxx.se/docs/sslcerts.html" rel="nofollow" target="_blank">http://curl.haxx.se/docs/sslcerts.html</a> was most useful. Indeed, toward to bottom it tells you to add a missing link inside /etc/pki/nssdb to use the ca-bundle.crt file. You do it so:<br /><br /># cd /etc/pki/nssdb<br /># ln -s /usr/lib64/libnssckbi.so libnssckbi.so<br /><br />Now you can do client authentication, provided you have your certificate handy with:<br /><br /><span class="default">&lt;?php<br />$data </span><span class="keyword">= </span><span class="string">"&lt;soap:Envelope&gt;[...]&lt;/soap:Envelope&gt;"</span><span class="keyword">;<br /></span><span class="default">$tuCurl </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">"<a href="https://example.com/path/for/soap/url/" rel="nofollow" target="_blank">https://example.com/path/for/soap/url/</a>"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_PORT </span><span class="keyword">, </span><span class="default">443</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_VERBOSE</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_SSLVERSION</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_SSLCERT</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">() . </span><span class="string">"/client.pem"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_SSLKEY</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">() . </span><span class="string">"/keyout.pem"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_CAINFO</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">() . </span><span class="string">"/ca.pem"</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_SSL_VERIFYPEER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, array(</span><span class="string">"Content-Type: text/xml"</span><span class="keyword">,</span><span class="string">"SOAPAction: \"/soap/action/query\""</span><span class="keyword">, </span><span class="string">"Content-length: "</span><span class="keyword">.</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)));<br /><br /></span><span class="default">$tuData </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">);<br />if(!</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">)){<br />&nbsp; </span><span class="default">$info </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">);<br />&nbsp; echo </span><span class="string">'Took ' </span><span class="keyword">. </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'total_time'</span><span class="keyword">] . </span><span class="string">' seconds to send a request to ' </span><span class="keyword">. </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'url'</span><span class="keyword">];<br />} else {<br />&nbsp; echo </span><span class="string">'Curl error: ' </span><span class="keyword">. </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">);<br />}<br /><br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$tuCurl</span><span class="keyword">);<br />echo </span><span class="default">$tuData</span><span class="keyword">;<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90821">  <div class="votes">
    <div id="Vu90821">
    <a href="https://www.php.net/manual/vote-note.php?id=90821&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd90821">
    <a href="https://www.php.net/manual/vote-note.php?id=90821&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V90821" title="50% like this...">
    7
    </div>
  </div>
  <a href="book.curl.php.html#90821" class="name">
  <strong class="user"><em>artem at zabsoft dot co dot in</em></strong></a><a class="genanchor" href="book.curl.php.html#90821"> &para;</a><div class="date" title="2009-05-11 11:43"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom90821">
<div class="phpcode"><code><span class="html">
Hey I modified script for php 5. Also I add support server auth. and fixed some little bugs on the script.<br /><br />[EDIT BY danbrown AT php DOT net: Original was written by (unlcuky13 AT gmail DOT com) on 19-APR-09.&nbsp; The following note was included:<br />Below is the my way of using through PHP 5 objecte oriented encapsulation to make thing easier.]<br /><br /><span class="default">&lt;?php<br /> </span><span class="keyword">class </span><span class="default">mycurl </span><span class="keyword">{<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_useragent </span><span class="keyword">= </span><span class="string">'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1'</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_url</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_followlocation</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_timeout</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_maxRedirects</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_cookieFileLocation </span><span class="keyword">= </span><span class="string">'./cookie.txt'</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_post</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_postFields</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_referer </span><span class="keyword">=</span><span class="string">"<a href="http://www.google.com" rel="nofollow" target="_blank">http://www.google.com</a>"</span><span class="keyword">;<br /><br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_session</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_webpage</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_includeHeader</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_noBody</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_status</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_binaryTransfer</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; public&nbsp; &nbsp; </span><span class="default">$authentication </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; public&nbsp; &nbsp; </span><span class="default">$auth_name&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; public&nbsp; &nbsp; </span><span class="default">$auth_pass&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">useAuth</span><span class="keyword">(</span><span class="default">$use</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">authentication </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$use </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">authentication </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setName</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setPass</span><span class="keyword">(</span><span class="default">$pass</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_pass </span><span class="keyword">= </span><span class="default">$pass</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$followlocation </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">,</span><span class="default">$timeOut </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">,</span><span class="default">$maxRedirecs </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">,</span><span class="default">$binaryTransfer </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">,</span><span class="default">$includeHeader </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">,</span><span class="default">$noBody </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_url </span><span class="keyword">= </span><span class="default">$url</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_followlocation </span><span class="keyword">= </span><span class="default">$followlocation</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_timeout </span><span class="keyword">= </span><span class="default">$timeOut</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_maxRedirects </span><span class="keyword">= </span><span class="default">$maxRedirecs</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_noBody </span><span class="keyword">= </span><span class="default">$noBody</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_includeHeader </span><span class="keyword">= </span><span class="default">$includeHeader</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_binaryTransfer </span><span class="keyword">= </span><span class="default">$binaryTransfer</span><span class="keyword">;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/cookie.txt'</span><span class="keyword">;<br /><br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setReferer</span><span class="keyword">(</span><span class="default">$referer</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_referer </span><span class="keyword">= </span><span class="default">$referer</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setCookiFileLocation</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setPost </span><span class="keyword">(</span><span class="default">$postFields</span><span class="keyword">)<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_post </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_postFields </span><span class="keyword">= </span><span class="default">$postFields</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setUserAgent</span><span class="keyword">(</span><span class="default">$userAgent</span><span class="keyword">)<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_useragent </span><span class="keyword">= </span><span class="default">$userAgent</span><span class="keyword">;<br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">createCurl</span><span class="keyword">(</span><span class="default">$url </span><span class="keyword">= </span><span class="string">'nul'</span><span class="keyword">)<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$url </span><span class="keyword">!= </span><span class="string">'nul'</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_url </span><span class="keyword">= </span><span class="default">$url</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_URL</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_url</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">,array(</span><span class="string">'Expect:'</span><span class="keyword">));<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_timeout</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_MAXREDIRS</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_maxRedirects</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_followlocation</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation</span><span class="keyword">);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">authentication </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">CURLOPT_USERPWD</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_name</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_pass</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_post</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_POST</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_postFields</span><span class="keyword">);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_includeHeader</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_HEADER</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_noBody</span><span class="keyword">)<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_NOBODY</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($this-&gt;_binary)<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; curl_setopt($s,CURLOPT_BINARYTRANSFER,true);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_useragent</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_REFERER</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_referer</span><span class="keyword">);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_webpage </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_status </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br /><br />&nbsp; &nbsp;&nbsp; }<br /><br />&nbsp;&nbsp; public function </span><span class="default">getHttpStatus</span><span class="keyword">()<br />&nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_status</span><span class="keyword">;<br />&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp; public function </span><span class="default">__tostring</span><span class="keyword">(){<br />&nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_webpage</span><span class="keyword">;<br />&nbsp;&nbsp; }<br />}<br /></span><span class="default">?&gt;<br /></span><br />[EDIT BY danbrown AT php DOT net: Contains a bugfix supplied by "roetsch.beni at googlemail (dot) com" on 02-AUG-09, with the following note: "Fixes the bugfix: 417 bug at lighthttp server."]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="124278">  <div class="votes">
    <div id="Vu124278">
    <a href="https://www.php.net/manual/vote-note.php?id=124278&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd124278">
    <a href="https://www.php.net/manual/vote-note.php?id=124278&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V124278" title="48% like this...">
    -1
    </div>
  </div>
  <a href="book.curl.php.html#124278" class="name">
  <strong class="user"><em>jcmargentina at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#124278"> &para;</a><div class="date" title="2019-10-09 01:40"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom124278">
<div class="phpcode"><code><span class="html">
Please note that new versions of curl is using http2 as default, so if you are having some strange errors, 0 http status codes, etc, please explicitly specify the http version in your code.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100646">  <div class="votes">
    <div id="Vu100646">
    <a href="https://www.php.net/manual/vote-note.php?id=100646&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd100646">
    <a href="https://www.php.net/manual/vote-note.php?id=100646&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V100646" title="50% like this...">
    0
    </div>
  </div>
  <a href="book.curl.php.html#100646" class="name">
  <strong class="user"><em>ramez at  dot dontspan dot zegenie dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#100646"> &para;</a><div class="date" title="2010-10-27 09:19"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom100646">
<div class="phpcode"><code><span class="html">
CURL failed with PHP5.3 and Apache2.2.X on my Windows 7 machine. <br /><br />It turns out that it's not enough to copy the two dll's mentioned (libeay32 and sslea32) from the php folder into your system32 folder. You HAVE TO UNBLOCK THESE TWO FILES.<br /><br />Right click the file, select unblock, for each one. Then restart Apache.<br /><br />Another very handy security feature added into Windows.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116122">  <div class="votes">
    <div id="Vu116122">
    <a href="https://www.php.net/manual/vote-note.php?id=116122&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116122">
    <a href="https://www.php.net/manual/vote-note.php?id=116122&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116122" title="48% like this...">
    -2
    </div>
  </div>
  <a href="book.curl.php.html#116122" class="name">
  <strong class="user"><em>qrworld.net</em></strong></a><a class="genanchor" href="book.curl.php.html#116122"> &para;</a><div class="date" title="2014-11-11 04:41"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom116122">
<div class="phpcode"><code><span class="html">
Here you have a function that I use to get the content of a URL using cURL:<br /><br />function getUrlContent($url){<br /> $ch = curl_init();<br /> curl_setopt($ch, CURLOPT_URL, $url);<br /> curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)');<br /> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);<br /> curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);<br /> curl_setopt($ch, CURLOPT_TIMEOUT, 5);<br /> $data = curl_exec($ch);<br /> $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);<br /> curl_close($ch);<br /> return ($httpcode&gt;=200 &amp;&amp; $httpcode&lt;300) ? $data : false;<br />}<br /><br />The source comes from this website:<br /><br /><a href="http://softontherocks.blogspot.com/2014/11/descargar-el-contenido-de-una-url.html" rel="nofollow" target="_blank">http://softontherocks.blogspot.com/2014/11/descargar-el-contenido-de-una-url.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="86391">  <div class="votes">
    <div id="Vu86391">
    <a href="https://www.php.net/manual/vote-note.php?id=86391&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86391">
    <a href="https://www.php.net/manual/vote-note.php?id=86391&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86391" title="48% like this...">
    -3
    </div>
  </div>
  <a href="book.curl.php.html#86391" class="name">
  <strong class="user"><em>pyromus at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#86391"> &para;</a><div class="date" title="2008-10-16 04:37"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom86391">
<div class="phpcode"><code><span class="html">
You can use this class for fast entry<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">class </span><span class="default">cURL </span><span class="keyword">{<br />var </span><span class="default">$headers</span><span class="keyword">;<br />var </span><span class="default">$user_agent</span><span class="keyword">;<br />var </span><span class="default">$compression</span><span class="keyword">;<br />var </span><span class="default">$cookie_file</span><span class="keyword">;<br />var </span><span class="default">$proxy</span><span class="keyword">;<br />function </span><span class="default">cURL</span><span class="keyword">(</span><span class="default">$cookies</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">$cookie</span><span class="keyword">=</span><span class="string">'cookies.txt'</span><span class="keyword">,</span><span class="default">$compression</span><span class="keyword">=</span><span class="string">'gzip'</span><span class="keyword">,</span><span class="default">$proxy</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">[] = </span><span class="string">'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg'</span><span class="keyword">;<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">[] = </span><span class="string">'Connection: Keep-Alive'</span><span class="keyword">;<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">[] = </span><span class="string">'Content-type: application/x-www-form-urlencoded;charset=UTF-8'</span><span class="keyword">;<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">user_agent </span><span class="keyword">= </span><span class="string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)'</span><span class="keyword">;<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">compression</span><span class="keyword">=</span><span class="default">$compression</span><span class="keyword">;<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy</span><span class="keyword">=</span><span class="default">$proxy</span><span class="keyword">;<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookies</span><span class="keyword">=</span><span class="default">$cookies</span><span class="keyword">;<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookies </span><span class="keyword">== </span><span class="default">TRUE</span><span class="keyword">) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie</span><span class="keyword">(</span><span class="default">$cookie</span><span class="keyword">);<br />}<br />function </span><span class="default">cookie</span><span class="keyword">(</span><span class="default">$cookie_file</span><span class="keyword">) {<br />if (</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$cookie_file</span><span class="keyword">)) {<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">=</span><span class="default">$cookie_file</span><span class="keyword">;<br />} else {<br /></span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$cookie_file</span><span class="keyword">,</span><span class="string">'w'</span><span class="keyword">) or </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">error</span><span class="keyword">(</span><span class="string">'The cookie file could not be opened. Make sure this directory has the correct permissions'</span><span class="keyword">);<br /></span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">=</span><span class="default">$cookie_file</span><span class="keyword">;<br /></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">);<br />}<br />}<br />function </span><span class="default">get</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br /></span><span class="default">$process </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">user_agent</span><span class="keyword">);<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookies </span><span class="keyword">== </span><span class="default">TRUE</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">);<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookies </span><span class="keyword">== </span><span class="default">TRUE</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">,</span><span class="default">CURLOPT_ENCODING </span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">compression</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">);<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_PROXY</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">$return </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br />return </span><span class="default">$return</span><span class="keyword">;<br />}<br />function </span><span class="default">post</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$data</span><span class="keyword">) {<br /></span><span class="default">$process </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">user_agent</span><span class="keyword">);<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookies </span><span class="keyword">== </span><span class="default">TRUE</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">);<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookies </span><span class="keyword">== </span><span class="default">TRUE</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cookie_file</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_ENCODING </span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">compression</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">);<br />if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy</span><span class="keyword">) </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_PROXY</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">, </span><span class="default">CURLOPT_POST</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">$return </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$process</span><span class="keyword">);<br />return </span><span class="default">$return</span><span class="keyword">;<br />}<br />function </span><span class="default">error</span><span class="keyword">(</span><span class="default">$error</span><span class="keyword">) {<br />echo </span><span class="string">"&lt;center&gt;&lt;div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'&gt;&lt;b&gt;cURL Error&lt;/b&gt;&lt;br&gt;</span><span class="default">$error</span><span class="string">&lt;/div&gt;&lt;/center&gt;"</span><span class="keyword">;<br />die;<br />}<br />}<br /></span><span class="default">$cc </span><span class="keyword">= new </span><span class="default">cURL</span><span class="keyword">();<br /></span><span class="default">$cc</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">(</span><span class="string">'<a href="http://www.example.com" rel="nofollow" target="_blank">http://www.example.com</a>'</span><span class="keyword">);<br /></span><span class="default">$cc</span><span class="keyword">-&gt;</span><span class="default">post</span><span class="keyword">(</span><span class="string">'<a href="http://www.example.com" rel="nofollow" target="_blank">http://www.example.com</a>'</span><span class="keyword">,</span><span class="string">'foo=bar'</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />[EDIT BY danbrown AT php DOT net: Includes a bugfix provided by "Anonymous" on 01-Dec-2008 @ 06:52.&nbsp; Also replaced real URL with example.com as per RFC 2606.]<br /><br />[EDIT BY danbrown AT php DOT net: Includes a bugfix provided by (manuel AT rankone DOT ch) on 24-NOV-09 to properly reference cURL initialization.]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86143">  <div class="votes">
    <div id="Vu86143">
    <a href="https://www.php.net/manual/vote-note.php?id=86143&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86143">
    <a href="https://www.php.net/manual/vote-note.php?id=86143&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86143" title="47% like this...">
    -3
    </div>
  </div>
  <a href="book.curl.php.html#86143" class="name">
  <strong class="user"><em>eflash at gmx dot net</em></strong></a><a class="genanchor" href="book.curl.php.html#86143"> &para;</a><div class="date" title="2008-10-05 09:45"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom86143">
<div class="phpcode"><code><span class="html">
In order to use curl with secure sites you will need a ca-bundle.crt file; here's a PHP script I've written which creates a fresh ca-bundle:<br /><a href="http://www.gknw.net/php/phpscripts/mk-ca-bundle.php" rel="nofollow" target="_blank">http://www.gknw.net/php/phpscripts/mk-ca-bundle.php</a><br />I've also written scripts in other languages, f.e. the Perl one which ships now with curl distributions:<br /><a href="http://curl.haxx.se/lxr/source/lib/mk-ca-bundle.pl" rel="nofollow" target="_blank">http://curl.haxx.se/lxr/source/lib/mk-ca-bundle.pl</a><br />and also a Win32 WSH script if you prefer that:<br /><a href="http://www.gknw.net/vb/scripts/mk-ca-bundle.vbs" rel="nofollow" target="_blank">http://www.gknw.net/vb/scripts/mk-ca-bundle.vbs</a><br /><br />HTH, Guenter.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123161">  <div class="votes">
    <div id="Vu123161">
    <a href="https://www.php.net/manual/vote-note.php?id=123161&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123161">
    <a href="https://www.php.net/manual/vote-note.php?id=123161&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123161" title="42% like this...">
    -2
    </div>
  </div>
  <a href="book.curl.php.html#123161" class="name">
  <strong class="user"><em>newuser at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#123161"> &para;</a><div class="date" title="2018-09-26 06:49"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom123161">
<div class="phpcode"><code><span class="html">
FYI cURL support (default enabled, ok) is prerequisite for Installation and Configuration of the Collection Extension of wiki portal. <a href="https://pickbestscope.com/" rel="nofollow" target="_blank">https://pickbestscope.com/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="113910">  <div class="votes">
    <div id="Vu113910">
    <a href="https://www.php.net/manual/vote-note.php?id=113910&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113910">
    <a href="https://www.php.net/manual/vote-note.php?id=113910&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113910" title="40% like this...">
    -7
    </div>
  </div>
  <a href="book.curl.php.html#113910" class="name">
  <strong class="user"><em>fred dot knieper at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#113910"> &para;</a><div class="date" title="2013-12-16 04:07"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom113910">
<div class="phpcode"><code><span class="html">
After a lot of frustration with the fact that nobody has documented which curl commandline options go with which library functions, I discovered that the curl commandline will tell you (in the form of a C program) if you add `--libcurl foo.c`<br /><br />If you've been struggling with trying to figure out how to get your fancy curl commandline to work in PHP, this makes it a breeze!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97160">  <div class="votes">
    <div id="Vu97160">
    <a href="https://www.php.net/manual/vote-note.php?id=97160&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd97160">
    <a href="https://www.php.net/manual/vote-note.php?id=97160&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V97160" title="40% like this...">
    -8
    </div>
  </div>
  <a href="book.curl.php.html#97160" class="name">
  <strong class="user"><em>cliffclof atty gmail dotty com</em></strong></a><a class="genanchor" href="book.curl.php.html#97160"> &para;</a><div class="date" title="2010-04-05 02:21"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom97160">
<div class="phpcode"><code><span class="html">
A solution that addresses repeat calls to the same set of urls using the same connection simulating frequent ajax calls in separate browser tabs.<br /><br />In a unique situation you may need to set a cookie then use that cookie for multiple separate persistent connections using the same session cookie.&nbsp; The problem is the session cookie may change while your doing your persistent calls.&nbsp; If you set every curl handle to update a shared cookiejar on close you may overwrite the new found session value with the old session value depending on the closing order of your handles. Also, because the cookiejar is only written to on a curl_close, you may be using dissimilar or old session info in some of your 'faked browser tabs'.<br /><br />To solve this problem I created a unique handle that opens and closes specifically to set a cookie file using CURLOPT_COOKIEJAR. Then I just use the read-only CURLOPT_COOKIEFILE on the multiple separate persistent handles.<br /><br />This solves the problem of shared cookies fighting to write their values and keep persistent calls using the most up to date cookie information.<br /><br />Note: In my case the multiple calls were in a while loop and I was using php in shell.&nbsp; The session cookie value plus browser type limited the number of connections available and i wanted to use the max connections per session.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101953">  <div class="votes">
    <div id="Vu101953">
    <a href="https://www.php.net/manual/vote-note.php?id=101953&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd101953">
    <a href="https://www.php.net/manual/vote-note.php?id=101953&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V101953" title="40% like this...">
    -9
    </div>
  </div>
  <a href="book.curl.php.html#101953" class="name">
  <strong class="user"><em>shidec00 at yahoo dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#101953"> &para;</a><div class="date" title="2011-01-19 02:55"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom101953">
<div class="phpcode"><code><span class="html">
This anomali only happen on windows.<br />Server indicates that some variables built by http_build_query() is missing.<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">//...<br />//...<br />//...<br /></span><span class="default">$ping_url </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sx_url</span><span class="keyword">.</span><span class="string">'ping.php?'</span><span class="keyword">.</span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$options</span><span class="keyword">);<br /></span><span class="default">$message </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_post_curl</span><span class="keyword">(</span><span class="default">$ping_url</span><span class="keyword">);<br /></span><span class="default">?&gt;<br /></span><br />After debugging i found that $ping_url contain url like :<br /><br /><a href="http://example.com/ping.php?app=1&amp;amp;key=mail&amp;amp;ttd=df52861e" rel="nofollow" target="_blank">http://example.com/ping.php?app=1&amp;amp;key=mail&amp;amp;ttd=df52861e</a><br /><br />But myserver give "No ttd GET variable" response<br /><br />This problem fixed by adding optional parameter to make sure that http_build_query() use only '&amp;' as arg separator rather than '&amp;amp;'<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">//...<br />//...<br />//...<br /></span><span class="default">$ping_url </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sx_url</span><span class="keyword">.</span><span class="string">'ping.php?'</span><span class="keyword">.</span><span class="default">http_build_query</span><span class="keyword">(</span><span class="default">$options</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="string">'&amp;'</span><span class="keyword">);<br /></span><span class="default">$message </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_post_curl</span><span class="keyword">(</span><span class="default">$ping_url</span><span class="keyword">);<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="117138">  <div class="votes">
    <div id="Vu117138">
    <a href="https://www.php.net/manual/vote-note.php?id=117138&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd117138">
    <a href="https://www.php.net/manual/vote-note.php?id=117138&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V117138" title="39% like this...">
    -11
    </div>
  </div>
  <a href="book.curl.php.html#117138" class="name">
  <strong class="user"><em>romet</em></strong></a><a class="genanchor" href="book.curl.php.html#117138"> &para;</a><div class="date" title="2015-04-20 10:30"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom117138">
<div class="phpcode"><code><span class="html">
/*<br />Example values<br />url - '<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>'<br />fields - array('var' =&gt; 'value'), or can be empty<br />auth - 'user:password', or can be empty<br />by romet, 4.20.2015<br />*/<br />function curl($url, $fields = array(), $auth = false){<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; $curl = curl_init($url);<br />&nbsp; &nbsp; curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");<br />&nbsp; &nbsp; curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);<br />&nbsp; &nbsp; curl_setopt($curl, CURLOPT_VERBOSE, 1);<br />&nbsp; &nbsp; curl_setopt($curl, CURLOPT_HEADER, 1);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; if($auth){<br />&nbsp; &nbsp; &nbsp; &nbsp; curl_setopt($curl, CURLOPT_USERPWD, "$auth");<br />&nbsp; &nbsp; &nbsp; &nbsp; curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; if($fields){&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; $fields_string = http_build_query($fields);<br />&nbsp; &nbsp; &nbsp; &nbsp; curl_setopt($curl, CURLOPT_POST, true);<br />&nbsp; &nbsp; &nbsp; &nbsp; curl_setopt($curl, CURLOPT_BINARYTRANSFER, true);<br />&nbsp; &nbsp; &nbsp; &nbsp; curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; $response = curl_exec($curl);<br />&nbsp; &nbsp; $header_size = curl_getinfo($curl, CURLINFO_HEADER_SIZE);<br />&nbsp; &nbsp; $header_string = substr($response, 0, $header_size);<br />&nbsp; &nbsp; $body = substr($response, $header_size);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; $header_rows = explode(PHP_EOL, $header_string);<br />&nbsp; &nbsp; $header_rows = array_filter($header_rows, trim);<br />&nbsp; &nbsp; foreach((array)$header_rows as $hr){<br />&nbsp; &nbsp; &nbsp; &nbsp; $colonpos = strpos($hr, ':');<br />&nbsp; &nbsp; &nbsp; &nbsp; $key = $colonpos !== false ? substr($hr, 0, $colonpos) : (int)$i++;<br />&nbsp; &nbsp; &nbsp; &nbsp; $headers[$key] = $colonpos !== false ? trim(substr($hr, $colonpos+1)) : $hr;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; foreach((array)$headers as $key =&gt; $val){<br />&nbsp; &nbsp; &nbsp; &nbsp; $vals = explode(';', $val);<br />&nbsp; &nbsp; &nbsp; &nbsp; if(count($vals) &gt;= 2){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($headers[$key]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($vals as $vk =&gt; $vv){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $equalpos = strpos($vv, '=');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $vkey = $equalpos !== false ? trim(substr($vv, 0, $equalpos)) : (int)$j++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $headers[$key][$vkey] = $equalpos !== false ? trim(substr($vv, $equalpos+1)) : $vv;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; //print_rr($headers);<br />&nbsp; &nbsp; curl_close($curl);<br />&nbsp; &nbsp; return array($body, $headers);<br />}<br /><br />list($d['body'], $d['headers']) = curl2('<a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a>', array(q =&gt; '123'));<br />//POST to google.com with POST var "q" as "123"<br />&nbsp; &nbsp; <br />echo '&lt;pre&gt;'; <br />print_r($d);<br /><br />---------<br /><br />OUTPUT:<br /><br />Array<br />(<br />&nbsp; &nbsp; [headers] =&gt; Array<br />&nbsp; &nbsp; &nbsp; &nbsp; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; HTTP/1.1 405 Method Not Allowed<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Allow] =&gt; GET, HEAD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Date] =&gt; Mon, 20 Apr 2015 22:20:10 GMT<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Server] =&gt; gws<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Content-Length] =&gt; 1453<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [X-Frame-Options] =&gt; SAMEORIGIN<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Alternate-Protocol] =&gt; 80:quic,p=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Content-Type] =&gt; Array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; text/html<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [charset] =&gt; UTF-8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [X-XSS-Protection] =&gt; Array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [mode] =&gt; block<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; )<br /><br />&nbsp; &nbsp; [body] =&gt; &lt;!DOCTYPE html&gt;...etc<br /><br />)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="126003">  <div class="votes">
    <div id="Vu126003">
    <a href="https://www.php.net/manual/vote-note.php?id=126003&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd126003">
    <a href="https://www.php.net/manual/vote-note.php?id=126003&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V126003" title="33% like this...">
    -1
    </div>
  </div>
  <a href="book.curl.php.html#126003" class="name">
  <strong class="user"><em>zle.lc</em></strong></a><a class="genanchor" href="book.curl.php.html#126003"> &para;</a><div class="date" title="2021-04-13 02:15"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom126003">
<div class="phpcode"><code><span class="html">
Sharing is caring, handles included.<br /><br /><span class="default">&lt;?php<br /><br />$url_one </span><span class="keyword">= </span><span class="string">"php.net"</span><span class="keyword">;<br /></span><span class="default">$url_two </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br /><br /></span><span class="default">$user_agent </span><span class="keyword">= </span><span class="string">'Mozilla HotFox 1.0'</span><span class="keyword">;<br /><br /></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url_one</span><span class="keyword">.</span><span class="default">$url_two</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="default">$user_agent</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_NOBODY</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">);<br /></span><span class="default">$res </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="default">$url_two </span><span class="keyword">= </span><span class="string">"lazyphp.net"</span><span class="keyword">;<br /></span><span class="default">$url_one </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br /></span><span class="default">$res_two </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /></span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br /><br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121199">  <div class="votes">
    <div id="Vu121199">
    <a href="https://www.php.net/manual/vote-note.php?id=121199&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121199">
    <a href="https://www.php.net/manual/vote-note.php?id=121199&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121199" title="38% like this...">
    -11
    </div>
  </div>
  <a href="book.curl.php.html#121199" class="name">
  <strong class="user"><em>dongchao769390531 at 163 dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#121199"> &para;</a><div class="date" title="2017-06-07 07:23"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121199">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br /></span><span class="comment">/**<br /> * Curl send get request, support HTTPS protocol<br /> * @param string $url The request url<br /> * @param string $refer The request refer<br /> * @param int $timeout The timeout seconds<br /> * @return mixed<br /> */<br /></span><span class="keyword">function </span><span class="default">getRequest</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$refer </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">)<br />{<br />&nbsp; &nbsp; </span><span class="default">$ssl </span><span class="keyword">= </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">'<a href="https://" rel="nofollow" target="_blank">https://</a>'</span><span class="keyword">) === </span><span class="default">0 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; </span><span class="default">$curlObj </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />&nbsp; &nbsp; </span><span class="default">$options </span><span class="keyword">= [<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_URL </span><span class="keyword">=&gt; </span><span class="default">$url</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_RETURNTRANSFER </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_FOLLOWLOCATION </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_AUTOREFERER </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_USERAGENT </span><span class="keyword">=&gt; </span><span class="string">'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)'</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_TIMEOUT </span><span class="keyword">=&gt; </span><span class="default">$timeout</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_HTTP_VERSION </span><span class="keyword">=&gt; </span><span class="default">CURL_HTTP_VERSION_1_0</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_HTTPHEADER </span><span class="keyword">=&gt; [</span><span class="string">'Expect:'</span><span class="keyword">],<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_IPRESOLVE </span><span class="keyword">=&gt; </span><span class="default">CURL_IPRESOLVE_V4</span><span class="keyword">,<br />&nbsp; &nbsp; ];<br />&nbsp; &nbsp; if (</span><span class="default">$refer</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_REFERER</span><span class="keyword">] = </span><span class="default">$refer</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (</span><span class="default">$ssl</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//support https<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_SSL_VERIFYHOST</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_SSL_VERIFYPEER</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br />&nbsp; &nbsp; </span><span class="default">$returnData </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">);<br />&nbsp; &nbsp; if (</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//error message<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnData </span><span class="keyword">= </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">);<br />&nbsp; &nbsp; return </span><span class="default">$returnData</span><span class="keyword">;<br />}<br /><br /></span><span class="comment">/**<br /> * Curl send post request, support HTTPS protocol<br /> * @param string $url The request url<br /> * @param array $data The post data<br /> * @param string $refer The request refer<br /> * @param int $timeout The timeout seconds<br /> * @param array $header The other request header<br /> * @return mixed<br /> */<br /></span><span class="keyword">function </span><span class="default">postRequest</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">$refer </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">, </span><span class="default">$header </span><span class="keyword">= [])<br />{<br />&nbsp; &nbsp; </span><span class="default">$curlObj </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />&nbsp; &nbsp; </span><span class="default">$ssl </span><span class="keyword">= </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">'<a href="https://" rel="nofollow" target="_blank">https://</a>'</span><span class="keyword">) === </span><span class="default">0 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; </span><span class="default">$options </span><span class="keyword">= [<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_URL </span><span class="keyword">=&gt; </span><span class="default">$url</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_RETURNTRANSFER </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_POST </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_POSTFIELDS </span><span class="keyword">=&gt; </span><span class="default">$data</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_FOLLOWLOCATION </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_AUTOREFERER </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_USERAGENT </span><span class="keyword">=&gt; </span><span class="string">'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)'</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_TIMEOUT </span><span class="keyword">=&gt; </span><span class="default">$timeout</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_HTTP_VERSION </span><span class="keyword">=&gt; </span><span class="default">CURL_HTTP_VERSION_1_0</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_HTTPHEADER </span><span class="keyword">=&gt; [</span><span class="string">'Expect:'</span><span class="keyword">],<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_IPRESOLVE </span><span class="keyword">=&gt; </span><span class="default">CURL_IPRESOLVE_V4</span><span class="keyword">,<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_REFERER </span><span class="keyword">=&gt; </span><span class="default">$refer<br />&nbsp; &nbsp; </span><span class="keyword">];<br />&nbsp; &nbsp; if (!empty(</span><span class="default">$header</span><span class="keyword">)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">] = </span><span class="default">$header</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (</span><span class="default">$refer</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_REFERER</span><span class="keyword">] = </span><span class="default">$refer</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (</span><span class="default">$ssl</span><span class="keyword">) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//support https<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_SSL_VERIFYHOST</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_SSL_VERIFYPEER</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br />&nbsp; &nbsp; </span><span class="default">$returnData </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">);<br />&nbsp; &nbsp; if (</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//error message<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnData </span><span class="keyword">= </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">);<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$curlObj</span><span class="keyword">);<br />&nbsp; &nbsp; return </span><span class="default">$returnData</span><span class="keyword">;<br />}<br /><br /></span><span class="default">$getRes </span><span class="keyword">= </span><span class="default">getRequest</span><span class="keyword">(</span><span class="string">"<a href="https://secure.php.net/" rel="nofollow" target="_blank">https://secure.php.net/</a>"</span><span class="keyword">);<br />echo </span><span class="default">$getRes</span><span class="keyword">;</span><span class="comment">//Get index page html of php.net<br /><br /></span><span class="default">$postRes </span><span class="keyword">= </span><span class="default">postRequest</span><span class="keyword">(</span><span class="string">"<a href="https://secure.php.net/" rel="nofollow" target="_blank">https://secure.php.net/</a>"</span><span class="keyword">,[]);<br />echo </span><span class="default">$postRes</span><span class="keyword">;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89669">  <div class="votes">
    <div id="Vu89669">
    <a href="https://www.php.net/manual/vote-note.php?id=89669&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd89669">
    <a href="https://www.php.net/manual/vote-note.php?id=89669&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V89669" title="38% like this...">
    -8
    </div>
  </div>
  <a href="book.curl.php.html#89669" class="name">
  <strong class="user"><em>admin at jeremyzaretski dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#89669"> &para;</a><div class="date" title="2009-03-18 08:14"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom89669">
<div class="phpcode"><code><span class="html">
I wanted to create a script that acted as a bridge between an external server and an internal server, wherein the internal server was not connected to the internet, but had information required by the users connecting to the external server. I hatched the idea to use curl to connect from the external server to the internal server (using request variables to send queries) and return everything (data and headers) returned by the file server.<br /><br />After being driven mad by segmentation faults and crashes because the curl_exec didn't like me having the CURLOPT_HEADERFUNCTION's function directly dumping the header:<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">Duplicate_Header</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">)<br />{<br />&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);<br />&nbsp; &nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;<br /></span><br />... I tried (on a whim) duplicating and trimming the header and passing the duplicate to the header function...<br /><br /><span class="default">&lt;?php<br /></span><span class="keyword">function </span><span class="default">Duplicate_Header</span><span class="keyword">(</span><span class="default">$curl</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">)<br />{<br />&nbsp; &nbsp; </span><span class="default">$duplicate </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);<br />&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="default">$duplicate</span><span class="keyword">);<br />&nbsp; &nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);<br />}<br /></span><span class="default">?&gt;<br /></span><br />Which worked just fine. I don't know if this is just some quirk of PHP4 or my lack of understanding of how the curl and header function works.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="119578">  <div class="votes">
    <div id="Vu119578">
    <a href="https://www.php.net/manual/vote-note.php?id=119578&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd119578">
    <a href="https://www.php.net/manual/vote-note.php?id=119578&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V119578" title="33% like this...">
    -7
    </div>
  </div>
  <a href="book.curl.php.html#119578" class="name">
  <strong class="user"><em>yann at ykweyer dot fr</em></strong></a><a class="genanchor" href="book.curl.php.html#119578"> &para;</a><div class="date" title="2016-07-11 08:37"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom119578">
<div class="phpcode"><code><span class="html">
If you need to send an array of files using CURL (typical case: POST variable to a REST API), having an array of CURLFiles in the POSTFIELD won't work. You have to set as many variables in your postfield than there are files to send:<br /><br /><span class="default">&lt;?php<br /></span><span class="comment">// Won't work:<br /></span><span class="default">$postfields </span><span class="keyword">= array(<br />&nbsp; &nbsp; </span><span class="string">'files' </span><span class="keyword">=&gt; array(<br />&nbsp; &nbsp; &nbsp; &nbsp; new </span><span class="default">CURLFile</span><span class="keyword">(</span><span class="default">$path1</span><span class="keyword">),<br />&nbsp; &nbsp; &nbsp; &nbsp; new </span><span class="default">CURLFile</span><span class="keyword">(</span><span class="default">$path2</span><span class="keyword">),<br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//...<br />&nbsp; &nbsp; </span><span class="keyword">)<br />);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$postfields</span><span class="keyword">);<br /><br /></span><span class="comment">// Use this instead:<br /></span><span class="default">$postfields </span><span class="keyword">= array(<br />&nbsp; &nbsp; </span><span class="string">'files[0]' </span><span class="keyword">=&gt; new </span><span class="default">CURLFile</span><span class="keyword">(</span><span class="default">$path1</span><span class="keyword">),<br />&nbsp; &nbsp; </span><span class="string">'files[1]' </span><span class="keyword">=&gt; new </span><span class="default">CURLFile</span><span class="keyword">(</span><span class="default">$path2</span><span class="keyword">),<br />&nbsp; &nbsp; </span><span class="comment">//...<br /></span><span class="keyword">);<br /></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$postfields</span><span class="keyword">);<br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="123090">  <div class="votes">
    <div id="Vu123090">
    <a href="https://www.php.net/manual/vote-note.php?id=123090&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123090">
    <a href="https://www.php.net/manual/vote-note.php?id=123090&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123090" title="30% like this...">
    -5
    </div>
  </div>
  <a href="book.curl.php.html#123090" class="name">
  <strong class="user"><em>user at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#123090"> &para;</a><div class="date" title="2018-08-30 06:50"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom123090">
<div class="phpcode"><code><span class="html">
Ratings are maintained by FFBE subreddit's Discord. Newbie questions and question whether a certain unit is good or not should be asked in .. <a href="http://ffbeunitranking.com/" rel="nofollow" target="_blank">http://ffbeunitranking.com/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="113074">  <div class="votes">
    <div id="Vu113074">
    <a href="https://www.php.net/manual/vote-note.php?id=113074&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd113074">
    <a href="https://www.php.net/manual/vote-note.php?id=113074&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V113074" title="33% like this...">
    -13
    </div>
  </div>
  <a href="book.curl.php.html#113074" class="name">
  <strong class="user"><em>mkucera66 at seznam dot cz</em></strong></a><a class="genanchor" href="book.curl.php.html#113074"> &para;</a><div class="date" title="2013-08-26 11:02"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom113074">
<div class="phpcode"><code><span class="html">
FYI cURL support (default enabled, ok) is prerequisite for Installation and Configuration of the Collection Extension of wiki portal.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122830">  <div class="votes">
    <div id="Vu122830">
    <a href="https://www.php.net/manual/vote-note.php?id=122830&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122830">
    <a href="https://www.php.net/manual/vote-note.php?id=122830&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122830" title="27% like this...">
    -10
    </div>
  </div>
  <a href="book.curl.php.html#122830" class="name">
  <strong class="user"><em>politikos at live dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#122830"> &para;</a><div class="date" title="2018-06-14 06:06"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122830">
<div class="phpcode"><code><span class="html">
I'm having problem to read this website.<br /><br /><a href="https://jornalggn.com.br/noticia/moro-agora-levanta-sigilo-de-decisao-que-protege-delatores-de-orgaos-federais-0" rel="nofollow" target="_blank">https://jornalggn.com.br/noticia/moro-agora-levanta-sigilo-de-decisao-que-protege-delatores-de-orgaos-federais-0</a><br /><br />Because of redirects and browser checking.<br />Any links from this <a href="https://jornalggn.com.br/" rel="nofollow" target="_blank">https://jornalggn.com.br/</a> <br /><br />I'm receiving just this response:<br /><br />"Checking your browser before accessing jornalggn.com.br.<br /><br />This process is automatic. Your browser will redirect to your requested content shortly.<br /><br />Please allow up to 5 seconds…"<br /><br />Any tips, how to solve this using php_curl<br />Thanks in advance<br />--DJ</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103600">  <div class="votes">
    <div id="Vu103600">
    <a href="https://www.php.net/manual/vote-note.php?id=103600&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103600">
    <a href="https://www.php.net/manual/vote-note.php?id=103600&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103600" title="32% like this...">
    -21
    </div>
  </div>
  <a href="book.curl.php.html#103600" class="name">
  <strong class="user"><em>madhouse-network at hotmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#103600"> &para;</a><div class="date" title="2011-04-21 01:51"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom103600">
<div class="phpcode"><code><span class="html">
curl does not seem to work with SSL TLS (FTPES)<br /><br />It will throw the following error:<br /><br />(1) Protocol ftpes not supported or disabled in libcurl</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122575">  <div class="votes">
    <div id="Vu122575">
    <a href="https://www.php.net/manual/vote-note.php?id=122575&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122575">
    <a href="https://www.php.net/manual/vote-note.php?id=122575&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122575" title="27% like this...">
    -16
    </div>
  </div>
  <a href="book.curl.php.html#122575" class="name">
  <strong class="user"><em>cikemic at mailtrix dot net</em></strong></a><a class="genanchor" href="book.curl.php.html#122575"> &para;</a><div class="date" title="2018-04-01 08:45"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom122575">
<div class="phpcode"><code><span class="html">
After reading this post only one words comes out from my mouth that is "WoW". This post has helps me to acquire some new knowledge. So thanks for sharing your valuable ideas with us.<br /><a href="http://bestfrontandreardashcam.com/" rel="nofollow" target="_blank">http://bestfrontandreardashcam.com/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="112403">  <div class="votes">
    <div id="Vu112403">
    <a href="https://www.php.net/manual/vote-note.php?id=112403&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd112403">
    <a href="https://www.php.net/manual/vote-note.php?id=112403&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V112403" title="32% like this...">
    -30
    </div>
  </div>
  <a href="book.curl.php.html#112403" class="name">
  <strong class="user"><em>arturo at midnightvip dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#112403"> &para;</a><div class="date" title="2013-06-12 10:56"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom112403">
<div class="phpcode"><code><span class="html">
Hey I modified script for php 5. Also I add support server auth. and fixed some little bugs on the script. <br /><br /><span class="default">&lt;?php <br /> </span><span class="keyword">class </span><span class="default">mycurl </span><span class="keyword">{ <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_useragent </span><span class="keyword">= </span><span class="string">'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1'</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_url</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_followlocation</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_timeout</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_maxRedirects</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_cookieFileLocation </span><span class="keyword">= </span><span class="string">'./cookie.txt'</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_post</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_postFields</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_referer </span><span class="keyword">=</span><span class="string">"<a href="http://www.midnightvip.com" rel="nofollow" target="_blank">http://www.midnightvip.com</a>"</span><span class="keyword">; <br /><br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_session</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_webpage</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_includeHeader</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_noBody</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_status</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; protected </span><span class="default">$_binaryTransfer</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; public&nbsp; &nbsp; </span><span class="default">$authentication </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; public&nbsp; &nbsp; </span><span class="default">$auth_name&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; public&nbsp; &nbsp; </span><span class="default">$auth_pass&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">useAuth</span><span class="keyword">(</span><span class="default">$use</span><span class="keyword">){ <br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">authentication </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$use </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">authentication </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setName</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">){ <br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setPass</span><span class="keyword">(</span><span class="default">$pass</span><span class="keyword">){ <br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_pass </span><span class="keyword">= </span><span class="default">$pass</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$followlocation </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">,</span><span class="default">$timeOut </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">,</span><span class="default">$maxRedirecs </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">,</span><span class="default">$binaryTransfer </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">,</span><span class="default">$includeHeader </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">,</span><span class="default">$noBody </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) <br />&nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_url </span><span class="keyword">= </span><span class="default">$url</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_followlocation </span><span class="keyword">= </span><span class="default">$followlocation</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_timeout </span><span class="keyword">= </span><span class="default">$timeOut</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_maxRedirects </span><span class="keyword">= </span><span class="default">$maxRedirecs</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_noBody </span><span class="keyword">= </span><span class="default">$noBody</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_includeHeader </span><span class="keyword">= </span><span class="default">$includeHeader</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_binaryTransfer </span><span class="keyword">= </span><span class="default">$binaryTransfer</span><span class="keyword">; <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/cookie.txt'</span><span class="keyword">; <br /><br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setReferer</span><span class="keyword">(</span><span class="default">$referer</span><span class="keyword">){ <br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_referer </span><span class="keyword">= </span><span class="default">$referer</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setCookiFileLocation</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) <br />&nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setPost </span><span class="keyword">(</span><span class="default">$postFields</span><span class="keyword">) <br />&nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_post </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_postFields </span><span class="keyword">= </span><span class="default">$postFields</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">setUserAgent</span><span class="keyword">(</span><span class="default">$userAgent</span><span class="keyword">) <br />&nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_useragent </span><span class="keyword">= </span><span class="default">$userAgent</span><span class="keyword">; <br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp;&nbsp; public function </span><span class="default">createCurl</span><span class="keyword">(</span><span class="default">$url </span><span class="keyword">= </span><span class="string">'nul'</span><span class="keyword">) <br />&nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$url </span><span class="keyword">!= </span><span class="string">'nul'</span><span class="keyword">){ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_url </span><span class="keyword">= </span><span class="default">$url</span><span class="keyword">; <br />&nbsp; &nbsp; &nbsp; &nbsp; } <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(); <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_URL</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_url</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">,array(</span><span class="string">'Expect:'</span><span class="keyword">)); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_timeout</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_MAXREDIRS</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_maxRedirects</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_followlocation</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_COOKIEJAR</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_COOKIEFILE</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_cookieFileLocation</span><span class="keyword">); <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">authentication </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">CURLOPT_USERPWD</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_name</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">auth_pass</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_post</span><span class="keyword">) <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_POST</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_postFields</span><span class="keyword">); <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_includeHeader</span><span class="keyword">) <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_HEADER</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_noBody</span><span class="keyword">) <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_NOBODY</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($this-&gt;_binary) <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; curl_setopt($s,CURLOPT_BINARYTRANSFER,true); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */ <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_useragent</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLOPT_REFERER</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_referer</span><span class="keyword">); <br /><br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_webpage </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_status </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">CURLINFO_HTTP_CODE</span><span class="keyword">); <br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">); <br /><br />&nbsp; &nbsp;&nbsp; } <br /><br />&nbsp;&nbsp; public function </span><span class="default">getHttpStatus</span><span class="keyword">() <br />&nbsp;&nbsp; { <br />&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_status</span><span class="keyword">; <br />&nbsp;&nbsp; } <br /><br />&nbsp;&nbsp; public function </span><span class="default">__tostring</span><span class="keyword">(){ <br />&nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_webpage</span><span class="keyword">; <br />&nbsp;&nbsp; } <br />} <br /></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122378">  <div class="votes">
    <div id="Vu122378">
    <a href="https://www.php.net/manual/vote-note.php?id=122378&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122378">
    <a href="https://www.php.net/manual/vote-note.php?id=122378&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122378" title="24% like this...">
    -29
    </div>
  </div>
  <a href="book.curl.php.html#122378" class="name">
  <strong class="user"><em>ishavashi202 at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#122378"> &para;</a><div class="date" title="2018-02-11 04:30"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom122378">
<div class="phpcode"><code><span class="html">
Thanks <a href="https://ebestdigitalcalipers.com/" rel="nofollow" target="_blank">https://ebestdigitalcalipers.com/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="121656">  <div class="votes">
    <div id="Vu121656">
    <a href="https://www.php.net/manual/vote-note.php?id=121656&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121656">
    <a href="https://www.php.net/manual/vote-note.php?id=121656&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121656" title="13% like this...">
    -59
    </div>
  </div>
  <a href="book.curl.php.html#121656" class="name">
  <strong class="user"><em>puspenduseth at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#121656"> &para;</a><div class="date" title="2017-09-19 07:13"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom121656">
<div class="phpcode"><code><span class="html">
After reading this post only one words comes out from my mouth that is "WoW". This post has helps me to acquire some new knowledge. So thanks for sharing your valuable ideas with us.<br /><a href="https://supremeten.com/best-wall-lights/" rel="nofollow" target="_blank">https://supremeten.com/best-wall-lights/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="123133">  <div class="votes">
    <div id="Vu123133">
    <a href="https://www.php.net/manual/vote-note.php?id=123133&amp;page=book.curl&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd123133">
    <a href="https://www.php.net/manual/vote-note.php?id=123133&amp;page=book.curl&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V123133" title="6% like this...">
    -52
    </div>
  </div>
  <a href="book.curl.php.html#123133" class="name">
  <strong class="user"><em>krogerfeedback at gmail dot com</em></strong></a><a class="genanchor" href="book.curl.php.html#123133"> &para;</a><div class="date" title="2018-09-17 06:42"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom123133">
<div class="phpcode"><code><span class="html">
participate in the &lt;a href="krogerfeedback"&gt;<a href="https://krogerfeedback.reviews&lt;/a&gt;" rel="nofollow" target="_blank">https://krogerfeedback.reviews&lt;/a&gt;</a> and win $5000 gift card.</span>
</code></div>
  </div>
 </div></div>

 <div class="foot"><a href="https://www.php.net/manual/add-note.php?sect=book.curl&amp;redirect=https://www.php.net/manual/ru/book.curl.php"><img src='https://www.php.net/images/notes-add@2x.png' alt='add a note' width='12' height='12'> <small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class='layout-menu'>

        <ul class='parent-menu-list'>
                                    <li>
                <a href="https://www.php.net/manual/ru/refs.remote.other.php">Другие службы</a>

                                    <ul class='child-menu-list'>

                                                <li class="current">
                            <a href="book.curl.php.html" title="cURL">cURL</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.event.php" title="Event">Event</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.ftp.php" title="FTP">FTP</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.gearman.php" title="Gearman">Gearman</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.ldap.php" title="LDAP">LDAP</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.memcache.php" title="Memcache">Memcache</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.memcached.php" title="Memcached">Memcached</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.mqseries.php" title="mqseries">mqseries</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.network.php" title="Сеть">Сеть</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.rrd.php" title="RRD">RRD</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.scoutapm.php" title="ScoutAPM">ScoutAPM</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.snmp.php" title="SNMP">SNMP</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.sockets.php" title="Сокеты">Сокеты</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.ssh2.php" title="SSH2">SSH2</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.stomp.php" title="Stomp">Stomp</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.svm.php" title="SVM">SVM</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.svn.php" title="SVN">SVN</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.tcpwrap.php" title="TCP">TCP</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.varnish.php" title="Varnish">Varnish</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.yaz.php" title="YAZ">YAZ</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.zmq.php" title="Обмен сообщениями 0MQ">Обмен сообщениями 0MQ</a>
                        </li>
                                                <li class="">
                            <a href="https://www.php.net/manual/ru/book.zookeeper.php" title="ZooKeeper">ZooKeeper</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="https://www.php.net/copyright.php">Copyright &copy; 2001-2022 The PHP Group</a></li>
        <li><a href="https://www.php.net/my.php">My PHP.net</a></li>
        <li><a href="https://www.php.net/contact.php">Contact</a></li>
        <li><a href="https://www.php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="https://www.php.net/privacy.php">Privacy policy</a></li>
        <li><a href="https://github.com/php/web-php/blob/master/manual%2Fru%2Fbook.curl.php">View Source</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" integrity="sha384-aBL3Lzi6c9LNDGvpHkZrrm3ZVsIwohDD7CDozL0pk8FwCrfmV7H9w8j3L7ikEv6h" crossorigin="anonymous"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/modernizr.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/hogan-2.0.0.min.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/typeahead.min.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/ext/mousetrap.min.js"></script>
<script src="https://www.php.net/cached.php?t=1421837618&amp;f=/js/search.js"></script>
<script src="https://www.php.net/cached.php?t=1637324403&amp;f=/js/common.js"></script>

<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="https://www.php.net/images/to-top@2x.png"></a>

</body>
</html>
