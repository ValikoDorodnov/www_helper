# Prometheus

## exposition

Процесс предоставления данных для Prometheus называется exposition. Prometheus собирает данные по HTTP протоколу,  
в формате plain text c кодировкой UTF-8.  

Метрики, в общем, имеют следующий формат:
```
metric_name{label_name="label_value",label_name="label_value"} value timestamp
```

## exporters

Exporters — процессы, обеспечивающие сбор и их передачу серверу Prometheus.
 - Node exporter (linux)
 - Blackbox exporter (linux)
 - Custom exporter (linux)
 - Список [экспортеров](https://prometheus.io/docs/instrumenting/exporters/)

## Service Discovery
Протоколы обнаружения сервисов — сетевые протоколы которые позволяют автоматически находить устройства и  
сервисы имеющиеся в компьютерной сети.  

Варианты конфигурации
 - static_configs
 - file_sd_configs
 - openstack_sd_configs
 - kubernetes_sd_configs
 - consul_sd_configs
 - ...

## Labels
По сути, метрика — это совокупность временных рядов, связанных одним именем, но отличающихся набором меток (labels).  
Временной ряд (time series) представляет собой набор наблюдений, полученных путем регулярного измерения одной переменной  
в течение некоторого периода времени.  

Каждый временной ряд может быть однозначно идентифицирован по имени измеряемой  
переменной (метрики) и опциональному набору пар "ключ-значение", называемых метками (labels).  

## Push Gateway
Данный модуль устанавливает в кластер Prometheus Pushgateway. Он предназначен для приема метрик от  
приложения и отдачи их Prometheus.  

Это анти-паттерн пуша метрик, так как использование pushgateway рекомендуется в случае, когда сервис работает  
не постоянно (или у сервиса/запускаемого задания вообще нет никакого интерфейса), а значит и prometheus'у лучше  
в закрытые двери постоянно не стучать и не заниматься лишней работой.  